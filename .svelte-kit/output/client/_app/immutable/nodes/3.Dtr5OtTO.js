const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/yTwdm8a4.js","../chunks/CQroIqg9.js","../chunks/2tJFOeL8.js","../chunks/DOZOIc5p.js","../chunks/B_lgffSc.js","../chunks/WevpbRh2.js","../chunks/CqFf3_ZX.js","../assets/stopTyping.Xv3gKcXE.css"])))=>i.map(i=>d[i]);
import{s as Cr,d as R,i as Oe,o as vn,a4 as Nu,a6 as Xo,a7 as Ef,y as wm,D as vi,z as km,A as Em,B as Sm,ab as Sf,X as Ho,g as xe,c as G,e as J,j as we,h as Z,n as nr,G as bt,v as z,l as Qx,b as P,Z as Rl,F as Vt,k as Ur,C as Ar,K as Or,ag as Yf,a1 as st,f as Pt,a2 as ot,t as Mt,a as Zn,q as ys,x as Cn,a3 as Im,ad as Jf,r as ew,E as qu,Y as Ca,$ as Ii,a0 as Gt,_ as er,ah as Cs,ai as gl,w as Hi,aj as zl,ak as Dl,al as Xl,am as On,J as Uc,p as Tm,ae as jc,an as tw}from"../chunks/DOZOIc5p.js";import{S as Pr,i as Mr,t as Xe,a as Ve,g as lr,c as ur,f as Dr,n as Sp,l as mv,d as It,m as Tt,e as At,b as Ct,h as tr,j as Mu}from"../chunks/2tJFOeL8.js";import{a as Ip,f as jr,b as nw,s as au,c as rw,q as L0,d as R0,e as iw}from"../chunks/CqFf3_ZX.js";import{b as Xt,m as tu,p as qc,a as tp,d as aw,o as sw,e as Tp,c as np,P as B0,l as ow}from"../chunks/B_lgffSc.js";import{i as lw,j as uw,t as Ap,k as gv,L as fo,c as cf,g as Qf,P as Cp,d as Pp,b as cw,e as xr,a as hw,M as Bl,l as Mp,m as fw,n as O0,o as dw,p as pw,q as mw,u as _v,B as Ja,v as gw,w as _w,x as yw,y as vw,z as bw,h as N0,C as xw}from"../chunks/CQroIqg9.js";import{p as yv}from"../chunks/UZA6mQAV.js";import{g as ww}from"../chunks/Bdf7bt7S.js";import{_ as F0}from"../chunks/C1FmrZbK.js";import{w as ed}from"../chunks/WevpbRh2.js";const td=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,kw=!1,NP=Object.freeze(Object.defineProperty({__proto__:null,prerender:kw},Symbol.toStringTag,{value:"Module"}));function Ew(t,e,i){if(i===void 0&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var s=lw(t),u=uw(e),f=u.type,d=e.bbox,o=u.coordinates;if(d&&Sw(s,d)===!1)return!1;f==="Polygon"&&(o=[o]);for(var _=!1,v=0;v<o.length&&!_;v++)if(V0(s,o[v][0],i.ignoreBoundary)){for(var E=!1,S=1;S<o[v].length&&!E;)V0(s,o[v][S],!i.ignoreBoundary)&&(E=!0),S++;E||(_=!0)}return _}function V0(t,e,i){var s=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var u=0,f=e.length-1;u<e.length;f=u++){var d=e[u][0],o=e[u][1],_=e[f][0],v=e[f][1],E=t[1]*(d-_)+o*(_-t[0])+v*(t[0]-d)===0&&(d-t[0])*(_-t[0])<=0&&(o-t[1])*(v-t[1])<=0;if(E)return!i;var S=o>t[1]!=v>t[1]&&t[0]<(_-d)*(t[1]-o)/(v-o)+d;S&&(s=!s)}return s}function Sw(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}const Iw=(t,e)=>{const i=s=>{s!=null&&s.target&&t&&!t.contains(s.target)&&!s.defaultPrevented&&e()};return document.addEventListener("click",i,!0),{destroy(){document.removeEventListener("click",i,!0)}}},Tw=t=>({hidden:t&1}),$0=t=>({hidden:t[0]});function U0(t){let e,i,s,u,f,d,o;function _(V,j){if(V[4]&&V[1])return Cw;if(V[4]&&!V[1])return Aw}let v=_(t),E=v&&v(t);const S=t[25].default,I=wm(S,t,t[24],$0);let A=[{id:t[6]},t[15],{class:s=Ap(t[7],t[3],t[2],t[10][t[5]],t[16].class)},{tabindex:"-1"},{"aria-controls":t[6]},{"aria-labelledby":t[6]}],N={};for(let V=0;V<A.length;V+=1)N=Xo(N,A[V]);return{c(){E&&E.c(),e=we(),i=Z("div"),I&&I.c(),this.h()},l(V){E&&E.l(V),e=xe(V),i=G(V,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var j=J(i);I&&I.l(j),j.forEach(R),this.h()},h(){Sf(i,N)},m(V,j){E&&E.m(V,j),Oe(V,e,j),Oe(V,i,j),I&&I.m(i,null),f=!0,d||(o=Ho(t[14].call(null,i,t[12])),d=!0)},p(V,j){t=V,v===(v=_(t))&&E?E.p(t,j):(E&&E.d(1),E=v&&v(t),E&&(E.c(),E.m(e.parentNode,e))),I&&I.p&&(!f||j&16777217)&&km(I,S,t,t[24],f?Sm(S,t[24],j,Tw):Em(t[24]),$0),Sf(i,N=gv(A,[(!f||j&64)&&{id:t[6]},j&32768&&t[15],(!f||j&65708&&s!==(s=Ap(t[7],t[3],t[2],t[10][t[5]],t[16].class)))&&{class:s},{tabindex:"-1"},(!f||j&64)&&{"aria-controls":t[6]},(!f||j&64)&&{"aria-labelledby":t[6]}]))},i(V){f||(Ve(I,V),V&&vi(()=>{f&&(u||(u=Dr(i,t[9],t[8],!0)),u.run(1))}),f=!0)},o(V){Xe(I,V),V&&(u||(u=Dr(i,t[9],t[8],!1)),u.run(0)),f=!1},d(V){V&&(R(e),R(i)),E&&E.d(V),I&&I.d(V),V&&u&&u.end(),d=!1,o()}}}function Aw(t){let e;return{c(){e=Z("div"),this.h()},l(i){e=G(i,"DIV",{role:!0,class:!0}),J(e).forEach(R),this.h()},h(){z(e,"role","presentation"),z(e,"class",t[13])},m(i,s){Oe(i,e,s)},p:nr,d(i){i&&R(e)}}}function Cw(t){let e,i,s;return{c(){e=Z("div"),this.h()},l(u){e=G(u,"DIV",{role:!0,class:!0}),J(e).forEach(R),this.h()},h(){z(e,"role","presentation"),z(e,"class",t[13])},m(u,f){Oe(u,e,f),i||(s=bt(e,"click",t[26]),i=!0)},p:nr,d(u){u&&R(e),i=!1,s()}}}function Pw(t){let e,i,s=!t[0]&&U0(t);return{c(){s&&s.c(),e=vn()},l(u){s&&s.l(u),e=vn()},m(u,f){s&&s.m(u,f),Oe(u,e,f),i=!0},p(u,[f]){u[0]?s&&(lr(),Xe(s,1,1,()=>{s=null}),ur()):s?(s.p(u,f),f&1&&Ve(s,1)):(s=U0(u),s.c(),Ve(s,1),s.m(e.parentNode,e))},i(u){i||(Ve(s),i=!0)},o(u){Xe(s),i=!1},d(u){u&&R(e),s&&s.d(u)}}}function Mw(t,e,i){const s=["activateClickOutside","hidden","position","leftOffset","rightOffset","topOffset","bottomOffset","width","backdrop","bgColor","bgOpacity","placement","id","divClass","transitionParams","transitionType"];let u=Nu(e,s),{$$slots:f={},$$scope:d}=e,{activateClickOutside:o=!0}=e,{hidden:_=!0}=e,{position:v="fixed"}=e,{leftOffset:E="inset-y-0 start-0"}=e,{rightOffset:S="inset-y-0 end-0"}=e,{topOffset:I="inset-x-0 top-0"}=e,{bottomOffset:A="inset-x-0 bottom-0"}=e,{width:N="w-80"}=e,{backdrop:V=!0}=e,{bgColor:j="bg-gray-900"}=e,{bgOpacity:W="bg-opacity-75"}=e,{placement:K="left"}=e,{id:ne="drawer-example"}=e,{divClass:Y="overflow-y-auto z-50 p-4 bg-white dark:bg-gray-800"}=e,{transitionParams:re={}}=e,{transitionType:Q="fly"}=e;function se(ye,de){switch(Q){case"slide":return au(ye,de);case"blur":return nw(ye,de);case"fade":return jr(ye,de);default:return Ip(ye,de)}}const oe={left:E,right:S,top:I,bottom:A},Te=()=>{i(0,_=!_)},fe=()=>o&&!_&&Te();let ee=Ap("fixed top-0 start-0 z-50 w-full h-full",V&&j,V&&W);function ge(ye,de){return o?Iw(ye,de):void 0}const pe=()=>!_&&Te();return t.$$set=ye=>{i(16,e=Xo(Xo({},e),Ef(ye))),i(15,u=Nu(e,s)),"activateClickOutside"in ye&&i(1,o=ye.activateClickOutside),"hidden"in ye&&i(0,_=ye.hidden),"position"in ye&&i(2,v=ye.position),"leftOffset"in ye&&i(17,E=ye.leftOffset),"rightOffset"in ye&&i(18,S=ye.rightOffset),"topOffset"in ye&&i(19,I=ye.topOffset),"bottomOffset"in ye&&i(20,A=ye.bottomOffset),"width"in ye&&i(3,N=ye.width),"backdrop"in ye&&i(4,V=ye.backdrop),"bgColor"in ye&&i(21,j=ye.bgColor),"bgOpacity"in ye&&i(22,W=ye.bgOpacity),"placement"in ye&&i(5,K=ye.placement),"id"in ye&&i(6,ne=ye.id),"divClass"in ye&&i(7,Y=ye.divClass),"transitionParams"in ye&&i(8,re=ye.transitionParams),"transitionType"in ye&&i(23,Q=ye.transitionType),"$$scope"in ye&&i(24,d=ye.$$scope)},e=Ef(e),[_,o,v,N,V,K,ne,Y,re,se,oe,Te,fe,ee,ge,u,e,E,S,I,A,j,W,Q,d,f,pe]}class zw extends Pr{constructor(e){super(),Mr(this,e,Mw,Pw,Cr,{activateClickOutside:1,hidden:0,position:2,leftOffset:17,rightOffset:18,topOffset:19,bottomOffset:20,width:3,backdrop:4,bgColor:21,bgOpacity:22,placement:5,id:6,divClass:7,transitionParams:8,transitionType:23})}}function If(t){return Object.prototype.toString.call(t)==="[object Date]"}function zp(t,e,i,s){if(typeof i=="number"||If(i)){const u=s-i,f=(i-e)/(t.dt||1/60),d=t.opts.stiffness*u,o=t.opts.damping*f,_=(d-o)*t.inv_mass,v=(f+_)*t.dt;return Math.abs(v)<t.opts.precision&&Math.abs(u)<t.opts.precision?s:(t.settled=!1,If(i)?new Date(i.getTime()+v):i+v)}else{if(Array.isArray(i))return i.map((u,f)=>zp(t,e[f],i[f],s[f]));if(typeof i=="object"){const u={};for(const f in i)u[f]=zp(t,e[f],i[f],s[f]);return u}else throw new Error(`Cannot spring ${typeof i} values`)}}function Dw(t,e={}){const i=ed(t),{stiffness:s=.15,damping:u=.8,precision:f=.01}=e;let d,o,_,v=t,E=t,S=1,I=0,A=!1;function N(j,W={}){E=j;const K=_={};return t==null||W.hard||V.stiffness>=1&&V.damping>=1?(A=!0,d=Sp(),v=j,i.set(t=E),Promise.resolve()):(W.soft&&(I=1/((W.soft===!0?.5:+W.soft)*60),S=0),o||(d=Sp(),A=!1,o=mv(ne=>{if(A)return A=!1,o=null,!1;S=Math.min(S+I,1);const Y={inv_mass:S,opts:V,settled:!0,dt:(ne-d)*60/1e3},re=zp(Y,v,t,E);return d=ne,v=t,i.set(t=re),Y.settled&&(o=null),!Y.settled})),new Promise(ne=>{o.promise.then(()=>{K===_&&ne()})}))}const V={set:N,update:(j,W)=>N(j(E,t),W),subscribe:i.subscribe,stiffness:s,damping:u,precision:f};return V}function Dp(t,e){if(t===e||t!==t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const s=e.map((u,f)=>Dp(t[f],u));return u=>s.map(f=>f(u))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(If(t)&&If(e)){t=t.getTime(),e=e.getTime();const f=e-t;return d=>new Date(t+d*f)}const s=Object.keys(e),u={};return s.forEach(f=>{u[f]=Dp(t[f],e[f])}),f=>{const d={};return s.forEach(o=>{d[o]=u[o](f)}),d}}if(i==="number"){const s=e-t;return u=>t+u*s}throw new Error(`Cannot interpolate ${i} values`)}function Tf(t,e={}){const i=ed(t);let s,u=t;function f(d,o){if(t==null)return i.set(t=d),Promise.resolve();u=d;let _=s,v=!1,{delay:E=0,duration:S=400,easing:I=Qx,interpolate:A=Dp}=Xo(Xo({},e),o);if(S===0)return _&&(_.abort(),_=null),i.set(t=u),Promise.resolve();const N=Sp()+E;let V;return s=mv(j=>{if(j<N)return!0;v||(V=A(t,d),typeof S=="function"&&(S=S(t,d)),v=!0),_&&(_.abort(),_=null);const W=j-N;return W>S?(i.set(t=d),!1):(i.set(t=V(I(W/S))),!0)}),s.promise}return{set:f,update:(d,o)=>f(d(u,t),o),subscribe:i.subscribe}}function j0(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function Lw(t){let e,i,s,u,f,d,o,_="Wycena wartości nieruchomości",v,E=!t[0].params&&j0();return{c(){e=Z("div"),i=Z("div"),s=Z("img"),f=we(),E&&E.c(),d=we(),o=Z("div"),o.textContent=_,this.h()},l(S){e=G(S,"DIV",{class:!0});var I=J(e);i=G(I,"DIV",{class:!0});var A=J(i);s=G(A,"IMG",{src:!0,class:!0,alt:!0}),f=xe(A),E&&E.l(A),d=xe(A),o=G(A,"DIV",{class:!0,"data-svelte-h":!0}),Vt(o)!=="svelte-yppzl0"&&(o.textContent=_),A.forEach(R),I.forEach(R),this.h()},h(){Rl(s.src,u="/images/firstPage.png")||z(s,"src",u),z(s,"class","frontImage noselect"),z(s,"alt","logo"),z(o,"class","btn btn-primary frontButton noselect"),z(i,"class","containerFlex noselect"),z(e,"class","frontcover noselect page_01")},m(S,I){Oe(S,e,I),P(e,i),P(i,s),P(i,f),E&&E.m(i,null),P(i,d),P(i,o),v=!0},p(S,[I]){S[0].params?E&&(lr(),Xe(E,1,1,()=>{E=null}),ur()):E?I&1&&Ve(E,1):(E=j0(),E.c(),Ve(E,1),E.m(i,d))},i(S){v||(Ve(E),v=!0)},o(S){Xe(E),v=!1},d(S){S&&R(e),E&&E.d()}}}function Rw(t,e,i){let s;return Ur(t,Xt,u=>i(0,s=u)),Ar(Xt,s={},s),[s]}class Bw extends Pr{constructor(e){super(),Mr(this,e,Rw,Lw,Cr,{})}}function Ow(t){let e,i='<p class="p_header noselect">WYCENA WARTOŚCI nieruchomości</p> <img class="logotyp_header noselect" src="/images/logoPropValue.png" alt="logotyp"/>',s,u;return{c(){e=Z("header"),e.innerHTML=i,this.h()},l(f){e=G(f,"HEADER",{"aria-hidden":!0,"data-svelte-h":!0}),Vt(e)!=="svelte-3exnnz"&&(e.innerHTML=i),this.h()},h(){z(e,"aria-hidden","true")},m(f,d){Oe(f,e,d),s||(u=[bt(e,"click",t[1]),bt(e,"on:keydown",Nw)],s=!0)},p:nr,i:nr,o:nr,d(f){f&&R(e),s=!1,Or(u)}}}const Nw=()=>{};function Fw(t,e,i){let s;return Ur(t,tu,f=>i(0,s=f)),Yf(()=>{Ar(tu,s=!0,s)}),[s,()=>Ar(tu,s=!1,s)]}class Mo extends Pr{constructor(e){super(),Mr(this,e,Fw,Ow,Cr,{})}}function Vw(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe,Te;return{c(){e=ot("svg"),i=ot("defs"),s=ot("style"),u=Mt(`.cls-ad {
        stroke: #2181b3;
        stroke-miterlimit: 5;
      }
    `),f=ot("line"),d=ot("line"),o=ot("line"),_=ot("line"),v=ot("line"),E=ot("line"),S=ot("line"),I=ot("line"),A=ot("line"),N=ot("line"),V=ot("line"),j=ot("line"),W=ot("line"),K=ot("line"),ne=ot("line"),Y=ot("line"),re=ot("line"),Q=ot("line"),se=ot("line"),oe=ot("line"),Te=ot("line"),this.h()},l(fe){e=st(fe,"svg",{id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var ee=J(e);i=st(ee,"defs",{});var ge=J(i);s=st(ge,"style",{});var pe=J(s);u=Pt(pe,`.cls-ad {
        stroke: #2181b3;
        stroke-miterlimit: 5;
      }
    `),pe.forEach(R),ge.forEach(R),f=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(f).forEach(R),d=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(d).forEach(R),o=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(o).forEach(R),_=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(_).forEach(R),v=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(v).forEach(R),E=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(E).forEach(R),S=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(S).forEach(R),I=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(I).forEach(R),A=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(A).forEach(R),N=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(N).forEach(R),V=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(V).forEach(R),j=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(j).forEach(R),W=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(W).forEach(R),K=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(K).forEach(R),ne=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(ne).forEach(R),Y=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(Y).forEach(R),re=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(re).forEach(R),Q=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(Q).forEach(R),se=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(se).forEach(R),oe=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(oe).forEach(R),Te=st(ee,"line",{class:!0,y1:!0,x2:!0,y2:!0}),J(Te).forEach(R),ee.forEach(R),this.h()},h(){z(f,"class","cls-ad"),z(f,"y1","196.86"),z(f,"x2","453.39"),z(f,"y2","196.86"),z(d,"class","cls-ad"),z(d,"y1","224.91"),z(d,"x2","453.39"),z(d,"y2","224.91"),z(o,"class","cls-ad"),z(o,"y1","168.81"),z(o,"x2","453.39"),z(o,"y2","168.81"),z(_,"class","cls-ad"),z(_,"y1","533.47"),z(_,"x2","453.39"),z(_,"y2","533.47"),z(v,"class","cls-ad"),z(v,"y1","561.52"),z(v,"x2","453.39"),z(v,"y2","561.52"),z(E,"class","cls-ad"),z(E,"y1","505.42"),z(E,"x2","453.39"),z(E,"y2","505.42"),z(S,"class","cls-ad"),z(S,"y1","281.01"),z(S,"x2","453.39"),z(S,"y2","281.01"),z(I,"class","cls-ad"),z(I,"y1","309.06"),z(I,"x2","453.39"),z(I,"y2","309.06"),z(A,"class","cls-ad"),z(A,"y1","252.96"),z(A,"x2","453.39"),z(A,"y2","252.96"),z(N,"class","cls-ad"),z(N,"y1","449.32"),z(N,"x2","453.39"),z(N,"y2","449.32"),z(V,"class","cls-ad"),z(V,"y1","477.37"),z(V,"x2","453.39"),z(V,"y2","477.37"),z(j,"class","cls-ad"),z(j,"y1","421.27"),z(j,"x2","453.39"),z(j,"y2","421.27"),z(W,"class","cls-ad"),z(W,"y1","365.16"),z(W,"x2","453.39"),z(W,"y2","365.16"),z(K,"class","cls-ad"),z(K,"y1","393.21"),z(K,"x2","453.39"),z(K,"y2","393.21"),z(ne,"class","cls-ad"),z(ne,"y1","337.11"),z(ne,"x2","453.39"),z(ne,"y2","337.11"),z(Y,"class","cls-ad"),z(Y,"y1","112.7"),z(Y,"x2","453.39"),z(Y,"y2","112.7"),z(re,"class","cls-ad"),z(re,"y1","140.76"),z(re,"x2","453.39"),z(re,"y2","140.76"),z(Q,"class","cls-ad"),z(Q,"y1","84.65"),z(Q,"x2","453.39"),z(Q,"y2","84.65"),z(se,"class","cls-ad"),z(se,"y1","28.55"),z(se,"x2","453.39"),z(se,"y2","28.55"),z(oe,"class","cls-ad"),z(oe,"y1","56.6"),z(oe,"x2","453.39"),z(oe,"y2","56.6"),z(Te,"class","cls-ad"),z(Te,"y1",".5"),z(Te,"x2","453.39"),z(Te,"y2",".5"),z(e,"id","Tryb_izolacji"),z(e,"data-name","Tryb izolacji"),z(e,"xmlns","http://www.w3.org/2000/svg"),z(e,"viewBox","0 0 453.39 562.02")},m(fe,ee){Oe(fe,e,ee),P(e,i),P(i,s),P(s,u),P(e,f),P(e,d),P(e,o),P(e,_),P(e,v),P(e,E),P(e,S),P(e,I),P(e,A),P(e,N),P(e,V),P(e,j),P(e,W),P(e,K),P(e,ne),P(e,Y),P(e,re),P(e,Q),P(e,se),P(e,oe),P(e,Te)},p:nr,i:nr,o:nr,d(fe){fe&&R(e)}}}class $w extends Pr{constructor(e){super(),Mr(this,e,null,Vw,Cr,{})}}function q0(t){let e,i="Notatki",s,u,f,d,o=t[0].params&&G0(t);return{c(){e=Z("h3"),e.textContent=i,s=we(),o&&o.c(),u=we(),f=Z("div"),this.h()},l(_){e=G(_,"H3",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-ii174a"&&(e.textContent=i),s=xe(_),o&&o.l(_),u=xe(_),f=G(_,"DIV",{id:!0}),J(f).forEach(R),this.h()},h(){z(e,"class","noselect"),z(f,"id","pageFooter")},m(_,v){Oe(_,e,v),Oe(_,s,v),o&&o.m(_,v),Oe(_,u,v),Oe(_,f,v),d=!0},p(_,v){_[0].params?o?(o.p(_,v),v&1&&Ve(o,1)):(o=G0(_),o.c(),Ve(o,1),o.m(u.parentNode,u)):o&&(lr(),Xe(o,1,1,()=>{o=null}),ur())},i(_){d||(Ve(o),d=!0)},o(_){Xe(o),d=!1},d(_){_&&(R(e),R(s),R(u),R(f)),o&&o.d(_)}}}function G0(t){let e,i,s,u,f,d=t[0].params.notes+"",o,_;return i=new $w({}),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),u=Z("div"),f=Z("p"),o=Mt(d),this.h()},l(v){e=G(v,"DIV",{class:!0});var E=J(e);At(i.$$.fragment,E),E.forEach(R),s=xe(v),u=G(v,"DIV",{class:!0,contenteditable:!0});var S=J(u);f=G(S,"P",{});var I=J(f);o=Pt(I,d),I.forEach(R),S.forEach(R),this.h()},h(){z(e,"class","bacground-svg svelte-1rrvghv"),z(u,"class","editable_text_container"),z(u,"contenteditable","true")},m(v,E){Oe(v,e,E),Tt(i,e,null),Oe(v,s,E),Oe(v,u,E),P(u,f),P(f,o),_=!0},p(v,E){(!_||E&1)&&d!==(d=v[0].params.notes+"")&&Zn(o,d)},i(v){_||(Ve(i.$$.fragment,v),_=!0)},o(v){Xe(i.$$.fragment,v),_=!1},d(v){v&&(R(e),R(s),R(u)),It(i)}}}function Uw(t){let e,i,s,u,f;i=new Mo({});let d=t[0].params&&q0(t);return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),u=Z("div"),d&&d.c(),this.h()},l(o){e=G(o,"DIV",{class:!0});var _=J(e);At(i.$$.fragment,_),s=xe(_),u=G(_,"DIV",{class:!0});var v=J(u);d&&d.l(v),v.forEach(R),_.forEach(R),this.h()},h(){z(u,"class","page_content"),z(e,"class","content-block section page_00 noselect")},m(o,_){Oe(o,e,_),Tt(i,e,null),P(e,s),P(e,u),d&&d.m(u,null),f=!0},p(o,[_]){o[0].params?d?(d.p(o,_),_&1&&Ve(d,1)):(d=q0(o),d.c(),Ve(d,1),d.m(u,null)):d&&(lr(),Xe(d,1,1,()=>{d=null}),ur())},i(o){f||(Ve(i.$$.fragment,o),Ve(d),f=!0)},o(o){Xe(i.$$.fragment,o),Xe(d),f=!1},d(o){o&&R(e),It(i),d&&d.d()}}}function jw(t,e,i){let s;return Ur(t,Xt,u=>i(0,s=u)),[s]}class qw extends Pr{constructor(e){super(),Mr(this,e,jw,Uw,Cr,{})}}function Gw(t){let e,i,s,u,f,d,o,_,v;const E=t[7].default,S=wm(E,t,t[6],null);return{c(){e=Z("div"),i=Z("select"),S&&S.c(),s=we(),u=Z("input"),f=we(),d=Z("i"),this.h()},l(I){e=G(I,"DIV",{class:!0});var A=J(e);i=G(A,"SELECT",{class:!0});var N=J(i);S&&S.l(N),N.forEach(R),s=xe(A),u=G(A,"INPUT",{type:!0,class:!0}),f=xe(A),d=G(A,"I",{role:!0,tabindex:!0,class:!0}),J(d).forEach(R),A.forEach(R),this.h()},h(){z(i,"class","svelte-220ue6"),z(u,"type","text"),z(u,"class","svelte-220ue6"),z(d,"role","button"),z(d,"tabindex","1"),z(d,"class","svelte-220ue6"),z(e,"class","cont__main svelte-220ue6")},m(I,A){Oe(I,e,A),P(e,i),S&&S.m(i,null),t[8](i),P(e,s),P(e,u),t[9](u),P(e,f),P(e,d),o=!0,_||(v=[bt(i,"change",t[2]),bt(d,"click",t[10]),bt(d,"keypress",Zw)],_=!0)},p(I,[A]){S&&S.p&&(!o||A&64)&&km(S,E,I,I[6],o?Sm(E,I[6],A,null):Em(I[6]),null)},i(I){o||(Ve(S,I),o=!0)},o(I){Xe(S,I),o=!1},d(I){I&&R(e),S&&S.d(I),t[8](null),t[9](null),_=!1,Or(v)}}}const Zw=()=>{};function Hw(t,e,i){let{$$slots:s={},$$scope:u}=e,{selectedValue:f=null}=e,{editValue:d=!1}=e,{customValue:o=""}=e,_,v,E,S;ys(()=>I()),Yf(()=>{_.removeEventListener("input",E),_.removeEventListener("focus",S)});function I(){const W=v.selectedOptions[0];i(3,f=W.value),i(0,_.value=W.textContent,_),i(0,_.disabled=W.contentEditable!=="true",_),E=()=>A(W),S=()=>_.select(),_.disabled?(_.removeEventListener("input",E),_.removeEventListener("focus",S)):(_.addEventListener("input",E),_.addEventListener("focus",S))}function A(W){i(4,o=_.value),W.textContent=_.value,d&&i(3,f=W.value=o)}function N(W){Cn[W?"unshift":"push"](()=>{v=W,i(1,v)})}function V(W){Cn[W?"unshift":"push"](()=>{_=W,i(0,_)})}const j=()=>_.focus();return t.$$set=W=>{"selectedValue"in W&&i(3,f=W.selectedValue),"editValue"in W&&i(5,d=W.editValue),"customValue"in W&&i(4,o=W.customValue),"$$scope"in W&&i(6,u=W.$$scope)},[_,v,I,f,o,d,u,s,N,V,j]}class rp extends Pr{constructor(e){super(),Mr(this,e,Hw,Gw,Cr,{selectedValue:3,editValue:5,customValue:4})}}const vv=ed([]),Ww=ed({offset:0,duration:500,passive:!1,easing:rw,onStart:()=>{},onDone:()=>{}}),Kw=Im(Ww),Xw=()=>Kw,bv=t=>t.replace(/[^A-Z0-9]/gi,"").toLowerCase(),Yw=(t,e)=>{const i=t.find(s=>s.reference===e);return i?i.node:document.getElementById(e)},Jw=t=>({y:t.offsetTop,x:t.offsetLeft}),Z0=(t,e,i,s,u)=>i>s?e:t+(e-t)*u(i/s),Qw=async(t,e)=>new Promise(i=>{const{start:s,end:u,duration:f,easing:d}=t,o=Date.now();let _=()=>{const v=Date.now()-o,E=Z0(s.x,u.x,v,f,d),S=Z0(s.y,u.y,v,f,d);if(e({x:E,y:S}),v>f)return i();window.requestAnimationFrame(_)};window.addEventListener("wheel",function v(){_=()=>{},window.removeEventListener("wheel",v)}),window.requestAnimationFrame(_)}),e5=async(t,e)=>{const{duration:i,easing:s,offset:u}=e,f=window.pageYOffset,d=window.pageXOffset,o=t.x+u,_=t.y+u;await Qw({start:{x:d,y:f},end:{x:o,y:_},duration:i,easing:s},v=>{window.scroll(v.x,v.y)})},t5=Im(vv),n5=async(t,e)=>{e.passive||t.preventDefault();const{ref:i,onDone:s,onStart:u}=e,f=e.duration,d=e.offset,o=e.easing,_=Yw(t5,i);if(!_)throw new Error(`Element reference '${i}' not found`);const v=Jw(_);u==null||u({element:_,offset:d,duration:f,endPosition:v}),await e5(v,{duration:f,offset:d,easing:o}),s==null||s({element:_,offset:d,duration:f,endPosition:v})},r5=(t,e)=>{if(!e)throw new Error("scrollTo require a options");let i=Object.assign({ref:""},Xw());if(typeof e=="string"?i.ref=e:i=Object.assign(i,e),i.ref=bv(i.ref),!i.ref)throw new Error("scrollTo require a reference");t instanceof HTMLAnchorElement&&(t.href=`#${i.ref}`),t instanceof HTMLAnchorElement||(t.style.cursor="pointer");const s=u=>n5(u,i);return t.addEventListener("click",s,{passive:i.passive}),t.addEventListener("touchstart",s,{passive:i.passive}),{destroy(){t.removeEventListener("click",s),t.removeEventListener("touchstart",s)}}},i5=(t,e)=>{if(!e)throw new Error("scrollRef require a reference");const i=Im(vv);return i.push({node:t,reference:bv(e)}),{destroy(){i.length=0}}};var xv={exports:{}};(function(t,e){(function(i,s){t.exports=s()})(cf,function(){var i,s,u;function f(o,_){if(!i)i=_;else if(!s)s=_;else{var v="var sharedChunk = {}; ("+i+")(sharedChunk); ("+s+")(sharedChunk);",E={};i(E),u=_(E),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}f(["exports"],function(o){function _(a,n,l,h){return new(l||(l=Promise))(function(m,x){function w(O){try{D(h.next(O))}catch($){x($)}}function T(O){try{D(h.throw(O))}catch($){x($)}}function D(O){var $;O.done?m(O.value):($=O.value,$ instanceof l?$:new l(function(H){H($)})).then(w,T)}D((h=h.apply(a,n||[])).next())})}function v(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var E=S;function S(a,n){this.x=a,this.y=n}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,l=a.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),l=Math.sin(a),h=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=h,this},_rotateAround:function(a,n){var l=Math.cos(a),h=Math.sin(a),m=n.y+h*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(a){return a instanceof S?a:Array.isArray(a)?new S(a[0],a[1]):a};var I=v(E),A=N;function N(a,n,l,h){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=l,this.p2y=h}N.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,h=0;h<8;h++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<n)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=m/x}var w=0,T=1;for(l=a,h=0;h<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<n));h++)a>m?w=l:T=l,l=.5*(T-w)+w;return l},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var V=v(A);let j,W;function K(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function ne(){if(W==null&&(W=!1,K())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const m=4*h;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){W=!0;break}}}return W||!1}function Y(a,n,l,h){const m=new V(a,n,l,h);return function(x){return m.solve(x)}}const re=Y(.25,.1,.25,1);function Q(a,n,l){return Math.min(l,Math.max(n,a))}function se(a,n,l){const h=l-n,m=((a-n)%h+h)%h+n;return m===n?l:m}function oe(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}let Te=1;function fe(a,n,l){const h={};for(const m in a)h[m]=n.call(l||this,a[m],m,a);return h}function ee(a,n,l){const h={};for(const m in a)n.call(l||this,a[m],m,a)&&(h[m]=a[m]);return h}function ge(a){return Array.isArray(a)?a.map(ge):typeof a=="object"&&a?fe(a,ge):a}const pe={};function ye(a){pe[a]||(typeof console<"u"&&console.warn(a),pe[a]=!0)}function de(a,n,l){return(l.y-a.y)*(n.x-a.x)>(n.y-a.y)*(l.x-a.x)}function Ne(a){let n=0;for(let l,h,m=0,x=a.length,w=x-1;m<x;w=m++)l=a[m],h=a[w],n+=(h.x-l.x)*(l.y+h.y);return n}function Ge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Le=null;function Me(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const $e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ht(a,n,l,h,m){return _(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(a,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),D=new Uint8ClampedArray(h*m*4);if(yield x.copyTo(D,function(O,$,H,ie,ce){const he=4*Math.max(-$,0),Ee=(Math.max(0,H)-H)*ie*4+he,De=4*ie,Be=Math.max(0,$),Ke=Math.max(0,H);return{rect:{x:Be,y:Ke,width:Math.min(O.width,$+ie)-Be,height:Math.min(O.height,H+ce)-Ke},layout:[{offset:Ee,stride:De}]}}(a,n,l,h,m)),T)for(let O=0;O<D.length;O+=4){const $=D[O];D[O]=D[O+2],D[O+2]=$}return D}finally{x.close()}})}let ut,Fe,ze,gt;const Zt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,l.drawImage(a,0,0,a.width,a.height),l},resolveURL:a=>(ze||(ze=document.createElement("a")),ze.href=a,ze.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(gt==null&&(gt=matchMedia("(prefers-reduced-motion: reduce)")),gt.matches)}},an={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class yn extends Error{constructor(n,l,h,m){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=m}}const sn=Ge()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Dt=a=>an.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function $t(a,n){const l=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:sn(),signal:l.signal});let m=!1,x=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),x||fetch(h).then(w=>w.ok?(T=>{(a.type==="arrayBuffer"||a.type==="image"?T.arrayBuffer():a.type==="json"?T.json():T.text()).then(D=>{x||(m=!0,n(null,D,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(D=>{x||n(new Error(D.message))})})(w):w.blob().then(T=>n(new yn(w.status,w.statusText,a.url,T)))).catch(w=>{w.code!==20&&n(new Error(w.message))}),{cancel:()=>{x=!0,m||l.abort()}}}const ct=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Ge())return(Dt(a.url)||$t)(a,n)}if(!(/^file:/.test(l=a.url)||/^file:/.test(sn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return $t(a,n);if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var l;return function(h,m){const x=new XMLHttpRequest;x.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(x.responseType="arraybuffer");for(const w in h.headers)x.setRequestHeader(w,h.headers[w]);return h.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=h.credentials==="include",x.onerror=()=>{m(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let w=x.response;if(h.type==="json")try{w=JSON.parse(x.response)}catch(T){return m(T)}m(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const w=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});m(new yn(x.status,x.statusText,h.url,w))}},x.send(h.body),{cancel:()=>x.abort()}}(a,n)},xt=function(a,n){return ct(oe(a,{type:"arrayBuffer"}),n)};function wt(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function Wt(a,n,l){l[a]&&l[a].indexOf(n)!==-1||(l[a]=l[a]||[],l[a].push(n))}function Qt(a,n,l){if(l&&l[a]){const h=l[a].indexOf(n);h!==-1&&l[a].splice(h,1)}}class Ht{constructor(n,l={}){oe(this,l),this.type=n}}class kt extends Ht{constructor(n,l={}){super("error",oe({error:n},l))}}class dt{on(n,l){return this._listeners=this._listeners||{},Wt(n,l,this._listeners),this}off(n,l){return Qt(n,l,this._listeners),Qt(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Wt(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new Ht(n,l||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of m)T.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of x)Qt(h,T,this._oneTimeListeners),T.call(this,n);const w=this._eventedParent;w&&(oe(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof kt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Et=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ut(a,n){const l={};for(const h in a)h!=="ref"&&(l[h]=a[h]);return Et.forEach(h=>{h in n&&(l[h]=n[h])}),l}function _t(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let l=0;l<a.length;l++)if(!_t(a[l],n[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const l in a)if(!_t(a[l],n[l]))return!1;return!0}return a===n}const zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function gn(a,n,l){l.push({command:zt.addSource,args:[a,n[a]]})}function Mn(a,n,l){n.push({command:zt.removeSource,args:[a]}),l[a]=!0}function Hn(a,n,l,h){Mn(a,l,h),gn(a,n,l)}function Kn(a,n,l){let h;for(h in a[l])if(Object.prototype.hasOwnProperty.call(a[l],h)&&h!=="data"&&!_t(a[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!_t(a[l][h],n[l][h]))return!1;return!0}function br(a,n,l,h,m,x){let w;for(w in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,w)&&(_t(a[w],n[w])||l.push({command:x,args:[h,w,n[w],m]}));for(w in n)Object.prototype.hasOwnProperty.call(n,w)&&!Object.prototype.hasOwnProperty.call(a,w)&&(_t(a[w],n[w])||l.push({command:x,args:[h,w,n[w],m]}))}function Yn(a){return a.id}function rr(a,n){return a[n.id]=n,a}class vt{constructor(n,l,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function Vn(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}class He extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class pt{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[h,m]of l)this.bindings[h]=m}concat(n){return new pt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const dn={kind:"null"},lt={kind:"number"},en={kind:"string"},tn={kind:"boolean"},wr={kind:"color"},mr={kind:"object"},on={kind:"value"},Xn={kind:"collator"},ke={kind:"formatted"},X={kind:"padding"},ae={kind:"resolvedImage"},me={kind:"variableAnchorOffsetCollection"};function Ae(a,n){return{kind:"array",itemType:a,N:n}}function Ce(a){if(a.kind==="array"){const n=Ce(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const je=[dn,lt,en,tn,wr,ke,mr,Ae(on),X,ae,me];function te(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!te(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const l of je)if(!te(l,n))return null}}return`Expected ${Ce(a)} but found ${Ce(n)} instead.`}function ue(a,n){return n.some(l=>l.kind===a.kind)}function _e(a,n){return n.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function qe(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const Je=.96422,Qe=.82521,Nt=4/29,Jt=6/29,Lt=3*Jt*Jt,qt=Jt*Jt*Jt,cn=Math.PI/180,ln=180/Math.PI;function In(a){return(a%=360)<0&&(a+=360),a}function Ln([a,n,l,h]){let m,x;const w=hr((.2225045*(a=Tn(a))+.7168786*(n=Tn(n))+.0606169*(l=Tn(l)))/1);a===n&&n===l?m=x=w:(m=hr((.4360747*a+.3850649*n+.1430804*l)/Je),x=hr((.0139322*a+.0971045*n+.7141733*l)/Qe));const T=116*w-16;return[T<0?0:T,500*(m-w),200*(w-x),h]}function Tn(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function hr(a){return a>qt?Math.pow(a,1/3):a/Lt+Nt}function Rn([a,n,l,h]){let m=(a+16)/116,x=isNaN(n)?m:m+n/500,w=isNaN(l)?m:m-l/200;return m=1*ar(m),x=Je*ar(x),w=Qe*ar(w),[kr(3.1338561*x-1.6168667*m-.4906146*w),kr(-.9787684*x+1.9161415*m+.033454*w),kr(.0719453*x-.2289914*m+1.4052427*w),h]}function kr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function ar(a){return a>Jt?a*a*a:Lt*(a-Nt)}function Fr(a){return parseInt(a.padEnd(2,a),16)/255}function bi(a,n){return qr(n?a/100:a,0,1)}function qr(a,n,l){return Math.min(Math.max(n,a),l)}function Jr(a){return!a.some(Number.isNaN)}const hi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class $n{constructor(n,l,h,m=1,x=!0){this.r=n,this.g=l,this.b=h,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,l,h,m]))}static parse(n){if(n instanceof $n)return n;if(typeof n!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=hi[h];if(m){const[w,T,D]=m;return[w/255,T/255,D/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const w=h.length<6?1:2;let T=1;return[Fr(h.slice(T,T+=w)),Fr(h.slice(T,T+=w)),Fr(h.slice(T,T+=w)),Fr(h.slice(T,T+w)||"ff")]}if(h.startsWith("rgb")){const w=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,D,O,$,H,ie,ce,he,Ee,De,Be,Ke]=w,Ue=[$||" ",ce||" ",De].join("");if(Ue==="  "||Ue==="  /"||Ue===",,"||Ue===",,,"){const Ye=[O,ie,Ee].join(""),nt=Ye==="%%%"?100:Ye===""?255:0;if(nt){const mt=[qr(+D/nt,0,1),qr(+H/nt,0,1),qr(+he/nt,0,1),Be?bi(+Be,Ke):1];if(Jr(mt))return mt}}return}}const x=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,D,O,$,H,ie,ce,he]=x,Ee=[D||" ",$||" ",ie].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){const De=[+T,qr(+O,0,100),qr(+H,0,100),ce?bi(+ce,he):1];if(Jr(De))return function([Be,Ke,Ue,Ye]){function nt(mt){const fn=(mt+Be/30)%12,xn=Ke*Math.min(Ue,1-Ue);return Ue-xn*Math.max(-1,Math.min(fn-3,9-fn,1))}return Be=In(Be),Ke/=100,Ue/=100,[nt(0),nt(8),nt(4),Ye]}(De)}}}(n);return l?new $n(...l,!1):void 0}get rgb(){const{r:n,g:l,b:h,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[n/x,l/x,h/x,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[l,h,m,x]=Ln(n),w=Math.sqrt(h*h+m*m);return[Math.round(1e4*w)?In(Math.atan2(m,h)*ln):NaN,w,l,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ln(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){const[n,l,h,m]=this.rgb;return`rgba(${[n,l,h].map(x=>Math.round(255*x)).join(",")},${m})`}}$n.black=new $n(0,0,0,1),$n.white=new $n(1,1,1,1),$n.transparent=new $n(0,0,0,0),$n.red=new $n(1,0,0,1);class Ma{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fi{constructor(n,l,h,m,x){this.text=n,this.image=l,this.scale=h,this.fontStack=m,this.textColor=x}}class Un{constructor(n){this.sections=n}static fromString(n){return new Un([new fi(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Un?n:Un.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Bn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Bn)return n;if(typeof n=="number")return new Bn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Bn(n)}}toString(){return JSON.stringify(this.values)}}const fr=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Bt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Bt)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){const h=n[l],m=n[l+1];if(typeof h!="string"||!fr.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Bt(n)}}toString(){return JSON.stringify(this.values)}}class Pn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Pn({name:n,available:!1}):null}}function St(a,n,l,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,l,h]:[a,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qi(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof $n||a instanceof Ma||a instanceof Un||a instanceof Bn||a instanceof Bt||a instanceof Pn)return!0;if(Array.isArray(a)){for(const n of a)if(!Qi(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Qi(a[n]))return!1;return!0}return!1}function dr(a){if(a===null)return dn;if(typeof a=="string")return en;if(typeof a=="boolean")return tn;if(typeof a=="number")return lt;if(a instanceof $n)return wr;if(a instanceof Ma)return Xn;if(a instanceof Un)return ke;if(a instanceof Bn)return X;if(a instanceof Bt)return me;if(a instanceof Pn)return ae;if(Array.isArray(a)){const n=a.length;let l;for(const h of a){const m=dr(h);if(l){if(l===m)continue;l=on;break}l=m}return Ae(l||on,n)}return mr}function Fn(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof $n||a instanceof Un||a instanceof Bn||a instanceof Bt||a instanceof Pn?a.toString():JSON.stringify(a)}class ni{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Qi(n[1]))return l.error("invalid value");const h=n[1];let m=dr(h);const x=l.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new ni(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Er{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Ai={string:en,number:lt,boolean:tn,object:mr};class Gr{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,m=1;const x=n[0];if(x==="array"){let T,D;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in Ai)||O==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);T=Ai[O],m++}else T=on;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);D=n[2],m++}h=Ae(T,D)}else{if(!Ai[x])throw new Error(`Types doesn't contain name = ${x}`);h=Ai[x]}const w=[];for(;m<n.length;m++){const T=l.parse(n[m],m,on);if(!T)return null;w.push(T)}return new Gr(h,w)}evaluate(n){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(n);if(!te(this.type,dr(h)))return h;if(l===this.args.length-1)throw new Er(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(dr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const xi={"to-boolean":tn,"to-color":wr,"to-number":lt,"to-string":en};class Ci{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[0];if(!xi[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");const m=xi[h],x=[];for(let w=1;w<n.length;w++){const T=l.parse(n[w],w,on);if(!T)return null;x.push(T)}return new Ci(m,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(const m of this.args){if(l=m.evaluate(n),h=null,l instanceof $n)return l;if(typeof l=="string"){const x=n.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:St(l[0],l[1],l[2],l[3]),!h))return new $n(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Er(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(n);const m=Bn.parse(l);if(m)return m}throw new Er(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(n);const m=Bt.parse(l);if(m)return m}throw new Er(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(n),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Er(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Un.fromString(Fn(this.args[0].evaluate(n)));case"resolvedImage":return Pn.fromString(Fn(this.args[0].evaluate(n)));default:return Fn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Qa=["Unknown","Point","LineString","Polygon"];class Xr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Qa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=$n.parse(n)),l}}class wi{constructor(n,l,h=[],m,x=new pt,w=[]){this.registry=n,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=x,this.errors=w,this.expectedType=m,this._isConstant=l}parse(n,l,h,m,x={}){return l?this.concat(l,h,m)._parse(n,x):this._parse(n,x)}_parse(n,l){function h(m,x,w){return w==="assert"?new Gr(x,[m]):w==="coerce"?new Ci(x,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[m];if(x){let w=x.parse(n,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,D=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||D.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(T.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||D.kind!=="value"&&D.kind!=="array"){if(this.checkSubtype(T,D))return null}else w=h(w,T,l.typeAnnotation||"coerce");else w=h(w,T,l.typeAnnotation||"coerce");else w=h(w,T,l.typeAnnotation||"coerce");else w=h(w,T,l.typeAnnotation||"assert")}if(!(w instanceof ni)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new Xr;try{w=new ni(w.type,w.evaluate(T))}catch(D){return this.error(D.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){const m=typeof n=="number"?this.path.concat(n):this.path,x=h?this.scope.concat(h):this.scope;return new wi(this.registry,this._isConstant,m,l||null,x,this.errors)}error(n,...l){const h=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new He(h,n))}checkSubtype(n,l){const h=te(n,l);return h&&this.error(h),h}}class ma{constructor(n,l,h){this.type=Xn,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const m=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,tn);if(!m)return null;const x=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,tn);if(!x)return null;let w=null;return h.locale&&(w=l.parse(h.locale,1,en),!w)?null:new ma(m,x,w)}evaluate(n){return new Ma(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Xi=8192;function Di(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function ea(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function vs(a,n){const l=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(l*m*Xi),Math.round(h*m*Xi)]}function Ds(a,n,l){const h=a[0]-n[0],m=a[1]-n[1],x=a[0]-l[0],w=a[1]-l[1];return h*w-x*m==0&&h*x<=0&&m*w<=0}function ga(a,n){let l=!1;for(let w=0,T=n.length;w<T;w++){const D=n[w];for(let O=0,$=D.length;O<$-1;O++){if(Ds(a,D[O],D[O+1]))return!1;(m=D[O])[1]>(h=a)[1]!=(x=D[O+1])[1]>h[1]&&h[0]<(x[0]-m[0])*(h[1]-m[1])/(x[1]-m[1])+m[0]&&(l=!l)}}var h,m,x;return l}function ta(a,n){for(let l=0;l<n.length;l++)if(ga(a,n[l]))return!0;return!1}function za(a,n,l,h){const m=h[0]-l[0],x=h[1]-l[1],w=(a[0]-l[0])*x-m*(a[1]-l[1]),T=(n[0]-l[0])*x-m*(n[1]-l[1]);return w>0&&T<0||w<0&&T>0}function po(a,n,l){for(const O of l)for(let $=0;$<O.length-1;++$)if((T=[(w=O[$+1])[0]-(x=O[$])[0],w[1]-x[1]])[0]*(D=[(m=n)[0]-(h=a)[0],m[1]-h[1]])[1]-T[1]*D[0]!=0&&za(h,m,x,w)&&za(x,w,h,m))return!0;var h,m,x,w,T,D;return!1}function Da(a,n){for(let l=0;l<a.length;++l)if(!ga(a[l],n))return!1;for(let l=0;l<a.length-1;++l)if(po(a[l],a[l+1],n))return!1;return!0}function sa(a,n){for(let l=0;l<n.length;l++)if(Da(a,n[l]))return!0;return!1}function oa(a,n,l){const h=[];for(let m=0;m<a.length;m++){const x=[];for(let w=0;w<a[m].length;w++){const T=vs(a[m][w],l);Di(n,T),x.push(T)}h.push(x)}return h}function Hs(a,n,l){const h=[];for(let m=0;m<a.length;m++){const x=oa(a[m],n,l);h.push(x)}return h}function Do(a,n,l,h){if(a[0]<l[0]||a[0]>l[2]){const m=.5*h;let x=a[0]-l[0]>m?-h:l[0]-a[0]>m?h:0;x===0&&(x=a[0]-l[2]>m?-h:l[2]-a[0]>m?h:0),a[0]+=x}Di(n,a)}function _a(a,n,l,h){const m=Math.pow(2,h.z)*Xi,x=[h.x*Xi,h.y*Xi],w=[];for(const T of a)for(const D of T){const O=[D.x+x[0],D.y+x[1]];Do(O,n,l,m),w.push(O)}return w}function es(a,n,l,h){const m=Math.pow(2,h.z)*Xi,x=[h.x*Xi,h.y*Xi],w=[];for(const D of a){const O=[];for(const $ of D){const H=[$.x+x[0],$.y+x[1]];Di(n,H),O.push(H)}w.push(O)}if(n[2]-n[0]<=m/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const D of w)for(const O of D)Do(O,n,l,m)}var T;return w}class ts{constructor(n,l){this.type=tn,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qi(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const x=h.features[m].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new ts(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ts(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ts(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(h.type==="Polygon"){const T=oa(h.coordinates,x,w),D=_a(l.geometry(),m,x,w);if(!ea(m,x))return!1;for(const O of D)if(!ga(O,T))return!1}if(h.type==="MultiPolygon"){const T=Hs(h.coordinates,x,w),D=_a(l.geometry(),m,x,w);if(!ea(m,x))return!1;for(const O of D)if(!ta(O,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(h.type==="Polygon"){const T=oa(h.coordinates,x,w),D=es(l.geometry(),m,x,w);if(!ea(m,x))return!1;for(const O of D)if(!Da(O,T))return!1}if(h.type==="MultiPolygon"){const T=Hs(h.coordinates,x,w),D=es(l.geometry(),m,x,w);if(!ea(m,x))return!1;for(const O of D)if(!sa(O,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ws{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=n[1];return l.scope.has(h)?new Ws(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ri{constructor(n,l,h,m){this.name=n,this.type=l,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){const h=n[0],m=ri.definitions[h];if(!m)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=w.filter(([O])=>!Array.isArray(O)||O.length===n.length-1);let D=null;for(const[O,$]of T){D=new wi(l.registry,bs,l.path,null,l.scope);const H=[];let ie=!1;for(let ce=1;ce<n.length;ce++){const he=n[ce],Ee=Array.isArray(O)?O[ce-1]:O.type,De=D.parse(he,1+H.length,Ee);if(!De){ie=!0;break}H.push(De)}if(!ie)if(Array.isArray(O)&&O.length!==H.length)D.error(`Expected ${O.length} arguments, but found ${H.length} instead.`);else{for(let ce=0;ce<H.length;ce++){const he=Array.isArray(O)?O[ce]:O.type,Ee=H[ce];D.concat(ce+1).checkSubtype(he,Ee.type)}if(D.errors.length===0)return new ri(h,x,$,H)}}if(T.length===1)l.errors.push(...D.errors);else{const O=(T.length?T:w).map(([H])=>{return ie=H,Array.isArray(ie)?`(${ie.map(Ce).join(", ")})`:`(${Ce(ie.type)}...)`;var ie}).join(" | "),$=[];for(let H=1;H<n.length;H++){const ie=l.parse(n[H],1+$.length);if(!ie)return null;$.push(Ce(ie.type))}l.error(`Expected arguments of type ${O}, but found (${$.join(", ")}) instead.`)}return null}static register(n,l){ri.definitions=l;for(const h in l)n[h]=ri}}function bs(a){if(a instanceof Ws)return bs(a.boundExpression);if(a instanceof ri&&a.name==="error"||a instanceof ma||a instanceof ts)return!1;const n=a instanceof Ci||a instanceof Gr;let l=!0;return a.eachChild(h=>{l=n?l&&bs(h):l&&h instanceof ni}),!!l&&xs(a)&&Ls(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function xs(a){if(a instanceof ri&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ts)return!1;let n=!0;return a.eachChild(l=>{n&&!xs(l)&&(n=!1)}),n}function Li(a){if(a instanceof ri&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(l=>{n&&!Li(l)&&(n=!1)}),n}function Ls(a,n){if(a instanceof ri&&n.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(h=>{l&&!Ls(h,n)&&(l=!1)}),l}function Rs(a,n){const l=a.length-1;let h,m,x=0,w=l,T=0;for(;x<=w;)if(T=Math.floor((x+w)/2),h=a[T],m=a[T+1],h<=n){if(T===l||n<m)return T;x=T+1}else{if(!(h>n))throw new Er("Input is not a number.");w=T-1}return 0}class Lr{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[m,x]of h)this.labels.push(m),this.outputs.push(x)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(n[1],1,lt);if(!h)return null;const m=[];let x=null;l.expectedType&&l.expectedType.kind!=="value"&&(x=l.expectedType);for(let w=1;w<n.length;w+=2){const T=w===1?-1/0:n[w],D=n[w+1],O=w,$=w+1;if(typeof T!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(m.length&&m[m.length-1][0]>=T)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const H=l.parse(D,$,x);if(!H)return null;x=x||H.type,m.push([T,H])}return new Lr(x,h,m)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const x=l.length;return m>=l[x-1]?h[x-1].evaluate(n):h[Rs(l,m)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Jn(a,n,l){return a+l*(n-a)}function mo(a,n,l){return a.map((h,m)=>Jn(h,n[m],l))}const Ri={number:Jn,color:function(a,n,l,h="rgb"){switch(h){case"rgb":{const[m,x,w,T]=mo(a.rgb,n.rgb,l);return new $n(m,x,w,T,!1)}case"hcl":{const[m,x,w,T]=a.hcl,[D,O,$,H]=n.hcl;let ie,ce;if(isNaN(m)||isNaN(D))isNaN(m)?isNaN(D)?ie=NaN:(ie=D,w!==1&&w!==0||(ce=O)):(ie=m,$!==1&&$!==0||(ce=x));else{let Ke=D-m;D>m&&Ke>180?Ke-=360:D<m&&m-D>180&&(Ke+=360),ie=m+l*Ke}const[he,Ee,De,Be]=function([Ke,Ue,Ye,nt]){return Ke=isNaN(Ke)?0:Ke*cn,Rn([Ye,Math.cos(Ke)*Ue,Math.sin(Ke)*Ue,nt])}([ie,ce??Jn(x,O,l),Jn(w,$,l),Jn(T,H,l)]);return new $n(he,Ee,De,Be,!1)}case"lab":{const[m,x,w,T]=Rn(mo(a.lab,n.lab,l));return new $n(m,x,w,T,!1)}}},array:mo,padding:function(a,n,l){return new Bn(mo(a.values,n.values,l))},variableAnchorOffsetCollection:function(a,n,l){const h=a.values,m=n.values;if(h.length!==m.length)throw new Er(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const x=[];for(let w=0;w<h.length;w+=2){if(h[w]!==m[w])throw new Er(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${h[w]}, to[${w}]: ${m[w]}`);x.push(h[w]);const[T,D]=h[w+1],[O,$]=m[w+1];x.push([Jn(T,O,l),Jn(D,$,l)])}return new Bt(x)}};class ii{constructor(n,l,h,m,x){this.type=n,this.operator=l,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(n,l,h,m){let x=0;if(n.name==="exponential")x=ai(l,n.base,h,m);else if(n.name==="linear")x=ai(l,1,h,m);else if(n.name==="cubic-bezier"){const w=n.controlPoints;x=new V(w[0],w[1],w[2],w[3]).solve(ai(l,1,h,m))}return x}static parse(n,l){let[h,m,x,...w]=n;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const O=m[1];if(typeof O!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:O}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const O=m.slice(1);if(O.length!==4||O.some($=>typeof $!="number"||$<0||$>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,lt),!x)return null;const T=[];let D=null;h==="interpolate-hcl"||h==="interpolate-lab"?D=wr:l.expectedType&&l.expectedType.kind!=="value"&&(D=l.expectedType);for(let O=0;O<w.length;O+=2){const $=w[O],H=w[O+1],ie=O+3,ce=O+4;if(typeof $!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(T.length&&T[T.length-1][0]>=$)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);const he=l.parse(H,ce,D);if(!he)return null;D=D||he.type,T.push([$,he])}return qe(D,lt)||qe(D,wr)||qe(D,X)||qe(D,me)||qe(D,Ae(lt))?new ii(D,h,m,x,T):l.error(`Type ${Ce(D)} is not interpolatable.`)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const x=l.length;if(m>=l[x-1])return h[x-1].evaluate(n);const w=Rs(l,m),T=ii.interpolationFactor(this.interpolation,m,l[w],l[w+1]),D=h[w].evaluate(n),O=h[w+1].evaluate(n);switch(this.operator){case"interpolate":return Ri[this.type.kind](D,O,T);case"interpolate-hcl":return Ri.color(D,O,T,"hcl");case"interpolate-lab":return Ri.color(D,O,T,"lab")}}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ai(a,n,l,h){const m=h-l,x=a-l;return m===0?0:n===1?x/m:(Math.pow(n,x)-1)/(Math.pow(n,m)-1)}class La{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let h=null;const m=l.expectedType;m&&m.kind!=="value"&&(h=m);const x=[];for(const T of n.slice(1)){const D=l.parse(T,1+x.length,h,void 0,{typeAnnotation:"omit"});if(!D)return null;h=h||D.type,x.push(D)}if(!h)throw new Error("No output type");const w=m&&x.some(T=>te(m,T.type));return new La(w?on:h,x)}evaluate(n){let l,h=null,m=0;for(const x of this.args)if(m++,h=x.evaluate(n),h&&h instanceof Pn&&!h.available&&(l||(l=h.name),h=null,m===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Qr{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let x=1;x<n.length-1;x+=2){const w=n[x];if(typeof w!="string")return l.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);const T=l.parse(n[x+1],x+1);if(!T)return null;h.push([w,T])}const m=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return m?new Qr(h,m):null}outputDefined(){return this.result.outputDefined()}}class ns{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,lt),m=l.parse(n[2],2,Ae(l.expectedType||on));return h&&m?new ns(m.type.itemType,h,m):null}evaluate(n){const l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new Er(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Er(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Er(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class si{constructor(n,l){this.type=tn,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,on),m=l.parse(n[2],2,on);return h&&m?ue(h.type,[tn,en,lt,dn,on])?new si(h,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!_e(l,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(dr(l))} instead.`);if(!_e(h,["string","array"]))throw new Er(`Expected second argument to be of type array or string, but found ${Ce(dr(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Ra{constructor(n,l,h){this.type=lt,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,on),m=l.parse(n[2],2,on);if(!h||!m)return null;if(!ue(h.type,[tn,en,lt,dn,on]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`);if(n.length===4){const x=l.parse(n[3],3,lt);return x?new Ra(h,m,x):null}return new Ra(h,m)}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!_e(l,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(dr(l))} instead.`);if(!_e(h,["string","array"]))throw new Er(`Expected second argument to be of type array or string, but found ${Ce(dr(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(l,m)}return h.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class oi{constructor(n,l,h,m,x,w){this.inputType=n,this.type=l,this.input=h,this.cases=m,this.outputs=x,this.otherwise=w}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const x={},w=[];for(let O=2;O<n.length-1;O+=2){let $=n[O];const H=n[O+1];Array.isArray($)||($=[$]);const ie=l.concat(O);if($.length===0)return ie.error("Expected at least one branch label.");for(const he of $){if(typeof he!="number"&&typeof he!="string")return ie.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return ie.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof he=="number"&&Math.floor(he)!==he)return ie.error("Numeric branch labels must be integer values.");if(h){if(ie.checkSubtype(h,dr(he)))return null}else h=dr(he);if(x[String(he)]!==void 0)return ie.error("Branch labels must be unique.");x[String(he)]=w.length}const ce=l.parse(H,O,m);if(!ce)return null;m=m||ce.type,w.push(ce)}const T=l.parse(n[1],1,on);if(!T)return null;const D=l.parse(n[n.length-1],n.length-1,m);return D?T.type.kind!=="value"&&l.concat(1).checkSubtype(h,T.type)?null:new oi(h,m,T,x,w,D):null}evaluate(n){const l=this.input.evaluate(n);return(dr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class rs{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const m=[];for(let w=1;w<n.length-1;w+=2){const T=l.parse(n[w],w,tn);if(!T)return null;const D=l.parse(n[w+1],w+1,h);if(!D)return null;m.push([T,D]),h=h||D.type}const x=l.parse(n[n.length-1],n.length-1,h);if(!x)return null;if(!h)throw new Error("Can't infer output type");return new rs(h,m,x)}evaluate(n){for(const[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class ei{constructor(n,l,h,m){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=m}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,on),m=l.parse(n[2],2,lt);if(!h||!m)return null;if(!ue(h.type,[Ae(on),en,on]))return l.error(`Expected first argument to be of type array or string, but found ${Ce(h.type)} instead`);if(n.length===4){const x=l.parse(n[3],3,lt);return x?new ei(h.type,h,m,x):null}return new ei(h.type,h,m)}evaluate(n){const l=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!_e(l,["string","array"]))throw new Er(`Expected first argument to be of type array or string, but found ${Ce(dr(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return l.slice(h,m)}return l.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Jo(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function yl(a,n,l,h){return h.compare(n,l)===0}function is(a,n,l){const h=a!=="=="&&a!=="!=";return class wv{constructor(x,w,T){this.type=tn,this.lhs=x,this.rhs=w,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const T=x[0];let D=w.parse(x[1],1,on);if(!D)return null;if(!Jo(T,D.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${Ce(D.type)}'.`);let O=w.parse(x[2],2,on);if(!O)return null;if(!Jo(T,O.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${Ce(O.type)}'.`);if(D.type.kind!==O.type.kind&&D.type.kind!=="value"&&O.type.kind!=="value")return w.error(`Cannot compare types '${Ce(D.type)}' and '${Ce(O.type)}'.`);h&&(D.type.kind==="value"&&O.type.kind!=="value"?D=new Gr(O.type,[D]):D.type.kind!=="value"&&O.type.kind==="value"&&(O=new Gr(D.type,[O])));let $=null;if(x.length===4){if(D.type.kind!=="string"&&O.type.kind!=="string"&&D.type.kind!=="value"&&O.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if($=w.parse(x[3],3,Xn),!$)return null}return new wv(D,O,$)}evaluate(x){const w=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(h&&this.hasUntypedArgument){const D=dr(w),O=dr(T);if(D.kind!==O.kind||D.kind!=="string"&&D.kind!=="number")throw new Er(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${D.kind}, ${O.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const D=dr(w),O=dr(T);if(D.kind!=="string"||O.kind!=="string")return n(x,w,T)}return this.collator?l(x,w,T,this.collator.evaluate(x)):n(x,w,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Ks=is("==",function(a,n,l){return n===l},yl),di=is("!=",function(a,n,l){return n!==l},function(a,n,l,h){return!yl(0,n,l,h)}),Ol=is("<",function(a,n,l){return n<l},function(a,n,l,h){return h.compare(n,l)<0}),vl=is(">",function(a,n,l){return n>l},function(a,n,l,h){return h.compare(n,l)>0}),Qo=is("<=",function(a,n,l){return n<=l},function(a,n,l,h){return h.compare(n,l)<=0}),Bs=is(">=",function(a,n,l){return n>=l},function(a,n,l,h){return h.compare(n,l)>=0});class li{constructor(n,l,h,m,x){this.type=en,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const h=l.parse(n[1],1,lt);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=l.parse(m.locale,1,en),!x))return null;let w=null;if(m.currency&&(w=l.parse(m.currency,1,en),!w))return null;let T=null;if(m["min-fraction-digits"]&&(T=l.parse(m["min-fraction-digits"],1,lt),!T))return null;let D=null;return m["max-fraction-digits"]&&(D=l.parse(m["max-fraction-digits"],1,lt),!D)?null:new li(h,x,w,T,D)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class rt{constructor(n){this.type=ke,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const m=[];let x=!1;for(let w=1;w<=n.length-1;++w){const T=n[w];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let D=null;if(T["font-scale"]&&(D=l.parse(T["font-scale"],1,lt),!D))return null;let O=null;if(T["text-font"]&&(O=l.parse(T["text-font"],1,Ae(en)),!O))return null;let $=null;if(T["text-color"]&&($=l.parse(T["text-color"],1,wr),!$))return null;const H=m[m.length-1];H.scale=D,H.font=O,H.textColor=$}else{const D=l.parse(n[w],1,on);if(!D)return null;const O=D.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:D,scale:null,font:null,textColor:null})}}return new rt(m)}evaluate(n){return new Un(this.sections.map(l=>{const h=l.content.evaluate(n);return dr(h)===ae?new fi("",h,null,null,null):new fi(Fn(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class kn{constructor(n){this.type=ae,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const h=l.parse(n[1],1,en);return h?new kn(h):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),h=Pn.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Gn{constructor(n){this.type=lt,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Ce(h.type)} instead.`):new Gn(h):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Er(`Expected value to be of type string or array, but found ${Ce(dr(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const pi={"==":Ks,"!=":di,">":vl,"<":Ol,">=":Bs,"<=":Qo,array:Gr,at:ns,boolean:Gr,case:rs,coalesce:La,collator:ma,format:rt,image:kn,in:si,"index-of":Ra,interpolate:ii,"interpolate-hcl":ii,"interpolate-lab":ii,length:Gn,let:Qr,literal:ni,match:oi,number:Gr,"number-format":li,object:Gr,slice:ei,step:Lr,string:Gr,"to-boolean":Ci,"to-color":Ci,"to-number":Ci,"to-string":Ci,var:Ws,within:ts};function ya(a,[n,l,h,m]){n=n.evaluate(a),l=l.evaluate(a),h=h.evaluate(a);const x=m?m.evaluate(a):1,w=St(n,l,h,x);if(w)throw new Er(w);return new $n(n/255,l/255,h/255,x,!1)}function _r(a,n){return a in n}function Ft(a,n){const l=n[a];return l===void 0?null:l}function Sr(a){return{type:a}}function go(a){return{result:"success",value:a}}function Ba(a){return{result:"error",value:a}}function Oa(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function el(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function _o(a){return!!a.expression&&a.expression.interpolated}function et(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function pn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Na(a){return a}function jn(a,n){const l=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",m=h||!(h||a.property!==void 0),x=a.type||(_o(n)?"exponential":"interval");if(l||n.type==="padding"){const $=l?$n.parse:Bn.parse;(a=Vn({},a)).stops&&(a.stops=a.stops.map(H=>[H[0],$(H[1])])),a.default=$(a.default?a.default:n.default)}if(a.colorSpace&&(w=a.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var w;let T,D,O;if(x==="exponential")T=Fa;else if(x==="interval")T=yr;else if(x==="categorical"){T=gr,D=Object.create(null);for(const $ of a.stops)D[$[0]]=$[1];O=typeof a.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);T=va}if(h){const $={},H=[];for(let he=0;he<a.stops.length;he++){const Ee=a.stops[he],De=Ee[0].zoom;$[De]===void 0&&($[De]={zoom:De,type:a.type,property:a.property,default:a.default,stops:[]},H.push(De)),$[De].stops.push([Ee[0].value,Ee[1]])}const ie=[];for(const he of H)ie.push([$[he].zoom,jn($[he],n)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:ii.interpolationFactor.bind(void 0,ce),zoomStops:ie.map(he=>he[0]),evaluate:({zoom:he},Ee)=>Fa({stops:ie,base:a.base},n,he).evaluate(he,Ee)}}if(m){const $=x==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:ii.interpolationFactor.bind(void 0,$),zoomStops:a.stops.map(H=>H[0]),evaluate:({zoom:H})=>T(a,n,H,D,O)}}return{kind:"source",evaluate($,H){const ie=H&&H.properties?H.properties[a.property]:void 0;return ie===void 0?la(a.default,n.default):T(a,n,ie,D,O)}}}function la(a,n,l){return a!==void 0?a:n!==void 0?n:l!==void 0?l:void 0}function gr(a,n,l,h,m){return la(typeof l===m?h[l]:void 0,a.default,n.default)}function yr(a,n,l){if(et(l)!=="number")return la(a.default,n.default);const h=a.stops.length;if(h===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[h-1][0])return a.stops[h-1][1];const m=Rs(a.stops.map(x=>x[0]),l);return a.stops[m][1]}function Fa(a,n,l){const h=a.base!==void 0?a.base:1;if(et(l)!=="number")return la(a.default,n.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const x=Rs(a.stops.map($=>$[0]),l),w=function($,H,ie,ce){const he=ce-ie,Ee=$-ie;return he===0?0:H===1?Ee/he:(Math.pow(H,Ee)-1)/(Math.pow(H,he)-1)}(l,h,a.stops[x][0],a.stops[x+1][0]),T=a.stops[x][1],D=a.stops[x+1][1],O=Ri[n.type]||Na;return typeof T.evaluate=="function"?{evaluate(...$){const H=T.evaluate.apply(void 0,$),ie=D.evaluate.apply(void 0,$);if(H!==void 0&&ie!==void 0)return O(H,ie,w,a.colorSpace)}}:O(T,D,w,a.colorSpace)}function va(a,n,l){switch(n.type){case"color":l=$n.parse(l);break;case"formatted":l=Un.fromString(l.toString());break;case"resolvedImage":l=Pn.fromString(l.toString());break;case"padding":l=Bn.parse(l);break;default:et(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return la(l,a.default,n.default)}ri.register(pi,{error:[{kind:"error"},[en],(a,[n])=>{throw new Er(n.evaluate(a))}],typeof:[en,[on],(a,[n])=>Ce(dr(n.evaluate(a)))],"to-rgba":[Ae(lt,4),[wr],(a,[n])=>{const[l,h,m,x]=n.evaluate(a).rgb;return[255*l,255*h,255*m,x]}],rgb:[wr,[lt,lt,lt],ya],rgba:[wr,[lt,lt,lt,lt],ya],has:{type:tn,overloads:[[[en],(a,[n])=>_r(n.evaluate(a),a.properties())],[[en,mr],(a,[n,l])=>_r(n.evaluate(a),l.evaluate(a))]]},get:{type:on,overloads:[[[en],(a,[n])=>Ft(n.evaluate(a),a.properties())],[[en,mr],(a,[n,l])=>Ft(n.evaluate(a),l.evaluate(a))]]},"feature-state":[on,[en],(a,[n])=>Ft(n.evaluate(a),a.featureState||{})],properties:[mr,[],a=>a.properties()],"geometry-type":[en,[],a=>a.geometryType()],id:[on,[],a=>a.id()],zoom:[lt,[],a=>a.globals.zoom],"heatmap-density":[lt,[],a=>a.globals.heatmapDensity||0],"line-progress":[lt,[],a=>a.globals.lineProgress||0],accumulated:[on,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[lt,Sr(lt),(a,n)=>{let l=0;for(const h of n)l+=h.evaluate(a);return l}],"*":[lt,Sr(lt),(a,n)=>{let l=1;for(const h of n)l*=h.evaluate(a);return l}],"-":{type:lt,overloads:[[[lt,lt],(a,[n,l])=>n.evaluate(a)-l.evaluate(a)],[[lt],(a,[n])=>-n.evaluate(a)]]},"/":[lt,[lt,lt],(a,[n,l])=>n.evaluate(a)/l.evaluate(a)],"%":[lt,[lt,lt],(a,[n,l])=>n.evaluate(a)%l.evaluate(a)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(a,[n,l])=>Math.pow(n.evaluate(a),l.evaluate(a))],sqrt:[lt,[lt],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[lt,[lt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[lt,[lt],(a,[n])=>Math.log(n.evaluate(a))],log2:[lt,[lt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[lt,[lt],(a,[n])=>Math.sin(n.evaluate(a))],cos:[lt,[lt],(a,[n])=>Math.cos(n.evaluate(a))],tan:[lt,[lt],(a,[n])=>Math.tan(n.evaluate(a))],asin:[lt,[lt],(a,[n])=>Math.asin(n.evaluate(a))],acos:[lt,[lt],(a,[n])=>Math.acos(n.evaluate(a))],atan:[lt,[lt],(a,[n])=>Math.atan(n.evaluate(a))],min:[lt,Sr(lt),(a,n)=>Math.min(...n.map(l=>l.evaluate(a)))],max:[lt,Sr(lt),(a,n)=>Math.max(...n.map(l=>l.evaluate(a)))],abs:[lt,[lt],(a,[n])=>Math.abs(n.evaluate(a))],round:[lt,[lt],(a,[n])=>{const l=n.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[lt,[lt],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[lt,[lt],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[tn,[en,on],(a,[n,l])=>a.properties()[n.value]===l.value],"filter-id-==":[tn,[on],(a,[n])=>a.id()===n.value],"filter-type-==":[tn,[en],(a,[n])=>a.geometryType()===n.value],"filter-<":[tn,[en,on],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<m}],"filter-id-<":[tn,[on],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[tn,[en,on],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>m}],"filter-id->":[tn,[on],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[tn,[en,on],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[tn,[on],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[tn,[en,on],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[tn,[on],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[tn,[on],(a,[n])=>n.value in a.properties()],"filter-has-id":[tn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[tn,[Ae(en)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[tn,[Ae(on)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[tn,[en,Ae(on)],(a,[n,l])=>l.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[tn,[en,Ae(on)],(a,[n,l])=>function(h,m,x,w){for(;x<=w;){const T=x+w>>1;if(m[T]===h)return!0;m[T]>h?w=T-1:x=T+1}return!1}(a.properties()[n.value],l.value,0,l.value.length-1)],all:{type:tn,overloads:[[[tn,tn],(a,[n,l])=>n.evaluate(a)&&l.evaluate(a)],[Sr(tn),(a,n)=>{for(const l of n)if(!l.evaluate(a))return!1;return!0}]]},any:{type:tn,overloads:[[[tn,tn],(a,[n,l])=>n.evaluate(a)||l.evaluate(a)],[Sr(tn),(a,n)=>{for(const l of n)if(l.evaluate(a))return!0;return!1}]]},"!":[tn,[tn],(a,[n])=>!n.evaluate(a)],"is-supported-script":[tn,[en],(a,[n])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(n.evaluate(a))}],upcase:[en,[en],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[en,[en],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[en,Sr(on),(a,n)=>n.map(l=>Fn(l.evaluate(a))).join("")],"resolved-locale":[en,[Xn],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Va{constructor(n,l){var h;this.expression=n,this._warningHistory={},this._evaluator=new Xr,this._defaultValue=l?(h=l).type==="color"&&pn(h.default)?new $n(0,0,0,0):h.type==="color"?$n.parse(h.default)||null:h.type==="padding"?Bn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Bt.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,m,x,w){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,m,x,w){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Er(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function as(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in pi}function na(a,n){const l=new wi(pi,bs,[],n?function(m){const x={color:wr,string:en,number:lt,enum:en,boolean:tn,formatted:ke,padding:X,resolvedImage:ae,variableAnchorOffsetCollection:me};return m.type==="array"?Ae(x[m.value]||on,m.length):x[m.type]}(n):void 0),h=l.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?go(new Va(h,n)):Ba(l.errors)}class $a{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!Li(l.expression)}evaluateWithoutErrorHandling(n,l,h,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,x,w)}evaluate(n,l,h,m,x,w){return this._styleExpression.evaluate(n,l,h,m,x,w)}}class ba{constructor(n,l,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!Li(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,l,h,m,x,w){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,x,w)}evaluate(n,l,h,m,x,w){return this._styleExpression.evaluate(n,l,h,m,x,w)}interpolationFactor(n,l,h){return this.interpolationType?ii.interpolationFactor(this.interpolationType,n,l,h):0}}function ua(a,n){const l=na(a,n);if(l.result==="error")return l;const h=l.value.expression,m=xs(h);if(!m&&!Oa(n))return Ba([new He("","data expressions not supported")]);const x=Ls(h,["zoom"]);if(!x&&!el(n))return Ba([new He("","zoom expressions not supported")]);const w=ca(h);return w||x?w instanceof He?Ba([w]):w instanceof ii&&!_o(n)?Ba([new He("",'"interpolate" expressions cannot be used with this property')]):go(w?new ba(m?"camera":"composite",l.value,w.labels,w instanceof ii?w.interpolation:void 0):new $a(m?"constant":"source",l.value)):Ba([new He("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ua{constructor(n,l){this._parameters=n,this._specification=l,Vn(this,jn(this._parameters,this._specification))}static deserialize(n){return new Ua(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ca(a){let n=null;if(a instanceof Qr)n=ca(a.result);else if(a instanceof La){for(const l of a.args)if(n=ca(l),n)break}else(a instanceof Lr||a instanceof ii)&&a.input instanceof ri&&a.input.name==="zoom"&&(n=a);return n instanceof He||a.eachChild(l=>{const h=ca(l);h instanceof He?n=h:!n&&h?n=new He("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new He("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Bi(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Bi(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ws={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ks(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Bi(a)||(a=Oi(a));const n=na(a,ws);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,m)=>n.value.evaluate(l,h,{},m),needGeometry:ss(a)}}function ja(a,n){return a<n?-1:a>n?1:0}function ss(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(ss(a[n]))return!0;return!1}function Oi(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Yi(a[1],a[2],"=="):n==="!="?Pi(Yi(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Yi(a[1],a[2],n):n==="any"?(l=a.slice(1),["any"].concat(l.map(Oi))):n==="all"?["all"].concat(a.slice(1).map(Oi)):n==="none"?["all"].concat(a.slice(1).map(Oi).map(Pi)):n==="in"?Es(a[1],a.slice(2)):n==="!in"?Pi(Es(a[1],a.slice(2))):n==="has"?os(a[1]):n==="!has"?Pi(os(a[1])):n!=="within"||a;var l}function Yi(a,n,l){switch(a){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,a,n]}}function Es(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",a,["literal",n.sort(ja)]]:["filter-in-small",a,["literal",n]]}}function os(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Pi(a){return["!",a]}function Xs(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const x of a)m+=`${Xs(x)},`;return`${m}]`}const l=Object.keys(a).sort();let h="{";for(let m=0;m<l.length;m++)h+=`${JSON.stringify(l[m])}:${Xs(a[l[m]])},`;return`${h}}`}function Ys(a){let n="";for(const l of Et)n+=`/${Xs(a[l])}`;return n}function ls(a){const n=a.value;return n?[new vt(a.key,n,"constants have been deprecated as of v8")]:[]}function Rr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function us(a){if(Array.isArray(a))return a.map(us);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const l in a)n[l]=us(a[l]);return n}return Rr(a)}function qn(a){const n=a.key,l=a.value,h=a.valueSpec||{},m=a.objectElementValidators||{},x=a.style,w=a.styleSpec,T=a.validateSpec;let D=[];const O=et(l);if(O!=="object")return[new vt(n,l,`object expected, ${O} found`)];for(const $ in l){const H=$.split(".")[0],ie=h[H]||h["*"];let ce;if(m[H])ce=m[H];else if(h[H])ce=T;else if(m["*"])ce=m["*"];else{if(!h["*"]){D.push(new vt(n,l[$],`unknown property "${$}"`));continue}ce=T}D=D.concat(ce({key:(n&&`${n}.`)+$,value:l[$],valueSpec:ie,style:x,styleSpec:w,object:l,objectKey:$,validateSpec:T},l))}for(const $ in h)m[$]||h[$].required&&h[$].default===void 0&&l[$]===void 0&&D.push(new vt(n,l,`missing required property "${$}"`));return D}function yo(a){const n=a.value,l=a.valueSpec,h=a.style,m=a.styleSpec,x=a.key,w=a.arrayElementValidator||a.validateSpec;if(et(n)!=="array")return[new vt(x,n,`array expected, ${et(n)} found`)];if(l.length&&n.length!==l.length)return[new vt(x,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new vt(x,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let T={type:l.value,values:l.values};m.$version<7&&(T.function=l.function),et(l.value)==="object"&&(T=l.value);let D=[];for(let O=0;O<n.length;O++)D=D.concat(w({array:n,arrayIndex:O,value:n[O],valueSpec:T,validateSpec:a.validateSpec,style:h,styleSpec:m,key:`${x}[${O}]`}));return D}function Lo(a){const n=a.key,l=a.value,h=a.valueSpec;let m=et(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new vt(n,l,`number expected, ${m} found`)]:"minimum"in h&&l<h.minimum?[new vt(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new vt(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Os(a){const n=a.valueSpec,l=Rr(a.value.type);let h,m,x,w={};const T=l!=="categorical"&&a.value.property===void 0,D=!T,O=et(a.value.stops)==="array"&&et(a.value.stops[0])==="array"&&et(a.value.stops[0][0])==="object",$=qn({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(ce){if(l==="identity")return[new vt(ce.key,ce.value,'identity function may not have a "stops" property')];let he=[];const Ee=ce.value;return he=he.concat(yo({key:ce.key,value:Ee,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:H})),et(Ee)==="array"&&Ee.length===0&&he.push(new vt(ce.key,Ee,"array must have at least one stop")),he},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return l==="identity"&&T&&$.push(new vt(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||$.push(new vt(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!_o(a.valueSpec)&&$.push(new vt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(D&&!Oa(a.valueSpec)?$.push(new vt(a.key,a.value,"property functions not supported")):T&&!el(a.valueSpec)&&$.push(new vt(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!O||a.value.property!==void 0||$.push(new vt(a.key,a.value,'"property" property is required')),$;function H(ce){let he=[];const Ee=ce.value,De=ce.key;if(et(Ee)!=="array")return[new vt(De,Ee,`array expected, ${et(Ee)} found`)];if(Ee.length!==2)return[new vt(De,Ee,`array length 2 expected, length ${Ee.length} found`)];if(O){if(et(Ee[0])!=="object")return[new vt(De,Ee,`object expected, ${et(Ee[0])} found`)];if(Ee[0].zoom===void 0)return[new vt(De,Ee,"object stop key must have zoom")];if(Ee[0].value===void 0)return[new vt(De,Ee,"object stop key must have value")];if(x&&x>Rr(Ee[0].zoom))return[new vt(De,Ee[0].zoom,"stop zoom values must appear in ascending order")];Rr(Ee[0].zoom)!==x&&(x=Rr(Ee[0].zoom),m=void 0,w={}),he=he.concat(qn({key:`${De}[0]`,value:Ee[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Lo,value:ie}}))}else he=he.concat(ie({key:`${De}[0]`,value:Ee[0],validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},Ee));return as(us(Ee[1]))?he.concat([new vt(`${De}[1]`,Ee[1],"expressions are not allowed in function stops.")]):he.concat(ce.validateSpec({key:`${De}[1]`,value:Ee[1],valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function ie(ce,he){const Ee=et(ce.value),De=Rr(ce.value),Be=ce.value!==null?ce.value:he;if(h){if(Ee!==h)return[new vt(ce.key,Be,`${Ee} stop domain type must match previous stop domain type ${h}`)]}else h=Ee;if(Ee!=="number"&&Ee!=="string"&&Ee!=="boolean")return[new vt(ce.key,Be,"stop domain value must be a number, string, or boolean")];if(Ee!=="number"&&l!=="categorical"){let Ke=`number expected, ${Ee} found`;return Oa(n)&&l===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(ce.key,Be,Ke)]}return l!=="categorical"||Ee!=="number"||isFinite(De)&&Math.floor(De)===De?l!=="categorical"&&Ee==="number"&&m!==void 0&&De<m?[new vt(ce.key,Be,"stop domain values must appear in ascending order")]:(m=De,l==="categorical"&&De in w?[new vt(ce.key,Be,"stop domain values must be unique")]:(w[De]=!0,[])):[new vt(ce.key,Be,`integer expected, found ${De}`)]}}function Js(a){const n=(a.expressionContext==="property"?ua:na)(us(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new vt(`${a.key}${h.key}`,a.value,h.message));const l=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new vt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Li(l))return[new vt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Li(l))return[new vt(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Ls(l,["zoom","feature-state"]))return[new vt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!xs(l))return[new vt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ro(a){const n=a.key,l=a.value,h=a.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Rr(l))===-1&&m.push(new vt(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Rr(l))===-1&&m.push(new vt(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function bl(a){return Bi(us(a.value))?Js(Vn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rh(a)}function rh(a){const n=a.value,l=a.key;if(et(n)!=="array")return[new vt(l,n,`array expected, ${et(n)} found`)];const h=a.styleSpec;let m,x=[];if(n.length<1)return[new vt(l,n,"filter array must have at least 1 element")];switch(x=x.concat(Ro({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),Rr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Rr(n[1])==="$type"&&x.push(new vt(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new vt(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=et(n[1]),m!=="string"&&x.push(new vt(`${l}[1]`,n[1],`string expected, ${m} found`)));for(let w=2;w<n.length;w++)m=et(n[w]),Rr(n[1])==="$type"?x=x.concat(Ro({key:`${l}[${w}]`,value:n[w],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new vt(`${l}[${w}]`,n[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)x=x.concat(rh({key:`${l}[${w}]`,value:n[w],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=et(n[1]),n.length!==2?x.push(new vt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new vt(`${l}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=et(n[1]),n.length!==2?x.push(new vt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&x.push(new vt(`${l}[1]`,n[1],`object expected, ${m} found`))}return x}function ih(a,n){const l=a.key,h=a.validateSpec,m=a.style,x=a.styleSpec,w=a.value,T=a.objectKey,D=x[`${n}_${a.layerType}`];if(!D)return[];const O=T.match(/^(.*)-transition$/);if(n==="paint"&&O&&D[O[1]]&&D[O[1]].transition)return h({key:l,value:w,valueSpec:x.transition,style:m,styleSpec:x});const $=a.valueSpec||D[T];if(!$)return[new vt(l,w,`unknown property "${T}"`)];let H;if(et(w)==="string"&&Oa($)&&!$.tokens&&(H=/^{([^}]+)}$/.exec(w)))return[new vt(l,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const ie=[];return a.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&ie.push(new vt(l,w,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&pn(us(w))&&Rr(w.type)==="identity"&&ie.push(new vt(l,w,'"text-font" does not support identity functions'))),ie.concat(h({key:a.key,value:w,valueSpec:$,style:m,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:T}))}function ah(a){return ih(a,"paint")}function sh(a){return ih(a,"layout")}function oh(a){let n=[];const l=a.value,h=a.key,m=a.style,x=a.styleSpec;l.type||l.ref||n.push(new vt(h,l,'either "type" or "ref" is required'));let w=Rr(l.type);const T=Rr(l.ref);if(l.id){const D=Rr(l.id);for(let O=0;O<a.arrayIndex;O++){const $=m.layers[O];Rr($.id)===D&&n.push(new vt(h,l.id,`duplicate layer id "${l.id}", previously used at line ${$.id.__line__}`))}}if("ref"in l){let D;["type","source","source-layer","filter","layout"].forEach(O=>{O in l&&n.push(new vt(h,l[O],`"${O}" is prohibited for ref layers`))}),m.layers.forEach(O=>{Rr(O.id)===T&&(D=O)}),D?D.ref?n.push(new vt(h,l.ref,"ref cannot reference another ref layer")):w=Rr(D.type):n.push(new vt(h,l.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(l.source){const D=m.sources&&m.sources[l.source],O=D&&Rr(D.type);D?O==="vector"&&w==="raster"?n.push(new vt(h,l.source,`layer "${l.id}" requires a raster source`)):O!=="raster-dem"&&w==="hillshade"?n.push(new vt(h,l.source,`layer "${l.id}" requires a raster-dem source`)):O==="raster"&&w!=="raster"?n.push(new vt(h,l.source,`layer "${l.id}" requires a vector source`)):O!=="vector"||l["source-layer"]?O==="raster-dem"&&w!=="hillshade"?n.push(new vt(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!l.paint||!l.paint["line-gradient"]||O==="geojson"&&D.lineMetrics||n.push(new vt(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new vt(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new vt(h,l.source,`source "${l.source}" not found`))}else n.push(new vt(h,l,'missing required property "source"'));return n=n.concat(qn({key:h,value:l,valueSpec:x.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:l.type,valueSpec:x.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:bl,layout:D=>qn({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":O=>sh(Vn({layerType:w},O))}}),paint:D=>qn({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":O=>ah(Vn({layerType:w},O))}})}})),n}function Qs(a){const n=a.value,l=a.key,h=et(n);return h!=="string"?[new vt(l,n,`string expected, ${h} found`)]:[]}const Nl={promoteId:function({key:a,value:n}){if(et(n)==="string")return Qs({key:a,value:n});{const l=[];for(const h in n)l.push(...Qs({key:`${a}.${h}`,value:n[h]}));return l}}};function cs(a){const n=a.value,l=a.key,h=a.styleSpec,m=a.style,x=a.validateSpec;if(!n.type)return[new vt(l,n,'"type" is required')];const w=Rr(n.type);let T;switch(w){case"vector":case"raster":return T=qn({key:l,value:n,valueSpec:h[`source_${w.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Nl,validateSpec:x}),T;case"raster-dem":return T=function(D){var O;const $=(O=D.sourceName)!==null&&O!==void 0?O:"",H=D.value,ie=D.styleSpec,ce=ie.source_raster_dem,he=D.style;let Ee=[];const De=et(H);if(H===void 0)return Ee;if(De!=="object")return Ee.push(new vt("source_raster_dem",H,`object expected, ${De} found`)),Ee;const Be=Rr(H.encoding)==="custom",Ke=["redFactor","greenFactor","blueFactor","baseShift"],Ue=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const Ye in H)!Be&&Ke.includes(Ye)?Ee.push(new vt(Ye,H[Ye],`In "${$}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ue} encoding found`)):ce[Ye]?Ee=Ee.concat(D.validateSpec({key:Ye,value:H[Ye],valueSpec:ce[Ye],validateSpec:D.validateSpec,style:he,styleSpec:ie})):Ee.push(new vt(Ye,H[Ye],`unknown property "${Ye}"`));return Ee}({sourceName:l,value:n,style:a.style,styleSpec:h,validateSpec:x}),T;case"geojson":if(T=qn({key:l,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:x,objectElementValidators:Nl}),n.cluster)for(const D in n.clusterProperties){const[O,$]=n.clusterProperties[D],H=typeof O=="string"?[O,["accumulated"],["get",D]]:O;T.push(...Js({key:`${l}.${D}.map`,value:$,expressionContext:"cluster-map"})),T.push(...Js({key:`${l}.${D}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return T;case"video":return qn({key:l,value:n,valueSpec:h.source_video,style:m,validateSpec:x,styleSpec:h});case"image":return qn({key:l,value:n,valueSpec:h.source_image,style:m,validateSpec:x,styleSpec:h});case"canvas":return[new vt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ro({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Fl(a){const n=a.value,l=a.styleSpec,h=l.light,m=a.style;let x=[];const w=et(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new vt("light",n,`object expected, ${w} found`)]),x;for(const T in n){const D=T.match(/^(.*)-transition$/);x=x.concat(D&&h[D[1]]&&h[D[1]].transition?a.validateSpec({key:T,value:n[T],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):h[T]?a.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new vt(T,n[T],`unknown property "${T}"`)])}return x}function lh(a){const n=a.value,l=a.styleSpec,h=l.terrain,m=a.style;let x=[];const w=et(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new vt("terrain",n,`object expected, ${w} found`)]),x;for(const T in n)x=x.concat(h[T]?a.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new vt(T,n[T],`unknown property "${T}"`)]);return x}function uh(a){let n=[];const l=a.value,h=a.key;if(Array.isArray(l)){const m=[],x=[];for(const w in l)l[w].id&&m.includes(l[w].id)&&n.push(new vt(h,l,`all the sprites' ids must be unique, but ${l[w].id} is duplicated`)),m.push(l[w].id),l[w].url&&x.includes(l[w].url)&&n.push(new vt(h,l,`all the sprites' URLs must be unique, but ${l[w].url} is duplicated`)),x.push(l[w].url),n=n.concat(qn({key:`${h}[${w}]`,value:l[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Qs({key:h,value:l})}const ch={"*":()=>[],array:yo,boolean:function(a){const n=a.value,l=a.key,h=et(n);return h!=="boolean"?[new vt(l,n,`boolean expected, ${h} found`)]:[]},number:Lo,color:function(a){const n=a.key,l=a.value,h=et(l);return h!=="string"?[new vt(n,l,`color expected, ${h} found`)]:$n.parse(String(l))?[]:[new vt(n,l,`color expected, "${l}" found`)]},constants:ls,enum:Ro,filter:bl,function:Os,layer:oh,object:qn,source:cs,light:Fl,terrain:lh,string:Qs,formatted:function(a){return Qs(a).length===0?[]:Js(a)},resolvedImage:function(a){return Qs(a).length===0?[]:Js(a)},padding:function(a){const n=a.key,l=a.value;if(et(l)==="array"){if(l.length<1||l.length>4)return[new vt(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let m=[];for(let x=0;x<l.length;x++)m=m.concat(a.validateSpec({key:`${n}[${x}]`,value:l[x],validateSpec:a.validateSpec,valueSpec:h}));return m}return Lo({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,l=a.value,h=et(l),m=a.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new vt(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<l.length;w+=2)x=x.concat(Ro({key:`${n}[${w}]`,value:l[w],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(yo({key:`${n}[${w+1}]`,value:l[w+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return x},sprite:uh};function Bo(a){const n=a.value,l=a.valueSpec,h=a.styleSpec;return a.validateSpec=Bo,l.expression&&pn(Rr(n))?Os(a):l.expression&&as(us(n))?Js(a):l.type&&ch[l.type]?ch[l.type](a):qn(Vn({},a,{valueSpec:l.type?h[l.type]:l}))}function hh(a){const n=a.value,l=a.key,h=Qs(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new vt(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new vt(l,n,'"glyphs" url must include a "{range}" token'))),h}function Ss(a,n=be){let l=[];return l=l.concat(Bo({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:Bo,objectElementValidators:{glyphs:hh,"*":()=>[]}})),a.constants&&(l=l.concat(ls({key:"constants",value:a.constants}))),hu(l)}function vo(a){return function(n){return a({...n,validateSpec:Bo})}}function hu(a){return[].concat(a).sort((n,l)=>n.line-l.line)}function bo(a){return function(...n){return hu(a.apply(this,n))}}Ss.source=bo(vo(cs)),Ss.sprite=bo(vo(uh)),Ss.glyphs=bo(vo(hh)),Ss.light=bo(vo(Fl)),Ss.terrain=bo(vo(lh)),Ss.layer=bo(vo(oh)),Ss.filter=bo(vo(bl)),Ss.paintProperty=bo(vo(ah)),Ss.layoutProperty=bo(vo(sh));const xo=Ss,od=xo.light,Zu=xo.paintProperty,fh=xo.layoutProperty;function fu(a,n){let l=!1;if(n&&n.length)for(const h of n)a.fire(new kt(new Error(h.message))),l=!0;return l}class xl{constructor(n,l,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const w=new Int32Array(this.arrayBuffer);n=w[0],this.d=(l=w[1])+2*(h=w[2]);for(let D=0;D<this.d*this.d;D++){const O=w[3+D],$=w[3+D+1];m.push(O===$?null:w.subarray(O,$))}const T=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;const x=h/l*n;this.min=-x,this.max=n+x}insert(n,l,h,m,x){this._forEachCell(l,h,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,m,x,w){this.cells[x].push(w)}query(n,l,h,m,x){const w=this.min,T=this.max;if(n<=w&&l<=w&&T<=h&&T<=m&&!x)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(n,l,h,m,this._queryCell,D,{},x),D}}_queryCell(n,l,h,m,x,w,T,D){const O=this.cells[x];if(O!==null){const $=this.keys,H=this.bboxes;for(let ie=0;ie<O.length;ie++){const ce=O[ie];if(T[ce]===void 0){const he=4*ce;(D?D(H[he+0],H[he+1],H[he+2],H[he+3]):n<=H[he+2]&&l<=H[he+3]&&h>=H[he+0]&&m>=H[he+1])?(T[ce]=!0,w.push($[ce])):T[ce]=!1}}}}_forEachCell(n,l,h,m,x,w,T,D){const O=this._convertToCellCoord(n),$=this._convertToCellCoord(l),H=this._convertToCellCoord(h),ie=this._convertToCellCoord(m);for(let ce=O;ce<=H;ce++)for(let he=$;he<=ie;he++){const Ee=this.d*he+ce;if((!D||D(this._convertFromCellCoord(ce),this._convertFromCellCoord(he),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(he+1)))&&x.call(this,n,l,h,m,Ee,w,T,D))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,l=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const m=new Int32Array(l+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=l;for(let w=0;w<n.length;w++){const T=n[w];m[3+w]=x,m.set(T,x),x+=T.length}return m[3+n.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+n.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(n,l){const h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new xl(n.buffer)}}const wo={};function mn(a,n,l={}){if(wo[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),wo[a]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}mn("Object",Object),mn("TransferableGridIndex",xl),mn("Color",$n),mn("Error",Error),mn("AJAXError",yn),mn("ResolvedImage",Pn),mn("StylePropertyFunction",Ua),mn("StyleExpression",Va,{omit:["_evaluator"]}),mn("ZoomDependentExpression",ba),mn("ZoomConstantExpression",$a),mn("CompoundExpression",ri,{omit:["_evaluate"]});for(const a in pi)pi[a]._classRegistryKey||mn(`Expression_${a}`,pi[a]);function du(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Oo(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(du(a)||Me(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return n&&n.push(l.buffer),l}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const h of a)l.push(Oo(h,n));return l}if(typeof a=="object"){const l=a.constructor,h=l._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!wo[h])throw new Error(`${h} is not registered.`);const m=l.serialize?l.serialize(a,n):{};if(l.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in a){if(!a.hasOwnProperty(x)||wo[h].omit.indexOf(x)>=0)continue;const w=a[x];m[x]=wo[h].shallow.indexOf(x)>=0?w:Oo(w,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof a)}function wl(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||du(a)||Me(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(wl);if(typeof a=="object"){const n=a.$name||"Object";if(!wo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:l}=wo[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(a);const h=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const x=a[m];h[m]=wo[n].shallow.indexOf(m)>=0?x:wl(x)}return h}throw new Error("can't deserialize object of type "+typeof a)}class dh{constructor(){this.first=!0}update(n,l){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const hn={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Hu(a){for(const n of a)if(Ku(n.charCodeAt(0)))return!0;return!1}function Wu(a){for(const n of a)if(!ld(n.charCodeAt(0)))return!1;return!0}function ld(a){return!(hn.Arabic(a)||hn["Arabic Supplement"](a)||hn["Arabic Extended-A"](a)||hn["Arabic Presentation Forms-A"](a)||hn["Arabic Presentation Forms-B"](a))}function Ku(a){return!(a!==746&&a!==747&&(a<4352||!(hn["Bopomofo Extended"](a)||hn.Bopomofo(a)||hn["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||hn["CJK Compatibility Ideographs"](a)||hn["CJK Compatibility"](a)||hn["CJK Radicals Supplement"](a)||hn["CJK Strokes"](a)||!(!hn["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||hn["CJK Unified Ideographs Extension A"](a)||hn["CJK Unified Ideographs"](a)||hn["Enclosed CJK Letters and Months"](a)||hn["Hangul Compatibility Jamo"](a)||hn["Hangul Jamo Extended-A"](a)||hn["Hangul Jamo Extended-B"](a)||hn["Hangul Jamo"](a)||hn["Hangul Syllables"](a)||hn.Hiragana(a)||hn["Ideographic Description Characters"](a)||hn.Kanbun(a)||hn["Kangxi Radicals"](a)||hn["Katakana Phonetic Extensions"](a)||hn.Katakana(a)&&a!==12540||!(!hn["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!hn["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||hn["Unified Canadian Aboriginal Syllabics"](a)||hn["Unified Canadian Aboriginal Syllabics Extended"](a)||hn["Vertical Forms"](a)||hn["Yijing Hexagram Symbols"](a)||hn["Yi Syllables"](a)||hn["Yi Radicals"](a))))}function ph(a){return!(Ku(a)||function(n){return!!(hn["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||hn["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||hn["Letterlike Symbols"](n)||hn["Number Forms"](n)||hn["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||hn["Control Pictures"](n)&&n!==9251||hn["Optical Character Recognition"](n)||hn["Enclosed Alphanumerics"](n)||hn["Geometric Shapes"](n)||hn["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||hn["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||hn["CJK Symbols and Punctuation"](n)||hn.Katakana(n)||hn["Private Use Area"](n)||hn["CJK Compatibility Forms"](n)||hn["Small Form Variants"](n)||hn["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function mh(a){return a>=1424&&a<=2303||hn["Arabic Presentation Forms-A"](a)||hn["Arabic Presentation Forms-B"](a)}function gh(a,n){return!(!n&&mh(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||hn.Khmer(a))}function ud(a){for(const n of a)if(mh(n.charCodeAt(0)))return!0;return!1}const Xu="deferred",Yu="loading",Ju="loaded";let Qu=null,qa="unavailable",No=null;const Vl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(qa="error"),Qu&&Qu(a)};function ec(){$l.fire(new Ht("pluginStateChange",{pluginStatus:qa,pluginURL:No}))}const $l=new dt,tc=function(){return qa},_h=function(){if(qa!==Xu||!No)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qa=Yu,ec(),No&&xt({url:No},a=>{a?Vl(a):(qa=Ju,ec())})},hs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>qa===Ju||hs.applyArabicShaping!=null,isLoading:()=>qa===Yu,setState(a){if(!Ge())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");qa=a.pluginStatus,No=a.pluginURL},isParsed(){if(!Ge())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return hs.applyArabicShaping!=null&&hs.processBidirectionalText!=null&&hs.processStyledBidirectionalText!=null},getPluginURL(){if(!Ge())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return No}};class Zr{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dh,this.transition={})}isSupportedScript(n){return function(l,h){for(const m of l)if(!gh(m.charCodeAt(0),h))return!1;return!0}(n,hs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class pu{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,m){if(pn(h))return new Ua(h,m);if(as(h)){const x=ua(h,m);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=h;return m.type==="color"&&typeof h=="string"?x=$n.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(x=Bt.parse(h)):x=Bn.parse(h),{kind:"constant",evaluate:()=>x}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class nc{constructor(n){this.property=n,this.value=new pu(n,void 0)}transitioned(n,l){return new vh(this.property,this.value,l,oe({},n.transition,this.transition),n.now)}untransitioned(){return new vh(this.property,this.value,null,{},0)}}class yh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ge(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new nc(this._values[n].property)),this._values[n].value=new pu(this._values[n].property,l===null?void 0:ge(l))}getTransition(n){return ge(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new nc(this._values[n].property)),this._values[n].transition=ge(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h);const m=this.getTransition(l);m!==void 0&&(n[`${l}-transition`]=m)}return n}transitioned(n,l){const h=new bh(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,l._values[m]);return h}untransitioned(){const n=new bh(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class vh{constructor(n,l,h,m,x){this.property=n,this.value=l,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){const m=n.now||0,x=this.value.possiblyEvaluate(n,l,h),w=this.prior;if(w){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return w.possiblyEvaluate(n,l,h);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,l,h),x,function(D){if(D<=0)return 0;if(D>=1)return 1;const O=D*D,$=O*D;return 4*(D<.5?$:3*(D-O)+$-.75)}(T))}}return x}}class bh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){const m=new mu(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(n,l,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class cd{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ge(this._values[n].value)}setValue(n,l){this._values[n]=new pu(this._values[n].property,l===null?void 0:ge(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){const m=new mu(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(n,l,h);return m}}class xa{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,m){return this.property.evaluate(this.value,this.parameters,n,l,h,m)}}class mu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Sn{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){const m=Ri[this.specification.type];return m?m(n,l,h):n}}class zn{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,m){return new xa(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,m)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new xa(this,{kind:"constant",value:void 0},n.parameters);const m=Ri[this.specification.type];if(m){const x=m(n.value.value,l.value.value,h);return new xa(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,l,h,m,x,w){return n.kind==="constant"?n.value:n.evaluate(l,h,m,x,w)}}class Ul extends zn{possiblyEvaluate(n,l,h,m){if(n.value===void 0)return new xa(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const x=n.expression.evaluate(l,null,{},h,m),w=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(w,w,w,l);return new xa(this,{kind:"constant",value:T},l)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new xa(this,{kind:"constant",value:x},l)}return new xa(this,n.expression,l)}evaluate(n,l,h,m,x,w){if(n.kind==="source"){const T=n.evaluate(l,h,m,x,w);return this._calculate(T,T,T,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,m),n.evaluate({zoom:Math.floor(l.zoom)},h,m),n.evaluate({zoom:Math.floor(l.zoom)+1},h,m),l):n.value}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class rc{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(l,null,{},h,m);return this._calculate(x,x,x,l)}return this._calculate(n.expression.evaluate(new Zr(Math.floor(l.zoom-1),l)),n.expression.evaluate(new Zr(Math.floor(l.zoom),l)),n.expression.evaluate(new Zr(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class ic{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){return!!n.expression.evaluate(l,null,{},h,m)}interpolate(){return!1}}class ki{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in n){const h=n[l];h.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new pu(h,void 0),x=this.defaultTransitionablePropertyValues[l]=new nc(h);this.defaultTransitioningPropertyValues[l]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}mn("DataDrivenProperty",zn),mn("DataConstantProperty",Sn),mn("CrossFadedDataDrivenProperty",Ul),mn("CrossFadedProperty",rc),mn("ColorRampProperty",ic);const ac="-transition";class Is extends dt{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new cd(l.layout)),l.paint)){this._transitionablePaint=new yh(l.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mu(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(fh,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(ac)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(Zu,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(ac))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[n],x=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const D=this._transitionablePaint._values[n].value;return D.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(n,T,D)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,m,x={}){return(!x||x.validate!==!1)&&fu(this,n.call(xo,{key:l,layerType:this.type,objectKey:h,value:m,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof xa&&Oa(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const xh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class tl{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ui{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ti(a,n=1){let l=0,h=0;return{members:a.map(m=>{const x=xh[m.type].BYTES_PER_ELEMENT,w=l=kl(l,Math.max(n,x)),T=m.components||1;return h=Math.max(h,x),l+=x*T,{name:m.name,type:m.type,components:T,offset:w}}),size:kl(l,Math.max(h,n)),alignment:n}}function kl(a,n){return Math.ceil(a/n)*n}class jl extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.int16[m+0]=l,this.int16[m+1]=h,n}}jl.prototype.bytesPerElement=4,mn("StructArrayLayout2i4",jl);class ql extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const x=3*n;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=m,n}}ql.prototype.bytesPerElement=6,mn("StructArrayLayout3i6",ql);class nl extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,h,m)}emplace(n,l,h,m,x){const w=4*n;return this.int16[w+0]=l,this.int16[w+1]=h,this.int16[w+2]=m,this.int16[w+3]=x,n}}nl.prototype.bytesPerElement=8,mn("StructArrayLayout4i8",nl);class sc extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,h,m,x,w)}emplace(n,l,h,m,x,w,T){const D=6*n;return this.int16[D+0]=l,this.int16[D+1]=h,this.int16[D+2]=m,this.int16[D+3]=x,this.int16[D+4]=w,this.int16[D+5]=T,n}}sc.prototype.bytesPerElement=12,mn("StructArrayLayout2i4i12",sc);class oc extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,h,m,x,w)}emplace(n,l,h,m,x,w,T){const D=4*n,O=8*n;return this.int16[D+0]=l,this.int16[D+1]=h,this.uint8[O+4]=m,this.uint8[O+5]=x,this.uint8[O+6]=w,this.uint8[O+7]=T,n}}oc.prototype.bytesPerElement=8,mn("StructArrayLayout2i4ub8",oc);class El extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.float32[m+0]=l,this.float32[m+1]=h,n}}El.prototype.bytesPerElement=8,mn("StructArrayLayout2f8",El);class lc extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w,T,D,O,$){const H=this.length;return this.resize(H+1),this.emplace(H,n,l,h,m,x,w,T,D,O,$)}emplace(n,l,h,m,x,w,T,D,O,$,H){const ie=10*n;return this.uint16[ie+0]=l,this.uint16[ie+1]=h,this.uint16[ie+2]=m,this.uint16[ie+3]=x,this.uint16[ie+4]=w,this.uint16[ie+5]=T,this.uint16[ie+6]=D,this.uint16[ie+7]=O,this.uint16[ie+8]=$,this.uint16[ie+9]=H,n}}lc.prototype.bytesPerElement=20,mn("StructArrayLayout10ui20",lc);class uc extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w,T,D,O,$,H,ie){const ce=this.length;return this.resize(ce+1),this.emplace(ce,n,l,h,m,x,w,T,D,O,$,H,ie)}emplace(n,l,h,m,x,w,T,D,O,$,H,ie,ce){const he=12*n;return this.int16[he+0]=l,this.int16[he+1]=h,this.int16[he+2]=m,this.int16[he+3]=x,this.uint16[he+4]=w,this.uint16[he+5]=T,this.uint16[he+6]=D,this.uint16[he+7]=O,this.int16[he+8]=$,this.int16[he+9]=H,this.int16[he+10]=ie,this.int16[he+11]=ce,n}}uc.prototype.bytesPerElement=24,mn("StructArrayLayout4i4ui4i24",uc);class Ir extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const x=3*n;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=m,n}}Ir.prototype.bytesPerElement=12,mn("StructArrayLayout3f12",Ir);class y extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}y.prototype.bytesPerElement=4,mn("StructArrayLayout1ul4",y);class r extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w,T,D,O){const $=this.length;return this.resize($+1),this.emplace($,n,l,h,m,x,w,T,D,O)}emplace(n,l,h,m,x,w,T,D,O,$){const H=10*n,ie=5*n;return this.int16[H+0]=l,this.int16[H+1]=h,this.int16[H+2]=m,this.int16[H+3]=x,this.int16[H+4]=w,this.int16[H+5]=T,this.uint32[ie+3]=D,this.uint16[H+8]=O,this.uint16[H+9]=$,n}}r.prototype.bytesPerElement=20,mn("StructArrayLayout6i1ul2ui20",r);class c extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,n,l,h,m,x,w)}emplace(n,l,h,m,x,w,T){const D=6*n;return this.int16[D+0]=l,this.int16[D+1]=h,this.int16[D+2]=m,this.int16[D+3]=x,this.int16[D+4]=w,this.int16[D+5]=T,n}}c.prototype.bytesPerElement=12,mn("StructArrayLayout2i2i2i12",c);class p extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,m,x)}emplace(n,l,h,m,x,w){const T=4*n,D=8*n;return this.float32[T+0]=l,this.float32[T+1]=h,this.float32[T+2]=m,this.int16[D+6]=x,this.int16[D+7]=w,n}}p.prototype.bytesPerElement=16,mn("StructArrayLayout2f1f2i16",p);class g extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,h,m)}emplace(n,l,h,m,x){const w=12*n,T=3*n;return this.uint8[w+0]=l,this.uint8[w+1]=h,this.float32[T+1]=m,this.float32[T+2]=x,n}}g.prototype.bytesPerElement=12,mn("StructArrayLayout2ub2f12",g);class b extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const x=3*n;return this.uint16[x+0]=l,this.uint16[x+1]=h,this.uint16[x+2]=m,n}}b.prototype.bytesPerElement=6,mn("StructArrayLayout3ui6",b);class C extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be)}emplace(n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be,Ke){const Ue=24*n,Ye=12*n,nt=48*n;return this.int16[Ue+0]=l,this.int16[Ue+1]=h,this.uint16[Ue+2]=m,this.uint16[Ue+3]=x,this.uint32[Ye+2]=w,this.uint32[Ye+3]=T,this.uint32[Ye+4]=D,this.uint16[Ue+10]=O,this.uint16[Ue+11]=$,this.uint16[Ue+12]=H,this.float32[Ye+7]=ie,this.float32[Ye+8]=ce,this.uint8[nt+36]=he,this.uint8[nt+37]=Ee,this.uint8[nt+38]=De,this.uint32[Ye+10]=Be,this.int16[Ue+22]=Ke,n}}C.prototype.bytesPerElement=48,mn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class M extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be,Ke,Ue,Ye,nt,mt,fn,xn,un,rn,Kt,_n){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be,Ke,Ue,Ye,nt,mt,fn,xn,un,rn,Kt,_n)}emplace(n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee,De,Be,Ke,Ue,Ye,nt,mt,fn,xn,un,rn,Kt,_n,Yt){const Ot=32*n,An=16*n;return this.int16[Ot+0]=l,this.int16[Ot+1]=h,this.int16[Ot+2]=m,this.int16[Ot+3]=x,this.int16[Ot+4]=w,this.int16[Ot+5]=T,this.int16[Ot+6]=D,this.int16[Ot+7]=O,this.uint16[Ot+8]=$,this.uint16[Ot+9]=H,this.uint16[Ot+10]=ie,this.uint16[Ot+11]=ce,this.uint16[Ot+12]=he,this.uint16[Ot+13]=Ee,this.uint16[Ot+14]=De,this.uint16[Ot+15]=Be,this.uint16[Ot+16]=Ke,this.uint16[Ot+17]=Ue,this.uint16[Ot+18]=Ye,this.uint16[Ot+19]=nt,this.uint16[Ot+20]=mt,this.uint16[Ot+21]=fn,this.uint16[Ot+22]=xn,this.uint32[An+12]=un,this.float32[An+13]=rn,this.float32[An+14]=Kt,this.uint16[Ot+30]=_n,this.uint16[Ot+31]=Yt,n}}M.prototype.bytesPerElement=64,mn("StructArrayLayout8i15ui1ul2f2ui64",M);class B extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}B.prototype.bytesPerElement=4,mn("StructArrayLayout1f4",B);class F extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const x=3*n;return this.uint16[6*n+0]=l,this.float32[x+1]=h,this.float32[x+2]=m,n}}F.prototype.bytesPerElement=12,mn("StructArrayLayout1ui2f12",F);class U extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const x=4*n;return this.uint32[2*n+0]=l,this.uint16[x+2]=h,this.uint16[x+3]=m,n}}U.prototype.bytesPerElement=8,mn("StructArrayLayout1ul2ui8",U);class q extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.uint16[m+0]=l,this.uint16[m+1]=h,n}}q.prototype.bytesPerElement=4,mn("StructArrayLayout2ui4",q);class le extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}le.prototype.bytesPerElement=2,mn("StructArrayLayout1ui2",le);class Ie extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,h,m)}emplace(n,l,h,m,x){const w=4*n;return this.float32[w+0]=l,this.float32[w+1]=h,this.float32[w+2]=m,this.float32[w+3]=x,n}}Ie.prototype.bytesPerElement=16,mn("StructArrayLayout4f16",Ie);class Se extends tl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new I(this.anchorPointX,this.anchorPointY)}}Se.prototype.size=20;class Pe extends r{get(n){return new Se(this,n)}}mn("CollisionBoxArray",Pe);class ve extends tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ve.prototype.size=48;class Ze extends C{get(n){return new ve(this,n)}}mn("PlacedSymbolArray",Ze);class tt extends tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}tt.prototype.size=64;class Re extends M{get(n){return new tt(this,n)}}mn("SymbolInstanceArray",Re);class We extends B{getoffsetX(n){return this.float32[1*n+0]}}mn("GlyphOffsetArray",We);class it extends ql{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}mn("SymbolLineVertexArray",it);class at extends tl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}at.prototype.size=12;class ft extends F{get(n){return new at(this,n)}}mn("TextAnchorOffsetArray",ft);class Rt extends tl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Rt.prototype.size=8;class yt extends U{get(n){return new Rt(this,n)}}mn("FeatureIndexArray",yt);class jt extends jl{}class bn extends jl{}class sr extends jl{}class nn extends sc{}class Dn extends oc{}class wn extends El{}class Nr extends lc{}class ir extends uc{}class Wn extends Ir{}class or extends y{}class mi extends c{}class $r extends g{}class ra extends b{}class Ni extends q{}const Ei=ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:fs}=Ei;class Hr{constructor(n=[]){this.segments=n}prepareSegment(n,l,h,m){let x=this.segments[this.segments.length-1];return n>Hr.MAX_VERTEX_ARRAY_LENGTH&&ye(`Max vertices per segment is ${Hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!x||x.vertexLength+n>Hr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,m){return new Hr([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function eo(a,n){return 256*(a=Q(Math.floor(a),0,255))+Q(Math.floor(n),0,255)}Hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mn("SegmentVector",Hr);const to=ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fo={exports:{}},rl={exports:{}};rl.exports=function(a,n){var l,h,m,x,w,T,D,O;for(h=a.length-(l=3&a.length),m=n,w=3432918353,T=461845907,O=0;O<h;)D=255&a.charCodeAt(O)|(255&a.charCodeAt(++O))<<8|(255&a.charCodeAt(++O))<<16|(255&a.charCodeAt(++O))<<24,++O,m=27492+(65535&(x=5*(65535&(m=(m^=D=(65535&(D=(D=(65535&D)*w+(((D>>>16)*w&65535)<<16)&4294967295)<<15|D>>>17))*T+(((D>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(D=0,l){case 3:D^=(255&a.charCodeAt(O+2))<<16;case 2:D^=(255&a.charCodeAt(O+1))<<8;case 1:m^=D=(65535&(D=(D=(65535&(D^=255&a.charCodeAt(O)))*w+(((D>>>16)*w&65535)<<16)&4294967295)<<15|D>>>17))*T+(((D>>>16)*T&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Sl=rl.exports,ha={exports:{}};ha.exports=function(a,n){for(var l,h=a.length,m=n^h,x=0;h>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(x)|(255&a.charCodeAt(++x))<<8|(255&a.charCodeAt(++x))<<16|(255&a.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++x;switch(h){case 3:m^=(255&a.charCodeAt(x+2))<<16;case 2:m^=(255&a.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var ia=Sl,wa=ha.exports;Fo.exports=ia,Fo.exports.murmur3=ia,Fo.exports.murmur2=wa;var il=v(Fo.exports);class gi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,m){this.ids.push(Fi(n)),this.positions.push(l,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Fi(n);let h=0,m=this.ids.length-1;for(;h<m;){const w=h+m>>1;this.ids[w]>=l?m=w:h=w+1}const x=[];for(;this.ids[h]===l;)x.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return x}static serialize(n,l){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Ga(h,m,0,h.length-1),l&&l.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const l=new gi;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Fi(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:il(String(a))}function Ga(a,n,l,h){for(;l<h;){const m=a[l+h>>1];let x=l-1,w=h+1;for(;;){do x++;while(a[x]<m);do w--;while(a[w]>m);if(x>=w)break;_i(a,x,w),_i(n,3*x,3*w),_i(n,3*x+1,3*w+1),_i(n,3*x+2,3*w+2)}w-l<h-w?(Ga(a,n,l,w),l=w+1):(Ga(a,n,w+1,h),h=w)}}function _i(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}mn("FeaturePositionMap",gi);class al{constructor(n,l){this.gl=n.gl,this.location=l}}class gu extends al{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class wh extends al{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class kh extends al{constructor(n,l){super(n,l),this.current=$n.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const hd=new Float32Array(16);function cc(a){return[eo(255*a.r,255*a.g),eo(255*a.b,255*a.a)]}class no{constructor(n,l,h){this.value=n,this.uniformNames=l.map(m=>`u_${m}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new kh(n,l):new gu(n,l)}}class sl{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,m){const x=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&n.set(x)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new wh(n,l):new gu(n,l)}}class ro{constructor(n,l,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(x=>({name:`a_${x}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,l,h,m,x){const w=this.paintVertexArray.length,T=this.expression.evaluate(new Zr(0),l,{},m,[],x);this.paintVertexArray.resize(n),this._setPaintValue(w,n,T)}updatePaintArray(n,l,h,m){const x=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,l,x)}_setPaintValue(n,l,h){if(this.type==="color"){const m=cc(h);for(let x=n;x<l;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=n;m<l;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(n,l,h,m,x,w){this.expression=n,this.uniformNames=l.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=l.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(n,l,h,m,x){const w=this.expression.evaluate(new Zr(this.zoom),l,{},m,[],x),T=this.expression.evaluate(new Zr(this.zoom+1),l,{},m,[],x),D=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(D,n,w,T)}updatePaintArray(n,l,h,m){const x=this.expression.evaluate({zoom:this.zoom},h,m),w=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,l,x,w)}_setPaintValue(n,l,h,m){if(this.type==="color"){const x=cc(h),w=cc(m);for(let T=n;T<l;T++)this.paintVertexArray.emplace(T,x[0],x[1],w[0],w[1])}else{for(let x=n;x<l;x++)this.paintVertexArray.emplace(x,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=Q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,l,h){return new gu(n,l)}}class io{constructor(n,l,h,m,x,w){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,l,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,m,x){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(n,l,h,m){if(!m||!h)return;const{min:x,mid:w,max:T}=h,D=m[x],O=m[w],$=m[T];if(D&&O&&$)for(let H=n;H<l;H++)this.zoomInPaintVertexArray.emplace(H,O.tl[0],O.tl[1],O.br[0],O.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],O.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,O.tl[0],O.tl[1],O.br[0],O.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],O.pixelRatio,$.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,to.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,to.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hc{constructor(n,l,h){this.binders={},this._buffers=[];const m=[];for(const x in n.paint._values){if(!h(x))continue;const w=n.paint.get(x);if(!(w instanceof xa&&Oa(w.property.specification)))continue;const T=i2(x,n.type),D=w.value,O=w.property.specification.type,$=w.property.useIntegerZoom,H=w.property.specification["property-type"],ie=H==="cross-faded"||H==="cross-faded-data-driven";if(D.kind==="constant")this.binders[x]=ie?new sl(D.value,T):new no(D.value,T,O),m.push(`/u_${x}`);else if(D.kind==="source"||ie){const ce=tg(x,O,"source");this.binders[x]=ie?new io(D,O,$,l,ce,n.id):new ro(D,T,O,ce),m.push(`/a_${x}`)}else{const ce=tg(x,O,"composite");this.binders[x]=new Ts(D,T,O,$,l,ce),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof ro||l instanceof Ts?l.maxValue:0}populatePaintArrays(n,l,h,m,x){for(const w in this.binders){const T=this.binders[w];(T instanceof ro||T instanceof Ts||T instanceof io)&&T.populatePaintArray(n,l,h,m,x)}}setConstantPatternPositions(n,l){for(const h in this.binders){const m=this.binders[h];m instanceof sl&&m.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,m,x){let w=!1;for(const T in n){const D=l.getPositions(T);for(const O of D){const $=h.feature(O.index);for(const H in this.binders){const ie=this.binders[H];if((ie instanceof ro||ie instanceof Ts||ie instanceof io)&&ie.expression.isStateDependent===!0){const ce=m.paint.get(H);ie.expression=ce.value,ie.updatePaintArray(O.start,O.end,$,n[T],x),w=!0}}}}return w}defines(){const n=[];for(const l in this.binders){const h=this.binders[l];(h instanceof no||h instanceof sl)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof ro||h instanceof Ts)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof io)for(let m=0;m<to.members.length;m++)n.push(to.members[m].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof no||h instanceof sl||h instanceof Ts)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const h=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof no||x instanceof sl||x instanceof Ts){for(const w of x.uniformNames)if(l[w]){const T=x.getBinding(n,l[w],w);h.push({name:w,property:m,binding:T})}}}return h}setUniforms(n,l,h,m){for(const{name:x,property:w,binding:T}of l)this.binders[w].setUniform(T,m,h.get(w),x)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(n&&h instanceof io){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof ro||h instanceof Ts)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const l in this.binders){const h=this.binders[l];(h instanceof ro||h instanceof Ts||h instanceof io)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof ro||l instanceof Ts||l instanceof io)&&l.destroy()}}}class ko{constructor(n,l,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new hc(m,l,h);this.needsUpload=!1,this._featureMap=new gi,this._bufferOffset=0}populatePaintArrays(n,l,h,m,x,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,l,m,x,w);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,m){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,l,x,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function i2(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function tg(a,n,l){const h={color:{source:El,composite:Ie},number:{source:B,composite:El}},m=function(x){return{"line-pattern":{source:Nr,composite:Nr},"fill-pattern":{source:Nr,composite:Nr},"fill-extrusion-pattern":{source:Nr,composite:Nr}}[x]}(a);return m&&m[l]||h[n][l]}mn("ConstantBinder",no),mn("CrossFadedConstantBinder",sl),mn("SourceExpressionBinder",ro),mn("CrossFadedCompositeBinder",io),mn("CompositeExpressionBinder",Ts),mn("ProgramConfiguration",hc,{omit:["_buffers"]}),mn("ProgramConfigurationSet",ko);const Mi=8192,fd=Math.pow(2,14)-1,ng=-fd-1;function Gl(a){const n=Mi/a.extent,l=a.loadGeometry();for(let h=0;h<l.length;h++){const m=l[h];for(let x=0;x<m.length;x++){const w=m[x],T=Math.round(w.x*n),D=Math.round(w.y*n);w.x=Q(T,ng,fd),w.y=Q(D,ng,fd),(T<w.x||T>w.x+1||D<w.y||D>w.y+1)&&ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Zl(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Gl(a):[]}}function Eh(a,n,l,h,m){a.emplaceBack(2*n+(h+1)/2,2*l+(m+1)/2)}class dd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new bn,this.indexArray=new ra,this.segments=new Hr,this.programConfigurations=new ko(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){const m=this.layers[0],x=[];let w=null,T=!1;m.type==="circle"&&(w=m.layout.get("circle-sort-key"),T=!w.isConstant());for(const{feature:D,id:O,index:$,sourceLayerIndex:H}of n){const ie=this.layers[0]._featureFilter.needGeometry,ce=Zl(D,ie);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),ce,h))continue;const he=T?w.evaluate(ce,{},h):void 0,Ee={id:O,properties:D.properties,type:D.type,sourceLayerIndex:H,index:$,geometry:ie?ce.geometry:Gl(D),patterns:{},sortKey:he};x.push(Ee)}T&&x.sort((D,O)=>D.sortKey-O.sortKey);for(const D of x){const{geometry:O,index:$,sourceLayerIndex:H}=D,ie=n[$].feature;this.addFeature(D,O,$,h),l.featureIndex.insert(ie,O,$,H,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,fs),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,m){for(const x of l)for(const w of x){const T=w.x,D=w.y;if(T<0||T>=Mi||D<0||D>=Mi)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=O.vertexLength;Eh(this.layoutVertexArray,T,D,-1,-1),Eh(this.layoutVertexArray,T,D,1,-1),Eh(this.layoutVertexArray,T,D,1,1),Eh(this.layoutVertexArray,T,D,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function rg(a,n){for(let l=0;l<a.length;l++)if(_u(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(_u(a,n[l]))return!0;return!!pd(a,n)}function a2(a,n,l){return!!_u(a,n)||!!md(n,a,l)}function ig(a,n){if(a.length===1)return sg(n,a[0]);for(let l=0;l<n.length;l++){const h=n[l];for(let m=0;m<h.length;m++)if(_u(a,h[m]))return!0}for(let l=0;l<a.length;l++)if(sg(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(pd(a,n[l]))return!0;return!1}function s2(a,n,l){if(a.length>1){if(pd(a,n))return!0;for(let h=0;h<n.length;h++)if(md(n[h],a,l))return!0}for(let h=0;h<a.length;h++)if(md(a[h],n,l))return!0;return!1}function pd(a,n){if(a.length===0||n.length===0)return!1;for(let l=0;l<a.length-1;l++){const h=a[l],m=a[l+1];for(let x=0;x<n.length-1;x++)if(o2(h,m,n[x],n[x+1]))return!0}return!1}function o2(a,n,l,h){return de(a,l,h)!==de(n,l,h)&&de(a,n,l)!==de(a,n,h)}function md(a,n,l){const h=l*l;if(n.length===1)return a.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(ag(a,n[m-1],n[m])<h)return!0;return!1}function ag(a,n,l){const h=n.distSqr(l);if(h===0)return a.distSqr(n);const m=((a.x-n.x)*(l.x-n.x)+(a.y-n.y)*(l.y-n.y))/h;return a.distSqr(m<0?n:m>1?l:l.sub(n)._mult(m)._add(n))}function sg(a,n){let l,h,m,x=!1;for(let w=0;w<a.length;w++){l=a[w];for(let T=0,D=l.length-1;T<l.length;D=T++)h=l[T],m=l[D],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(x=!x)}return x}function _u(a,n){let l=!1;for(let h=0,m=a.length-1;h<a.length;m=h++){const x=a[h],w=a[m];x.y>n.y!=w.y>n.y&&n.x<(w.x-x.x)*(n.y-x.y)/(w.y-x.y)+x.x&&(l=!l)}return l}function l2(a,n,l){const h=l[0],m=l[2];if(a.x<h.x&&n.x<h.x||a.x>m.x&&n.x>m.x||a.y<h.y&&n.y<h.y||a.y>m.y&&n.y>m.y)return!1;const x=de(a,n,l[0]);return x!==de(a,n,l[1])||x!==de(a,n,l[2])||x!==de(a,n,l[3])}function fc(a,n,l){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(a)}function Sh(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ih(a,n,l,h,m){if(!n[0]&&!n[1])return a;const x=I.convert(n)._mult(m);l==="viewport"&&x._rotate(-h);const w=[];for(let T=0;T<a.length;T++)w.push(a[T].sub(x));return w}let og,lg;mn("CircleBucket",dd,{omit:["layers"]});var u2={get paint(){return lg=lg||new ki({"circle-radius":new zn(be.paint_circle["circle-radius"]),"circle-color":new zn(be.paint_circle["circle-color"]),"circle-blur":new zn(be.paint_circle["circle-blur"]),"circle-opacity":new zn(be.paint_circle["circle-opacity"]),"circle-translate":new Sn(be.paint_circle["circle-translate"]),"circle-translate-anchor":new Sn(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sn(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sn(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(be.paint_circle["circle-stroke-opacity"])})},get layout(){return og=og||new ki({"circle-sort-key":new zn(be.layout_circle["circle-sort-key"])})}},Za=1e-6,yu=typeof Float32Array<"u"?Float32Array:Array;function gd(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function ug(a,n,l){var h=n[0],m=n[1],x=n[2],w=n[3],T=n[4],D=n[5],O=n[6],$=n[7],H=n[8],ie=n[9],ce=n[10],he=n[11],Ee=n[12],De=n[13],Be=n[14],Ke=n[15],Ue=l[0],Ye=l[1],nt=l[2],mt=l[3];return a[0]=Ue*h+Ye*T+nt*H+mt*Ee,a[1]=Ue*m+Ye*D+nt*ie+mt*De,a[2]=Ue*x+Ye*O+nt*ce+mt*Be,a[3]=Ue*w+Ye*$+nt*he+mt*Ke,a[4]=(Ue=l[4])*h+(Ye=l[5])*T+(nt=l[6])*H+(mt=l[7])*Ee,a[5]=Ue*m+Ye*D+nt*ie+mt*De,a[6]=Ue*x+Ye*O+nt*ce+mt*Be,a[7]=Ue*w+Ye*$+nt*he+mt*Ke,a[8]=(Ue=l[8])*h+(Ye=l[9])*T+(nt=l[10])*H+(mt=l[11])*Ee,a[9]=Ue*m+Ye*D+nt*ie+mt*De,a[10]=Ue*x+Ye*O+nt*ce+mt*Be,a[11]=Ue*w+Ye*$+nt*he+mt*Ke,a[12]=(Ue=l[12])*h+(Ye=l[13])*T+(nt=l[14])*H+(mt=l[15])*Ee,a[13]=Ue*m+Ye*D+nt*ie+mt*De,a[14]=Ue*x+Ye*O+nt*ce+mt*Be,a[15]=Ue*w+Ye*$+nt*he+mt*Ke,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var dc,c2=ug;function Th(a,n,l){var h=n[0],m=n[1],x=n[2],w=n[3];return a[0]=l[0]*h+l[4]*m+l[8]*x+l[12]*w,a[1]=l[1]*h+l[5]*m+l[9]*x+l[13]*w,a[2]=l[2]*h+l[6]*m+l[10]*x+l[14]*w,a[3]=l[3]*h+l[7]*m+l[11]*x+l[15]*w,a}dc=new yu(4),yu!=Float32Array&&(dc[0]=0,dc[1]=0,dc[2]=0,dc[3]=0);class h2 extends Is{constructor(n){super(n,u2)}createBucket(n){return new dd(n)}queryRadius(n){const l=n;return fc("circle-radius",this,l)+fc("circle-stroke-width",this,l)+Sh(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,h,m,x,w,T,D){const O=Ih(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),$=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),H=this.paint.get("circle-pitch-alignment")==="map",ie=H?O:function(he,Ee){return he.map(De=>cg(De,Ee))}(O,D),ce=H?$*T:$;for(const he of m)for(const Ee of he){const De=H?Ee:cg(Ee,D);let Be=ce;const Ke=Th([],[Ee.x,Ee.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Ke[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=w.cameraToCenterDistance/Ke[3]),a2(ie,De,Be))return!0}return!1}}function cg(a,n){const l=Th([],[a.x,a.y,0,1],n);return new I(l[0]/l[3],l[1]/l[3])}class hg extends dd{}let fg;mn("HeatmapBucket",hg,{omit:["layers"]});var f2={get paint(){return fg=fg||new ki({"heatmap-radius":new zn(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sn(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ic(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sn(be.paint_heatmap["heatmap-opacity"])})}};function _d(a,{width:n,height:l},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*l*h}`)}else m=new Uint8Array(n*l*h);return a.width=n,a.height=l,a.data=m,a}function dg(a,{width:n,height:l},h){if(n===a.width&&l===a.height)return;const m=_d({},{width:n,height:l},h);yd(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,l)},h),a.width=n,a.height=l,a.data=m.data}function yd(a,n,l,h,m,x){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=a.data,T=n.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<m.height;D++){const O=((l.y+D)*a.width+l.x)*x,$=((h.y+D)*n.width+h.x)*x;for(let H=0;H<m.width*x;H++)T[$+H]=w[O+H]}return n}class pc{constructor(n,l){_d(this,n,1,l)}resize(n){dg(this,n,1)}clone(){return new pc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,x){yd(n,l,h,m,x,1)}}class Ns{constructor(n,l){_d(this,n,4,l)}resize(n){dg(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ns({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,x){yd(n,l,h,m,x,4)}}function pg(a){const n={},l=a.resolution||256,h=a.clips?a.clips.length:1,m=a.image||new Ns({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const x=(w,T,D)=>{n[a.evaluationKey]=D;const O=a.expression.evaluate(n);m.data[w+T+0]=Math.floor(255*O.r/O.a),m.data[w+T+1]=Math.floor(255*O.g/O.a),m.data[w+T+2]=Math.floor(255*O.b/O.a),m.data[w+T+3]=Math.floor(255*O.a)};if(a.clips)for(let w=0,T=0;w<h;++w,T+=4*l)for(let D=0,O=0;D<l;D++,O+=4){const $=D/(l-1),{start:H,end:ie}=a.clips[w];x(T,O,H*(1-$)+ie*$)}else for(let w=0,T=0;w<l;w++,T+=4)x(0,T,w/(l-1));return m}mn("AlphaImage",pc),mn("RGBAImage",Ns);class d2 extends Is{createBucket(n){return new hg(n)}constructor(n){super(n,f2),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let mg;var p2={get paint(){return mg=mg||new ki({"hillshade-illumination-direction":new Sn(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Sn(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sn(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sn(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sn(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sn(be.paint_hillshade["hillshade-accent-color"])})}};class m2 extends Is{constructor(n){super(n,p2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const g2=ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:_2}=g2;var vd={exports:{}};function Ah(a,n,l){l=l||2;var h,m,x,w,T,D,O,$=n&&n.length,H=$?n[0]*l:a.length,ie=gg(a,0,H,l,!0),ce=[];if(!ie||ie.next===ie.prev)return ce;if($&&(ie=function(Ee,De,Be,Ke){var Ue,Ye,nt,mt=[];for(Ue=0,Ye=De.length;Ue<Ye;Ue++)(nt=gg(Ee,De[Ue]*Ke,Ue<Ye-1?De[Ue+1]*Ke:Ee.length,Ke,!1))===nt.next&&(nt.steiner=!0),mt.push(S2(nt));for(mt.sort(w2),Ue=0;Ue<mt.length;Ue++)Be=k2(mt[Ue],Be);return Be}(a,n,ie,l)),a.length>80*l){h=x=a[0],m=w=a[1];for(var he=l;he<H;he+=l)(T=a[he])<h&&(h=T),(D=a[he+1])<m&&(m=D),T>x&&(x=T),D>w&&(w=D);O=(O=Math.max(x-h,w-m))!==0?32767/O:0}return mc(ie,ce,l,h,m,O,0),ce}function gg(a,n,l,h,m){var x,w;if(m===wd(a,n,l,h)>0)for(x=n;x<l;x+=h)w=vg(x,a[x],a[x+1],w);else for(x=l-h;x>=n;x-=h)w=vg(x,a[x],a[x+1],w);return w&&Ch(w,w.next)&&(_c(w),w=w.next),w}function Hl(a,n){if(!a)return a;n||(n=a);var l,h=a;do if(l=!1,h.steiner||!Ch(h,h.next)&&Si(h.prev,h,h.next)!==0)h=h.next;else{if(_c(h),(h=n=h.prev)===h.next)break;l=!0}while(l||h!==n);return n}function mc(a,n,l,h,m,x,w){if(a){!w&&x&&function($,H,ie,ce){var he=$;do he.z===0&&(he.z=bd(he.x,he.y,H,ie,ce)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==$);he.prevZ.nextZ=null,he.prevZ=null,function(Ee){var De,Be,Ke,Ue,Ye,nt,mt,fn,xn=1;do{for(Be=Ee,Ee=null,Ye=null,nt=0;Be;){for(nt++,Ke=Be,mt=0,De=0;De<xn&&(mt++,Ke=Ke.nextZ);De++);for(fn=xn;mt>0||fn>0&&Ke;)mt!==0&&(fn===0||!Ke||Be.z<=Ke.z)?(Ue=Be,Be=Be.nextZ,mt--):(Ue=Ke,Ke=Ke.nextZ,fn--),Ye?Ye.nextZ=Ue:Ee=Ue,Ue.prevZ=Ye,Ye=Ue;Be=Ke}Ye.nextZ=null,xn*=2}while(nt>1)}(he)}(a,h,m,x);for(var T,D,O=a;a.prev!==a.next;)if(T=a.prev,D=a.next,x?v2(a,h,m,x):y2(a))n.push(T.i/l|0),n.push(a.i/l|0),n.push(D.i/l|0),_c(a),a=D.next,O=D.next;else if((a=D)===O){w?w===1?mc(a=b2(Hl(a),n,l),n,l,h,m,x,2):w===2&&x2(a,n,l,h,m,x):mc(Hl(a),n,l,h,m,x,1);break}}}function y2(a){var n=a.prev,l=a,h=a.next;if(Si(n,l,h)>=0)return!1;for(var m=n.x,x=l.x,w=h.x,T=n.y,D=l.y,O=h.y,$=m<x?m<w?m:w:x<w?x:w,H=T<D?T<O?T:O:D<O?D:O,ie=m>x?m>w?m:w:x>w?x:w,ce=T>D?T>O?T:O:D>O?D:O,he=h.next;he!==n;){if(he.x>=$&&he.x<=ie&&he.y>=H&&he.y<=ce&&vu(m,T,x,D,w,O,he.x,he.y)&&Si(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function v2(a,n,l,h){var m=a.prev,x=a,w=a.next;if(Si(m,x,w)>=0)return!1;for(var T=m.x,D=x.x,O=w.x,$=m.y,H=x.y,ie=w.y,ce=T<D?T<O?T:O:D<O?D:O,he=$<H?$<ie?$:ie:H<ie?H:ie,Ee=T>D?T>O?T:O:D>O?D:O,De=$>H?$>ie?$:ie:H>ie?H:ie,Be=bd(ce,he,n,l,h),Ke=bd(Ee,De,n,l,h),Ue=a.prevZ,Ye=a.nextZ;Ue&&Ue.z>=Be&&Ye&&Ye.z<=Ke;){if(Ue.x>=ce&&Ue.x<=Ee&&Ue.y>=he&&Ue.y<=De&&Ue!==m&&Ue!==w&&vu(T,$,D,H,O,ie,Ue.x,Ue.y)&&Si(Ue.prev,Ue,Ue.next)>=0||(Ue=Ue.prevZ,Ye.x>=ce&&Ye.x<=Ee&&Ye.y>=he&&Ye.y<=De&&Ye!==m&&Ye!==w&&vu(T,$,D,H,O,ie,Ye.x,Ye.y)&&Si(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ue&&Ue.z>=Be;){if(Ue.x>=ce&&Ue.x<=Ee&&Ue.y>=he&&Ue.y<=De&&Ue!==m&&Ue!==w&&vu(T,$,D,H,O,ie,Ue.x,Ue.y)&&Si(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.prevZ}for(;Ye&&Ye.z<=Ke;){if(Ye.x>=ce&&Ye.x<=Ee&&Ye.y>=he&&Ye.y<=De&&Ye!==m&&Ye!==w&&vu(T,$,D,H,O,ie,Ye.x,Ye.y)&&Si(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function b2(a,n,l){var h=a;do{var m=h.prev,x=h.next.next;!Ch(m,x)&&_g(m,h,h.next,x)&&gc(m,x)&&gc(x,m)&&(n.push(m.i/l|0),n.push(h.i/l|0),n.push(x.i/l|0),_c(h),_c(h.next),h=a=x),h=h.next}while(h!==a);return Hl(h)}function x2(a,n,l,h,m,x){var w=a;do{for(var T=w.next.next;T!==w.prev;){if(w.i!==T.i&&I2(w,T)){var D=yg(w,T);return w=Hl(w,w.next),D=Hl(D,D.next),mc(w,n,l,h,m,x,0),void mc(D,n,l,h,m,x,0)}T=T.next}w=w.next}while(w!==a)}function w2(a,n){return a.x-n.x}function k2(a,n){var l=function(m,x){var w,T=x,D=m.x,O=m.y,$=-1/0;do{if(O<=T.y&&O>=T.next.y&&T.next.y!==T.y){var H=T.x+(O-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(H<=D&&H>$&&($=H,w=T.x<T.next.x?T:T.next,H===D))return w}T=T.next}while(T!==x);if(!w)return null;var ie,ce=w,he=w.x,Ee=w.y,De=1/0;T=w;do D>=T.x&&T.x>=he&&D!==T.x&&vu(O<Ee?D:$,O,he,Ee,O<Ee?$:D,O,T.x,T.y)&&(ie=Math.abs(O-T.y)/(D-T.x),gc(T,m)&&(ie<De||ie===De&&(T.x>w.x||T.x===w.x&&E2(w,T)))&&(w=T,De=ie)),T=T.next;while(T!==ce);return w}(a,n);if(!l)return n;var h=yg(l,a);return Hl(h,h.next),Hl(l,l.next)}function E2(a,n){return Si(a.prev,a,n.prev)<0&&Si(n.next,a,a.next)<0}function bd(a,n,l,h,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function S2(a){var n=a,l=a;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==a);return l}function vu(a,n,l,h,m,x,w,T){return(m-w)*(n-T)>=(a-w)*(x-T)&&(a-w)*(h-T)>=(l-w)*(n-T)&&(l-w)*(x-T)>=(m-w)*(h-T)}function I2(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(l,h){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==h.i&&m.next.i!==h.i&&_g(m,m.next,l,h))return!0;m=m.next}while(m!==l);return!1}(a,n)&&(gc(a,n)&&gc(n,a)&&function(l,h){var m=l,x=!1,w=(l.x+h.x)/2,T=(l.y+h.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&w<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==l);return x}(a,n)&&(Si(a.prev,a,n.prev)||Si(a,n.prev,n))||Ch(a,n)&&Si(a.prev,a,a.next)>0&&Si(n.prev,n,n.next)>0)}function Si(a,n,l){return(n.y-a.y)*(l.x-n.x)-(n.x-a.x)*(l.y-n.y)}function Ch(a,n){return a.x===n.x&&a.y===n.y}function _g(a,n,l,h){var m=Mh(Si(a,n,l)),x=Mh(Si(a,n,h)),w=Mh(Si(l,h,a)),T=Mh(Si(l,h,n));return m!==x&&w!==T||!(m!==0||!Ph(a,l,n))||!(x!==0||!Ph(a,h,n))||!(w!==0||!Ph(l,a,h))||!(T!==0||!Ph(l,n,h))}function Ph(a,n,l){return n.x<=Math.max(a.x,l.x)&&n.x>=Math.min(a.x,l.x)&&n.y<=Math.max(a.y,l.y)&&n.y>=Math.min(a.y,l.y)}function Mh(a){return a>0?1:a<0?-1:0}function gc(a,n){return Si(a.prev,a,a.next)<0?Si(a,n,a.next)>=0&&Si(a,a.prev,n)>=0:Si(a,n,a.prev)<0||Si(a,a.next,n)<0}function yg(a,n){var l=new xd(a.i,a.x,a.y),h=new xd(n.i,n.x,n.y),m=a.next,x=n.prev;return a.next=n,n.prev=a,l.next=m,m.prev=l,h.next=l,l.prev=h,x.next=h,h.prev=x,h}function vg(a,n,l,h){var m=new xd(a,n,l);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function _c(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function xd(a,n,l){this.i=a,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wd(a,n,l,h){for(var m=0,x=n,w=l-h;x<l;x+=h)m+=(a[w]-a[x])*(a[x+1]+a[w+1]),w=x;return m}vd.exports=Ah,vd.exports.default=Ah,Ah.deviation=function(a,n,l,h){var m=n&&n.length,x=Math.abs(wd(a,0,m?n[0]*l:a.length,l));if(m)for(var w=0,T=n.length;w<T;w++)x-=Math.abs(wd(a,n[w]*l,w<T-1?n[w+1]*l:a.length,l));var D=0;for(w=0;w<h.length;w+=3){var O=h[w]*l,$=h[w+1]*l,H=h[w+2]*l;D+=Math.abs((a[O]-a[H])*(a[$+1]-a[O+1])-(a[O]-a[$])*(a[H+1]-a[O+1]))}return x===0&&D===0?0:Math.abs((D-x)/x)},Ah.flatten=function(a){for(var n=a[0][0].length,l={vertices:[],holes:[],dimensions:n},h=0,m=0;m<a.length;m++){for(var x=0;x<a[m].length;x++)for(var w=0;w<n;w++)l.vertices.push(a[m][x][w]);m>0&&l.holes.push(h+=a[m-1].length)}return l};var bg=v(vd.exports);function T2(a,n,l,h,m){xg(a,n,l,h||a.length-1,m||A2)}function xg(a,n,l,h,m){for(;h>l;){if(h-l>600){var x=h-l+1,w=n-l+1,T=Math.log(x),D=.5*Math.exp(2*T/3),O=.5*Math.sqrt(T*D*(x-D)/x)*(w-x/2<0?-1:1);xg(a,n,Math.max(l,Math.floor(n-w*D/x+O)),Math.min(h,Math.floor(n+(x-w)*D/x+O)),m)}var $=a[n],H=l,ie=h;for(yc(a,l,n),m(a[h],$)>0&&yc(a,l,h);H<ie;){for(yc(a,H,ie),H++,ie--;m(a[H],$)<0;)H++;for(;m(a[ie],$)>0;)ie--}m(a[l],$)===0?yc(a,l,ie):yc(a,++ie,h),ie<=n&&(l=ie+1),n<=ie&&(h=ie-1)}}function yc(a,n,l){var h=a[n];a[n]=a[l],a[l]=h}function A2(a,n){return a<n?-1:a>n?1:0}function kd(a,n){const l=a.length;if(l<=1)return[a];const h=[];let m,x;for(let w=0;w<l;w++){const T=Ne(a[w]);T!==0&&(a[w].area=Math.abs(T),x===void 0&&(x=T<0),x===T<0?(m&&h.push(m),m=[a[w]]):m.push(a[w]))}if(m&&h.push(m),n>1)for(let w=0;w<h.length;w++)h[w].length<=n||(T2(h[w],n,1,h[w].length-1,C2),h[w]=h[w].slice(0,n));return h}function C2(a,n){return n.area-a.area}function Ed(a,n,l){const h=l.patternDependencies;let m=!1;for(const x of n){const w=x.paint.get(`${a}-pattern`);w.isConstant()||(m=!0);const T=w.constantOr(null);T&&(m=!0,h[T.to]=!0,h[T.from]=!0)}return m}function Sd(a,n,l,h,m){const x=m.patternDependencies;for(const w of n){const T=w.paint.get(`${a}-pattern`).value;if(T.kind!=="constant"){let D=T.evaluate({zoom:h-1},l,{},m.availableImages),O=T.evaluate({zoom:h},l,{},m.availableImages),$=T.evaluate({zoom:h+1},l,{},m.availableImages);D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,$=$&&$.name?$.name:$,x[D]=!0,x[O]=!0,x[$]=!0,l.patterns[w.id]={min:D,mid:O,max:$}}}return l}class Id{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sr,this.indexArray=new ra,this.indexArray2=new Ni,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Hr,this.segments2=new Hr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=Ed("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:D,index:O,sourceLayerIndex:$}of n){const H=this.layers[0]._featureFilter.needGeometry,ie=Zl(T,H);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),ie,h))continue;const ce=x?m.evaluate(ie,{},h,l.availableImages):void 0,he={id:D,properties:T.properties,type:T.type,sourceLayerIndex:$,index:O,geometry:H?ie.geometry:Gl(T),patterns:{},sortKey:ce};w.push(he)}x&&w.sort((T,D)=>T.sortKey-D.sortKey);for(const T of w){const{geometry:D,index:O,sourceLayerIndex:$}=T;if(this.hasPattern){const H=Sd("fill",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,D,O,h,{});l.featureIndex.insert(n[O].feature,D,O,$,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_2),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,m,x){for(const w of kd(l,500)){let T=0;for(const ce of w)T+=ce.length;const D=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=D.vertexLength,$=[],H=[];for(const ce of w){if(ce.length===0)continue;ce!==w[0]&&H.push($.length/2);const he=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Ee=he.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Ee+ce.length-1,Ee),$.push(ce[0].x),$.push(ce[0].y);for(let De=1;De<ce.length;De++)this.layoutVertexArray.emplaceBack(ce[De].x,ce[De].y),this.indexArray2.emplaceBack(Ee+De-1,Ee+De),$.push(ce[De].x),$.push(ce[De].y);he.vertexLength+=ce.length,he.primitiveLength+=ce.length}const ie=bg($,H);for(let ce=0;ce<ie.length;ce+=3)this.indexArray.emplaceBack(O+ie[ce],O+ie[ce+1],O+ie[ce+2]);D.vertexLength+=T,D.primitiveLength+=ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,x,m)}}let wg,kg;mn("FillBucket",Id,{omit:["layers","patternFeatures"]});var P2={get paint(){return kg=kg||new ki({"fill-antialias":new Sn(be.paint_fill["fill-antialias"]),"fill-opacity":new zn(be.paint_fill["fill-opacity"]),"fill-color":new zn(be.paint_fill["fill-color"]),"fill-outline-color":new zn(be.paint_fill["fill-outline-color"]),"fill-translate":new Sn(be.paint_fill["fill-translate"]),"fill-translate-anchor":new Sn(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ul(be.paint_fill["fill-pattern"])})},get layout(){return wg=wg||new ki({"fill-sort-key":new zn(be.layout_fill["fill-sort-key"])})}};class M2 extends Is{constructor(n){super(n,P2)}recalculate(n,l){super.recalculate(n,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Id(n)}queryRadius(){return Sh(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,h,m,x,w,T){return ig(Ih(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),m)}isTileClipped(){return!0}}const z2=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),D2=ti([{name:"a_centroid",components:2,type:"Int16"}],4),{members:L2}=z2;var Il={},R2=E,Eg=bu;function bu(a,n,l,h,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=m,a.readFields(B2,this,n)}function B2(a,n,l){a==1?n.id=l.readVarint():a==2?function(h,m){for(var x=h.readVarint()+h.pos;h.pos<x;){var w=m._keys[h.readVarint()],T=m._values[h.readVarint()];m.properties[w]=T}}(l,n):a==3?n.type=l.readVarint():a==4&&(n._geometry=l.pos)}function O2(a){for(var n,l,h=0,m=0,x=a.length,w=x-1;m<x;w=m++)h+=((l=a[w]).x-(n=a[m]).x)*(n.y+l.y);return h}bu.types=["Unknown","Point","LineString","Polygon"],bu.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,l=a.readVarint()+a.pos,h=1,m=0,x=0,w=0,T=[];a.pos<l;){if(m<=0){var D=a.readVarint();h=7&D,m=D>>3}if(m--,h===1||h===2)x+=a.readSVarint(),w+=a.readSVarint(),h===1&&(n&&T.push(n),n=[]),n.push(new R2(x,w));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&T.push(n),T},bu.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,l=1,h=0,m=0,x=0,w=1/0,T=-1/0,D=1/0,O=-1/0;a.pos<n;){if(h<=0){var $=a.readVarint();l=7&$,h=$>>3}if(h--,l===1||l===2)(m+=a.readSVarint())<w&&(w=m),m>T&&(T=m),(x+=a.readSVarint())<D&&(D=x),x>O&&(O=x);else if(l!==7)throw new Error("unknown command "+l)}return[w,D,T,O]},bu.prototype.toGeoJSON=function(a,n,l){var h,m,x=this.extent*Math.pow(2,l),w=this.extent*a,T=this.extent*n,D=this.loadGeometry(),O=bu.types[this.type];function $(ce){for(var he=0;he<ce.length;he++){var Ee=ce[he];ce[he]=[360*(Ee.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ee.y+T)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(h=0;h<D.length;h++)H[h]=D[h][0];$(D=H);break;case 2:for(h=0;h<D.length;h++)$(D[h]);break;case 3:for(D=function(ce){var he=ce.length;if(he<=1)return[ce];for(var Ee,De,Be=[],Ke=0;Ke<he;Ke++){var Ue=O2(ce[Ke]);Ue!==0&&(De===void 0&&(De=Ue<0),De===Ue<0?(Ee&&Be.push(Ee),Ee=[ce[Ke]]):Ee.push(ce[Ke]))}return Ee&&Be.push(Ee),Be}(D),h=0;h<D.length;h++)for(m=0;m<D[h].length;m++)$(D[h][m])}D.length===1?D=D[0]:O="Multi"+O;var ie={type:"Feature",geometry:{type:O,coordinates:D},properties:this.properties};return"id"in this&&(ie.id=this.id),ie};var N2=Eg,Sg=Ig;function Ig(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(F2,this,n),this.length=this._features.length}function F2(a,n,l){a===15?n.version=l.readVarint():a===1?n.name=l.readString():a===5?n.extent=l.readVarint():a===2?n._features.push(l.pos):a===3?n._keys.push(l.readString()):a===4&&n._values.push(function(h){for(var m=null,x=h.readVarint()+h.pos;h.pos<x;){var w=h.readVarint()>>3;m=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}return m}(l))}Ig.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new N2(this._pbf,n,this.extent,this._keys,this._values)};var V2=Sg;function $2(a,n,l){if(a===3){var h=new V2(l,l.readVarint()+l.pos);h.length&&(n[h.name]=h)}}Il.VectorTile=function(a,n){this.layers=a.readFields($2,{},n)},Il.VectorTileFeature=Eg,Il.VectorTileLayer=Sg;const U2=Il.VectorTileFeature.types,Td=Math.pow(2,13);function vc(a,n,l,h,m,x,w,T){a.emplaceBack(n,l,2*Math.floor(h*Td)+w,m*Td*2,x*Td*2,Math.round(T))}class Ad{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new nn,this.centroidVertexArray=new jt,this.indexArray=new ra,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Hr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=Ed("fill-extrusion",this.layers,l);for(const{feature:m,id:x,index:w,sourceLayerIndex:T}of n){const D=this.layers[0]._featureFilter.needGeometry,O=Zl(m,D);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),O,h))continue;const $={id:x,sourceLayerIndex:T,index:w,geometry:D?O.geometry:Gl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Sd("fill-extrusion",this.layers,$,this.zoom,l)):this.addFeature($,$.geometry,w,h,{}),l.featureIndex.insert(m,$.geometry,w,T,this.index,!0)}}addFeatures(n,l,h){for(const m of this.features){const{geometry:x}=m;this.addFeature(m,x,m.index,l,h)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,L2),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,D2.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,m,x){const w={x:0,y:0,vertexCount:0};for(const T of kd(l,500)){let D=0;for(const he of T)D+=he.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const he of T){if(he.length===0||q2(he))continue;let Ee=0;for(let De=0;De<he.length;De++){const Be=he[De];if(De>=1){const Ke=he[De-1];if(!j2(Be,Ke)){O.vertexLength+4>Hr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ue=Be.sub(Ke)._perp()._unit(),Ye=Ke.dist(Be);Ee+Ye>32768&&(Ee=0),vc(this.layoutVertexArray,Be.x,Be.y,Ue.x,Ue.y,0,0,Ee),vc(this.layoutVertexArray,Be.x,Be.y,Ue.x,Ue.y,0,1,Ee),w.x+=2*Be.x,w.y+=2*Be.y,w.vertexCount+=2,Ee+=Ye,vc(this.layoutVertexArray,Ke.x,Ke.y,Ue.x,Ue.y,0,0,Ee),vc(this.layoutVertexArray,Ke.x,Ke.y,Ue.x,Ue.y,0,1,Ee),w.x+=2*Ke.x,w.y+=2*Ke.y,w.vertexCount+=2;const nt=O.vertexLength;this.indexArray.emplaceBack(nt,nt+2,nt+1),this.indexArray.emplaceBack(nt+1,nt+2,nt+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+D>Hr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),U2[n.type]!=="Polygon")continue;const $=[],H=[],ie=O.vertexLength;for(const he of T)if(he.length!==0){he!==T[0]&&H.push($.length/2);for(let Ee=0;Ee<he.length;Ee++){const De=he[Ee];vc(this.layoutVertexArray,De.x,De.y,0,0,1,1,0),w.x+=De.x,w.y+=De.y,w.vertexCount+=1,$.push(De.x),$.push(De.y)}}const ce=bg($,H);for(let he=0;he<ce.length;he+=3)this.indexArray.emplaceBack(ie+ce[he],ie+ce[he+2],ie+ce[he+1]);O.primitiveLength+=ce.length/3,O.vertexLength+=D}for(let T=0;T<w.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,x,m)}}function j2(a,n){return a.x===n.x&&(a.x<0||a.x>Mi)||a.y===n.y&&(a.y<0||a.y>Mi)}function q2(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Mi)||a.every(n=>n.y<0)||a.every(n=>n.y>Mi)}let Tg;mn("FillExtrusionBucket",Ad,{omit:["layers","features"]});var G2={get paint(){return Tg=Tg||new ki({"fill-extrusion-opacity":new Sn(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sn(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sn(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ul(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sn(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Z2 extends Is{constructor(n){super(n,G2)}createBucket(n){return new Ad(n)}queryRadius(){return Sh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,h,m,x,w,T,D){const O=Ih(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),$=this.paint.get("fill-extrusion-height").evaluate(l,h),H=this.paint.get("fill-extrusion-base").evaluate(l,h),ie=function(he,Ee,De,Be){const Ke=[];for(const Ue of he){const Ye=[Ue.x,Ue.y,0,1];Th(Ye,Ye,Ee),Ke.push(new I(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Ke}(O,D),ce=function(he,Ee,De,Be){const Ke=[],Ue=[],Ye=Be[8]*Ee,nt=Be[9]*Ee,mt=Be[10]*Ee,fn=Be[11]*Ee,xn=Be[8]*De,un=Be[9]*De,rn=Be[10]*De,Kt=Be[11]*De;for(const _n of he){const Yt=[],Ot=[];for(const An of _n){const En=An.x,Qn=An.y,Wr=Be[0]*En+Be[4]*Qn+Be[12],Yr=Be[1]*En+Be[5]*Qn+Be[13],$i=Be[2]*En+Be[6]*Qn+Be[14],As=Be[3]*En+Be[7]*Qn+Be[15],Ha=$i+mt,zi=As+fn,aa=Wr+xn,da=Yr+un,Wa=$i+rn,Ka=As+Kt,Ui=new I((Wr+Ye)/zi,(Yr+nt)/zi);Ui.z=Ha/zi,Yt.push(Ui);const ji=new I(aa/Ka,da/Ka);ji.z=Wa/Ka,Ot.push(ji)}Ke.push(Yt),Ue.push(Ot)}return[Ke,Ue]}(m,H,$,D);return function(he,Ee,De){let Be=1/0;ig(De,Ee)&&(Be=Ag(De,Ee[0]));for(let Ke=0;Ke<Ee.length;Ke++){const Ue=Ee[Ke],Ye=he[Ke];for(let nt=0;nt<Ue.length-1;nt++){const mt=Ue[nt],fn=[mt,Ue[nt+1],Ye[nt+1],Ye[nt],mt];rg(De,fn)&&(Be=Math.min(Be,Ag(De,fn)))}}return Be!==1/0&&Be}(ce[0],ce[1],ie)}}function bc(a,n){return a.x*n.x+a.y*n.y}function Ag(a,n){if(a.length===1){let l=0;const h=n[l++];let m;for(;!m||h.equals(m);)if(m=n[l++],!m)return 1/0;for(;l<n.length;l++){const x=n[l],w=a[0],T=m.sub(h),D=x.sub(h),O=w.sub(h),$=bc(T,T),H=bc(T,D),ie=bc(D,D),ce=bc(O,T),he=bc(O,D),Ee=$*ie-H*H,De=(ie*ce-H*he)/Ee,Be=($*he-H*ce)/Ee,Ke=h.z*(1-De-Be)+m.z*De+x.z*Be;if(isFinite(Ke))return Ke}return 1/0}{let l=1/0;for(const h of n)l=Math.min(l,h.z);return l}}const H2=ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:W2}=H2,K2=ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:X2}=K2,Y2=Il.VectorTileFeature.types,J2=Math.cos(Math.PI/180*37.5),Cg=Math.pow(2,14)/.5;class Cd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Dn,this.layoutVertexArray2=new wn,this.indexArray=new ra,this.programConfigurations=new ko(n.layers,n.zoom),this.segments=new Hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=Ed("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),w=[];for(const{feature:T,id:D,index:O,sourceLayerIndex:$}of n){const H=this.layers[0]._featureFilter.needGeometry,ie=Zl(T,H);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),ie,h))continue;const ce=x?m.evaluate(ie,{},h):void 0,he={id:D,properties:T.properties,type:T.type,sourceLayerIndex:$,index:O,geometry:H?ie.geometry:Gl(T),patterns:{},sortKey:ce};w.push(he)}x&&w.sort((T,D)=>T.sortKey-D.sortKey);for(const T of w){const{geometry:D,index:O,sourceLayerIndex:$}=T;if(this.hasPattern){const H=Sd("line",this.layers,T,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(T,D,O,h,{});l.featureIndex.insert(n[O].feature,D,O,$,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,X2)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,W2),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,m,x){const w=this.layers[0].layout,T=w.get("line-join").evaluate(n,{}),D=w.get("line-cap"),O=w.get("line-miter-limit"),$=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const H of l)this.addLine(H,n,T,D,O,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,x,m)}addLine(n,l,h,m,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<n.length-1;Be++)this.totalDistance+=n[Be].dist(n[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=Y2[l.type]==="Polygon";let D=n.length;for(;D>=2&&n[D-1].equals(n[D-2]);)D--;let O=0;for(;O<D-1&&n[O].equals(n[O+1]);)O++;if(D<(T?3:2))return;h==="bevel"&&(x=1.05);const $=this.overscaling<=16?15*Mi/(512*this.overscaling):0,H=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let ie,ce,he,Ee,De;this.e1=this.e2=-1,T&&(ie=n[D-2],De=n[O].sub(ie)._unit()._perp());for(let Be=O;Be<D;Be++){if(he=Be===D-1?T?n[O+1]:void 0:n[Be+1],he&&n[Be].equals(he))continue;De&&(Ee=De),ie&&(ce=ie),ie=n[Be],De=he?he.sub(ie)._unit()._perp():Ee,Ee=Ee||De;let Ke=Ee.add(De);Ke.x===0&&Ke.y===0||Ke._unit();const Ue=Ee.x*De.x+Ee.y*De.y,Ye=Ke.x*De.x+Ke.y*De.y,nt=Ye!==0?1/Ye:1/0,mt=2*Math.sqrt(2-2*Ye),fn=Ye<J2&&ce&&he,xn=Ee.x*De.y-Ee.y*De.x>0;if(fn&&Be>O){const Kt=ie.dist(ce);if(Kt>2*$){const _n=ie.sub(ie.sub(ce)._mult($/Kt)._round());this.updateDistance(ce,_n),this.addCurrentVertex(_n,Ee,0,0,H),ce=_n}}const un=ce&&he;let rn=un?h:T?"butt":m;if(un&&rn==="round"&&(nt<w?rn="miter":nt<=2&&(rn="fakeround")),rn==="miter"&&nt>x&&(rn="bevel"),rn==="bevel"&&(nt>2&&(rn="flipbevel"),nt<x&&(rn="miter")),ce&&this.updateDistance(ce,ie),rn==="miter")Ke._mult(nt),this.addCurrentVertex(ie,Ke,0,0,H);else if(rn==="flipbevel"){if(nt>100)Ke=De.mult(-1);else{const Kt=nt*Ee.add(De).mag()/Ee.sub(De).mag();Ke._perp()._mult(Kt*(xn?-1:1))}this.addCurrentVertex(ie,Ke,0,0,H),this.addCurrentVertex(ie,Ke.mult(-1),0,0,H)}else if(rn==="bevel"||rn==="fakeround"){const Kt=-Math.sqrt(nt*nt-1),_n=xn?Kt:0,Yt=xn?0:Kt;if(ce&&this.addCurrentVertex(ie,Ee,_n,Yt,H),rn==="fakeround"){const Ot=Math.round(180*mt/Math.PI/20);for(let An=1;An<Ot;An++){let En=An/Ot;if(En!==.5){const Wr=En-.5;En+=En*Wr*(En-1)*((1.0904+Ue*(Ue*(3.55645-1.43519*Ue)-3.2452))*Wr*Wr+(.848013+Ue*(.215638*Ue-1.06021)))}const Qn=De.sub(Ee)._mult(En)._add(Ee)._unit()._mult(xn?-1:1);this.addHalfVertex(ie,Qn.x,Qn.y,!1,xn,0,H)}}he&&this.addCurrentVertex(ie,De,-_n,-Yt,H)}else if(rn==="butt")this.addCurrentVertex(ie,Ke,0,0,H);else if(rn==="square"){const Kt=ce?1:-1;this.addCurrentVertex(ie,Ke,Kt,Kt,H)}else rn==="round"&&(ce&&(this.addCurrentVertex(ie,Ee,0,0,H),this.addCurrentVertex(ie,Ee,1,1,H,!0)),he&&(this.addCurrentVertex(ie,De,-1,-1,H,!0),this.addCurrentVertex(ie,De,0,0,H)));if(fn&&Be<D-1){const Kt=ie.dist(he);if(Kt>2*$){const _n=ie.add(he.sub(ie)._mult($/Kt)._round());this.updateDistance(ie,_n),this.addCurrentVertex(_n,De,0,0,H),ie=_n}}}}addCurrentVertex(n,l,h,m,x,w=!1){const T=l.y*m-l.x,D=-l.y-l.x*m;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,w,!1,h,x),this.addHalfVertex(n,T,D,w,!0,-m,x),this.distance>Cg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,m,x,w))}addHalfVertex({x:n,y:l},h,m,x,w,T,D){const O=.5*(this.lineClips?this.scaledDistance*(Cg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(l<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),D.primitiveLength++),w?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let Pg,Mg;mn("LineBucket",Cd,{omit:["layers","patternFeatures"]});var zg={get paint(){return Mg=Mg||new ki({"line-opacity":new zn(be.paint_line["line-opacity"]),"line-color":new zn(be.paint_line["line-color"]),"line-translate":new Sn(be.paint_line["line-translate"]),"line-translate-anchor":new Sn(be.paint_line["line-translate-anchor"]),"line-width":new zn(be.paint_line["line-width"]),"line-gap-width":new zn(be.paint_line["line-gap-width"]),"line-offset":new zn(be.paint_line["line-offset"]),"line-blur":new zn(be.paint_line["line-blur"]),"line-dasharray":new rc(be.paint_line["line-dasharray"]),"line-pattern":new Ul(be.paint_line["line-pattern"]),"line-gradient":new ic(be.paint_line["line-gradient"])})},get layout(){return Pg=Pg||new ki({"line-cap":new Sn(be.layout_line["line-cap"]),"line-join":new zn(be.layout_line["line-join"]),"line-miter-limit":new Sn(be.layout_line["line-miter-limit"]),"line-round-limit":new Sn(be.layout_line["line-round-limit"]),"line-sort-key":new zn(be.layout_line["line-sort-key"])})}};class Q2 extends zn{possiblyEvaluate(n,l){return l=new Zr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,m){return l=oe({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,m)}}let zh;class ex extends Is{constructor(n){super(n,zg),this.gradientVersion=0,zh||(zh=new Q2(zg.paint.properties["line-width"].specification),zh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Lr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=zh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Cd(n)}queryRadius(n){const l=n,h=Dg(fc("line-width",this,l),fc("line-gap-width",this,l)),m=fc("line-offset",this,l);return h/2+Math.abs(m)+Sh(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,h,m,x,w,T){const D=Ih(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),O=T/2*Dg(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),$=this.paint.get("line-offset").evaluate(l,h);return $&&(m=function(H,ie){const ce=[];for(let he=0;he<H.length;he++){const Ee=H[he],De=[];for(let Be=0;Be<Ee.length;Be++){const Ke=Ee[Be-1],Ue=Ee[Be],Ye=Ee[Be+1],nt=Be===0?new I(0,0):Ue.sub(Ke)._unit()._perp(),mt=Be===Ee.length-1?new I(0,0):Ye.sub(Ue)._unit()._perp(),fn=nt._add(mt)._unit(),xn=fn.x*mt.x+fn.y*mt.y;xn!==0&&fn._mult(1/xn),De.push(fn._mult(ie)._add(Ue))}ce.push(De)}return ce}(m,$*T)),function(H,ie,ce){for(let he=0;he<ie.length;he++){const Ee=ie[he];if(H.length>=3){for(let De=0;De<Ee.length;De++)if(_u(H,Ee[De]))return!0}if(s2(H,Ee,ce))return!0}return!1}(D,m,O)}isTileClipped(){return!0}}function Dg(a,n){return n>0?n+2*a:a}const tx=ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nx=ti([{name:"a_projected_pos",components:3,type:"Float32"}],4);ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rx=ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lg=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ix=ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ax(a,n,l){return a.sections.forEach(h=>{h.text=function(m,x,w){const T=x.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),hs.applyArabicShaping&&(m=hs.applyArabicShaping(m)),m}(h.text,n,l)}),a}ti([{name:"triangle",components:3,type:"Uint16"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ti([{type:"Float32",name:"offsetX"}]),ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ti([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Vi=24,Rg=Vr,Bg=function(a,n,l,h,m){var x,w,T=8*m-h-1,D=(1<<T)-1,O=D>>1,$=-7,H=m-1,ie=-1,ce=a[n+H];for(H+=ie,x=ce&(1<<-$)-1,ce>>=-$,$+=T;$>0;x=256*x+a[n+H],H+=ie,$-=8);for(w=x&(1<<-$)-1,x>>=-$,$+=h;$>0;w=256*w+a[n+H],H+=ie,$-=8);if(x===0)x=1-O;else{if(x===D)return w?NaN:1/0*(ce?-1:1);w+=Math.pow(2,h),x-=O}return(ce?-1:1)*w*Math.pow(2,x-h)},Og=function(a,n,l,h,m,x){var w,T,D,O=8*x-m-1,$=(1<<O)-1,H=$>>1,ie=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=0,he=1,Ee=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,w=$):(w=Math.floor(Math.log(n)/Math.LN2),n*(D=Math.pow(2,-w))<1&&(w--,D*=2),(n+=w+H>=1?ie/D:ie*Math.pow(2,1-H))*D>=2&&(w++,D/=2),w+H>=$?(T=0,w=$):w+H>=1?(T=(n*D-1)*Math.pow(2,m),w+=H):(T=n*Math.pow(2,H-1)*Math.pow(2,m),w=0));m>=8;a[l+ce]=255&T,ce+=he,T/=256,m-=8);for(w=w<<m|T,O+=m;O>0;a[l+ce]=255&w,ce+=he,w/=256,O-=8);a[l+ce-he]|=128*Ee};function Vr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var Pd=4294967296,Ng=1/Pd,Fg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ol(a){return a.type===Vr.Bytes?a.readVarint()+a.pos:a.pos+1}function xu(a,n,l){return l?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function Vg(a,n,l){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(h);for(var m=l.pos-1;m>=a;m--)l.buf[m+h]=l.buf[m]}function sx(a,n){for(var l=0;l<a.length;l++)n.writeVarint(a[l])}function ox(a,n){for(var l=0;l<a.length;l++)n.writeSVarint(a[l])}function lx(a,n){for(var l=0;l<a.length;l++)n.writeFloat(a[l])}function ux(a,n){for(var l=0;l<a.length;l++)n.writeDouble(a[l])}function cx(a,n){for(var l=0;l<a.length;l++)n.writeBoolean(a[l])}function hx(a,n){for(var l=0;l<a.length;l++)n.writeFixed32(a[l])}function fx(a,n){for(var l=0;l<a.length;l++)n.writeSFixed32(a[l])}function dx(a,n){for(var l=0;l<a.length;l++)n.writeFixed64(a[l])}function px(a,n){for(var l=0;l<a.length;l++)n.writeSFixed64(a[l])}function Dh(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function wu(a,n,l){a[l]=n,a[l+1]=n>>>8,a[l+2]=n>>>16,a[l+3]=n>>>24}function $g(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Vr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),m=h>>3,x=this.pos;this.type=7&h,a(m,n,this),this.pos===x&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=Dh(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=$g(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Dh(this.buf,this.pos)+Dh(this.buf,this.pos+4)*Pd;return this.pos+=8,a},readSFixed64:function(){var a=Dh(this.buf,this.pos)+$g(this.buf,this.pos+4)*Pd;return this.pos+=8,a},readFloat:function(){var a=Bg(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Bg(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,l,h=this.buf;return n=127&(l=h[this.pos++]),l<128?n:(n|=(127&(l=h[this.pos++]))<<7,l<128?n:(n|=(127&(l=h[this.pos++]))<<14,l<128?n:(n|=(127&(l=h[this.pos++]))<<21,l<128?n:function(m,x,w){var T,D,O=w.buf;if(T=(112&(D=O[w.pos++]))>>4,D<128||(T|=(127&(D=O[w.pos++]))<<3,D<128)||(T|=(127&(D=O[w.pos++]))<<10,D<128)||(T|=(127&(D=O[w.pos++]))<<17,D<128)||(T|=(127&(D=O[w.pos++]))<<24,D<128)||(T|=(1&(D=O[w.pos++]))<<31,D<128))return xu(m,T,x);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&Fg?function(l,h,m){return Fg.decode(l.subarray(h,m))}(this.buf,n,a):function(l,h,m){for(var x="",w=h;w<m;){var T,D,O,$=l[w],H=null,ie=$>239?4:$>223?3:$>191?2:1;if(w+ie>m)break;ie===1?$<128&&(H=$):ie===2?(192&(T=l[w+1]))==128&&(H=(31&$)<<6|63&T)<=127&&(H=null):ie===3?(D=l[w+2],(192&(T=l[w+1]))==128&&(192&D)==128&&((H=(15&$)<<12|(63&T)<<6|63&D)<=2047||H>=55296&&H<=57343)&&(H=null)):ie===4&&(D=l[w+2],O=l[w+3],(192&(T=l[w+1]))==128&&(192&D)==128&&(192&O)==128&&((H=(15&$)<<18|(63&T)<<12|(63&D)<<6|63&O)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,ie=1):H>65535&&(H-=65536,x+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),x+=String.fromCharCode(H),w+=ie}return x}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Vr.Bytes)return a.push(this.readVarint(n));var l=ol(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Vr.Bytes)return a.push(this.readSVarint());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Vr.Bytes)return a.push(this.readBoolean());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Vr.Bytes)return a.push(this.readFloat());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Vr.Bytes)return a.push(this.readDouble());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Vr.Bytes)return a.push(this.readFixed32());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Vr.Bytes)return a.push(this.readSFixed32());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Vr.Bytes)return a.push(this.readFixed64());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Vr.Bytes)return a.push(this.readSFixed64());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Vr.Fixed32)this.pos+=4;else{if(n!==Vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),wu(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),wu(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),wu(this.buf,-1&a,this.pos),wu(this.buf,Math.floor(a*Ng),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),wu(this.buf,-1&a,this.pos),wu(this.buf,Math.floor(a*Ng),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,l){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(x,w,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)}(h,0,l),function(x,w){var T=(7&x)<<4;w.buf[w.pos++]|=T|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,m,x){for(var w,T,D=0;D<m.length;D++){if((w=m.charCodeAt(D))>55295&&w<57344){if(!T){w>56319||D+1===m.length?(h[x++]=239,h[x++]=191,h[x++]=189):T=w;continue}if(w<56320){h[x++]=239,h[x++]=191,h[x++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(h[x++]=239,h[x++]=191,h[x++]=189,T=null);w<128?h[x++]=w:(w<2048?h[x++]=w>>6|192:(w<65536?h[x++]=w>>12|224:(h[x++]=w>>18|240,h[x++]=w>>12&63|128),h[x++]=w>>6&63|128),h[x++]=63&w|128)}return x}(this.buf,a,this.pos);var l=this.pos-n;l>=128&&Vg(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),Og(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Og(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,n){this.pos++;var l=this.pos;a(n,this);var h=this.pos-l;h>=128&&Vg(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,l){this.writeTag(a,Vr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,sx,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,ox,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,cx,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,lx,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,ux,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,hx,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,fx,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,dx,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,px,n)},writeBytesField:function(a,n){this.writeTag(a,Vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Vr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Vr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Vr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var Md=v(Rg);const zd=3;function mx(a,n,l){a===1&&l.readMessage(gx,n)}function gx(a,n,l){if(a===3){const{id:h,bitmap:m,width:x,height:w,left:T,top:D,advance:O}=l.readMessage(_x,{});n.push({id:h,bitmap:new pc({width:x+2*zd,height:w+2*zd},m),metrics:{width:x,height:w,left:T,top:D,advance:O}})}}function _x(a,n,l){a===1?n.id=l.readVarint():a===2?n.bitmap=l.readBytes():a===3?n.width=l.readVarint():a===4?n.height=l.readVarint():a===5?n.left=l.readSVarint():a===6?n.top=l.readSVarint():a===7&&(n.advance=l.readVarint())}const yx=zd;function Ug(a){let n=0,l=0;for(const w of a)n+=w.w*w.h,l=Math.max(l,w.w);a.sort((w,T)=>T.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let m=0,x=0;for(const w of a)for(let T=h.length-1;T>=0;T--){const D=h[T];if(!(w.w>D.w||w.h>D.h)){if(w.x=D.x,w.y=D.y,x=Math.max(x,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===D.w&&w.h===D.h){const O=h.pop();T<h.length&&(h[T]=O)}else w.h===D.h?(D.x+=w.w,D.w-=w.w):w.w===D.w?(D.y+=w.h,D.h-=w.h):(h.push({x:D.x+w.w,y:D.y,w:D.w-w.w,h:w.h}),D.y+=w.h,D.h-=w.h);break}}return{w:m,h:x,fill:n/(m*x)||0}}const ds=1;class Dd{constructor(n,{pixelRatio:l,version:h,stretchX:m,stretchY:x,content:w}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=m,this.stretchY=x,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+ds,this.paddedRect.y+ds]}get br(){return[this.paddedRect.x+this.paddedRect.w-ds,this.paddedRect.y+this.paddedRect.h-ds]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ds)/this.pixelRatio,(this.paddedRect.h-2*ds)/this.pixelRatio]}}class jg{constructor(n,l){const h={},m={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,h,x),this.addImages(l,m,x);const{w,h:T}=Ug(x),D=new Ns({width:w||1,height:T||1});for(const O in n){const $=n[O],H=h[O].paddedRect;Ns.copy($.data,D,{x:0,y:0},{x:H.x+ds,y:H.y+ds},$.data)}for(const O in l){const $=l[O],H=m[O].paddedRect,ie=H.x+ds,ce=H.y+ds,he=$.data.width,Ee=$.data.height;Ns.copy($.data,D,{x:0,y:0},{x:ie,y:ce},$.data),Ns.copy($.data,D,{x:0,y:Ee-1},{x:ie,y:ce-1},{width:he,height:1}),Ns.copy($.data,D,{x:0,y:0},{x:ie,y:ce+Ee},{width:he,height:1}),Ns.copy($.data,D,{x:he-1,y:0},{x:ie-1,y:ce},{width:1,height:Ee}),Ns.copy($.data,D,{x:0,y:0},{x:ie+he,y:ce},{width:1,height:Ee})}this.image=D,this.iconPositions=h,this.patternPositions=m}addImages(n,l,h){for(const m in n){const x=n[m],w={x:0,y:0,w:x.data.width+2*ds,h:x.data.height+2*ds};h.push(w),l[m]=new Dd(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;const[m,x]=n.tl;h.update(l.data,void 0,{x:m,y:x})}}var Tl;mn("ImagePosition",Dd),mn("ImageAtlas",jg),o.ai=void 0,(Tl=o.ai||(o.ai={}))[Tl.none=0]="none",Tl[Tl.horizontal=1]="horizontal",Tl[Tl.vertical=2]="vertical",Tl[Tl.horizontalOnly=3]="horizontalOnly";const wc=-17;class kc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const h=new kc;return h.scale=n||1,h.fontStack=l,h}static forImage(n){const l=new kc;return l.imageName=n,l}}class ku{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const h=new ku;for(let m=0;m<n.sections.length;m++){const x=n.sections[m];x.image?h.addImageSection(x):h.addTextSection(x,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,x=n.charCodeAt(h-1)||null;l+=m&&ph(m)&&!xc[n[h+1]]||x&&ph(x)&&!xc[n[h-1]]||!xc[n[h]]?n[h]:xc[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Rh[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Rh[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const h=new ku;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(kc.forText(n.scale,n.fontStack||l));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void ye("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(kc.forImage(l)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lh(a,n,l,h,m,x,w,T,D,O,$,H,ie,ce,he,Ee){const De=ku.fromFeature(a,m);let Be;H===o.ai.vertical&&De.verticalizePunctuation();const{processBidirectionalText:Ke,processStyledBidirectionalText:Ue}=hs;if(Ke&&De.sections.length===1){Be=[];const mt=Ke(De.toString(),Ld(De,O,x,n,h,ce,he));for(const fn of mt){const xn=new ku;xn.text=fn,xn.sections=De.sections;for(let un=0;un<fn.length;un++)xn.sectionIndex.push(0);Be.push(xn)}}else if(Ue){Be=[];const mt=Ue(De.text,De.sectionIndex,Ld(De,O,x,n,h,ce,he));for(const fn of mt){const xn=new ku;xn.text=fn[0],xn.sectionIndex=fn[1],xn.sections=De.sections,Be.push(xn)}}else Be=function(mt,fn){const xn=[],un=mt.text;let rn=0;for(const Kt of fn)xn.push(mt.substring(rn,Kt)),rn=Kt;return rn<un.length&&xn.push(mt.substring(rn,un.length)),xn}(De,Ld(De,O,x,n,h,ce,he));const Ye=[],nt={positionedLines:Ye,text:De.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(mt,fn,xn,un,rn,Kt,_n,Yt,Ot,An,En,Qn){let Wr=0,Yr=wc,$i=0,As=0;const Ha=Yt==="right"?1:Yt==="left"?0:.5;let zi=0;for(const Ui of rn){Ui.trim();const ji=Ui.getMaxScale(),ka=(ji-1)*Vi,Xa={positionedGlyphs:[],lineOffset:0};mt.positionedLines[zi]=Xa;const Ea=Xa.positionedGlyphs;let ps=0;if(!Ui.length()){Yr+=Kt,++zi;continue}for(let qi=0;qi<Ui.length();qi++){const pr=Ui.getSection(qi),Sa=Ui.getSectionIndex(qi),pa=Ui.getCharCode(qi);let Gi=0,ao=null,Eo=null,So=null,ll=Vi;const so=!(Ot===o.ai.horizontal||!En&&!Ku(pa)||En&&(Rh[pa]||(aa=pa,hn.Arabic(aa)||hn["Arabic Supplement"](aa)||hn["Arabic Extended-A"](aa)||hn["Arabic Presentation Forms-A"](aa)||hn["Arabic Presentation Forms-B"](aa))));if(pr.imageName){const Vs=un[pr.imageName];if(!Vs)continue;So=pr.imageName,mt.iconsInText=mt.iconsInText||!0,Eo=Vs.paddedRect;const gs=Vs.displaySize;pr.scale=pr.scale*Vi/Qn,ao={width:gs[0],height:gs[1],left:ds,top:-3,advance:so?gs[1]:gs[0]},Gi=ka+(Vi-gs[1]*pr.scale),ll=ao.advance;const ul=so?gs[0]*pr.scale-Vi*ji:gs[1]*pr.scale-Vi*ji;ul>0&&ul>ps&&(ps=ul)}else{const Vs=xn[pr.fontStack],gs=Vs&&Vs[pa];if(gs&&gs.rect)Eo=gs.rect,ao=gs.metrics;else{const ul=fn[pr.fontStack],Cc=ul&&ul[pa];if(!Cc)continue;ao=Cc.metrics}Gi=(ji-pr.scale)*Vi}so?(mt.verticalizable=!0,Ea.push({glyph:pa,imageName:So,x:Wr,y:Yr+Gi,vertical:so,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:Sa,metrics:ao,rect:Eo}),Wr+=ll*pr.scale+An):(Ea.push({glyph:pa,imageName:So,x:Wr,y:Yr+Gi,vertical:so,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:Sa,metrics:ao,rect:Eo}),Wr+=ao.advance*pr.scale+An)}Ea.length!==0&&($i=Math.max(Wr-An,$i),xx(Ea,0,Ea.length-1,Ha,ps)),Wr=0;const ms=Kt*ji+ps;Xa.lineOffset=Math.max(ps,ka),Yr+=ms,As=Math.max(ms,As),++zi}var aa;const da=Yr-wc,{horizontalAlign:Wa,verticalAlign:Ka}=Rd(_n);(function(Ui,ji,ka,Xa,Ea,ps,ms,qi,pr){const Sa=(ji-ka)*Ea;let pa=0;pa=ps!==ms?-qi*Xa-wc:(-Xa*pr+.5)*ms;for(const Gi of Ui)for(const ao of Gi.positionedGlyphs)ao.x+=Sa,ao.y+=pa})(mt.positionedLines,Ha,Wa,Ka,$i,As,Kt,da,rn.length),mt.top+=-Ka*da,mt.bottom=mt.top+da,mt.left+=-Wa*$i,mt.right=mt.left+$i}(nt,n,l,h,Be,w,T,D,H,O,ie,Ee),!function(mt){for(const fn of mt)if(fn.positionedGlyphs.length!==0)return!1;return!0}(Ye)&&nt}const Rh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vx={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qg(a,n,l,h,m,x){if(n.imageName){const w=h[n.imageName];return w?w.displaySize[0]*n.scale*Vi/x+m:0}{const w=l[n.fontStack],T=w&&w[a];return T?T.metrics.advance*n.scale+m:0}}function Gg(a,n,l,h){const m=Math.pow(a-n,2);return h?a<n?m/2:2*m:m+Math.abs(l)*l}function bx(a,n,l){let h=0;return a===10&&(h-=1e4),l&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Zg(a,n,l,h,m,x){let w=null,T=Gg(n,l,m,x);for(const D of h){const O=Gg(n-D.x,l,m,x)+D.badness;O<=T&&(w=D,T=O)}return{index:a,x:n,priorBreak:w,badness:T}}function Hg(a){return a?Hg(a.priorBreak).concat(a.index):[]}function Ld(a,n,l,h,m,x,w){if(x!=="point")return[];if(!a)return[];const T=[],D=function(ie,ce,he,Ee,De,Be){let Ke=0;for(let Ue=0;Ue<ie.length();Ue++){const Ye=ie.getSection(Ue);Ke+=qg(ie.getCharCode(Ue),Ye,Ee,De,ce,Be)}return Ke/Math.max(1,Math.ceil(Ke/he))}(a,n,l,h,m,w),O=a.text.indexOf("​")>=0;let $=0;for(let ie=0;ie<a.length();ie++){const ce=a.getSection(ie),he=a.getCharCode(ie);if(Rh[he]||($+=qg(he,ce,h,m,n,w)),ie<a.length()-1){const Ee=!((H=he)<11904||!(hn["Bopomofo Extended"](H)||hn.Bopomofo(H)||hn["CJK Compatibility Forms"](H)||hn["CJK Compatibility Ideographs"](H)||hn["CJK Compatibility"](H)||hn["CJK Radicals Supplement"](H)||hn["CJK Strokes"](H)||hn["CJK Symbols and Punctuation"](H)||hn["CJK Unified Ideographs Extension A"](H)||hn["CJK Unified Ideographs"](H)||hn["Enclosed CJK Letters and Months"](H)||hn["Halfwidth and Fullwidth Forms"](H)||hn.Hiragana(H)||hn["Ideographic Description Characters"](H)||hn["Kangxi Radicals"](H)||hn["Katakana Phonetic Extensions"](H)||hn.Katakana(H)||hn["Vertical Forms"](H)||hn["Yi Radicals"](H)||hn["Yi Syllables"](H)));(vx[he]||Ee||ce.imageName)&&T.push(Zg(ie+1,$,D,T,bx(he,a.getCharCode(ie+1),Ee&&O),!1))}}var H;return Hg(Zg(a.length(),$,D,T,0,!0))}function Rd(a){let n=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function xx(a,n,l,h,m){if(!h&&!m)return;const x=a[l],w=(a[l].x+x.metrics.advance*x.scale)*h;for(let T=n;T<=l;T++)a[T].x-=w,a[T].y+=m}function wx(a,n,l){const{horizontalAlign:h,verticalAlign:m}=Rd(l),x=n[0]-a.displaySize[0]*h,w=n[1]-a.displaySize[1]*m;return{image:a,top:w,bottom:w+a.displaySize[1],left:x,right:x+a.displaySize[0]}}function Wg(a,n,l,h,m,x){const w=a.image;let T;if(w.content){const De=w.content,Be=w.pixelRatio||1;T=[De[0]/Be,De[1]/Be,w.displaySize[0]-De[2]/Be,w.displaySize[1]-De[3]/Be]}const D=n.left*x,O=n.right*x;let $,H,ie,ce;l==="width"||l==="both"?(ce=m[0]+D-h[3],H=m[0]+O+h[1]):(ce=m[0]+(D+O-w.displaySize[0])/2,H=ce+w.displaySize[0]);const he=n.top*x,Ee=n.bottom*x;return l==="height"||l==="both"?($=m[1]+he-h[0],ie=m[1]+Ee+h[2]):($=m[1]+(he+Ee-w.displaySize[1])/2,ie=$+w.displaySize[1]),{image:w,top:$,right:H,bottom:ie,left:ce,collisionPadding:T}}const Ec=255,Vo=128,Al=Ec*Vo;function Kg(a,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Zr(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=l;let x=0;for(;x<h.length&&h[x]<=a;)x++;x=Math.max(0,x-1);let w=x;for(;w<h.length&&h[w]<a+1;)w++;w=Math.min(h.length-1,w);const T=h[x],D=h[w];return l.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:D,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:D,minSize:l.evaluate(new Zr(T)),maxSize:l.evaluate(new Zr(D)),interpolationType:m}}}function Bd(a,n,l){let h="never";const m=a.get(n);return m?h=m:a.get(l)&&(h="always"),h}const kx=Il.VectorTileFeature.types,Ex=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bh(a,n,l,h,m,x,w,T,D,O,$,H,ie){const ce=T?Math.min(Al,Math.round(T[0])):0,he=T?Math.min(Al,Math.round(T[1])):0;a.emplaceBack(n,l,Math.round(32*h),Math.round(32*m),x,w,(ce<<1)+(D?1:0),he,16*O,16*$,256*H,256*ie)}function Od(a,n,l){a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l)}function Sx(a){for(const n of a.sections)if(ud(n.text))return!0;return!1}class Nd{constructor(n){this.layoutVertexArray=new ir,this.indexArray=new ra,this.programConfigurations=n,this.segments=new Hr,this.dynamicLayoutVertexArray=new Wn,this.opacityVertexArray=new or,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ze}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,tx.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,nx.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Ex,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mn("SymbolBuffers",Nd);class Fd{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Hr,this.collisionVertexArray=new $r}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,rx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mn("CollisionBuffers",Fd);class Eu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(w=>w.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gd([]),this.placementViewportMatrix=gd([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Kg(this.zoom,l["text-size"]),this.iconSizeData=Kg(this.zoom,l["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap=Bd(h,"text-overlap","text-allow-overlap")!=="never"||Bd(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(w=>o.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=n.sourceID}createArrays(){this.text=new Nd(new ko(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Nd(new ko(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new We,this.lineVertexArray=new it,this.symbolInstances=new Re,this.textAnchorOffsets=new ft}calculateGlyphDependencies(n,l,h,m,x){for(let w=0;w<n.length;w++)if(l[n.charCodeAt(w)]=!0,(h||m)&&x){const T=xc[n.charAt(w)];T&&(l[T.charCodeAt(0)]=!0)}}populate(n,l,h){const m=this.layers[0],x=m.layout,w=x.get("text-font"),T=x.get("text-field"),D=x.get("icon-image"),O=(T.value.kind!=="constant"||T.value.value instanceof Un&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),$=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,H=x.get("symbol-sort-key");if(this.features=[],!O&&!$)return;const ie=l.iconDependencies,ce=l.glyphDependencies,he=l.availableImages,Ee=new Zr(this.zoom);for(const{feature:De,id:Be,index:Ke,sourceLayerIndex:Ue}of n){const Ye=m._featureFilter.needGeometry,nt=Zl(De,Ye);if(!m._featureFilter.filter(Ee,nt,h))continue;let mt,fn;if(Ye||(nt.geometry=Gl(De)),O){const un=m.getValueAndResolveTokens("text-field",nt,h,he),rn=Un.factory(un);Sx(rn)&&(this.hasRTLText=!0),(!this.hasRTLText||tc()==="unavailable"||this.hasRTLText&&hs.isParsed())&&(mt=ax(rn,m,nt))}if($){const un=m.getValueAndResolveTokens("icon-image",nt,h,he);fn=un instanceof Pn?un:Pn.fromString(un)}if(!mt&&!fn)continue;const xn=this.sortFeaturesByKey?H.evaluate(nt,{},h):void 0;if(this.features.push({id:Be,text:mt,icon:fn,index:Ke,sourceLayerIndex:Ue,geometry:nt.geometry,properties:De.properties,type:kx[De.type],sortKey:xn}),fn&&(ie[fn.name]=!0),mt){const un=w.evaluate(nt,{},h).join(","),rn=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ai.vertical)>=0;for(const Kt of mt.sections)if(Kt.image)ie[Kt.image.name]=!0;else{const _n=Hu(mt.toString()),Yt=Kt.fontStack||un,Ot=ce[Yt]=ce[Yt]||{};this.calculateGlyphDependencies(Kt.text,Ot,rn,this.allowVerticalPlacement,_n)}}}x.get("symbol-placement")==="line"&&(this.features=function(De){const Be={},Ke={},Ue=[];let Ye=0;function nt(un){Ue.push(De[un]),Ye++}function mt(un,rn,Kt){const _n=Ke[un];return delete Ke[un],Ke[rn]=_n,Ue[_n].geometry[0].pop(),Ue[_n].geometry[0]=Ue[_n].geometry[0].concat(Kt[0]),_n}function fn(un,rn,Kt){const _n=Be[rn];return delete Be[rn],Be[un]=_n,Ue[_n].geometry[0].shift(),Ue[_n].geometry[0]=Kt[0].concat(Ue[_n].geometry[0]),_n}function xn(un,rn,Kt){const _n=Kt?rn[0][rn[0].length-1]:rn[0][0];return`${un}:${_n.x}:${_n.y}`}for(let un=0;un<De.length;un++){const rn=De[un],Kt=rn.geometry,_n=rn.text?rn.text.toString():null;if(!_n){nt(un);continue}const Yt=xn(_n,Kt),Ot=xn(_n,Kt,!0);if(Yt in Ke&&Ot in Be&&Ke[Yt]!==Be[Ot]){const An=fn(Yt,Ot,Kt),En=mt(Yt,Ot,Ue[An].geometry);delete Be[Yt],delete Ke[Ot],Ke[xn(_n,Ue[En].geometry,!0)]=En,Ue[An].geometry=null}else Yt in Ke?mt(Yt,Ot,Kt):Ot in Be?fn(Yt,Ot,Kt):(nt(un),Be[Yt]=Ye-1,Ke[Ot]=Ye-1)}return Ue.filter(un=>un.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((De,Be)=>De.sortKey-Be.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(l[n.segment+1]),x=n.dist(l[n.segment]);const w={};for(let T=n.segment+1;T<l.length;T++)w[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:m},T<l.length-1&&(m+=l[T+1].dist(l[T]));for(let T=n.segment||0;T>=0;T--)w[T]={x:l[T].x,y:l[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=l[T-1].dist(l[T]));for(let T=0;T<l.length;T++){const D=w[T];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,m,x,w,T,D,O,$,H,ie){const ce=n.indexArray,he=n.layoutVertexArray,Ee=n.segments.prepareSegment(4*l.length,he,ce,this.canOverlap?w.sortKey:void 0),De=this.glyphOffsetArray.length,Be=Ee.vertexLength,Ke=this.allowVerticalPlacement&&T===o.ai.vertical?Math.PI/2:0,Ue=w.text&&w.text.sections;for(let Ye=0;Ye<l.length;Ye++){const{tl:nt,tr:mt,bl:fn,br:xn,tex:un,pixelOffsetTL:rn,pixelOffsetBR:Kt,minFontScaleX:_n,minFontScaleY:Yt,glyphOffset:Ot,isSDF:An,sectionIndex:En}=l[Ye],Qn=Ee.vertexLength,Wr=Ot[1];Bh(he,D.x,D.y,nt.x,Wr+nt.y,un.x,un.y,h,An,rn.x,rn.y,_n,Yt),Bh(he,D.x,D.y,mt.x,Wr+mt.y,un.x+un.w,un.y,h,An,Kt.x,rn.y,_n,Yt),Bh(he,D.x,D.y,fn.x,Wr+fn.y,un.x,un.y+un.h,h,An,rn.x,Kt.y,_n,Yt),Bh(he,D.x,D.y,xn.x,Wr+xn.y,un.x+un.w,un.y+un.h,h,An,Kt.x,Kt.y,_n,Yt),Od(n.dynamicLayoutVertexArray,D,Ke),ce.emplaceBack(Qn,Qn+1,Qn+2),ce.emplaceBack(Qn+1,Qn+2,Qn+3),Ee.vertexLength+=4,Ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Ye!==l.length-1&&En===l[Ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(he.length,w,w.index,{},ie,Ue&&Ue[En])}n.placedSymbolArray.emplaceBack(D.x,D.y,De,this.glyphOffsetArray.length-De,Be,O,$,D.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],T,0,!1,0,H)}_addCollisionDebugVertex(n,l,h,m,x,w){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(n,l,h,m,x,w,T){const D=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),O=D.vertexLength,$=x.layoutVertexArray,H=x.collisionVertexArray,ie=T.anchorX,ce=T.anchorY;this._addCollisionDebugVertex($,H,w,ie,ce,new I(n,l)),this._addCollisionDebugVertex($,H,w,ie,ce,new I(h,l)),this._addCollisionDebugVertex($,H,w,ie,ce,new I(h,m)),this._addCollisionDebugVertex($,H,w,ie,ce,new I(n,m)),D.vertexLength+=4;const he=x.indexArray;he.emplaceBack(O,O+1),he.emplaceBack(O+1,O+2),he.emplaceBack(O+2,O+3),he.emplaceBack(O+3,O),D.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,m){for(let x=n;x<l;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fd(mi,Lg.members,Ni),this.iconCollisionBox=new Fd(mi,Lg.members,Ni);for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,m,x,w,T,D,O){const $={};for(let H=l;H<h;H++){const ie=n.get(H);$.textBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},$.textFeatureIndex=ie.featureIndex;break}for(let H=m;H<x;H++){const ie=n.get(H);$.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},$.verticalTextFeatureIndex=ie.featureIndex;break}for(let H=w;H<T;H++){const ie=n.get(H);$.iconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},$.iconFeatureIndex=ie.featureIndex;break}for(let H=D;H<O;H++){const ie=n.get(H);$.verticalIconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},$.verticalIconFeatureIndex=ie.featureIndex;break}return $}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const h=n.placedSymbolArray.get(l),m=h.vertexStartIndex+4*h.numGlyphs;for(let x=h.vertexStartIndex;x<m;x+=4)n.indexArray.emplaceBack(x,x+1,x+2),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),h=Math.cos(n),m=[],x=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const D=this.symbolInstances.get(T);m.push(0|Math.round(l*D.anchorX+h*D.anchorY)),x.push(D.featureIndex)}return w.sort((T,D)=>m[T]-m[D]||x[D]-x[T]),w}addToSortKeyRanges(n,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,x,w)=>{m>=0&&w.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Xg,Yg;mn("SymbolBucket",Eu,{omit:["layers","collisionBoxArray","features","compareText"]}),Eu.MAX_GLYPHS=65535,Eu.addDynamicAttributes=Od;var Vd={get paint(){return Yg=Yg||new ki({"icon-opacity":new zn(be.paint_symbol["icon-opacity"]),"icon-color":new zn(be.paint_symbol["icon-color"]),"icon-halo-color":new zn(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(be.paint_symbol["icon-halo-blur"]),"icon-translate":new Sn(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sn(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(be.paint_symbol["text-opacity"]),"text-color":new zn(be.paint_symbol["text-color"],{runtimeType:wr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new zn(be.paint_symbol["text-halo-color"]),"text-halo-width":new zn(be.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(be.paint_symbol["text-halo-blur"]),"text-translate":new Sn(be.paint_symbol["text-translate"]),"text-translate-anchor":new Sn(be.paint_symbol["text-translate-anchor"])})},get layout(){return Xg=Xg||new ki({"symbol-placement":new Sn(be.layout_symbol["symbol-placement"]),"symbol-spacing":new Sn(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sn(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sn(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sn(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Sn(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Sn(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sn(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sn(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(be.layout_symbol["icon-size"]),"icon-text-fit":new Sn(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sn(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(be.layout_symbol["icon-image"]),"icon-rotate":new zn(be.layout_symbol["icon-rotate"]),"icon-padding":new zn(be.layout_symbol["icon-padding"]),"icon-keep-upright":new Sn(be.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(be.layout_symbol["icon-offset"]),"icon-anchor":new zn(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sn(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sn(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sn(be.layout_symbol["text-rotation-alignment"]),"text-field":new zn(be.layout_symbol["text-field"]),"text-font":new zn(be.layout_symbol["text-font"]),"text-size":new zn(be.layout_symbol["text-size"]),"text-max-width":new zn(be.layout_symbol["text-max-width"]),"text-line-height":new Sn(be.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(be.layout_symbol["text-letter-spacing"]),"text-justify":new zn(be.layout_symbol["text-justify"]),"text-radial-offset":new zn(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sn(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new zn(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new zn(be.layout_symbol["text-anchor"]),"text-max-angle":new Sn(be.layout_symbol["text-max-angle"]),"text-writing-mode":new Sn(be.layout_symbol["text-writing-mode"]),"text-rotate":new zn(be.layout_symbol["text-rotate"]),"text-padding":new Sn(be.layout_symbol["text-padding"]),"text-keep-upright":new Sn(be.layout_symbol["text-keep-upright"]),"text-transform":new zn(be.layout_symbol["text-transform"]),"text-offset":new zn(be.layout_symbol["text-offset"]),"text-allow-overlap":new Sn(be.layout_symbol["text-allow-overlap"]),"text-overlap":new Sn(be.layout_symbol["text-overlap"]),"text-ignore-placement":new Sn(be.layout_symbol["text-ignore-placement"]),"text-optional":new Sn(be.layout_symbol["text-optional"])})}};class Jg{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:dn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mn("FormatSectionOverride",Jg,{omit:["defaultValue"]});class Oh extends Is{constructor(n){super(n,Vd)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const x of h)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,m){const x=this.layout.get(n).evaluate(l,{},h,m),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||as(w.value)||!x?x:function(T,D){return D.replace(/{([^{}]+)}/g,(O,$)=>T&&$ in T?String(T[$]):"")}(l.properties,x)}createBucket(n){return new Eu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Vd.paint.overridableProperties){if(!Oh.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),h=new Jg(l),m=new Va(h,l.property.specification);let x=null;x=l.value.kind==="constant"||l.value.kind==="source"?new $a("source",m):new ba("composite",m,l.value.zoomStops),this.paint._values[n]=new xa(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Oh.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const h=n.get("text-field"),m=Vd.paint.properties[l];let x=!1;const w=T=>{for(const D of T)if(m.overrides&&m.overrides.hasOverride(D))return void(x=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Un)w(h.value.value.sections);else if(h.value.kind==="source"){const T=O=>{x||(O instanceof ni&&dr(O.value)===ke?w(O.value.sections):O instanceof rt?w(O.sections):O.eachChild(T))},D=h.value;D._styleExpression&&T(D._styleExpression.expression)}return x}}let Qg;var Ix={get paint(){return Qg=Qg||new ki({"background-color":new Sn(be.paint_background["background-color"]),"background-pattern":new rc(be.paint_background["background-pattern"]),"background-opacity":new Sn(be.paint_background["background-opacity"])})}};class Tx extends Is{constructor(n){super(n,Ix)}}let e0;var Ax={get paint(){return e0=e0||new ki({"raster-opacity":new Sn(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sn(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sn(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sn(be.paint_raster["raster-brightness-max"]),"raster-saturation":new Sn(be.paint_raster["raster-saturation"]),"raster-contrast":new Sn(be.paint_raster["raster-contrast"]),"raster-resampling":new Sn(be.paint_raster["raster-resampling"]),"raster-fade-duration":new Sn(be.paint_raster["raster-fade-duration"])})}};class Cx extends Is{constructor(n){super(n,Ax)}}class Px extends Is{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Mx{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const $d=63710088e-1;class Cl{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cl(se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,h=this.lat*l,m=n.lat*l,x=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*l);return $d*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof Cl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Cl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Cl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const t0=2*Math.PI*$d;function n0(a){return t0*Math.cos(a*Math.PI/180)}function r0(a){return(180+a)/360}function i0(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function a0(a,n){return a/n0(n)}function s0(a){return 360*a-180}function Ud(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Nh{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){const h=Cl.convert(n);return new Nh(r0(h.lng),i0(h.lat),a0(l,h.lat))}toLngLat(){return new Cl(s0(this.x),Ud(this.y))}toAltitude(){return this.z*n0(Ud(this.y))}meterInMercatorCoordinateUnits(){return 1/t0*(n=Ud(this.y),1/Math.cos(n*Math.PI/180));var n}}function o0(a,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class jd{constructor(n,l,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||l<0||l>=Math.pow(2,n))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=Sc(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){const m=(w=this.y,T=this.z,D=o0(256*(x=this.x),256*(w=Math.pow(2,T)-w-1),T),O=o0(256*(x+1),256*(w+1),T),D[0]+","+D[1]+","+O[0]+","+O[1]);var x,w,T,D,O;const $=function(H,ie,ce){let he,Ee="";for(let De=H;De>0;De--)he=1<<De-1,Ee+=(ie&he?1:0)+(ce&he?2:0);return Ee}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){const l=Math.pow(2,this.z);return new I((n.x*l-this.x)*Mi,(n.y*l-this.y)*Mi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class l0{constructor(n,l){this.wrap=n,this.canonical=l,this.key=Sc(n,l.z,l.z,l.x,l.y)}}class Fs{constructor(n,l,h,m,x){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new jd(h,+m,+x),this.key=Sc(l,n,h,m,x)}clone(){return new Fs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-n;return n>this.canonical.z?new Fs(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fs(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Sc(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):Sc(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Fs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Fs(l,this.wrap,l,h,m),new Fs(l,this.wrap,l,h+1,m),new Fs(l,this.wrap,l,h,m+1),new Fs(l,this.wrap,l,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Fs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Fs(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new l0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Nh(n.x-this.wrap,n.y))}}function Sc(a,n,l,h,m){(a*=2)<0&&(a=-1*a-1);const x=1<<l;return(x*x*a+x*m+h).toString(36)+l.toString(36)+n.toString(36)}mn("CanonicalTileID",jd),mn("OverscaledTileID",Fs,{omit:["posMatrix"]});class u0{constructor(n,l,h,m=1,x=1,w=1,T=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void ye(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const D=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<D;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(D,O)]=this.data[this._idx(D-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,D)]=this.data[this._idx(O,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<D;O++)for(let $=0;$<D;$++){const H=this.get(O,$);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(n,l){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,l);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ns({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,x=l*this.dim+this.dim,w=h*this.dim,T=h*this.dim+this.dim;switch(l){case-1:m=x-1;break;case 1:x=m+1}switch(h){case-1:w=T-1;break;case 1:T=w+1}const D=-l*this.dim,O=-h*this.dim;for(let $=w;$<T;$++)for(let H=m;H<x;H++)this.data[this._idx(H,$)]=n.data[this._idx(H+D,$+O)]}}mn("DEMData",u0);class c0{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class h0{constructor(n,l,h,m,x){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=m,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class f0{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new xl(Mi,16,0),this.grid3D=new xl(Mi,16,0),this.featureIndexArray=new yt,this.promoteId=l}insert(n,l,h,m,x,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,x);const D=w?this.grid3D:this.grid;for(let O=0;O<l.length;O++){const $=l[O],H=[1/0,1/0,-1/0,-1/0];for(let ie=0;ie<$.length;ie++){const ce=$[ie];H[0]=Math.min(H[0],ce.x),H[1]=Math.min(H[1],ce.y),H[2]=Math.max(H[2],ce.x),H[3]=Math.max(H[3],ce.y)}H[0]<Mi&&H[1]<Mi&&H[2]>=0&&H[3]>=0&&D.insert(T,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Il.VectorTile(new Md(this.rawTileData)).layers,this.sourceLayerCoder=new c0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,m){this.loadVTLayers();const x=n.params||{},w=Mi/n.tileSize/n.scale,T=ks(x.filter),D=n.queryGeometry,O=n.queryPadding*w,$=p0(D),H=this.grid.query($.minX-O,$.minY-O,$.maxX+O,$.maxY+O),ie=p0(n.cameraQueryGeometry),ce=this.grid3D.query(ie.minX-O,ie.minY-O,ie.maxX+O,ie.maxY+O,(De,Be,Ke,Ue)=>function(Ye,nt,mt,fn,xn){for(const rn of Ye)if(nt<=rn.x&&mt<=rn.y&&fn>=rn.x&&xn>=rn.y)return!0;const un=[new I(nt,mt),new I(nt,xn),new I(fn,xn),new I(fn,mt)];if(Ye.length>2){for(const rn of un)if(_u(Ye,rn))return!0}for(let rn=0;rn<Ye.length-1;rn++)if(l2(Ye[rn],Ye[rn+1],un))return!0;return!1}(n.cameraQueryGeometry,De-O,Be-O,Ke+O,Ue+O));for(const De of ce)H.push(De);H.sort(zx);const he={};let Ee;for(let De=0;De<H.length;De++){const Be=H[De];if(Be===Ee)continue;Ee=Be;const Ke=this.featureIndexArray.get(Be);let Ue=null;this.loadMatchingFeature(he,Ke.bucketIndex,Ke.sourceLayerIndex,Ke.featureIndex,T,x.layers,x.availableImages,l,h,m,(Ye,nt,mt)=>(Ue||(Ue=Gl(Ye)),nt.queryIntersectsFeature(D,Ye,mt,Ue,this.z,n.transform,w,n.pixelPosMatrix)))}return he}loadMatchingFeature(n,l,h,m,x,w,T,D,O,$,H){const ie=this.bucketLayerIDs[l];if(w&&!function(De,Be){for(let Ke=0;Ke<De.length;Ke++)if(Be.indexOf(De[Ke])>=0)return!0;return!1}(w,ie))return;const ce=this.sourceLayerCoder.decode(h),he=this.vtLayers[ce].feature(m);if(x.needGeometry){const De=Zl(he,!0);if(!x.filter(new Zr(this.tileID.overscaledZ),De,this.tileID.canonical))return}else if(!x.filter(new Zr(this.tileID.overscaledZ),he))return;const Ee=this.getId(he,ce);for(let De=0;De<ie.length;De++){const Be=ie[De];if(w&&w.indexOf(Be)<0)continue;const Ke=D[Be];if(!Ke)continue;let Ue={};Ee&&$&&(Ue=$.getState(Ke.sourceLayer||"_geojsonTileLayer",Ee));const Ye=oe({},O[Be]);Ye.paint=d0(Ye.paint,Ke.paint,he,Ue,T),Ye.layout=d0(Ye.layout,Ke.layout,he,Ue,T);const nt=!H||H(he,Ke,Ue);if(!nt)continue;const mt=new h0(he,this.z,this.x,this.y,Ee);mt.layer=Ye;let fn=n[Be];fn===void 0&&(fn=n[Be]=[]),fn.push({featureIndex:m,feature:mt,intersectionZ:nt})}}lookupSymbolFeatures(n,l,h,m,x,w,T,D){const O={};this.loadVTLayers();const $=ks(x);for(const H of n)this.loadMatchingFeature(O,h,m,H,$,w,T,D,l);return O}hasLayer(n){for(const l of this.bucketLayerIDs)for(const h of l)if(n===h)return!0;return!1}getId(n,l){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof h=="boolean"&&(h=Number(h))),h}}function d0(a,n,l,h,m){return fe(a,(x,w)=>{const T=n instanceof mu?n.get(w):null;return T&&T.evaluate?T.evaluate(l,h,m):T})}function p0(a){let n=1/0,l=1/0,h=-1/0,m=-1/0;for(const x of a)n=Math.min(n,x.x),l=Math.min(l,x.y),h=Math.max(h,x.x),m=Math.max(m,x.y);return{minX:n,minY:l,maxX:h,maxY:m}}function zx(a,n){return n-a}function m0(a,n,l,h,m){const x=[];for(let w=0;w<a.length;w++){const T=a[w];let D;for(let O=0;O<T.length-1;O++){let $=T[O],H=T[O+1];$.x<n&&H.x<n||($.x<n?$=new I(n,$.y+(n-$.x)/(H.x-$.x)*(H.y-$.y))._round():H.x<n&&(H=new I(n,$.y+(n-$.x)/(H.x-$.x)*(H.y-$.y))._round()),$.y<l&&H.y<l||($.y<l?$=new I($.x+(l-$.y)/(H.y-$.y)*(H.x-$.x),l)._round():H.y<l&&(H=new I($.x+(l-$.y)/(H.y-$.y)*(H.x-$.x),l)._round()),$.x>=h&&H.x>=h||($.x>=h?$=new I(h,$.y+(h-$.x)/(H.x-$.x)*(H.y-$.y))._round():H.x>=h&&(H=new I(h,$.y+(h-$.x)/(H.x-$.x)*(H.y-$.y))._round()),$.y>=m&&H.y>=m||($.y>=m?$=new I($.x+(m-$.y)/(H.y-$.y)*(H.x-$.x),m)._round():H.y>=m&&(H=new I($.x+(m-$.y)/(H.y-$.y)*(H.x-$.x),m)._round()),D&&$.equals(D[D.length-1])||(D=[$],x.push(D)),D.push(H)))))}}return x}mn("FeatureIndex",f0,{omit:["rawTileData","sourceLayerCoder"]});class Pl extends I{constructor(n,l,h,m){super(n,l),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Pl(this.x,this.y,this.angle,this.segment)}}function g0(a,n,l,h,m){if(n.segment===void 0||l===0)return!0;let x=n,w=n.segment+1,T=0;for(;T>-l/2;){if(w--,w<0)return!1;T-=a[w].dist(x),x=a[w]}T+=a[w].dist(a[w+1]),w++;const D=[];let O=0;for(;T<l/2;){const $=a[w],H=a[w+1];if(!H)return!1;let ie=a[w-1].angleTo($)-$.angleTo(H);for(ie=Math.abs((ie+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:T,angleDelta:ie}),O+=ie;T-D[0].distance>h;)O-=D.shift().angleDelta;if(O>m)return!1;w++,T+=$.dist(H)}return!0}function _0(a){let n=0;for(let l=0;l<a.length-1;l++)n+=a[l].dist(a[l+1]);return n}function y0(a,n,l){return a?.6*n*l:0}function v0(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function Dx(a,n,l,h,m,x){const w=y0(l,m,x),T=v0(l,h)*x;let D=0;const O=_0(a)/2;for(let $=0;$<a.length-1;$++){const H=a[$],ie=a[$+1],ce=H.dist(ie);if(D+ce>O){const he=(O-D)/ce,Ee=Ri.number(H.x,ie.x,he),De=Ri.number(H.y,ie.y,he),Be=new Pl(Ee,De,ie.angleTo(H),$);return Be._round(),!w||g0(a,Be,T,w,n)?Be:void 0}D+=ce}}function Lx(a,n,l,h,m,x,w,T,D){const O=y0(h,x,w),$=v0(h,m),H=$*w,ie=a[0].x===0||a[0].x===D||a[0].y===0||a[0].y===D;return n-H<n/4&&(n=H+n/4),b0(a,ie?n/2*T%n:($/2+2*x)*w*T%n,n,O,l,H,ie,!1,D)}function b0(a,n,l,h,m,x,w,T,D){const O=x/2,$=_0(a);let H=0,ie=n-l,ce=[];for(let he=0;he<a.length-1;he++){const Ee=a[he],De=a[he+1],Be=Ee.dist(De),Ke=De.angleTo(Ee);for(;ie+l<H+Be;){ie+=l;const Ue=(ie-H)/Be,Ye=Ri.number(Ee.x,De.x,Ue),nt=Ri.number(Ee.y,De.y,Ue);if(Ye>=0&&Ye<D&&nt>=0&&nt<D&&ie-O>=0&&ie+O<=$){const mt=new Pl(Ye,nt,Ke,he);mt._round(),h&&!g0(a,mt,x,h,m)||ce.push(mt)}}H+=Be}return T||ce.length||w||(ce=b0(a,H/2,l,h,m,x,w,!0,D)),ce}mn("Anchor",Pl);const Ic=ds;function x0(a,n,l,h){const m=[],x=a.image,w=x.pixelRatio,T=x.paddedRect.w-2*Ic,D=x.paddedRect.h-2*Ic,O=a.right-a.left,$=a.bottom-a.top,H=x.stretchX||[[0,T]],ie=x.stretchY||[[0,D]],ce=(Kt,_n)=>Kt+_n[1]-_n[0],he=H.reduce(ce,0),Ee=ie.reduce(ce,0),De=T-he,Be=D-Ee;let Ke=0,Ue=he,Ye=0,nt=Ee,mt=0,fn=De,xn=0,un=Be;if(x.content&&h){const Kt=x.content;Ke=Fh(H,0,Kt[0]),Ye=Fh(ie,0,Kt[1]),Ue=Fh(H,Kt[0],Kt[2]),nt=Fh(ie,Kt[1],Kt[3]),mt=Kt[0]-Ke,xn=Kt[1]-Ye,fn=Kt[2]-Kt[0]-Ue,un=Kt[3]-Kt[1]-nt}const rn=(Kt,_n,Yt,Ot)=>{const An=Vh(Kt.stretch-Ke,Ue,O,a.left),En=$h(Kt.fixed-mt,fn,Kt.stretch,he),Qn=Vh(_n.stretch-Ye,nt,$,a.top),Wr=$h(_n.fixed-xn,un,_n.stretch,Ee),Yr=Vh(Yt.stretch-Ke,Ue,O,a.left),$i=$h(Yt.fixed-mt,fn,Yt.stretch,he),As=Vh(Ot.stretch-Ye,nt,$,a.top),Ha=$h(Ot.fixed-xn,un,Ot.stretch,Ee),zi=new I(An,Qn),aa=new I(Yr,Qn),da=new I(Yr,As),Wa=new I(An,As),Ka=new I(En/w,Wr/w),Ui=new I($i/w,Ha/w),ji=n*Math.PI/180;if(ji){const Ea=Math.sin(ji),ps=Math.cos(ji),ms=[ps,-Ea,Ea,ps];zi._matMult(ms),aa._matMult(ms),Wa._matMult(ms),da._matMult(ms)}const ka=Kt.stretch+Kt.fixed,Xa=_n.stretch+_n.fixed;return{tl:zi,tr:aa,bl:Wa,br:da,tex:{x:x.paddedRect.x+Ic+ka,y:x.paddedRect.y+Ic+Xa,w:Yt.stretch+Yt.fixed-ka,h:Ot.stretch+Ot.fixed-Xa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ka,pixelOffsetBR:Ui,minFontScaleX:fn/w/O,minFontScaleY:un/w/$,isSDF:l}};if(h&&(x.stretchX||x.stretchY)){const Kt=w0(H,De,he),_n=w0(ie,Be,Ee);for(let Yt=0;Yt<Kt.length-1;Yt++){const Ot=Kt[Yt],An=Kt[Yt+1];for(let En=0;En<_n.length-1;En++)m.push(rn(Ot,_n[En],An,_n[En+1]))}}else m.push(rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:D+1}));return m}function Fh(a,n,l){let h=0;for(const m of a)h+=Math.max(n,Math.min(l,m[1]))-Math.max(n,Math.min(l,m[0]));return h}function w0(a,n,l){const h=[{fixed:-1,stretch:0}];for(const[m,x]of a){const w=h[h.length-1];h.push({fixed:m-w.stretch,stretch:w.stretch}),h.push({fixed:m-w.stretch,stretch:w.stretch+(x-m)})}return h.push({fixed:n+Ic,stretch:l}),h}function Vh(a,n,l,h){return a/n*l+h}function $h(a,n,l,h){return a-n*l/h}class Uh{constructor(n,l,h,m,x,w,T,D,O,$){if(this.boxStartIndex=n.length,O){let H=w.top,ie=w.bottom;const ce=w.collisionPadding;ce&&(H-=ce[1],ie+=ce[3]);let he=ie-H;he>0&&(he=Math.max(10,he),this.circleDiameter=he)}else{let H=w.top*T-D[0],ie=w.bottom*T+D[2],ce=w.left*T-D[3],he=w.right*T+D[1];const Ee=w.collisionPadding;if(Ee&&(ce-=Ee[0]*T,H-=Ee[1]*T,he+=Ee[2]*T,ie+=Ee[3]*T),$){const De=new I(ce,H),Be=new I(he,H),Ke=new I(ce,ie),Ue=new I(he,ie),Ye=$*Math.PI/180;De._rotate(Ye),Be._rotate(Ye),Ke._rotate(Ye),Ue._rotate(Ye),ce=Math.min(De.x,Be.x,Ke.x,Ue.x),he=Math.max(De.x,Be.x,Ke.x,Ue.x),H=Math.min(De.y,Be.y,Ke.y,Ue.y),ie=Math.max(De.y,Be.y,Ke.y,Ue.y)}n.emplaceBack(l.x,l.y,ce,H,he,ie,h,m,x)}this.boxEndIndex=n.length}}class Rx{constructor(n=[],l=Bx){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:h}=this,m=l[n];for(;n>0;){const x=n-1>>1,w=l[x];if(h(m,w)>=0)break;l[n]=w,n=x}l[n]=m}_down(n){const{data:l,compare:h}=this,m=this.length>>1,x=l[n];for(;n<m;){let w=1+(n<<1),T=l[w];const D=w+1;if(D<this.length&&h(l[D],T)<0&&(w=D,T=l[D]),h(T,x)>=0)break;l[n]=T,n=w}l[n]=x}}function Bx(a,n){return a<n?-1:a>n?1:0}function Ox(a,n=1,l=!1){let h=1/0,m=1/0,x=-1/0,w=-1/0;const T=a[0];for(let ce=0;ce<T.length;ce++){const he=T[ce];(!ce||he.x<h)&&(h=he.x),(!ce||he.y<m)&&(m=he.y),(!ce||he.x>x)&&(x=he.x),(!ce||he.y>w)&&(w=he.y)}const D=Math.min(x-h,w-m);let O=D/2;const $=new Rx([],Nx);if(D===0)return new I(h,m);for(let ce=h;ce<x;ce+=D)for(let he=m;he<w;he+=D)$.push(new Su(ce+O,he+O,O,a));let H=function(ce){let he=0,Ee=0,De=0;const Be=ce[0];for(let Ke=0,Ue=Be.length,Ye=Ue-1;Ke<Ue;Ye=Ke++){const nt=Be[Ke],mt=Be[Ye],fn=nt.x*mt.y-mt.x*nt.y;Ee+=(nt.x+mt.x)*fn,De+=(nt.y+mt.y)*fn,he+=3*fn}return new Su(Ee/he,De/he,0,ce)}(a),ie=$.length;for(;$.length;){const ce=$.pop();(ce.d>H.d||!H.d)&&(H=ce,l&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ie)),ce.max-H.d<=n||(O=ce.h/2,$.push(new Su(ce.p.x-O,ce.p.y-O,O,a)),$.push(new Su(ce.p.x+O,ce.p.y-O,O,a)),$.push(new Su(ce.p.x-O,ce.p.y+O,O,a)),$.push(new Su(ce.p.x+O,ce.p.y+O,O,a)),ie+=4)}return l&&(console.log(`num probes: ${ie}`),console.log(`best distance: ${H.d}`)),H.p}function Nx(a,n){return n.max-a.max}function Su(a,n,l,h){this.p=new I(a,n),this.h=l,this.d=function(m,x){let w=!1,T=1/0;for(let D=0;D<x.length;D++){const O=x[D];for(let $=0,H=O.length,ie=H-1;$<H;ie=$++){const ce=O[$],he=O[ie];ce.y>m.y!=he.y>m.y&&m.x<(he.x-ce.x)*(m.y-ce.y)/(he.y-ce.y)+ce.x&&(w=!w),T=Math.min(T,ag(m,ce,he))}}return(w?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var fa;o.aq=void 0,(fa=o.aq||(o.aq={}))[fa.center=1]="center",fa[fa.left=2]="left",fa[fa.right=3]="right",fa[fa.top=4]="top",fa[fa.bottom=5]="bottom",fa[fa["top-left"]=6]="top-left",fa[fa["top-right"]=7]="top-right",fa[fa["bottom-left"]=8]="bottom-left",fa[fa["bottom-right"]=9]="bottom-right";const Ml=7,qd=Number.POSITIVE_INFINITY;function k0(a,n){return n[1]!==qd?function(l,h,m){let x=0,w=0;switch(h=Math.abs(h),m=Math.abs(m),l){case"top-right":case"top-left":case"top":w=m-Ml;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+Ml}switch(l){case"top-right":case"bottom-right":case"right":x=-h;break;case"top-left":case"bottom-left":case"left":x=h}return[x,w]}(a,n[0],n[1]):function(l,h){let m=0,x=0;h<0&&(h=0);const w=h/Math.SQRT2;switch(l){case"top-right":case"top-left":x=w-Ml;break;case"bottom-right":case"bottom-left":x=-w+Ml;break;case"bottom":x=-h+Ml;break;case"top":x=h-Ml}switch(l){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=h;break;case"right":m=-h}return[m,x]}(a,n[0])}function E0(a,n,l){var h;const m=a.layout,x=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(x){const T=x.values,D=[];for(let O=0;O<T.length;O+=2){const $=D[O]=T[O],H=T[O+1].map(ie=>ie*Vi);$.startsWith("top")?H[1]-=Ml:$.startsWith("bottom")&&(H[1]+=Ml),D[O+1]=H}return new Bt(D)}const w=m.get("text-variable-anchor");if(w){let T;T=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},l)*Vi,qd]:m.get("text-offset").evaluate(n,{},l).map(O=>O*Vi);const D=[];for(const O of w)D.push(O,k0(O,T));return new Bt(D)}return null}function Gd(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Fx(a,n,l,h,m,x,w,T,D,O,$){let H=x.textMaxSize.evaluate(n,{});H===void 0&&(H=w);const ie=a.layers[0].layout,ce=ie.get("icon-offset").evaluate(n,{},$),he=I0(l.horizontal),Ee=w/24,De=a.tilePixelRatio*Ee,Be=a.tilePixelRatio*H/24,Ke=a.tilePixelRatio*T,Ue=a.tilePixelRatio*ie.get("symbol-spacing"),Ye=ie.get("text-padding")*a.tilePixelRatio,nt=function(Ot,An,En,Qn=1){const Wr=Ot.get("icon-padding").evaluate(An,{},En),Yr=Wr&&Wr.values;return[Yr[0]*Qn,Yr[1]*Qn,Yr[2]*Qn,Yr[3]*Qn]}(ie,n,$,a.tilePixelRatio),mt=ie.get("text-max-angle")/180*Math.PI,fn=ie.get("text-rotation-alignment")!=="viewport"&&ie.get("symbol-placement")!=="point",xn=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",un=ie.get("symbol-placement"),rn=Ue/2,Kt=ie.get("icon-text-fit");let _n;h&&Kt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(_n=Wg(h,l.vertical,Kt,ie.get("icon-text-fit-padding"),ce,Ee)),he&&(h=Wg(h,he,Kt,ie.get("icon-text-fit-padding"),ce,Ee)));const Yt=(Ot,An)=>{An.x<0||An.x>=Mi||An.y<0||An.y>=Mi||function(En,Qn,Wr,Yr,$i,As,Ha,zi,aa,da,Wa,Ka,Ui,ji,ka,Xa,Ea,ps,ms,qi,pr,Sa,pa,Gi,ao){const Eo=En.addToLineVertexArray(Qn,Wr);let So,ll,so,Vs,gs=0,ul=0,Cc=0,P0=0,Qd=-1,ep=-1;const cl={};let M0=il("");if(En.allowVerticalPlacement&&Yr.vertical){const Ia=zi.layout.get("text-rotate").evaluate(pr,{},Gi)+90;so=new Uh(aa,Qn,da,Wa,Ka,Yr.vertical,Ui,ji,ka,Ia),Ha&&(Vs=new Uh(aa,Qn,da,Wa,Ka,Ha,Ea,ps,ka,Ia))}if($i){const Ia=zi.layout.get("icon-rotate").evaluate(pr,{}),$s=zi.layout.get("icon-text-fit")!=="none",Wl=x0($i,Ia,pa,$s),To=Ha?x0(Ha,Ia,pa,$s):void 0;ll=new Uh(aa,Qn,da,Wa,Ka,$i,Ea,ps,!1,Ia),gs=4*Wl.length;const Kl=En.iconSizeData;let $o=null;Kl.kind==="source"?($o=[Vo*zi.layout.get("icon-size").evaluate(pr,{})],$o[0]>Al&&ye(`${En.layerIds[0]}: Value for "icon-size" is >= ${Ec}. Reduce your "icon-size".`)):Kl.kind==="composite"&&($o=[Vo*Sa.compositeIconSizes[0].evaluate(pr,{},Gi),Vo*Sa.compositeIconSizes[1].evaluate(pr,{},Gi)],($o[0]>Al||$o[1]>Al)&&ye(`${En.layerIds[0]}: Value for "icon-size" is >= ${Ec}. Reduce your "icon-size".`)),En.addSymbols(En.icon,Wl,$o,qi,ms,pr,o.ai.none,Qn,Eo.lineStartIndex,Eo.lineLength,-1,Gi),Qd=En.icon.placedSymbolArray.length-1,To&&(ul=4*To.length,En.addSymbols(En.icon,To,$o,qi,ms,pr,o.ai.vertical,Qn,Eo.lineStartIndex,Eo.lineLength,-1,Gi),ep=En.icon.placedSymbolArray.length-1)}const z0=Object.keys(Yr.horizontal);for(const Ia of z0){const $s=Yr.horizontal[Ia];if(!So){M0=il($s.text);const To=zi.layout.get("text-rotate").evaluate(pr,{},Gi);So=new Uh(aa,Qn,da,Wa,Ka,$s,Ui,ji,ka,To)}const Wl=$s.positionedLines.length===1;if(Cc+=S0(En,Qn,$s,As,zi,ka,pr,Xa,Eo,Yr.vertical?o.ai.horizontal:o.ai.horizontalOnly,Wl?z0:[Ia],cl,Qd,Sa,Gi),Wl)break}Yr.vertical&&(P0+=S0(En,Qn,Yr.vertical,As,zi,ka,pr,Xa,Eo,o.ai.vertical,["vertical"],cl,ep,Sa,Gi));const Ux=So?So.boxStartIndex:En.collisionBoxArray.length,jx=So?So.boxEndIndex:En.collisionBoxArray.length,qx=so?so.boxStartIndex:En.collisionBoxArray.length,Gx=so?so.boxEndIndex:En.collisionBoxArray.length,Zx=ll?ll.boxStartIndex:En.collisionBoxArray.length,Hx=ll?ll.boxEndIndex:En.collisionBoxArray.length,Wx=Vs?Vs.boxStartIndex:En.collisionBoxArray.length,Kx=Vs?Vs.boxEndIndex:En.collisionBoxArray.length;let Io=-1;const qh=(Ia,$s)=>Ia&&Ia.circleDiameter?Math.max(Ia.circleDiameter,$s):$s;Io=qh(So,Io),Io=qh(so,Io),Io=qh(ll,Io),Io=qh(Vs,Io);const D0=Io>-1?1:0;D0&&(Io*=ao/Vi),En.glyphOffsetArray.length>=Eu.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pr.sortKey!==void 0&&En.addToSortKeyRanges(En.symbolInstances.length,pr.sortKey);const Xx=E0(zi,pr,Gi),[Yx,Jx]=function(Ia,$s){const Wl=Ia.length,To=$s==null?void 0:$s.values;if((To==null?void 0:To.length)>0)for(let Kl=0;Kl<To.length;Kl+=2){const $o=To[Kl+1];Ia.emplaceBack(o.aq[To[Kl]],$o[0],$o[1])}return[Wl,Ia.length]}(En.textAnchorOffsets,Xx);En.symbolInstances.emplaceBack(Qn.x,Qn.y,cl.right>=0?cl.right:-1,cl.center>=0?cl.center:-1,cl.left>=0?cl.left:-1,cl.vertical||-1,Qd,ep,M0,Ux,jx,qx,Gx,Zx,Hx,Wx,Kx,da,Cc,P0,gs,ul,D0,0,Ui,Io,Yx,Jx)}(a,An,Ot,l,h,m,_n,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,De,[Ye,Ye,Ye,Ye],fn,D,Ke,nt,xn,ce,n,x,O,$,w)};if(un==="line")for(const Ot of m0(n.geometry,0,0,Mi,Mi)){const An=Lx(Ot,Ue,mt,l.vertical||he,h,24,Be,a.overscaling,Mi);for(const En of An)he&&Vx(a,he.text,rn,En)||Yt(Ot,En)}else if(un==="line-center"){for(const Ot of n.geometry)if(Ot.length>1){const An=Dx(Ot,mt,l.vertical||he,h,24,Be);An&&Yt(Ot,An)}}else if(n.type==="Polygon")for(const Ot of kd(n.geometry,0)){const An=Ox(Ot,16);Yt(Ot[0],new Pl(An.x,An.y,0))}else if(n.type==="LineString")for(const Ot of n.geometry)Yt(Ot,new Pl(Ot[0].x,Ot[0].y,0));else if(n.type==="Point")for(const Ot of n.geometry)for(const An of Ot)Yt([An],new Pl(An.x,An.y,0))}function S0(a,n,l,h,m,x,w,T,D,O,$,H,ie,ce,he){const Ee=function(Ke,Ue,Ye,nt,mt,fn,xn,un){const rn=nt.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,Kt=[];for(const _n of Ue.positionedLines)for(const Yt of _n.positionedGlyphs){if(!Yt.rect)continue;const Ot=Yt.rect||{};let An=yx+1,En=!0,Qn=1,Wr=0;const Yr=(mt||un)&&Yt.vertical,$i=Yt.metrics.advance*Yt.scale/2;if(un&&Ue.verticalizable&&(Wr=_n.lineOffset/2-(Yt.imageName?-(Vi-Yt.metrics.width*Yt.scale)/2:(Yt.scale-1)*Vi)),Yt.imageName){const qi=xn[Yt.imageName];En=qi.sdf,Qn=qi.pixelRatio,An=ds/Qn}const As=mt?[Yt.x+$i,Yt.y]:[0,0];let Ha=mt?[0,0]:[Yt.x+$i+Ye[0],Yt.y+Ye[1]-Wr],zi=[0,0];Yr&&(zi=Ha,Ha=[0,0]);const aa=Yt.metrics.isDoubleResolution?2:1,da=(Yt.metrics.left-An)*Yt.scale-$i+Ha[0],Wa=(-Yt.metrics.top-An)*Yt.scale+Ha[1],Ka=da+Ot.w/aa*Yt.scale/Qn,Ui=Wa+Ot.h/aa*Yt.scale/Qn,ji=new I(da,Wa),ka=new I(Ka,Wa),Xa=new I(da,Ui),Ea=new I(Ka,Ui);if(Yr){const qi=new I(-$i,$i-wc),pr=-Math.PI/2,Sa=Vi/2-$i,pa=new I(5-wc-Sa,-(Yt.imageName?Sa:0)),Gi=new I(...zi);ji._rotateAround(pr,qi)._add(pa)._add(Gi),ka._rotateAround(pr,qi)._add(pa)._add(Gi),Xa._rotateAround(pr,qi)._add(pa)._add(Gi),Ea._rotateAround(pr,qi)._add(pa)._add(Gi)}if(rn){const qi=Math.sin(rn),pr=Math.cos(rn),Sa=[pr,-qi,qi,pr];ji._matMult(Sa),ka._matMult(Sa),Xa._matMult(Sa),Ea._matMult(Sa)}const ps=new I(0,0),ms=new I(0,0);Kt.push({tl:ji,tr:ka,bl:Xa,br:Ea,tex:Ot,writingMode:Ue.writingMode,glyphOffset:As,sectionIndex:Yt.sectionIndex,isSDF:En,pixelOffsetTL:ps,pixelOffsetBR:ms,minFontScaleX:0,minFontScaleY:0})}return Kt}(0,l,T,m,x,w,h,a.allowVerticalPlacement),De=a.textSizeData;let Be=null;De.kind==="source"?(Be=[Vo*m.layout.get("text-size").evaluate(w,{})],Be[0]>Al&&ye(`${a.layerIds[0]}: Value for "text-size" is >= ${Ec}. Reduce your "text-size".`)):De.kind==="composite"&&(Be=[Vo*ce.compositeTextSizes[0].evaluate(w,{},he),Vo*ce.compositeTextSizes[1].evaluate(w,{},he)],(Be[0]>Al||Be[1]>Al)&&ye(`${a.layerIds[0]}: Value for "text-size" is >= ${Ec}. Reduce your "text-size".`)),a.addSymbols(a.text,Ee,Be,T,x,w,O,n,D.lineStartIndex,D.lineLength,ie,he);for(const Ke of $)H[Ke]=a.text.placedSymbolArray.length-1;return 4*Ee.length}function I0(a){for(const n in a)return a[n];return null}function Vx(a,n,l,h){const m=a.compareText;if(n in m){const x=m[n];for(let w=x.length-1;w>=0;w--)if(h.dist(x[w])<l)return!0}else m[n]=[];return m[n].push(h),!1}const T0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zd{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=T0[15&h];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new Zd(T,w,x,n)}constructor(n,l=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=T0.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+D,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+D),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+D,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Hd(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:T}=this,D=[0,x.length-1,0],O=[];for(;D.length;){const $=D.pop()||0,H=D.pop()||0,ie=D.pop()||0;if(H-ie<=T){for(let De=ie;De<=H;De++){const Be=w[2*De],Ke=w[2*De+1];Be>=n&&Be<=h&&Ke>=l&&Ke<=m&&O.push(x[De])}continue}const ce=ie+H>>1,he=w[2*ce],Ee=w[2*ce+1];he>=n&&he<=h&&Ee>=l&&Ee<=m&&O.push(x[ce]),($===0?n<=he:l<=Ee)&&(D.push(ie),D.push(ce-1),D.push(1-$)),($===0?h>=he:m>=Ee)&&(D.push(ce+1),D.push(H),D.push(1-$))}return O}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:w}=this,T=[0,m.length-1,0],D=[],O=h*h;for(;T.length;){const $=T.pop()||0,H=T.pop()||0,ie=T.pop()||0;if(H-ie<=w){for(let De=ie;De<=H;De++)C0(x[2*De],x[2*De+1],n,l)<=O&&D.push(m[De]);continue}const ce=ie+H>>1,he=x[2*ce],Ee=x[2*ce+1];C0(he,Ee,n,l)<=O&&D.push(m[ce]),($===0?n-h<=he:l-h<=Ee)&&(T.push(ie),T.push(ce-1),T.push(1-$)),($===0?n+h>=he:l+h>=Ee)&&(T.push(ce+1),T.push(H),T.push(1-$))}return D}}function Hd(a,n,l,h,m,x){if(m-h<=l)return;const w=h+m>>1;A0(a,n,w,h,m,x),Hd(a,n,l,h,w-1,1-x),Hd(a,n,l,w+1,m,1-x)}function A0(a,n,l,h,m,x){for(;m>h;){if(m-h>600){const O=m-h+1,$=l-h+1,H=Math.log(O),ie=.5*Math.exp(2*H/3),ce=.5*Math.sqrt(H*ie*(O-ie)/O)*($-O/2<0?-1:1);A0(a,n,l,Math.max(h,Math.floor(l-$*ie/O+ce)),Math.min(m,Math.floor(l+(O-$)*ie/O+ce)),x)}const w=n[2*l+x];let T=h,D=m;for(Tc(a,n,h,l),n[2*m+x]>w&&Tc(a,n,h,m);T<D;){for(Tc(a,n,T,D),T++,D--;n[2*T+x]<w;)T++;for(;n[2*D+x]>w;)D--}n[2*h+x]===w?Tc(a,n,h,D):(D++,Tc(a,n,D,m)),D<=l&&(h=D+1),l<=D&&(m=D-1)}}function Tc(a,n,l,h){Wd(a,l,h),Wd(n,2*l,2*h),Wd(n,2*l+1,2*h+1)}function Wd(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}function C0(a,n,l,h){const m=a-l,x=n-h;return m*m+x*x}var Kd;o.bh=void 0,(Kd=o.bh||(o.bh={})).create="create",Kd.load="load",Kd.fullLoad="fullLoad";let jh=null,Ac=[];const Xd=1e3/60,Yd="loadTime",Jd="fullLoadTime",$x={mark(a){performance.mark(a)},frame(a){const n=a;jh!=null&&Ac.push(n-jh),jh=n},clearMetrics(){jh=null,Ac=[],performance.clearMeasures(Yd),performance.clearMeasures(Jd);for(const a in o.bh)performance.clearMarks(o.bh[a])},getPerformanceMetrics(){performance.measure(Yd,o.bh.create,o.bh.load),performance.measure(Jd,o.bh.create,o.bh.fullLoad);const a=performance.getEntriesByName(Yd)[0].duration,n=performance.getEntriesByName(Jd)[0].duration,l=Ac.length,h=1/(Ac.reduce((x,w)=>x+w,0)/l/1e3),m=Ac.filter(x=>x>Xd).reduce((x,w)=>x+(w-Xd)/Xd,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};o.$=function(a,n,l){var h,m,x,w,T,D,O,$,H,ie,ce,he,Ee=l[0],De=l[1],Be=l[2];return n===a?(a[12]=n[0]*Ee+n[4]*De+n[8]*Be+n[12],a[13]=n[1]*Ee+n[5]*De+n[9]*Be+n[13],a[14]=n[2]*Ee+n[6]*De+n[10]*Be+n[14],a[15]=n[3]*Ee+n[7]*De+n[11]*Be+n[15]):(m=n[1],x=n[2],w=n[3],T=n[4],D=n[5],O=n[6],$=n[7],H=n[8],ie=n[9],ce=n[10],he=n[11],a[0]=h=n[0],a[1]=m,a[2]=x,a[3]=w,a[4]=T,a[5]=D,a[6]=O,a[7]=$,a[8]=H,a[9]=ie,a[10]=ce,a[11]=he,a[12]=h*Ee+T*De+H*Be+n[12],a[13]=m*Ee+D*De+ie*Be+n[13],a[14]=x*Ee+O*De+ce*Be+n[14],a[15]=w*Ee+$*De+he*Be+n[15]),a},o.A=yu,o.B=Ri,o.C=class{constructor(a,n,l){this.receive=h=>{const m=h.data,x=m.id;if(x&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[x];const w=this.cancelCallbacks[x];delete this.cancelCallbacks[x],w&&w()}else Ge()||m.mustQueue?(this.tasks[x]=m,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=a,this.parent=n,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Mx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ge()?a:window}send(a,n,l,h,m=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[x]=l);const w=[],T={id:x,type:a,hasCallback:!!l,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Oo(n,w)};return this.target.postMessage(T,{transfer:w}),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(n.error?l(wl(n.error)):l(null,wl(n.data)))}else{let l=!1;const h=[],m=n.hasCallback?(T,D)=>{l=!0,delete this.cancelCallbacks[a];const O={id:a,type:"<response>",sourceMapId:this.mapId,error:T?Oo(T):null,data:Oo(D,h)};this.target.postMessage(O,{transfer:h})}:T=>{l=!0};let x=null;const w=wl(n.data);if(this.parent[n.type])x=this.parent[n.type](n.sourceMapId,w,m);else if("getWorkerSource"in this.parent){const T=n.type.split(".");x=this.parent.getWorkerSource(n.sourceMapId,T[0],w.source)[T[1]](w,m)}else m(new Error(`Could not find function ${n.type}`));!l&&x&&x.cancel&&(this.cancelCallbacks[a]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.D=Sn,o.E=dt,o.F=function(a,n){const l={};for(let h=0;h<n.length;h++){const m=n[h];m in a&&(l[m]=a[m])}return l},o.G=r0,o.H=i0,o.I=Dd,o.J=K,o.K=ne,o.L=Cl,o.M=ht,o.N=Mi,o.O=Fs,o.P=I,o.Q=ti,o.R=Ns,o.S=Hr,o.T=yh,o.U=Nh,o.V=class extends nl{},o.W=jd,o.X=function(a,n){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let h=0;h<a.length;h++){const m=window.document.createElement("source");wt(a[h])||(l.crossOrigin="Anonymous"),m.src=a[h],l.appendChild(m)}return{cancel:()=>{}}},o.Y=vt,o.Z=function(){var a=new yu(16);return yu!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o._=_,o.a=Me,o.a$=class extends le{},o.a0=function(a,n,l){var h=l[0],m=l[1],x=l[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*x,a[9]=n[9]*x,a[10]=n[10]*x,a[11]=n[11]*x,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},o.a1=ug,o.a2=function(){return Te++},o.a3=Pe,o.a4=Eu,o.a5=function(){hs.isLoading()||hs.isLoaded()||tc()!=="deferred"||_h()},o.a6=ks,o.a7=Zl,o.a8=Zr,o.a9=h0,o.aA=Vl,o.aB=function(a){a=a.slice();const n=Object.create(null);for(let l=0;l<a.length;l++)n[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=Ut(a[l],n[a[l].ref]));return a},o.aC=function(a){if(a.type==="custom")return new Px(a);switch(a.type){case"background":return new Tx(a);case"circle":return new h2(a);case"fill":return new M2(a);case"fill-extrusion":return new Z2(a);case"heatmap":return new d2(a);case"hillshade":return new m2(a);case"line":return new ex(a);case"raster":return new Cx(a);case"symbol":return new Oh(a)}},o.aD=ge,o.aE=function(a,n){if(!a)return[{command:zt.setStyle,args:[n]}];let l=[];try{if(!_t(a.version,n.version))return[{command:zt.setStyle,args:[n]}];_t(a.center,n.center)||l.push({command:zt.setCenter,args:[n.center]}),_t(a.zoom,n.zoom)||l.push({command:zt.setZoom,args:[n.zoom]}),_t(a.bearing,n.bearing)||l.push({command:zt.setBearing,args:[n.bearing]}),_t(a.pitch,n.pitch)||l.push({command:zt.setPitch,args:[n.pitch]}),_t(a.sprite,n.sprite)||l.push({command:zt.setSprite,args:[n.sprite]}),_t(a.glyphs,n.glyphs)||l.push({command:zt.setGlyphs,args:[n.glyphs]}),_t(a.transition,n.transition)||l.push({command:zt.setTransition,args:[n.transition]}),_t(a.light,n.light)||l.push({command:zt.setLight,args:[n.light]});const h={},m=[];(function(w,T,D,O){let $;for($ in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,$)&&(Object.prototype.hasOwnProperty.call(T,$)||Mn($,D,O));for($ in T)Object.prototype.hasOwnProperty.call(T,$)&&(Object.prototype.hasOwnProperty.call(w,$)?_t(w[$],T[$])||(w[$].type==="geojson"&&T[$].type==="geojson"&&Kn(w,T,$)?D.push({command:zt.setGeoJSONSourceData,args:[$,T[$].data]}):Hn($,T,D,O)):gn($,T,D))})(a.sources,n.sources,m,h);const x=[];a.layers&&a.layers.forEach(w=>{h[w.source]?l.push({command:zt.removeLayer,args:[w.id]}):x.push(w)}),l=l.concat(m),function(w,T,D){T=T||[];const O=(w=w||[]).map(Yn),$=T.map(Yn),H=w.reduce(rr,{}),ie=T.reduce(rr,{}),ce=O.slice(),he=Object.create(null);let Ee,De,Be,Ke,Ue,Ye,nt;for(Ee=0,De=0;Ee<O.length;Ee++)Be=O[Ee],Object.prototype.hasOwnProperty.call(ie,Be)?De++:(D.push({command:zt.removeLayer,args:[Be]}),ce.splice(ce.indexOf(Be,De),1));for(Ee=0,De=0;Ee<$.length;Ee++)Be=$[$.length-1-Ee],ce[ce.length-1-Ee]!==Be&&(Object.prototype.hasOwnProperty.call(H,Be)?(D.push({command:zt.removeLayer,args:[Be]}),ce.splice(ce.lastIndexOf(Be,ce.length-De),1)):De++,Ye=ce[ce.length-Ee],D.push({command:zt.addLayer,args:[ie[Be],Ye]}),ce.splice(ce.length-Ee,0,Be),he[Be]=!0);for(Ee=0;Ee<$.length;Ee++)if(Be=$[Ee],Ke=H[Be],Ue=ie[Be],!he[Be]&&!_t(Ke,Ue))if(_t(Ke.source,Ue.source)&&_t(Ke["source-layer"],Ue["source-layer"])&&_t(Ke.type,Ue.type)){for(nt in br(Ke.layout,Ue.layout,D,Be,null,zt.setLayoutProperty),br(Ke.paint,Ue.paint,D,Be,null,zt.setPaintProperty),_t(Ke.filter,Ue.filter)||D.push({command:zt.setFilter,args:[Be,Ue.filter]}),_t(Ke.minzoom,Ue.minzoom)&&_t(Ke.maxzoom,Ue.maxzoom)||D.push({command:zt.setLayerZoomRange,args:[Be,Ue.minzoom,Ue.maxzoom]}),Ke)Object.prototype.hasOwnProperty.call(Ke,nt)&&nt!=="layout"&&nt!=="paint"&&nt!=="filter"&&nt!=="metadata"&&nt!=="minzoom"&&nt!=="maxzoom"&&(nt.indexOf("paint.")===0?br(Ke[nt],Ue[nt],D,Be,nt.slice(6),zt.setPaintProperty):_t(Ke[nt],Ue[nt])||D.push({command:zt.setLayerProperty,args:[Be,nt,Ue[nt]]}));for(nt in Ue)Object.prototype.hasOwnProperty.call(Ue,nt)&&!Object.prototype.hasOwnProperty.call(Ke,nt)&&nt!=="layout"&&nt!=="paint"&&nt!=="filter"&&nt!=="metadata"&&nt!=="minzoom"&&nt!=="maxzoom"&&(nt.indexOf("paint.")===0?br(Ke[nt],Ue[nt],D,Be,nt.slice(6),zt.setPaintProperty):_t(Ke[nt],Ue[nt])||D.push({command:zt.setLayerProperty,args:[Be,nt,Ue[nt]]}))}else D.push({command:zt.removeLayer,args:[Be]}),Ye=ce[ce.lastIndexOf(Be)+1],D.push({command:zt.addLayer,args:[Ue,Ye]})}(x,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:zt.setStyle,args:[n]}]}return l},o.aF=function(a){const n=[],l=a.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},o.aG=function a(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(const h in n)if(!a(n[h],l[h]))return!1;return!0}return n===l},o.aH=fe,o.aI=ee,o.aJ=$l,o.aK=function(a){return a({pluginStatus:qa,pluginURL:No}),$l.on("pluginStateChange",a),a},o.aL=class extends al{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.aM=gu,o.aN=class extends al{constructor(a,n){super(a,n),this.current=hd}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},o.aO=wh,o.aP=class extends al{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},o.aQ=class extends al{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},o.aR=kh,o.aS=function(a,n,l,h,m,x,w){var T=1/(n-l),D=1/(h-m),O=1/(x-w);return a[0]=-2*T,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*D,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*O,a[11]=0,a[12]=(n+l)*T,a[13]=(m+h)*D,a[14]=(w+x)*O,a[15]=1,a},o.aT=$n,o.aU=c2,o.aV=class extends p{},o.aW=ix,o.aX=class extends b{},o.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},o.aZ=pg,o.a_=jt,o.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,m,x)=>{const w=m||x;return n[h]=!w||w.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},o.ab=function(a,n){const l=[];for(const h in a)h in n||l.push(h);return l},o.ac=function(a){if(Le==null){const n=a.navigator?a.navigator.userAgent:null;Le=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Le},o.ad=Q,o.ae=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),x=n[0],w=n[1],T=n[2],D=n[3],O=n[4],$=n[5],H=n[6],ie=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=x*m+O*h,a[1]=w*m+$*h,a[2]=T*m+H*h,a[3]=D*m+ie*h,a[4]=O*m-x*h,a[5]=$*m-w*h,a[6]=H*m-T*h,a[7]=ie*m-D*h,a},o.af=function(a){var n=new yu(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},o.ag=Th,o.ah=function(a,n){let l=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:x,maxZoom:w}=a,T=m?Q(ii.interpolationFactor(m,n,x,w),0,1):0;a.kind==="camera"?h=Ri.number(a.minSize,a.maxSize,T):l=T}return{uSizeT:l,uSize:h}},o.aj=function(a,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:m}){return a.kind==="source"?h/Vo:a.kind==="composite"?Ri.number(h/Vo,m/Vo,l):n},o.ak=Od,o.al=function(a,n,l,h){const m=n.y-a.y,x=n.x-a.x,w=h.y-l.y,T=h.x-l.x,D=w*x-T*m;if(D===0)return null;const O=(T*(a.y-l.y)-w*(a.x-l.x))/D;return new I(a.x+O*x,a.y+O*m)},o.am=m0,o.an=rg,o.ao=gd,o.ap=Vi,o.ar=Bd,o.as=function(a,n){var l=n[0],h=n[1],m=n[2],x=n[3],w=n[4],T=n[5],D=n[6],O=n[7],$=n[8],H=n[9],ie=n[10],ce=n[11],he=n[12],Ee=n[13],De=n[14],Be=n[15],Ke=l*T-h*w,Ue=l*D-m*w,Ye=l*O-x*w,nt=h*D-m*T,mt=h*O-x*T,fn=m*O-x*D,xn=$*Ee-H*he,un=$*De-ie*he,rn=$*Be-ce*he,Kt=H*De-ie*Ee,_n=H*Be-ce*Ee,Yt=ie*Be-ce*De,Ot=Ke*Yt-Ue*_n+Ye*Kt+nt*rn-mt*un+fn*xn;return Ot?(a[0]=(T*Yt-D*_n+O*Kt)*(Ot=1/Ot),a[1]=(m*_n-h*Yt-x*Kt)*Ot,a[2]=(Ee*fn-De*mt+Be*nt)*Ot,a[3]=(ie*mt-H*fn-ce*nt)*Ot,a[4]=(D*rn-w*Yt-O*un)*Ot,a[5]=(l*Yt-m*rn+x*un)*Ot,a[6]=(De*Ye-he*fn-Be*Ue)*Ot,a[7]=($*fn-ie*Ye+ce*Ue)*Ot,a[8]=(w*_n-T*rn+O*xn)*Ot,a[9]=(h*rn-l*_n-x*xn)*Ot,a[10]=(he*mt-Ee*Ye+Be*Ke)*Ot,a[11]=(H*Ye-$*mt-ce*Ke)*Ot,a[12]=(T*un-w*Kt-D*xn)*Ot,a[13]=(l*Kt-h*un+m*xn)*Ot,a[14]=(Ee*Ue-he*nt-De*Ke)*Ot,a[15]=($*nt-H*Ue+ie*Ke)*Ot,a):null},o.at=Gd,o.au=Rd,o.av=Zd,o.aw=function(){const a={},n=be.$version;for(const l in be.$root){const h=be.$root[l];if(h.required){let m=null;m=l==="version"?n:h.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},o.ax=zt,o.ay=dh,o.az=sn,o.b=function(a,n){const l=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(l).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},o.b0=ra,o.b1=function(a,n){var l=a[0],h=a[1],m=a[2],x=a[3],w=a[4],T=a[5],D=a[6],O=a[7],$=a[8],H=a[9],ie=a[10],ce=a[11],he=a[12],Ee=a[13],De=a[14],Be=a[15],Ke=n[0],Ue=n[1],Ye=n[2],nt=n[3],mt=n[4],fn=n[5],xn=n[6],un=n[7],rn=n[8],Kt=n[9],_n=n[10],Yt=n[11],Ot=n[12],An=n[13],En=n[14],Qn=n[15];return Math.abs(l-Ke)<=Za*Math.max(1,Math.abs(l),Math.abs(Ke))&&Math.abs(h-Ue)<=Za*Math.max(1,Math.abs(h),Math.abs(Ue))&&Math.abs(m-Ye)<=Za*Math.max(1,Math.abs(m),Math.abs(Ye))&&Math.abs(x-nt)<=Za*Math.max(1,Math.abs(x),Math.abs(nt))&&Math.abs(w-mt)<=Za*Math.max(1,Math.abs(w),Math.abs(mt))&&Math.abs(T-fn)<=Za*Math.max(1,Math.abs(T),Math.abs(fn))&&Math.abs(D-xn)<=Za*Math.max(1,Math.abs(D),Math.abs(xn))&&Math.abs(O-un)<=Za*Math.max(1,Math.abs(O),Math.abs(un))&&Math.abs($-rn)<=Za*Math.max(1,Math.abs($),Math.abs(rn))&&Math.abs(H-Kt)<=Za*Math.max(1,Math.abs(H),Math.abs(Kt))&&Math.abs(ie-_n)<=Za*Math.max(1,Math.abs(ie),Math.abs(_n))&&Math.abs(ce-Yt)<=Za*Math.max(1,Math.abs(ce),Math.abs(Yt))&&Math.abs(he-Ot)<=Za*Math.max(1,Math.abs(he),Math.abs(Ot))&&Math.abs(Ee-An)<=Za*Math.max(1,Math.abs(Ee),Math.abs(An))&&Math.abs(De-En)<=Za*Math.max(1,Math.abs(De),Math.abs(En))&&Math.abs(Be-Qn)<=Za*Math.max(1,Math.abs(Be),Math.abs(Qn))},o.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},o.b3=function(a,n,l){return a[0]=n[0]*l[0],a[1]=n[1]*l[1],a[2]=n[2]*l[2],a[3]=n[3]*l[3],a},o.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},o.b5=se,o.b6=l0,o.b7=a0,o.b8=function(a,n,l,h,m){var x,w=1/Math.tan(n/2);return a[0]=w/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=w,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+h)*(x=1/(h-m)),a[14]=2*m*h*x):(a[10]=-1,a[14]=-2*h),a},o.b9=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),x=n[4],w=n[5],T=n[6],D=n[7],O=n[8],$=n[9],H=n[10],ie=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=x*m+O*h,a[5]=w*m+$*h,a[6]=T*m+H*h,a[7]=D*m+ie*h,a[8]=O*m-x*h,a[9]=$*m-w*h,a[10]=H*m-T*h,a[11]=ie*m-D*h,a},o.bA=E,o.bB=Rg,o.bC=na,o.bD=hs,o.ba=Y,o.bb=re,o.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.bd=class extends ql{},o.be=$d,o.bf=s0,o.bg=$x,o.bi=yn,o.bj=function(a,n,l=!1){if(qa===Xu||qa===Yu||qa===Ju)throw new Error("setRTLTextPlugin cannot be called multiple times.");No=Zt.resolveURL(a),qa=Xu,Qu=n,ec(),l||_h()},o.bk=tc,o.bl=function(a,n){const l={};for(let m=0;m<a.length;m++){const x=n&&n[a[m].id]||Ys(a[m]);n&&(n[a[m].id]=x);let w=l[x];w||(w=l[x]=[]),w.push(a[m])}const h=[];for(const m in l)h.push(l[m]);return h},o.bm=mn,o.bn=c0,o.bo=f0,o.bp=jg,o.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Mi/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Zr(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Zr(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Zr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:$}=a.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Zr(O),a.canonical),h["text-size"].possiblyEvaluate(new Zr($),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:$}=a.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Zr(O),a.canonical),h["icon-size"].possiblyEvaluate(new Zr($),a.canonical)]}const x=l.get("text-line-height")*Vi,w=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",T=l.get("text-keep-upright"),D=l.get("text-size");for(const O of a.bucket.features){const $=l.get("text-font").evaluate(O,{},a.canonical).join(","),H=D.evaluate(O,{},a.canonical),ie=m.layoutTextSize.evaluate(O,{},a.canonical),ce=m.layoutIconSize.evaluate(O,{},a.canonical),he={horizontal:{},vertical:void 0},Ee=O.text;let De,Be=[0,0];if(Ee){const Ye=Ee.toString(),nt=l.get("text-letter-spacing").evaluate(O,{},a.canonical)*Vi,mt=Wu(Ye)?nt:0,fn=l.get("text-anchor").evaluate(O,{},a.canonical),xn=E0(n,O,a.canonical);if(!xn){const Yt=l.get("text-radial-offset").evaluate(O,{},a.canonical);Be=Yt?k0(fn,[Yt*Vi,qd]):l.get("text-offset").evaluate(O,{},a.canonical).map(Ot=>Ot*Vi)}let un=w?"center":l.get("text-justify").evaluate(O,{},a.canonical);const rn=l.get("symbol-placement"),Kt=rn==="point"?l.get("text-max-width").evaluate(O,{},a.canonical)*Vi:0,_n=()=>{a.bucket.allowVerticalPlacement&&Hu(Ye)&&(he.vertical=Lh(Ee,a.glyphMap,a.glyphPositions,a.imagePositions,$,Kt,x,fn,"left",mt,Be,o.ai.vertical,!0,rn,ie,H))};if(!w&&xn){const Yt=new Set;if(un==="auto")for(let An=0;An<xn.values.length;An+=2)Yt.add(Gd(xn.values[An]));else Yt.add(un);let Ot=!1;for(const An of Yt)if(!he.horizontal[An])if(Ot)he.horizontal[An]=he.horizontal[0];else{const En=Lh(Ee,a.glyphMap,a.glyphPositions,a.imagePositions,$,Kt,x,"center",An,mt,Be,o.ai.horizontal,!1,rn,ie,H);En&&(he.horizontal[An]=En,Ot=En.positionedLines.length===1)}_n()}else{un==="auto"&&(un=Gd(fn));const Yt=Lh(Ee,a.glyphMap,a.glyphPositions,a.imagePositions,$,Kt,x,fn,un,mt,Be,o.ai.horizontal,!1,rn,ie,H);Yt&&(he.horizontal[un]=Yt),_n(),Hu(Ye)&&w&&T&&(he.vertical=Lh(Ee,a.glyphMap,a.glyphPositions,a.imagePositions,$,Kt,x,fn,un,mt,Be,o.ai.vertical,!1,rn,ie,H))}}let Ke=!1;if(O.icon&&O.icon.name){const Ye=a.imageMap[O.icon.name];Ye&&(De=wx(a.imagePositions[O.icon.name],l.get("icon-offset").evaluate(O,{},a.canonical),l.get("icon-anchor").evaluate(O,{},a.canonical)),Ke=!!Ye.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Ke:a.bucket.sdfIcons!==Ke&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const Ue=I0(he.horizontal)||he.vertical;a.bucket.iconsInText=!!Ue&&Ue.iconsInText,(Ue||De)&&Fx(a.bucket,O,he,De,a.imageMap,m,ie,ce,Be,Ke,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},o.br=Cd,o.bs=Id,o.bt=Ad,o.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},o.bv=Md,o.bw=Il,o.bx=function(a,n,l,h,m){return _(this,void 0,void 0,function*(){if(ne())try{return yield ht(a,n,l,h,m)}catch{}return function(x,w,T,D,O){const $=x.width,H=x.height;ut&&Fe||(ut=new OffscreenCanvas($,H),Fe=ut.getContext("2d",{willReadFrequently:!0})),ut.width=$,ut.height=H,Fe.drawImage(x,0,0,$,H);const ie=Fe.getImageData(w,T,D,O);return Fe.clearRect(0,0,$,H),ie.data}(a,n,l,h,m)})},o.by=u0,o.bz=v,o.c=an,o.d=function(a,n){const l=new Image;l.onload=()=>{n(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=$e})},l.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});l.src=a.byteLength?URL.createObjectURL(h):$e},o.e=oe,o.f=function(a,n){return ct(oe(a,{type:"json"}),n)},o.g=Dt,o.h=Zt,o.i=Ge,o.j=kt,o.k=Ht,o.l=xt,o.m=ct,o.n=function(a){return new Md(a).readFields(mx,[])},o.o=function(a,n,l){if(!a.length)return l(null,[]);let h=a.length;const m=new Array(a.length);let x=null;a.forEach((w,T)=>{n(w,(D,O)=>{D&&(x=D),m[T]=O,--h==0&&l(x,m)})})},o.p=Ug,o.q=pc,o.r=ki,o.s=wt,o.t=od,o.u=hn,o.v=be,o.w=ye,o.x=fu,o.y=xo,o.z=function([a,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(l),y:a*Math.sin(n)*Math.sin(l),z:a*Math.cos(l)}}}),f(["./shared"],function(o){class _{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,ae){for(const Ae of X){this._layerConfigs[Ae.id]=Ae;const Ce=this._layers[Ae.id]=o.aC(Ae);Ce._featureFilter=o.a6(Ce.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of ae)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const me=o.bl(Object.values(this._layerConfigs),this.keyCache);for(const Ae of me){const Ce=Ae.map(Je=>this._layers[Je.id]),je=Ce[0];if(je.visibility==="none")continue;const te=je.source||"";let ue=this.familiesBySource[te];ue||(ue=this.familiesBySource[te]={});const _e=je.sourceLayer||"_geojsonTileLayer";let qe=ue[_e];qe||(qe=ue[_e]=[]),qe.push(Ce)}}}class v{constructor(X){const ae={},me=[];for(const te in X){const ue=X[te],_e=ae[te]={};for(const qe in ue){const Je=ue[+qe];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const Qe={x:0,y:0,w:Je.bitmap.width+2,h:Je.bitmap.height+2};me.push(Qe),_e[qe]={rect:Qe,metrics:Je.metrics}}}const{w:Ae,h:Ce}=o.p(me),je=new o.q({width:Ae||1,height:Ce||1});for(const te in X){const ue=X[te];for(const _e in ue){const qe=ue[+_e];if(!qe||qe.bitmap.width===0||qe.bitmap.height===0)continue;const Je=ae[te][_e].rect;o.q.copy(qe.bitmap,je,{x:0,y:0},{x:Je.x+1,y:Je.y+1},qe.bitmap)}}this.image=je,this.positions=ae}}o.bm("GlyphAtlas",v);class E{constructor(X){this.tileID=new o.O(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.uid=X.uid,this.zoom=X.zoom,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.returnDependencies=!!X.returnDependencies,this.promoteId=X.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(X,ae,me,Ae,Ce){this.status="parsing",this.data=X,this.collisionBoxArray=new o.a3;const je=new o.bn(Object.keys(X.layers).sort()),te=new o.bo(this.tileID,this.promoteId);te.bucketLayerIDs=[];const ue={},_e={featureIndex:te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},qe=ae.familiesBySource[this.source];for(const Ln in qe){const Tn=X.layers[Ln];if(!Tn)continue;Tn.version===1&&o.w(`Vector tile source "${this.source}" layer "${Ln}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const hr=je.encode(Ln),Rn=[];for(let kr=0;kr<Tn.length;kr++){const ar=Tn.feature(kr),Fr=te.getId(ar,Ln);Rn.push({feature:ar,id:Fr,index:kr,sourceLayerIndex:hr})}for(const kr of qe[Ln]){const ar=kr[0];ar.source!==this.source&&o.w(`layer.source = ${ar.source} does not equal this.source = ${this.source}`),ar.minzoom&&this.zoom<Math.floor(ar.minzoom)||ar.maxzoom&&this.zoom>=ar.maxzoom||ar.visibility!=="none"&&(S(kr,this.zoom,me),(ue[ar.id]=ar.createBucket({index:te.bucketLayerIDs.length,layers:kr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:hr,sourceID:this.source})).populate(Rn,_e,this.tileID.canonical),te.bucketLayerIDs.push(kr.map(Fr=>Fr.id)))}}let Je,Qe,Nt,Jt;const Lt=o.aH(_e.glyphDependencies,Ln=>Object.keys(Ln).map(Number));this.inFlightDependencies.forEach(Ln=>Ln==null?void 0:Ln.cancel()),this.inFlightDependencies=[];const qt=++this.dependencySentinel;Object.keys(Lt).length?this.inFlightDependencies.push(Ae.send("getGlyphs",{uid:this.uid,stacks:Lt,source:this.source,tileID:this.tileID,type:"glyphs"},(Ln,Tn)=>{qt===this.dependencySentinel&&(Je||(Je=Ln,Qe=Tn,In.call(this)))})):Qe={};const cn=Object.keys(_e.iconDependencies);cn.length?this.inFlightDependencies.push(Ae.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"icons"},(Ln,Tn)=>{qt===this.dependencySentinel&&(Je||(Je=Ln,Nt=Tn,In.call(this)))})):Nt={};const ln=Object.keys(_e.patternDependencies);function In(){if(Je)return Ce(Je);if(Qe&&Nt&&Jt){const Ln=new v(Qe),Tn=new o.bp(Nt,Jt);for(const hr in ue){const Rn=ue[hr];Rn instanceof o.a4?(S(Rn.layers,this.zoom,me),o.bq({bucket:Rn,glyphMap:Qe,glyphPositions:Ln.positions,imageMap:Nt,imagePositions:Tn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Rn.hasPattern&&(Rn instanceof o.br||Rn instanceof o.bs||Rn instanceof o.bt)&&(S(Rn.layers,this.zoom,me),Rn.addFeatures(_e,this.tileID.canonical,Tn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(ue).filter(hr=>!hr.isEmpty()),featureIndex:te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ln.image,imageAtlas:Tn,glyphMap:this.returnDependencies?Qe:null,iconMap:this.returnDependencies?Nt:null,glyphPositions:this.returnDependencies?Ln.positions:null})}}ln.length?this.inFlightDependencies.push(Ae.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},(Ln,Tn)=>{qt===this.dependencySentinel&&(Je||(Je=Ln,Jt=Tn,In.call(this)))})):Jt={},In.call(this)}}function S(ke,X,ae){const me=new o.a8(X);for(const Ae of ke)Ae.recalculate(me,ae)}function I(ke,X){const ae=o.l(ke.request,(me,Ae,Ce,je)=>{if(me)X(me);else if(Ae)try{const te=new o.bw.VectorTile(new o.bv(Ae));X(null,{vectorTile:te,rawData:Ae,cacheControl:Ce,expires:je})}catch(te){const ue=new Uint8Array(Ae);let _e=`Unable to parse the tile at ${ke.request.url}, `;_e+=ue[0]===31&&ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${te.messge}`,X(new Error(_e))}});return()=>{ae.cancel(),X()}}class A{constructor(X,ae,me,Ae){this.actor=X,this.layerIndex=ae,this.availableImages=me,this.loadVectorData=Ae||I,this.fetching={},this.loading={},this.loaded={}}loadTile(X,ae){const me=X.uid;this.loading||(this.loading={});const Ae=!!(X&&X.request&&X.request.collectResourceTiming)&&new o.bu(X.request),Ce=this.loading[me]=new E(X);Ce.abort=this.loadVectorData(X,(je,te)=>{if(delete this.loading[me],je||!te)return Ce.status="done",this.loaded[me]=Ce,ae(je);const ue=te.rawData,_e={};te.expires&&(_e.expires=te.expires),te.cacheControl&&(_e.cacheControl=te.cacheControl);const qe={};if(Ae){const Je=Ae.finish();Je&&(qe.resourceTiming=JSON.parse(JSON.stringify(Je)))}Ce.vectorTile=te.vectorTile,Ce.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,(Je,Qe)=>{if(delete this.fetching[me],Je||!Qe)return ae(Je);ae(null,o.e({rawTileData:ue.slice(0)},Qe,_e,qe))}),this.loaded=this.loaded||{},this.loaded[me]=Ce,this.fetching[me]={rawTileData:ue,cacheControl:_e,resourceTiming:qe}})}reloadTile(X,ae){const me=this.loaded,Ae=X.uid;if(me&&me[Ae]){const Ce=me[Ae];Ce.showCollisionBoxes=X.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(je,te)=>{if(je||!te)return ae(je,te);let ue;if(this.fetching[Ae]){const{rawTileData:_e,cacheControl:qe,resourceTiming:Je}=this.fetching[Ae];delete this.fetching[Ae],ue=o.e({rawTileData:_e.slice(0)},te,qe,Je)}else ue=te;ae(null,ue)}):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ae):ae())}}abortTile(X,ae){const me=this.loading,Ae=X.uid;me&&me[Ae]&&me[Ae].abort&&(me[Ae].abort(),delete me[Ae]),ae()}removeTile(X,ae){const me=this.loaded,Ae=X.uid;me&&me[Ae]&&delete me[Ae],ae()}}class N{constructor(){this.loaded={}}loadTile(X,ae){return o._(this,void 0,void 0,function*(){const{uid:me,encoding:Ae,rawImageData:Ce,redFactor:je,greenFactor:te,blueFactor:ue,baseShift:_e}=X,qe=Ce.width+2,Je=Ce.height+2,Qe=o.a(Ce)?new o.R({width:qe,height:Je},yield o.bx(Ce,-1,-1,qe,Je)):Ce,Nt=new o.by(me,Qe,Ae,je,te,ue,_e);this.loaded=this.loaded||{},this.loaded[me]=Nt,ae(null,Nt)})}removeTile(X){const ae=this.loaded,me=X.uid;ae&&ae[me]&&delete ae[me]}}function V(ke,X){if(ke.length!==0){j(ke[0],X);for(var ae=1;ae<ke.length;ae++)j(ke[ae],!X)}}function j(ke,X){for(var ae=0,me=0,Ae=0,Ce=ke.length,je=Ce-1;Ae<Ce;je=Ae++){var te=(ke[Ae][0]-ke[je][0])*(ke[je][1]+ke[Ae][1]),ue=ae+te;me+=Math.abs(ae)>=Math.abs(te)?ae-ue+te:te-ue+ae,ae=ue}ae+me>=0!=!!X&&ke.reverse()}var W=o.bz(function ke(X,ae){var me,Ae=X&&X.type;if(Ae==="FeatureCollection")for(me=0;me<X.features.length;me++)ke(X.features[me],ae);else if(Ae==="GeometryCollection")for(me=0;me<X.geometries.length;me++)ke(X.geometries[me],ae);else if(Ae==="Feature")ke(X.geometry,ae);else if(Ae==="Polygon")V(X.coordinates,ae);else if(Ae==="MultiPolygon")for(me=0;me<X.coordinates.length;me++)V(X.coordinates[me],ae);return X});const K=o.bw.VectorTileFeature.prototype.toGeoJSON;var ne={exports:{}},Y=o.bA,re=o.bw.VectorTileFeature,Q=se;function se(ke,X){this.options=X||{},this.features=ke,this.length=ke.length}function oe(ke,X){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=X||4096}se.prototype.feature=function(ke){return new oe(this.features[ke],this.options.extent)},oe.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var X=0;X<ke.length;X++){for(var ae=ke[X],me=[],Ae=0;Ae<ae.length;Ae++)me.push(new Y(ae[Ae][0],ae[Ae][1]));this.geometry.push(me)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,X=1/0,ae=-1/0,me=1/0,Ae=-1/0,Ce=0;Ce<ke.length;Ce++)for(var je=ke[Ce],te=0;te<je.length;te++){var ue=je[te];X=Math.min(X,ue.x),ae=Math.max(ae,ue.x),me=Math.min(me,ue.y),Ae=Math.max(Ae,ue.y)}return[X,me,ae,Ae]},oe.prototype.toGeoJSON=re.prototype.toGeoJSON;var Te=o.bB,fe=Q;function ee(ke){var X=new Te;return function(ae,me){for(var Ae in ae.layers)me.writeMessage(3,ge,ae.layers[Ae])}(ke,X),X.finish()}function ge(ke,X){var ae;X.writeVarintField(15,ke.version||1),X.writeStringField(1,ke.name||""),X.writeVarintField(5,ke.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<ke.length;ae++)me.feature=ke.feature(ae),X.writeMessage(2,pe,me);var Ae=me.keys;for(ae=0;ae<Ae.length;ae++)X.writeStringField(3,Ae[ae]);var Ce=me.values;for(ae=0;ae<Ce.length;ae++)X.writeMessage(4,Le,Ce[ae])}function pe(ke,X){var ae=ke.feature;ae.id!==void 0&&X.writeVarintField(1,ae.id),X.writeMessage(2,ye,ke),X.writeVarintField(3,ae.type),X.writeMessage(4,Ge,ae)}function ye(ke,X){var ae=ke.feature,me=ke.keys,Ae=ke.values,Ce=ke.keycache,je=ke.valuecache;for(var te in ae.properties){var ue=ae.properties[te],_e=Ce[te];if(ue!==null){_e===void 0&&(me.push(te),Ce[te]=_e=me.length-1),X.writeVarint(_e);var qe=typeof ue;qe!=="string"&&qe!=="boolean"&&qe!=="number"&&(ue=JSON.stringify(ue));var Je=qe+":"+ue,Qe=je[Je];Qe===void 0&&(Ae.push(ue),je[Je]=Qe=Ae.length-1),X.writeVarint(Qe)}}}function de(ke,X){return(X<<3)+(7&ke)}function Ne(ke){return ke<<1^ke>>31}function Ge(ke,X){for(var ae=ke.loadGeometry(),me=ke.type,Ae=0,Ce=0,je=ae.length,te=0;te<je;te++){var ue=ae[te],_e=1;me===1&&(_e=ue.length),X.writeVarint(de(1,_e));for(var qe=me===3?ue.length-1:ue.length,Je=0;Je<qe;Je++){Je===1&&me!==1&&X.writeVarint(de(2,qe-1));var Qe=ue[Je].x-Ae,Nt=ue[Je].y-Ce;X.writeVarint(Ne(Qe)),X.writeVarint(Ne(Nt)),Ae+=Qe,Ce+=Nt}me===3&&X.writeVarint(de(7,1))}}function Le(ke,X){var ae=typeof ke;ae==="string"?X.writeStringField(1,ke):ae==="boolean"?X.writeBooleanField(7,ke):ae==="number"&&(ke%1!=0?X.writeDoubleField(3,ke):ke<0?X.writeSVarintField(6,ke):X.writeVarintField(5,ke))}ne.exports=ee,ne.exports.fromVectorTileJs=ee,ne.exports.fromGeojsonVt=function(ke,X){X=X||{};var ae={};for(var me in ke)ae[me]=new fe(ke[me].features,X),ae[me].name=me,ae[me].version=X.version,ae[me].extent=X.extent;return ee({layers:ae})},ne.exports.GeoJSONWrapper=fe;var Me=o.bz(ne.exports);const $e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},ht=Math.fround||(ut=new Float32Array(1),ke=>(ut[0]=+ke,ut[0]));var ut;const Fe=3,ze=5,gt=6;class Zt{constructor(X){this.options=Object.assign(Object.create($e),X),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(X){const{log:ae,minZoom:me,maxZoom:Ae}=this.options;ae&&console.time("total time");const Ce=`prepare ${X.length} points`;ae&&console.time(Ce),this.points=X;const je=[];for(let ue=0;ue<X.length;ue++){const _e=X[ue];if(!_e.geometry)continue;const[qe,Je]=_e.geometry.coordinates,Qe=ht(sn(qe)),Nt=ht(Dt(Je));je.push(Qe,Nt,1/0,ue,-1,1),this.options.reduce&&je.push(0)}let te=this.trees[Ae+1]=this._createTree(je);ae&&console.timeEnd(Ce);for(let ue=Ae;ue>=me;ue--){const _e=+Date.now();te=this.trees[ue]=this._createTree(this._cluster(te,ue)),ae&&console.log("z%d: %d clusters in %dms",ue,te.numItems,+Date.now()-_e)}return ae&&console.timeEnd("total time"),this}getClusters(X,ae){let me=((X[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,X[1]));let Ce=X[2]===180?180:((X[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)me=-180,Ce=180;else if(me>Ce){const Je=this.getClusters([me,Ae,180,je],ae),Qe=this.getClusters([-180,Ae,Ce,je],ae);return Je.concat(Qe)}const te=this.trees[this._limitZoom(ae)],ue=te.range(sn(me),Dt(je),sn(Ce),Dt(Ae)),_e=te.data,qe=[];for(const Je of ue){const Qe=this.stride*Je;qe.push(_e[Qe+ze]>1?an(_e,Qe,this.clusterProps):this.points[_e[Qe+Fe]])}return qe}getChildren(X){const ae=this._getOriginId(X),me=this._getOriginZoom(X),Ae="No cluster with the specified id.",Ce=this.trees[me];if(!Ce)throw new Error(Ae);const je=Ce.data;if(ae*this.stride>=je.length)throw new Error(Ae);const te=this.options.radius/(this.options.extent*Math.pow(2,me-1)),ue=Ce.within(je[ae*this.stride],je[ae*this.stride+1],te),_e=[];for(const qe of ue){const Je=qe*this.stride;je[Je+4]===X&&_e.push(je[Je+ze]>1?an(je,Je,this.clusterProps):this.points[je[Je+Fe]])}if(_e.length===0)throw new Error(Ae);return _e}getLeaves(X,ae,me){const Ae=[];return this._appendLeaves(Ae,X,ae=ae||10,me=me||0,0),Ae}getTile(X,ae,me){const Ae=this.trees[this._limitZoom(X)],Ce=Math.pow(2,X),{extent:je,radius:te}=this.options,ue=te/je,_e=(me-ue)/Ce,qe=(me+1+ue)/Ce,Je={features:[]};return this._addTileFeatures(Ae.range((ae-ue)/Ce,_e,(ae+1+ue)/Ce,qe),Ae.data,ae,me,Ce,Je),ae===0&&this._addTileFeatures(Ae.range(1-ue/Ce,_e,1,qe),Ae.data,Ce,me,Ce,Je),ae===Ce-1&&this._addTileFeatures(Ae.range(0,_e,ue/Ce,qe),Ae.data,-1,me,Ce,Je),Je.features.length?Je:null}getClusterExpansionZoom(X){let ae=this._getOriginZoom(X)-1;for(;ae<=this.options.maxZoom;){const me=this.getChildren(X);if(ae++,me.length!==1)break;X=me[0].properties.cluster_id}return ae}_appendLeaves(X,ae,me,Ae,Ce){const je=this.getChildren(ae);for(const te of je){const ue=te.properties;if(ue&&ue.cluster?Ce+ue.point_count<=Ae?Ce+=ue.point_count:Ce=this._appendLeaves(X,ue.cluster_id,me,Ae,Ce):Ce<Ae?Ce++:X.push(te),X.length===me)break}return Ce}_createTree(X){const ae=new o.av(X.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<X.length;me+=this.stride)ae.add(X[me],X[me+1]);return ae.finish(),ae.data=X,ae}_addTileFeatures(X,ae,me,Ae,Ce,je){for(const te of X){const ue=te*this.stride,_e=ae[ue+ze]>1;let qe,Je,Qe;if(_e)qe=yn(ae,ue,this.clusterProps),Je=ae[ue],Qe=ae[ue+1];else{const Lt=this.points[ae[ue+Fe]];qe=Lt.properties;const[qt,cn]=Lt.geometry.coordinates;Je=sn(qt),Qe=Dt(cn)}const Nt={type:1,geometry:[[Math.round(this.options.extent*(Je*Ce-me)),Math.round(this.options.extent*(Qe*Ce-Ae))]],tags:qe};let Jt;Jt=_e||this.options.generateId?ae[ue+Fe]:this.points[ae[ue+Fe]].id,Jt!==void 0&&(Nt.id=Jt),je.features.push(Nt)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,ae){const{radius:me,extent:Ae,reduce:Ce,minPoints:je}=this.options,te=me/(Ae*Math.pow(2,ae)),ue=X.data,_e=[],qe=this.stride;for(let Je=0;Je<ue.length;Je+=qe){if(ue[Je+2]<=ae)continue;ue[Je+2]=ae;const Qe=ue[Je],Nt=ue[Je+1],Jt=X.within(ue[Je],ue[Je+1],te),Lt=ue[Je+ze];let qt=Lt;for(const cn of Jt){const ln=cn*qe;ue[ln+2]>ae&&(qt+=ue[ln+ze])}if(qt>Lt&&qt>=je){let cn,ln=Qe*Lt,In=Nt*Lt,Ln=-1;const Tn=((Je/qe|0)<<5)+(ae+1)+this.points.length;for(const hr of Jt){const Rn=hr*qe;if(ue[Rn+2]<=ae)continue;ue[Rn+2]=ae;const kr=ue[Rn+ze];ln+=ue[Rn]*kr,In+=ue[Rn+1]*kr,ue[Rn+4]=Tn,Ce&&(cn||(cn=this._map(ue,Je,!0),Ln=this.clusterProps.length,this.clusterProps.push(cn)),Ce(cn,this._map(ue,Rn)))}ue[Je+4]=Tn,_e.push(ln/qt,In/qt,1/0,Tn,-1,qt),Ce&&_e.push(Ln)}else{for(let cn=0;cn<qe;cn++)_e.push(ue[Je+cn]);if(qt>1)for(const cn of Jt){const ln=cn*qe;if(!(ue[ln+2]<=ae)){ue[ln+2]=ae;for(let In=0;In<qe;In++)_e.push(ue[ln+In])}}}}return _e}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,ae,me){if(X[ae+ze]>1){const je=this.clusterProps[X[ae+gt]];return me?Object.assign({},je):je}const Ae=this.points[X[ae+Fe]].properties,Ce=this.options.map(Ae);return me&&Ce===Ae?Object.assign({},Ce):Ce}}function an(ke,X,ae){return{type:"Feature",id:ke[X+Fe],properties:yn(ke,X,ae),geometry:{type:"Point",coordinates:[(me=ke[X],360*(me-.5)),$t(ke[X+1])]}};var me}function yn(ke,X,ae){const me=ke[X+ze],Ae=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,Ce=ke[X+gt],je=Ce===-1?{}:Object.assign({},ae[Ce]);return Object.assign(je,{cluster:!0,cluster_id:ke[X+Fe],point_count:me,point_count_abbreviated:Ae})}function sn(ke){return ke/360+.5}function Dt(ke){const X=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ae<0?0:ae>1?1:ae}function $t(ke){const X=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function ct(ke,X,ae,me){for(var Ae,Ce=me,je=ae-X>>1,te=ae-X,ue=ke[X],_e=ke[X+1],qe=ke[ae],Je=ke[ae+1],Qe=X+3;Qe<ae;Qe+=3){var Nt=xt(ke[Qe],ke[Qe+1],ue,_e,qe,Je);if(Nt>Ce)Ae=Qe,Ce=Nt;else if(Nt===Ce){var Jt=Math.abs(Qe-je);Jt<te&&(Ae=Qe,te=Jt)}}Ce>me&&(Ae-X>3&&ct(ke,X,Ae,me),ke[Ae+2]=Ce,ae-Ae>3&&ct(ke,Ae,ae,me))}function xt(ke,X,ae,me,Ae,Ce){var je=Ae-ae,te=Ce-me;if(je!==0||te!==0){var ue=((ke-ae)*je+(X-me)*te)/(je*je+te*te);ue>1?(ae=Ae,me=Ce):ue>0&&(ae+=je*ue,me+=te*ue)}return(je=ke-ae)*je+(te=X-me)*te}function wt(ke,X,ae,me){var Ae={id:ke===void 0?null:ke,type:X,geometry:ae,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var je=Ce.geometry,te=Ce.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")Wt(Ce,je);else if(te==="Polygon"||te==="MultiLineString")for(var ue=0;ue<je.length;ue++)Wt(Ce,je[ue]);else if(te==="MultiPolygon")for(ue=0;ue<je.length;ue++)for(var _e=0;_e<je[ue].length;_e++)Wt(Ce,je[ue][_e])}(Ae),Ae}function Wt(ke,X){for(var ae=0;ae<X.length;ae+=3)ke.minX=Math.min(ke.minX,X[ae]),ke.minY=Math.min(ke.minY,X[ae+1]),ke.maxX=Math.max(ke.maxX,X[ae]),ke.maxY=Math.max(ke.maxY,X[ae+1])}function Qt(ke,X,ae,me){if(X.geometry){var Ae=X.geometry.coordinates,Ce=X.geometry.type,je=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2),te=[],ue=X.id;if(ae.promoteId?ue=X.properties[ae.promoteId]:ae.generateId&&(ue=me||0),Ce==="Point")Ht(Ae,te);else if(Ce==="MultiPoint")for(var _e=0;_e<Ae.length;_e++)Ht(Ae[_e],te);else if(Ce==="LineString")kt(Ae,te,je,!1);else if(Ce==="MultiLineString"){if(ae.lineMetrics){for(_e=0;_e<Ae.length;_e++)kt(Ae[_e],te=[],je,!1),ke.push(wt(ue,"LineString",te,X.properties));return}dt(Ae,te,je,!1)}else if(Ce==="Polygon")dt(Ae,te,je,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(_e=0;_e<X.geometry.geometries.length;_e++)Qt(ke,{id:ue,geometry:X.geometry.geometries[_e],properties:X.properties},ae,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<Ae.length;_e++){var qe=[];dt(Ae[_e],qe,je,!0),te.push(qe)}}ke.push(wt(ue,Ce,te,X.properties))}}function Ht(ke,X){X.push(be(ke[0])),X.push(Et(ke[1])),X.push(0)}function kt(ke,X,ae,me){for(var Ae,Ce,je=0,te=0;te<ke.length;te++){var ue=be(ke[te][0]),_e=Et(ke[te][1]);X.push(ue),X.push(_e),X.push(0),te>0&&(je+=me?(Ae*_e-ue*Ce)/2:Math.sqrt(Math.pow(ue-Ae,2)+Math.pow(_e-Ce,2))),Ae=ue,Ce=_e}var qe=X.length-3;X[2]=1,ct(X,0,qe,ae),X[qe+2]=1,X.size=Math.abs(je),X.start=0,X.end=X.size}function dt(ke,X,ae,me){for(var Ae=0;Ae<ke.length;Ae++){var Ce=[];kt(ke[Ae],Ce,ae,me),X.push(Ce)}}function be(ke){return ke/360+.5}function Et(ke){var X=Math.sin(ke*Math.PI/180),ae=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ae<0?0:ae>1?1:ae}function Ut(ke,X,ae,me,Ae,Ce,je,te){if(me/=X,Ce>=(ae/=X)&&je<me)return ke;if(je<ae||Ce>=me)return null;for(var ue=[],_e=0;_e<ke.length;_e++){var qe=ke[_e],Je=qe.geometry,Qe=qe.type,Nt=Ae===0?qe.minX:qe.minY,Jt=Ae===0?qe.maxX:qe.maxY;if(Nt>=ae&&Jt<me)ue.push(qe);else if(!(Jt<ae||Nt>=me)){var Lt=[];if(Qe==="Point"||Qe==="MultiPoint")_t(Je,Lt,ae,me,Ae);else if(Qe==="LineString")zt(Je,Lt,ae,me,Ae,!1,te.lineMetrics);else if(Qe==="MultiLineString")Mn(Je,Lt,ae,me,Ae,!1);else if(Qe==="Polygon")Mn(Je,Lt,ae,me,Ae,!0);else if(Qe==="MultiPolygon")for(var qt=0;qt<Je.length;qt++){var cn=[];Mn(Je[qt],cn,ae,me,Ae,!0),cn.length&&Lt.push(cn)}if(Lt.length){if(te.lineMetrics&&Qe==="LineString"){for(qt=0;qt<Lt.length;qt++)ue.push(wt(qe.id,Qe,Lt[qt],qe.tags));continue}Qe!=="LineString"&&Qe!=="MultiLineString"||(Lt.length===1?(Qe="LineString",Lt=Lt[0]):Qe="MultiLineString"),Qe!=="Point"&&Qe!=="MultiPoint"||(Qe=Lt.length===3?"Point":"MultiPoint"),ue.push(wt(qe.id,Qe,Lt,qe.tags))}}}return ue.length?ue:null}function _t(ke,X,ae,me,Ae){for(var Ce=0;Ce<ke.length;Ce+=3){var je=ke[Ce+Ae];je>=ae&&je<=me&&(X.push(ke[Ce]),X.push(ke[Ce+1]),X.push(ke[Ce+2]))}}function zt(ke,X,ae,me,Ae,Ce,je){for(var te,ue,_e=gn(ke),qe=Ae===0?Kn:br,Je=ke.start,Qe=0;Qe<ke.length-3;Qe+=3){var Nt=ke[Qe],Jt=ke[Qe+1],Lt=ke[Qe+2],qt=ke[Qe+3],cn=ke[Qe+4],ln=Ae===0?Nt:Jt,In=Ae===0?qt:cn,Ln=!1;je&&(te=Math.sqrt(Math.pow(Nt-qt,2)+Math.pow(Jt-cn,2))),ln<ae?In>ae&&(ue=qe(_e,Nt,Jt,qt,cn,ae),je&&(_e.start=Je+te*ue)):ln>me?In<me&&(ue=qe(_e,Nt,Jt,qt,cn,me),je&&(_e.start=Je+te*ue)):Hn(_e,Nt,Jt,Lt),In<ae&&ln>=ae&&(ue=qe(_e,Nt,Jt,qt,cn,ae),Ln=!0),In>me&&ln<=me&&(ue=qe(_e,Nt,Jt,qt,cn,me),Ln=!0),!Ce&&Ln&&(je&&(_e.end=Je+te*ue),X.push(_e),_e=gn(ke)),je&&(Je+=te)}var Tn=ke.length-3;Nt=ke[Tn],Jt=ke[Tn+1],Lt=ke[Tn+2],(ln=Ae===0?Nt:Jt)>=ae&&ln<=me&&Hn(_e,Nt,Jt,Lt),Tn=_e.length-3,Ce&&Tn>=3&&(_e[Tn]!==_e[0]||_e[Tn+1]!==_e[1])&&Hn(_e,_e[0],_e[1],_e[2]),_e.length&&X.push(_e)}function gn(ke){var X=[];return X.size=ke.size,X.start=ke.start,X.end=ke.end,X}function Mn(ke,X,ae,me,Ae,Ce){for(var je=0;je<ke.length;je++)zt(ke[je],X,ae,me,Ae,Ce,!1)}function Hn(ke,X,ae,me){ke.push(X),ke.push(ae),ke.push(me)}function Kn(ke,X,ae,me,Ae,Ce){var je=(Ce-X)/(me-X);return ke.push(Ce),ke.push(ae+(Ae-ae)*je),ke.push(1),je}function br(ke,X,ae,me,Ae,Ce){var je=(Ce-ae)/(Ae-ae);return ke.push(X+(me-X)*je),ke.push(Ce),ke.push(1),je}function Yn(ke,X){for(var ae=[],me=0;me<ke.length;me++){var Ae,Ce=ke[me],je=Ce.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")Ae=rr(Ce.geometry,X);else if(je==="MultiLineString"||je==="Polygon"){Ae=[];for(var te=0;te<Ce.geometry.length;te++)Ae.push(rr(Ce.geometry[te],X))}else if(je==="MultiPolygon")for(Ae=[],te=0;te<Ce.geometry.length;te++){for(var ue=[],_e=0;_e<Ce.geometry[te].length;_e++)ue.push(rr(Ce.geometry[te][_e],X));Ae.push(ue)}ae.push(wt(Ce.id,je,Ae,Ce.tags))}return ae}function rr(ke,X){var ae=[];ae.size=ke.size,ke.start!==void 0&&(ae.start=ke.start,ae.end=ke.end);for(var me=0;me<ke.length;me+=3)ae.push(ke[me]+X,ke[me+1],ke[me+2]);return ae}function vt(ke,X){if(ke.transformed)return ke;var ae,me,Ae,Ce=1<<ke.z,je=ke.x,te=ke.y;for(ae=0;ae<ke.features.length;ae++){var ue=ke.features[ae],_e=ue.geometry,qe=ue.type;if(ue.geometry=[],qe===1)for(me=0;me<_e.length;me+=2)ue.geometry.push(Vn(_e[me],_e[me+1],X,Ce,je,te));else for(me=0;me<_e.length;me++){var Je=[];for(Ae=0;Ae<_e[me].length;Ae+=2)Je.push(Vn(_e[me][Ae],_e[me][Ae+1],X,Ce,je,te));ue.geometry.push(Je)}}return ke.transformed=!0,ke}function Vn(ke,X,ae,me,Ae,Ce){return[Math.round(ae*(ke*me-Ae)),Math.round(ae*(X*me-Ce))]}function He(ke,X,ae,me,Ae){for(var Ce=X===Ae.maxZoom?0:Ae.tolerance/((1<<X)*Ae.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ae,y:me,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},te=0;te<ke.length;te++){je.numFeatures++,pt(je,ke[te],Ce,Ae);var ue=ke[te].minX,_e=ke[te].minY,qe=ke[te].maxX,Je=ke[te].maxY;ue<je.minX&&(je.minX=ue),_e<je.minY&&(je.minY=_e),qe>je.maxX&&(je.maxX=qe),Je>je.maxY&&(je.maxY=Je)}return je}function pt(ke,X,ae,me){var Ae=X.geometry,Ce=X.type,je=[];if(Ce==="Point"||Ce==="MultiPoint")for(var te=0;te<Ae.length;te+=3)je.push(Ae[te]),je.push(Ae[te+1]),ke.numPoints++,ke.numSimplified++;else if(Ce==="LineString")dn(je,Ae,ke,ae,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(te=0;te<Ae.length;te++)dn(je,Ae[te],ke,ae,Ce==="Polygon",te===0);else if(Ce==="MultiPolygon")for(var ue=0;ue<Ae.length;ue++){var _e=Ae[ue];for(te=0;te<_e.length;te++)dn(je,_e[te],ke,ae,!0,te===0)}if(je.length){var qe=X.tags||null;if(Ce==="LineString"&&me.lineMetrics){for(var Je in qe={},X.tags)qe[Je]=X.tags[Je];qe.mapbox_clip_start=Ae.start/Ae.size,qe.mapbox_clip_end=Ae.end/Ae.size}var Qe={geometry:je,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:qe};X.id!==null&&(Qe.id=X.id),ke.features.push(Qe)}}function dn(ke,X,ae,me,Ae,Ce){var je=me*me;if(me>0&&X.size<(Ae?je:me))ae.numPoints+=X.length/3;else{for(var te=[],ue=0;ue<X.length;ue+=3)(me===0||X[ue+2]>je)&&(ae.numSimplified++,te.push(X[ue]),te.push(X[ue+1])),ae.numPoints++;Ae&&function(_e,qe){for(var Je=0,Qe=0,Nt=_e.length,Jt=Nt-2;Qe<Nt;Jt=Qe,Qe+=2)Je+=(_e[Qe]-_e[Jt])*(_e[Qe+1]+_e[Jt+1]);if(Je>0===qe)for(Qe=0,Nt=_e.length;Qe<Nt/2;Qe+=2){var Lt=_e[Qe],qt=_e[Qe+1];_e[Qe]=_e[Nt-2-Qe],_e[Qe+1]=_e[Nt-1-Qe],_e[Nt-2-Qe]=Lt,_e[Nt-1-Qe]=qt}}(te,Ce),ke.push(te)}}function lt(ke,X){var ae=(X=this.options=function(Ae,Ce){for(var je in Ce)Ae[je]=Ce[je];return Ae}(Object.create(this.options),X)).debug;if(ae&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Ae,Ce){var je=[];if(Ae.type==="FeatureCollection")for(var te=0;te<Ae.features.length;te++)Qt(je,Ae.features[te],Ce,te);else Qt(je,Ae.type==="Feature"?Ae:{geometry:Ae},Ce);return je}(ke,X);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Ae,Ce){var je=Ce.buffer/Ce.extent,te=Ae,ue=Ut(Ae,1,-1-je,je,0,-1,2,Ce),_e=Ut(Ae,1,1-je,2+je,0,-1,2,Ce);return(ue||_e)&&(te=Ut(Ae,1,-je,1+je,0,-1,2,Ce)||[],ue&&(te=Yn(ue,1).concat(te)),_e&&(te=te.concat(Yn(_e,-1)))),te}(me,X),me.length&&this.splitTile(me,0,0,0),ae&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function en(ke,X,ae){return 32*((1<<ke)*ae+X)+ke}function tn(ke,X){return X?ke.properties[X]:ke.id}function wr(ke,X){if(ke==null)return!0;if(ke.type==="Feature")return tn(ke,X)!=null;if(ke.type==="FeatureCollection"){const ae=new Set;for(const me of ke.features){const Ae=tn(me,X);if(Ae==null||ae.has(Ae))return!1;ae.add(Ae)}return!0}return!1}function mr(ke,X){const ae=new Map;if(ke!=null)if(ke.type==="Feature")ae.set(tn(ke,X),ke);else for(const me of ke.features)ae.set(tn(me,X),me);return ae}lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},lt.prototype.splitTile=function(ke,X,ae,me,Ae,Ce,je){for(var te=[ke,X,ae,me],ue=this.options,_e=ue.debug;te.length;){me=te.pop(),ae=te.pop(),X=te.pop(),ke=te.pop();var qe=1<<X,Je=en(X,ae,me),Qe=this.tiles[Je];if(!Qe&&(_e>1&&console.time("creation"),Qe=this.tiles[Je]=He(ke,X,ae,me,ue),this.tileCoords.push({z:X,x:ae,y:me}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,ae,me,Qe.numFeatures,Qe.numPoints,Qe.numSimplified),console.timeEnd("creation"));var Nt="z"+X;this.stats[Nt]=(this.stats[Nt]||0)+1,this.total++}if(Qe.source=ke,Ae){if(X===ue.maxZoom||X===Ae)continue;var Jt=1<<Ae-X;if(ae!==Math.floor(Ce/Jt)||me!==Math.floor(je/Jt))continue}else if(X===ue.indexMaxZoom||Qe.numPoints<=ue.indexMaxPoints)continue;if(Qe.source=null,ke.length!==0){_e>1&&console.time("clipping");var Lt,qt,cn,ln,In,Ln,Tn=.5*ue.buffer/ue.extent,hr=.5-Tn,Rn=.5+Tn,kr=1+Tn;Lt=qt=cn=ln=null,In=Ut(ke,qe,ae-Tn,ae+Rn,0,Qe.minX,Qe.maxX,ue),Ln=Ut(ke,qe,ae+hr,ae+kr,0,Qe.minX,Qe.maxX,ue),ke=null,In&&(Lt=Ut(In,qe,me-Tn,me+Rn,1,Qe.minY,Qe.maxY,ue),qt=Ut(In,qe,me+hr,me+kr,1,Qe.minY,Qe.maxY,ue),In=null),Ln&&(cn=Ut(Ln,qe,me-Tn,me+Rn,1,Qe.minY,Qe.maxY,ue),ln=Ut(Ln,qe,me+hr,me+kr,1,Qe.minY,Qe.maxY,ue),Ln=null),_e>1&&console.timeEnd("clipping"),te.push(Lt||[],X+1,2*ae,2*me),te.push(qt||[],X+1,2*ae,2*me+1),te.push(cn||[],X+1,2*ae+1,2*me),te.push(ln||[],X+1,2*ae+1,2*me+1)}}},lt.prototype.getTile=function(ke,X,ae){var me=this.options,Ae=me.extent,Ce=me.debug;if(ke<0||ke>24)return null;var je=1<<ke,te=en(ke,X=(X%je+je)%je,ae);if(this.tiles[te])return vt(this.tiles[te],Ae);Ce>1&&console.log("drilling down to z%d-%d-%d",ke,X,ae);for(var ue,_e=ke,qe=X,Je=ae;!ue&&_e>0;)_e--,qe=Math.floor(qe/2),Je=Math.floor(Je/2),ue=this.tiles[en(_e,qe,Je)];return ue&&ue.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",_e,qe,Je),Ce>1&&console.time("drilling down"),this.splitTile(ue.source,_e,qe,Je,ke,X,ae),Ce>1&&console.timeEnd("drilling down"),this.tiles[te]?vt(this.tiles[te],Ae):null):null};class on extends A{constructor(X,ae,me,Ae){super(X,ae,me),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,je)=>{const{promoteId:te}=Ce;if(Ce.request)return o.f(Ce.request,(ue,_e,qe,Je)=>{this._dataUpdateable=wr(_e,te)?mr(_e,te):void 0,je(ue,_e,qe,Je)});if(typeof Ce.data=="string")try{const ue=JSON.parse(Ce.data);this._dataUpdateable=wr(ue,te)?mr(ue,te):void 0,je(null,ue)}catch{je(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(ue,_e,qe){var Je,Qe,Nt,Jt;if(_e.removeAll&&ue.clear(),_e.remove)for(const Lt of _e.remove)ue.delete(Lt);if(_e.add)for(const Lt of _e.add){const qt=tn(Lt,qe);qt!=null&&ue.set(qt,Lt)}if(_e.update)for(const Lt of _e.update){let qt=ue.get(Lt.id);if(qt==null)continue;const cn=!Lt.removeAllProperties&&(((Je=Lt.removeProperties)===null||Je===void 0?void 0:Je.length)>0||((Qe=Lt.addOrUpdateProperties)===null||Qe===void 0?void 0:Qe.length)>0);if((Lt.newGeometry||Lt.removeAllProperties||cn)&&(qt=Object.assign({},qt),ue.set(Lt.id,qt),cn&&(qt.properties=Object.assign({},qt.properties))),Lt.newGeometry&&(qt.geometry=Lt.newGeometry),Lt.removeAllProperties)qt.properties={};else if(((Nt=Lt.removeProperties)===null||Nt===void 0?void 0:Nt.length)>0)for(const ln of Lt.removeProperties)Object.prototype.hasOwnProperty.call(qt.properties,ln)&&delete qt.properties[ln];if(((Jt=Lt.addOrUpdateProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const{key:ln,value:In}of Lt.addOrUpdateProperties)qt.properties[ln]=In}}(this._dataUpdateable,Ce.dataDiff,te),je(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):je(new Error(`Cannot update existing geojson data in ${Ce.source}`)):je(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Ae&&(this.loadGeoJSON=Ae)}loadGeoJSONTile(X,ae){const me=X.tileID.canonical;if(!this._geoJSONIndex)return ae(null,null);const Ae=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!Ae)return ae(null,null);const Ce=new class{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.N,this.length=te.length,this._features=te}feature(te){return new class{constructor(ue){this._feature=ue,this.extent=o.N,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const _e of this._feature.geometry)ue.push([new o.P(_e[0],_e[1])]);return ue}{const ue=[];for(const _e of this._feature.geometry){const qe=[];for(const Je of _e)qe.push(new o.P(Je[0],Je[1]));ue.push(qe)}return ue}}toGeoJSON(ue,_e,qe){return K.call(this,ue,_e,qe)}}(this._features[te])}}(Ae.features);let je=Me(Ce);je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),ae(null,{vectorTile:Ce,rawData:je.buffer})}loadData(X,ae){var me;(me=this._pendingRequest)===null||me===void 0||me.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ae=!!(X&&X.request&&X.request.collectResourceTiming)&&new o.bu(X.request);this._pendingCallback=ae,this._pendingRequest=this.loadGeoJSON(X,(Ce,je)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!je)return ae(Ce);if(typeof je!="object")return ae(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{W(je,!0);try{if(X.filter){const ue=o.bC(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(qe=>`${qe.key}: ${qe.message}`).join(", "));je={type:"FeatureCollection",features:je.features.filter(qe=>ue.value.evaluate({zoom:0},qe))}}this._geoJSONIndex=X.cluster?new Zt(function({superclusterOptions:ue,clusterProperties:_e}){if(!_e||!ue)return ue;const qe={},Je={},Qe={accumulated:null,zoom:0},Nt={properties:null},Jt=Object.keys(_e);for(const Lt of Jt){const[qt,cn]=_e[Lt],ln=o.bC(cn),In=o.bC(typeof qt=="string"?[qt,["accumulated"],["get",Lt]]:qt);qe[Lt]=ln.value,Je[Lt]=In.value}return ue.map=Lt=>{Nt.properties=Lt;const qt={};for(const cn of Jt)qt[cn]=qe[cn].evaluate(Qe,Nt);return qt},ue.reduce=(Lt,qt)=>{Nt.properties=qt;for(const cn of Jt)Qe.accumulated=Lt[cn],Lt[cn]=Je[cn].evaluate(Qe,Nt)},ue}(X)).load(je.features):function(ue,_e){return new lt(ue,_e)}(je,X.geojsonVtOptions)}catch(ue){return ae(ue)}this.loaded={};const te={};if(Ae){const ue=Ae.finish();ue&&(te.resourceTiming={},te.resourceTiming[X.source]=JSON.parse(JSON.stringify(ue)))}ae(null,te)}})}reloadTile(X,ae){const me=this.loaded;return me&&me[X.uid]?super.reloadTile(X,ae):this.loadTile(X,ae)}removeSource(X,ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ae()}getClusterExpansionZoom(X,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(me){ae(me)}}getClusterChildren(X,ae){try{ae(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(me){ae(me)}}getClusterLeaves(X,ae){try{ae(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(me){ae(me)}}}class Xn{constructor(X){this.self=X,this.actor=new o.C(X,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:A,geojson:on},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,me)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=me},this.self.registerRTLTextPlugin=ae=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.applyArabicShaping=ae.applyArabicShaping,o.bD.processBidirectionalText=ae.processBidirectionalText,o.bD.processStyledBidirectionalText=ae.processStyledBidirectionalText}}setReferrer(X,ae){this.referrer=ae}setImages(X,ae,me){this.availableImages[X]=ae;for(const Ae in this.workerSources[X]){const Ce=this.workerSources[X][Ae];for(const je in Ce)Ce[je].availableImages=ae}me()}setLayers(X,ae,me){this.getLayerIndex(X).replace(ae),me()}updateLayers(X,ae,me){this.getLayerIndex(X).update(ae.layers,ae.removedIds),me()}loadTile(X,ae,me){this.getWorkerSource(X,ae.type,ae.source).loadTile(ae,me)}loadDEMTile(X,ae,me){this.getDEMWorkerSource(X,ae.source).loadTile(ae,me)}reloadTile(X,ae,me){this.getWorkerSource(X,ae.type,ae.source).reloadTile(ae,me)}abortTile(X,ae,me){this.getWorkerSource(X,ae.type,ae.source).abortTile(ae,me)}removeTile(X,ae,me){this.getWorkerSource(X,ae.type,ae.source).removeTile(ae,me)}removeDEMTile(X,ae){this.getDEMWorkerSource(X,ae.source).removeTile(ae)}removeSource(X,ae,me){if(!this.workerSources[X]||!this.workerSources[X][ae.type]||!this.workerSources[X][ae.type][ae.source])return;const Ae=this.workerSources[X][ae.type][ae.source];delete this.workerSources[X][ae.type][ae.source],Ae.removeSource!==void 0?Ae.removeSource(ae,me):me()}loadWorkerSource(X,ae,me){try{this.self.importScripts(ae.url),me()}catch(Ae){me(Ae.toString())}}syncRTLPluginState(X,ae,me){try{o.bD.setState(ae);const Ae=o.bD.getPluginURL();if(o.bD.isLoaded()&&!o.bD.isParsed()&&Ae!=null){this.self.importScripts(Ae);const Ce=o.bD.isParsed();me(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),Ce)}}catch(Ae){me(Ae.toString())}}getAvailableImages(X){let ae=this.availableImages[X];return ae||(ae=[]),ae}getLayerIndex(X){let ae=this.layerIndexes[X];return ae||(ae=this.layerIndexes[X]=new _),ae}getWorkerSource(X,ae,me){return this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][ae]||(this.workerSources[X][ae]={}),this.workerSources[X][ae][me]||(this.workerSources[X][ae][me]=new this.workerSourceTypes[ae]({send:(Ae,Ce,je)=>{this.actor.send(Ae,Ce,je,X)}},this.getLayerIndex(X),this.getAvailableImages(X))),this.workerSources[X][ae][me]}getDEMWorkerSource(X,ae){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][ae]||(this.demWorkerSources[X][ae]=new N),this.demWorkerSources[X][ae]}}return o.i()&&(self.worker=new Xn(self)),Xn}),f(["./shared"],function(o){var _="3.6.2";class v{static testProp(r){if(!v.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in v.docStyle)return r[c];return r[0]}static create(r,c,p){const g=window.document.createElement(r);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){v.docStyle&&v.selectProp&&(v.userSelect=v.docStyle[v.selectProp],v.docStyle[v.selectProp]="none")}static enableDrag(){v.docStyle&&v.selectProp&&(v.docStyle[v.selectProp]=v.userSelect)}static setTransform(r,c){r.style[v.transformProp]=c}static addEventListener(r,c,p,g={}){r.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(r,c,p,g={}){r.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",v.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",v.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",v.suppressClickInternal,!0)},0)}static mousePos(r,c){const p=r.getBoundingClientRect();return new o.P(c.clientX-p.left-r.clientLeft,c.clientY-p.top-r.clientTop)}static touchPos(r,c){const p=r.getBoundingClientRect(),g=[];for(let b=0;b<c.length;b++)g.push(new o.P(c[b].clientX-p.left-r.clientLeft,c[b].clientY-p.top-r.clientTop));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}v.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,v.selectProp=v.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),v.transformProp=v.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(y){!A&&I&&(N?V(y):S=y)}};let S,I,A=!1,N=!1;function V(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,I),y.isContextLost())return;E.supported=!0}catch{}y.deleteTexture(r),A=!0}var j,W;typeof document<"u"&&(I=document.createElement("img"),I.onload=function(){S&&V(S),S=null,N=!0},I.onerror=function(){A=!0,S=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,c,p,g;y.resetRequestQueue=()=>{r=[],c=0,p=0,g={}},y.addThrottleControl=F=>{const U=p++;return g[U]=F,U},y.removeThrottleControl=F=>{delete g[F],M()},y.getImage=(F,U,q=!0)=>{E.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*");const le={requestParameters:F,supportImageRefresh:q,callback:U,cancelled:!1,completed:!1,cancel:()=>{le.completed||le.cancelled||(le.cancelled=!0,le.innerRequest&&(le.innerRequest.cancel(),c--),M())}};return r.push(le),M(),le};const b=F=>{const{requestParameters:U,supportImageRefresh:q,callback:le}=F;return o.e(U,{type:"image"}),(q!==!1||o.i()||o.g(U.url)||U.headers&&!Object.keys(U.headers).reduce((Ie,Se)=>Ie&&Se==="accept",!0)?o.m:B)(U,(Ie,Se,Pe,ve)=>{C(F,le,Ie,Se,Pe,ve)})},C=(F,U,q,le,Ie,Se)=>{q?U(q):le instanceof HTMLImageElement||o.a(le)?U(null,le):le&&((Pe,ve)=>{typeof createImageBitmap=="function"?o.b(Pe,ve):o.d(Pe,ve)})(le,(Pe,ve)=>{Pe!=null?U(Pe):ve!=null&&U(null,ve,{cacheControl:Ie,expires:Se})}),F.cancelled||(F.completed=!0,c--,M())},M=()=>{const F=(()=>{const U=Object.keys(g);let q=!1;if(U.length>0){for(const le of U)if(q=g[le](),q)break}return q})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<F&&r.length>0;U++){const q=r.shift();if(q.cancelled){U--;continue}const le=b(q);c++,q.innerRequest=le}},B=(F,U)=>{const q=new Image,le=F.url;let Ie=!1;const Se=F.credentials;return Se&&Se==="include"?q.crossOrigin="use-credentials":(Se&&Se==="same-origin"||!o.s(le))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{U(null,q),q.onerror=q.onload=null},q.onerror=()=>{Ie||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=le,{cancel:()=>{Ie=!0,q.src=""}}}}(j||(j={})),j.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(W||(W={}));class K{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}normalizeSpriteURL(r,c,p){const g=function(b){const C=b.match(ne);if(!C)throw new Error(`Unable to parse URL "${b}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(r);return g.path+=`${c}${p}`,function(b){const C=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${C}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(y){var r=new o.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var re,Q=function(y,r,c){return y[0]=r[0]-c[0],y[1]=r[1]-c[1],y[2]=r[2]-c[2],y};re=new o.A(3),o.A!=Float32Array&&(re[0]=0,re[1]=0,re[2]=0);var se=function(y){var r=y[0],c=y[1];return r*r+c*c};function oe(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:g}of y){const b=`${p}${g}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:p,url:g}))}}return r}function Te(y,r,c,p,g){if(p)return void y(p);if(g!==Object.values(r).length||g!==Object.values(c).length)return;const b={};for(const C in r){b[C]={};const M=o.h.getImageCanvasContext(c[C]),B=r[C];for(const F in B){const{width:U,height:q,x:le,y:Ie,sdf:Se,pixelRatio:Pe,stretchX:ve,stretchY:Ze,content:tt}=B[F];b[C][F]={data:null,pixelRatio:Pe,sdf:Se,stretchX:ve,stretchY:Ze,content:tt,spriteData:{width:U,height:q,x:le,y:Ie,context:M}}}}y(null,b)}(function(){var y=new o.A(2);o.A!=Float32Array&&(y[0]=0,y[1]=0)})();class fe{constructor(r,c,p,g){this.context=r,this.format=p,this.texture=r.gl.createTexture(),this.update(c,g)}update(r,c,p){const{width:g,height:b}=r,C=!(this.size&&this.size[0]===g&&this.size[1]===b||p),{context:M}=this,{gl:B}=M;if(this.useMipmap=!!(c&&c.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!c||c.premultiply!==!1)),C)this.size=[g,b],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.a(r)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,r):B.texImage2D(B.TEXTURE_2D,0,this.format,g,b,0,this.format,B.UNSIGNED_BYTE,r.data);else{const{x:F,y:U}=p||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.a(r)?B.texSubImage2D(B.TEXTURE_2D,0,F,U,B.RGBA,B.UNSIGNED_BYTE,r):B.texSubImage2D(B.TEXTURE_2D,0,F,U,g,b,B.RGBA,B.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(r,c,p){const{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),r!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,r),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||r),this.filter=r),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ee(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class ge extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,c){if(!r)return!0;let p=0;for(const g of r){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,b=p&&p.height||c.data.height;return!(r[0]<0||g<r[0]||r[1]<0||b<r[1]||r[2]<0||g<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,p=!0){const g=this.getImage(r);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,c){let p=!0;if(!this.isLoaded())for(const g of r)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(r,c):this.requestors.push({ids:r,callback:c})}_notify(r,c){const p={};for(const g of r){let b=this.getImage(g);b||(this.fire(new o.k("styleimagemissing",{id:g})),b=this.getImage(g)),b?p[g]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],p=this.getImage(r);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new o.I(g,p);this.patterns[r]={bin:g,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new fe(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:p}=o.p(r),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const b in this.patterns){const{bin:C}=this.patterns[b],M=C.x+1,B=C.y+1,F=this.getImage(b).data,U=F.width,q=F.height;o.R.copy(F,g,{x:0,y:0},{x:M,y:B},{width:U,height:q}),o.R.copy(F,g,{x:0,y:q-1},{x:M,y:B-1},{width:U,height:1}),o.R.copy(F,g,{x:0,y:0},{x:M,y:B+q},{width:U,height:1}),o.R.copy(F,g,{x:U-1,y:0},{x:M-1,y:B},{width:1,height:q}),o.R.copy(F,g,{x:0,y:0},{x:M+U,y:B},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||o.w(`Image with ID: "${c}" was not found`),ee(p)&&this.updateImage(c,p)}}}const pe=1e20;function ye(y,r,c,p,g,b,C,M,B){for(let F=r;F<r+p;F++)de(y,c*b+F,b,g,C,M,B);for(let F=c;F<c+g;F++)de(y,F*b+r,1,p,C,M,B)}function de(y,r,c,p,g,b,C){b[0]=0,C[0]=-1e20,C[1]=pe,g[0]=y[r];for(let M=1,B=0,F=0;M<p;M++){g[M]=y[r+M*c];const U=M*M;do{const q=b[B];F=(g[M]-g[q]+U-q*q)/(M-q)/2}while(F<=C[B]&&--B>-1);B++,b[B]=M,C[B]=F,C[B+1]=pe}for(let M=0,B=0;M<p;M++){for(;C[B+1]<M;)B++;const F=b[B],U=M-F;y[r+M*c]=g[F]+U*U}}class Ne{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r,c){const p=[];for(const g in r)for(const b of r[g])p.push({stack:g,id:b});o.o(p,({stack:g,id:b},C)=>{let M=this.entries[g];M||(M=this.entries[g]={glyphs:{},requests:{},ranges:{}});let B=M.glyphs[b];if(B!==void 0)return void C(null,{stack:g,id:b,glyph:B});if(B=this._tinySDF(M,g,b),B)return M.glyphs[b]=B,void C(null,{stack:g,id:b,glyph:B});const F=Math.floor(b/256);if(256*F>65535)return void C(new Error("glyphs > 65535 not supported"));if(M.ranges[F])return void C(null,{stack:g,id:b,glyph:B});if(!this.url)return void C(new Error("glyphsUrl is not set"));let U=M.requests[F];U||(U=M.requests[F]=[],Ne.loadGlyphRange(g,F,this.url,this.requestManager,(q,le)=>{if(le){for(const Ie in le)this._doesCharSupportLocalGlyph(+Ie)||(M.glyphs[+Ie]=le[+Ie]);M.ranges[F]=!0}for(const Ie of U)Ie(q,le);delete M.requests[F]})),U.push((q,le)=>{q?C(q):le&&C(null,{stack:g,id:b,glyph:le[b]||null})})},(g,b)=>{if(g)c(g);else if(b){const C={};for(const{stack:M,id:B,glyph:F}of b)(C[M]||(C[M]={}))[B]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics};c(null,C)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](r)||o.u["Hangul Syllables"](r)||o.u.Hiragana(r)||o.u.Katakana(r))}_tinySDF(r,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let b=r.tinySDF;if(!b){let M="400";/bold/i.test(c)?M="900":/medium/i.test(c)?M="500":/light/i.test(c)&&(M="200"),b=r.tinySDF=new Ne.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:M})}const C=b.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ne.loadGlyphRange=function(y,r,c,p,g){const b=256*r,C=b+255,M=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${b}-${C}`),W.Glyphs);o.l(M,(B,F)=>{if(B)g(B);else if(F){const U={};for(const q of o.n(F))U[q.id]=q;g(null,U)}})},Ne.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=p,this.radius=c;const M=this.size=y+4*r,B=this._createCanvas(M),F=this.ctx=B.getContext("2d",{willReadFrequently:!0});F.font=`${C} ${b} ${y}px ${g}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(y),C=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),B=Math.min(this.size-this.buffer,C+Math.ceil(p)),F=M+2*this.buffer,U=B+2*this.buffer,q=Math.max(F*U,0),le=new Uint8ClampedArray(q),Ie={data:le,width:F,height:U,glyphWidth:M,glyphHeight:B,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(M===0||B===0)return Ie;const{ctx:Se,buffer:Pe,gridInner:ve,gridOuter:Ze}=this;Se.clearRect(Pe,Pe,M,B),Se.fillText(y,Pe,Pe+C);const tt=Se.getImageData(Pe,Pe,M,B);Ze.fill(pe,0,q),ve.fill(0,0,q);for(let Re=0;Re<B;Re++)for(let We=0;We<M;We++){const it=tt.data[4*(Re*M+We)+3]/255;if(it===0)continue;const at=(Re+Pe)*F+We+Pe;if(it===1)Ze[at]=0,ve[at]=pe;else{const ft=.5-it;Ze[at]=ft>0?ft*ft:0,ve[at]=ft<0?ft*ft:0}}ye(Ze,0,0,F,U,F,this.f,this.v,this.z),ye(ve,Pe,Pe,M,B,F,this.f,this.v,this.z);for(let Re=0;Re<q;Re++){const We=Math.sqrt(Ze[Re])-Math.sqrt(ve[Re]);le[Re]=Math.round(255-255*(We/this.radius+this.cutoff))}return Ie}};class Ge{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,c){return o.z(r.expression.evaluate(c))}interpolate(r,c,p){return{x:o.B.number(r.x,c.x,p),y:o.B.number(r.y,c.y,p),z:o.B.number(r.z,c.z,p)}}}let Le;class Me extends o.E{constructor(r){super(),Le=Le||new o.r({anchor:new o.D(o.v.light.anchor),position:new Ge,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Le),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.t,r,c))for(const p in r){const g=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,p){return(!p||p.validate!==!1)&&o.x(this,r.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}}class $e{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const p=r.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,c)),this.dashEntry[p]}getDashRanges(r,c,p){const g=[];let b=r.length%2==1?-r[r.length-1]*p:0,C=r[0]*p,M=!0;g.push({left:b,right:C,isDash:M,zeroLength:r[0]===0});let B=r[0];for(let F=1;F<r.length;F++){M=!M;const U=r[F];b=B*p,B+=U,C=B*p,g.push({left:b,right:C,isDash:M,zeroLength:U===0})}return g}addRoundDash(r,c,p){const g=c/2;for(let b=-p;b<=p;b++){const C=this.width*(this.nextRow+p+b);let M=0,B=r[M];for(let F=0;F<this.width;F++){F/B.right>1&&(B=r[++M]);const U=Math.abs(F-B.left),q=Math.abs(F-B.right),le=Math.min(U,q);let Ie;const Se=b/p*(g+1);if(B.isDash){const Pe=g-Math.abs(Se);Ie=Math.sqrt(le*le+Pe*Pe)}else Ie=g-Math.sqrt(le*le+Se*Se);this.data[C+F]=Math.max(0,Math.min(255,Ie+128))}}}addRegularDash(r){for(let M=r.length-1;M>=0;--M){const B=r[M],F=r[M+1];B.zeroLength?r.splice(M,1):F&&F.isDash===B.isDash&&(F.left=B.left,r.splice(M,1))}const c=r[0],p=r[r.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let b=0,C=r[b];for(let M=0;M<this.width;M++){M/C.right>1&&(C=r[++b]);const B=Math.abs(M-C.left),F=Math.abs(M-C.right),U=Math.min(B,F);this.data[g+M]=Math.max(0,Math.min(255,(C.isDash?U:-U)+128))}}addDash(r,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return o.w("LineAtlas out of space"),null;let b=0;for(let M=0;M<r.length;M++)b+=r[M];if(b!==0){const M=this.width/b,B=this.getDashRanges(r,this.width,M);c?this.addRoundDash(B,M,p):this.addRegularDash(B)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=g,this.dirty=!0,C}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class ht{constructor(r,c,p){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let b=0;b<g.length;b++){const C=new o.C(g[b],c,p);C.name=`Worker ${b}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c,p){o.o(this.actors,(g,b)=>{g.send(r,c,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function ut(y,r,c){const p=function(g,b){if(g)return c(g);if(b){const C=o.F(o.e(b,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(C.vectorLayers=b.vector_layers,C.vectorLayerIds=C.vectorLayers.map(M=>M.id)),c(null,C)}};return y.url?o.f(r.transformRequest(y.url,W.Source),p):o.h.frame(()=>p(null,y))}class Fe{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.L?new o.L(r.lng,r.lat):o.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.L?new o.L(r.lng,r.lat):o.L.convert(r),this}extend(r){const c=this._sw,p=this._ne;let g,b;if(r instanceof o.L)g=r,b=r;else{if(!(r instanceof Fe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Fe.convert(r)):this.extend(o.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.L.convert(r)):this;if(g=r._sw,b=r._ne,!g||!b)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(b.lng,p.lng),p.lat=Math.max(b.lat,p.lat)):(this._sw=new o.L(g.lng,g.lat),this._ne=new o.L(b.lng,b.lat)),this}getCenter(){return new o.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.L(this.getWest(),this.getNorth())}getSouthEast(){return new o.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:p}=o.L.convert(r);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(r){return r instanceof Fe?r:r&&new Fe(r)}static fromLngLat(r,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*r.lat);return new Fe(new o.L(r.lng-g,r.lat-p),new o.L(r.lng+g,r.lat+p))}}class ze{constructor(r,c,p){this.bounds=Fe.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),p=Math.floor(o.G(this.bounds.getWest())*c),g=Math.floor(o.H(this.bounds.getNorth())*c),b=Math.ceil(o.G(this.bounds.getEast())*c),C=Math.ceil(o.H(this.bounds.getSouth())*c);return r.x>=p&&r.x<b&&r.y>=g&&r.y<C}}class gt extends o.E{constructor(r,c,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(b,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),b?this.fire(new o.j(b)):C&&(o.e(this,C),C.bounds&&(this.tileBounds=new ze(C.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>o.e({},this._options),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.F(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,c){const p=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,W.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(C,M){return delete r.request,r.aborted?c(null):C&&C.status!==404?c(C):(M&&M.resourceTiming&&(r.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&r.setExpiryData(M),r.loadVectorData(M,this.map.painter),c(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=c:r.request=r.actor.send("reloadTile",g,b.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,b.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Zt extends o.E{constructor(r,c,p,g){super(),this.id=r,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(r,c)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new o.j(r)):c&&(o.e(this,c),c.bounds&&(this.tileBounds=new ze(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,c){const p=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=j.getImage(this.map._requestManager.transformRequest(p,W.Tile),(g,b,C)=>{if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(g)r.state="errored",c(g);else if(b){this.map._refreshExpiredTiles&&C&&r.setExpiryData(C);const M=this.map.painter.context,B=M.gl;r.texture=this.map.painter.getTileTexture(b.width),r.texture?r.texture.update(b,{useMipmap:!0}):(r.texture=new fe(M,b,B.RGBA,{useMipmap:!0}),r.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),r.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(r,c){r.request&&(r.request.cancel(),delete r.request),c()}unloadTile(r,c){r.texture&&this.map.painter.saveTileTexture(r.texture),c()}hasTransition(){return!1}}class an extends Zt{constructor(r,c,p,g){super(r,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r,c){const p=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,W.Tile);function b(C,M){C&&(r.state="errored",c(C)),M&&(r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",c(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=j.getImage(g,(C,M,B)=>o._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(C)r.state="errored",c(C);else if(M){this.map._refreshExpiredTiles&&r.setExpiryData(B);const F=o.a(M)&&o.J()?M:yield function(q){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.K()){const le=q.width+2,Ie=q.height+2;try{return new o.R({width:le,height:Ie},yield o.M(q,-1,-1,le,Ie))}catch{}}return o.h.getImageData(q,1)})}(M),U={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:F,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",U,b))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const c=r.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,b=c.x===0?r.wrap-1:r.wrap,C=(c.x+1+p)%p,M=c.x+1===p?r.wrap+1:r.wrap,B={};return B[new o.O(r.overscaledZ,b,c.z,g,c.y).key]={backfilled:!1},B[new o.O(r.overscaledZ,M,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(B[new o.O(r.overscaledZ,b,c.z,g,c.y-1).key]={backfilled:!1},B[new o.O(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},B[new o.O(r.overscaledZ,M,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<p&&(B[new o.O(r.overscaledZ,b,c.z,g,c.y+1).key]={backfilled:!1},B[new o.O(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},B[new o.O(r.overscaledZ,M,c.z,C,c.y+1).key]={backfilled:!1}),B}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class yn extends o.E{constructor(r,c,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>o.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=o.N/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:o.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.N,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},c),this}getClusterChildren(r,c){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},c),this}getClusterLeaves(r,c,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:c,offset:p},g),this}_updateWorkerData(r){const c=o.e({},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(o.h.resolveURL(this._data),W.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let b=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(b=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new o.j(p));const C={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&o.e(C,{resourceTiming:b}),this.fire(new o.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,c){const p=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(p,g,(b,C)=>(delete r.request,r.unloadVectorData(),r.aborted?c(null):b?c(b):(r.loadVectorData(C,this.map.painter,p==="reloadTile"),c(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var sn=o.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Dt extends o.E{constructor(r,c,p,g){super(),this.load=(b,C)=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=j.getImage(this.map._requestManager.transformRequest(this.url,W.Image),(M,B)=>{this._request=null,this._loaded=!0,M?this.fire(new o.j(M)):B&&(this.image=B,b&&(this.coordinates=b),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const b=this.map.painter.context,C=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new fe(b,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let M=!1;for(const B in this.tiles){const F=this.tiles[B];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,M=!0)}M&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.U.fromLngLat);this.tileID=function(g){let b=1/0,C=1/0,M=-1/0,B=-1/0;for(const le of g)b=Math.min(b,le.x),C=Math.min(C,le.y),M=Math.max(M,le.x),B=Math.max(B,le.y);const F=Math.max(M-b,B-C),U=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),q=Math.pow(2,U);return new o.W(U,Math.floor((b+M)/2*q),Math.floor((C+B)/2*q))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new o.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,o.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,o.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,o.N,o.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,c){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},c(null)):(r.state="errored",c(null))}hasTransition(){return!1}}class $t extends Dt{constructor(r,c,p,g){super(r,c,p,g),this.load=()=>{this._loaded=!1;const b=this.options;this.urls=[];for(const C of b.urls)this.urls.push(this.map._requestManager.transformRequest(C,W.Source).url);o.X(this.urls,(C,M)=>{this._loaded=!0,C?this.fire(new o.j(C)):M&&(this.video=M,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,C=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new fe(b,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let M=!1;for(const B in this.tiles){const F=this.tiles[B];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,M=!0)}M&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.j(new o.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ct extends Dt{constructor(r,c,p,g){super(r,c,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,M=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,sn.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new fe(C,this.canvas,M.RGBA,{premultiply:!0});let B=!1;for(const F in this.tiles){const U=this.tiles[F];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,B=!0)}B&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(C=>typeof C!="number"))||this.fire(new o.j(new o.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.Y(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const xt={},wt=y=>{switch(y){case"geojson":return yn;case"image":return Dt;case"raster":return Zt;case"raster-dem":return an;case"vector":return gt;case"video":return $t;case"canvas":return ct}return xt[y]};function Wt(y,r){const c=o.Z();return o.$(c,c,[1,1,0]),o.a0(c,c,[.5*y.width,.5*y.height,1]),o.a1(c,c,y.calculatePosMatrix(r.toUnwrapped()))}function Qt(y,r,c,p,g,b){const C=function(q,le,Ie){if(q)for(const Se of q){const Pe=le[Se];if(Pe&&Pe.source===Ie&&Pe.type==="fill-extrusion")return!0}else for(const Se in le){const Pe=le[Se];if(Pe.source===Ie&&Pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,y.id),M=b.maxPitchScaleFactor(),B=y.tilesIn(p,M,C);B.sort(Ht);const F=[];for(const q of B)F.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,c,y._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,b,M,Wt(y.transform,q.tileID))});const U=function(q){const le={},Ie={};for(const Se of q){const Pe=Se.queryResults,ve=Se.wrappedTileID,Ze=Ie[ve]=Ie[ve]||{};for(const tt in Pe){const Re=Pe[tt],We=Ze[tt]=Ze[tt]||{},it=le[tt]=le[tt]||[];for(const at of Re)We[at.featureIndex]||(We[at.featureIndex]=!0,it.push(at))}}return le}(F);for(const q in U)U[q].forEach(le=>{const Ie=le.feature,Se=y.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Se});return U}function Ht(y,r){const c=y.tileID,p=r.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}class kt{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,b){const C={};if(!b)return C;for(const M of g){const B=M.layerIds.map(F=>b.getLayer(F)).filter(Boolean);if(B.length!==0){M.layers=B,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(F=>B.filter(U=>U.id===F)[0]));for(const F of B)C[F.id]=M}}return C}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof o.a4){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof o.a4&&b.hasRTLText){this.hasRTLText=!0,o.a5();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new fe(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new fe(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,p,g,b,C,M,B,F,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:b,scale:C,tileSize:this.tileSize,pixelPosMatrix:U,transform:B,params:M,queryPadding:this.queryPadding*F},r,c,p):{}}querySourceFeatures(r,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",C=g._geojsonTileLayer||g[b];if(!C)return;const M=o.a6(c&&c.filter),{z:B,x:F,y:U}=this.tileID.canonical,q={z:B,x:F,y:U};for(let le=0;le<C.length;le++){const Ie=C.feature(le);if(M.needGeometry){const ve=o.a7(Ie,!0);if(!M.filter(new o.a8(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!M.filter(new o.a8(this.tileID.overscaledZ),Ie))continue;const Se=p.getId(Ie,b),Pe=new o.a9(Ie,B,F,U,Se);Pe.tile=q,r.push(Pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const p=o.aa(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const b=this.expirationTime-c;b?this.expirationTime=p+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const b=this.buckets[g],C=b.layers[0].sourceLayer||"_geojsonTileLayer",M=p[C],B=r[C];if(!M||!B||Object.keys(B).length===0)continue;b.update(B,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const F=c&&c.style&&c.style.getLayer(g);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=o.h.now()+r}setDependencies(r,c){const p={};for(const g of c)p[g]=!0;this.dependencies[r]=p}hasDependency(r,c){for(const p of r){const g=this.dependencies[p];if(g){for(const b of c)if(g[b])return!0}}return!1}}class dt{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,p){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:c,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(r,b)},p)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const p=r.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),b=this.data[p][g];return this.data[p].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const p in this.data)for(const g of this.data[p])r(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class be{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,p){const g=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},o.e(this.stateChanges[r][g],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==g&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const b in this.state[r][g])p[b]||(this.deletedStates[r][g][b]=null)}else for(const b in p)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][b]===null&&delete this.deletedStates[r][g][b]}removeFeatureState(r,c,p){if(this.deletedStates[r]===null)return;const g=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&c!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][p]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(p in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][p]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,c){const p=String(c),g=o.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const C in b)delete g[C]}return g}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),o.e(this.state[g][C],this.stateChanges[g][C]),b[C]=this.state[g][C];p[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const C in this.state[g])b[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const M of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][M];b[C]=this.state[g][C]}p[g]=p[g]||{},o.e(p[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in r)r[g].setFeatureState(p,c)}}class Et extends o.E{constructor(r,c,p){super(),this.id=r,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,b,C,M)=>{const B=new(wt(b.type))(g,b,C,M);if(B.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${B.id}`);return B})(r,c,p,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new be,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c){return this._source.loadTile(r,c)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new o.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ut).map(r=>r.key)}getRenderableIds(r){const c=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&c.push(this._tiles[p]);return r?c.sort((p,g)=>{const b=p.tileID,C=g.tileID,M=new o.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),B=new o.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-C.overscaledZ||B.y-M.y||B.x-M.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Ut).map(p=>p.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=c),this._loadTile(p,this._tileLoaded.bind(this,p,r,c)))}_tileLoaded(r,c,p,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new o.j(g,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=o.h.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const b=c[g];if(r.neighboringTiles&&r.neighboringTiles[b]){const C=this.getTileByID(b);p(r,C),p(C,r)}}function p(g,b){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=b.tileID.canonical.x-g.tileID.canonical.x;const M=b.tileID.canonical.y-g.tileID.canonical.y,B=Math.pow(2,g.tileID.canonical.z),F=b.tileID.key;C===0&&M===0||Math.abs(M)>1||(Math.abs(C)>1&&(Math.abs(C+B)===1?C+=B:Math.abs(C-B)===1&&(C-=B)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,C,M),g.neighboringTiles&&g.neighboringTiles[F]&&(g.neighboringTiles[F].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,p,g){for(const b in this._tiles){let C=this._tiles[b];if(g[b]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>p)continue;let M=C.tileID;for(;C&&C.tileID.overscaledZ>c+1;){const F=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[F.key],C&&C.hasData()&&(M=F)}let B=M;for(;B.overscaledZ>c;)if(B=B.scaledTo(B.overscaledZ-1),r[B.key]){g[M.key]=M;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=r.overscaledZ-1;p>=c;p--){const g=r.scaledTo(p),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const p={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),p[b.tileID.key]=b}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,c){if(this.transform=r,this.terrain=c,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new o.O(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(p=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(U=>this._source.hasTile(U)))):p=[];const g=r.coveringZoomLevel(this._source),b=Math.max(g-Et.maxOverzooming,this._source.minzoom),C=Math.max(g+Et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const U={};for(const q of p)if(q.canonical.z>this._source.minzoom){const le=q.scaledTo(q.canonical.z-1);U[le.key]=le;const Ie=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));U[Ie.key]=Ie}p=p.concat(Object.values(U))}const M=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(p,g);if(_t(this._source.type)){const U={},q={},le=Object.keys(B),Ie=o.h.now();for(const Se of le){const Pe=B[Se],ve=this._tiles[Se];if(!ve||ve.fadeEndTime!==0&&ve.fadeEndTime<=Ie)continue;const Ze=this.findLoadedParent(Pe,b);Ze&&(this._addTile(Ze.tileID),U[Ze.tileID.key]=Ze.tileID),q[Se]=Pe}this._retainLoadedChildren(q,g,C,B);for(const Se in U)B[Se]||(this._coveredTiles[Se]=!0,B[Se]=U[Se]);if(c){const Se={},Pe={};for(const ve of p)this._tiles[ve.key].hasData()?Se[ve.key]=ve:Pe[ve.key]=ve;for(const ve in Pe){const Ze=Pe[ve].children(this._source.maxzoom);this._tiles[Ze[0].key]&&this._tiles[Ze[1].key]&&this._tiles[Ze[2].key]&&this._tiles[Ze[3].key]&&(Se[Ze[0].key]=B[Ze[0].key]=Ze[0],Se[Ze[1].key]=B[Ze[1].key]=Ze[1],Se[Ze[2].key]=B[Ze[2].key]=Ze[2],Se[Ze[3].key]=B[Ze[3].key]=Ze[3],delete Pe[ve])}for(const ve in Pe){const Ze=this.findLoadedParent(Pe[ve],this._source.minzoom);if(Ze){Se[Ze.tileID.key]=B[Ze.tileID.key]=Ze.tileID;for(const tt in Se)Se[tt].isChildOf(Ze.tileID)&&delete Se[tt]}}for(const ve in this._tiles)Se[ve]||(this._coveredTiles[ve]=!0)}}for(const U in B)this._tiles[U].clearFadeHold();const F=o.ab(this._tiles,B);for(const U of F){const q=this._tiles[U];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){const p={},g={},b=Math.max(c-Et.maxOverzooming,this._source.minzoom),C=Math.max(c+Et.maxUnderzooming,this._source.minzoom),M={};for(const B of r){const F=this._addTile(B);p[B.key]=B,F.hasData()||c<this._source.maxzoom&&(M[B.key]=B)}this._retainLoadedChildren(M,c,C,p);for(const B of r){let F=this._tiles[B.key];if(F.hasData())continue;if(c+1>this._source.maxzoom){const q=B.children(this._source.maxzoom)[0],le=this.getTile(q);if(le&&le.hasData()){p[q.key]=q;continue}}else{const q=B.children(this._source.maxzoom);if(p[q[0].key]&&p[q[1].key]&&p[q[2].key]&&p[q[3].key])continue}let U=F.wasRequested();for(let q=B.overscaledZ-1;q>=b;--q){const le=B.scaledTo(q);if(g[le.key])break;if(g[le.key]=!0,F=this.getTile(le),!F&&U&&(F=this._addTile(le)),F){const Ie=F.hasData();if((U||Ie)&&(p[le.key]=le),U=F.wasRequested(),Ie)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let p,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;g=b}for(const b of c)this._loadedParentTiles[b]=p}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const p=c;return c||(c=new kt(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,r.key,c.state))),c.uses++,this._tiles[r.key]=c,p||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=c.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,p){const g=[],b=this.transform;if(!b)return g;const C=p?b.getCameraQueryGeometry(r):r,M=r.map(Se=>b.pointCoordinate(Se,this.terrain)),B=C.map(Se=>b.pointCoordinate(Se,this.terrain)),F=this.getIds();let U=1/0,q=1/0,le=-1/0,Ie=-1/0;for(const Se of B)U=Math.min(U,Se.x),q=Math.min(q,Se.y),le=Math.max(le,Se.x),Ie=Math.max(Ie,Se.y);for(let Se=0;Se<F.length;Se++){const Pe=this._tiles[F[Se]];if(Pe.holdingForFade())continue;const ve=Pe.tileID,Ze=Math.pow(2,b.zoom-Pe.tileID.overscaledZ),tt=c*Pe.queryPadding*o.N/Pe.tileSize/Ze,Re=[ve.getTilePoint(new o.U(U,q)),ve.getTilePoint(new o.U(le,Ie))];if(Re[0].x-tt<o.N&&Re[0].y-tt<o.N&&Re[1].x+tt>=0&&Re[1].y+tt>=0){const We=M.map(at=>ve.getTilePoint(at)),it=B.map(at=>ve.getTilePoint(at));g.push({tile:Pe,tileID:ve,queryGeometry:We,cameraQueryGeometry:it,scale:Ze})}}return g}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(_t(this._source.type)){const r=o.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,p){this._state.updateState(r=r||"_geojsonTileLayer",c,p)}removeFeatureState(r,c,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,p)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,p){const g=this._tiles[r];g&&g.setDependencies(c,p)}reloadTilesForDependencies(r,c){for(const p in this._tiles)this._tiles[p].hasDependency(r,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,c))}}function Ut(y,r){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||p-c||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function _t(y){return y==="raster"||y==="image"||y==="video"}Et.maxOverzooming=10,Et.maxUnderzooming=3;const zt="mapboxgl_preloaded_worker_pool";class gn{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<gn.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const Mn=Math.floor(o.h.hardwareConcurrency/2);let Hn;function Kn(){return Hn||(Hn=new gn),Hn}gn.workerCount=o.ac(globalThis)?Math.max(Math.min(Mn,3),1):1;class br{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ad(r,0,1);let c=1,p=this._distances[c];const g=r*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const b=c-1,C=this._distances[b],M=p-C,B=M>0?(g-C)/M:0;return this.points[b].mult(1-B).add(this.points[c].mult(B))}}function Yn(y,r){let c=!0;return y==="always"||y!=="never"&&r!=="never"||(c=!1),c}class rr{constructor(r,c,p){const g=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(c/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,p,g,b){this._forEachCell(c,p,g,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(b)}insertCircle(r,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(r,c,p,g,b,C){this.boxCells[b].push(C)}_insertCircleCell(r,c,p,g,b,C){this.circleCells[b].push(C)}_query(r,c,p,g,b,C,M){if(p<0||r>this.width||g<0||c>this.height)return[];const B=[];if(r<=0&&c<=0&&this.width<=p&&this.height<=g){if(b)return[{key:null,x1:r,y1:c,x2:p,y2:g}];for(let F=0;F<this.boxKeys.length;F++)B.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const U=this.circles[3*F],q=this.circles[3*F+1],le=this.circles[3*F+2];B.push({key:this.circleKeys[F],x1:U-le,y1:q-le,x2:U+le,y2:q+le})}}else this._forEachCell(r,c,p,g,this._queryCell,B,{hitTest:b,overlapMode:C,seenUids:{box:{},circle:{}}},M);return B}query(r,c,p,g){return this._query(r,c,p,g,!1,null)}hitTest(r,c,p,g,b,C){return this._query(r,c,p,g,!0,b,C).length>0}hitTestCircle(r,c,p,g,b){const C=r-p,M=r+p,B=c-p,F=c+p;if(M<0||C>this.width||F<0||B>this.height)return!1;const U=[];return this._forEachCell(C,B,M,F,this._queryCellCircle,U,{hitTest:!0,overlapMode:g,circle:{x:r,y:c,radius:p},seenUids:{box:{},circle:{}}},b),U.length>0}_queryCell(r,c,p,g,b,C,M,B){const{seenUids:F,hitTest:U,overlapMode:q}=M,le=this.boxCells[b];if(le!==null){const Se=this.bboxes;for(const Pe of le)if(!F.box[Pe]){F.box[Pe]=!0;const ve=4*Pe,Ze=this.boxKeys[Pe];if(r<=Se[ve+2]&&c<=Se[ve+3]&&p>=Se[ve+0]&&g>=Se[ve+1]&&(!B||B(Ze))&&(!U||!Yn(q,Ze.overlapMode))&&(C.push({key:Ze,x1:Se[ve],y1:Se[ve+1],x2:Se[ve+2],y2:Se[ve+3]}),U))return!0}}const Ie=this.circleCells[b];if(Ie!==null){const Se=this.circles;for(const Pe of Ie)if(!F.circle[Pe]){F.circle[Pe]=!0;const ve=3*Pe,Ze=this.circleKeys[Pe];if(this._circleAndRectCollide(Se[ve],Se[ve+1],Se[ve+2],r,c,p,g)&&(!B||B(Ze))&&(!U||!Yn(q,Ze.overlapMode))){const tt=Se[ve],Re=Se[ve+1],We=Se[ve+2];if(C.push({key:Ze,x1:tt-We,y1:Re-We,x2:tt+We,y2:Re+We}),U)return!0}}}return!1}_queryCellCircle(r,c,p,g,b,C,M,B){const{circle:F,seenUids:U,overlapMode:q}=M,le=this.boxCells[b];if(le!==null){const Se=this.bboxes;for(const Pe of le)if(!U.box[Pe]){U.box[Pe]=!0;const ve=4*Pe,Ze=this.boxKeys[Pe];if(this._circleAndRectCollide(F.x,F.y,F.radius,Se[ve+0],Se[ve+1],Se[ve+2],Se[ve+3])&&(!B||B(Ze))&&!Yn(q,Ze.overlapMode))return C.push(!0),!0}}const Ie=this.circleCells[b];if(Ie!==null){const Se=this.circles;for(const Pe of Ie)if(!U.circle[Pe]){U.circle[Pe]=!0;const ve=3*Pe,Ze=this.circleKeys[Pe];if(this._circlesCollide(Se[ve],Se[ve+1],Se[ve+2],F.x,F.y,F.radius)&&(!B||B(Ze))&&!Yn(q,Ze.overlapMode))return C.push(!0),!0}}}_forEachCell(r,c,p,g,b,C,M,B){const F=this._convertToXCellCoord(r),U=this._convertToYCellCoord(c),q=this._convertToXCellCoord(p),le=this._convertToYCellCoord(g);for(let Ie=F;Ie<=q;Ie++)for(let Se=U;Se<=le;Se++)if(b.call(this,r,c,p,g,this.xCellCount*Se+Ie,C,M,B))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,p,g,b,C){const M=g-r,B=b-c,F=p+C;return F*F>M*M+B*B}_circleAndRectCollide(r,c,p,g,b,C,M){const B=(C-g)/2,F=Math.abs(r-(g+B));if(F>B+p)return!1;const U=(M-b)/2,q=Math.abs(c-(b+U));if(q>U+p)return!1;if(F<=B||q<=U)return!0;const le=F-B,Ie=q-U;return le*le+Ie*Ie<=p*p}}function vt(y,r,c,p,g){const b=o.Z();return r?(o.a0(b,b,[1/g,1/g,1]),c||o.ae(b,b,p.angle)):o.a1(b,p.labelPlaneMatrix,y),b}function Vn(y,r,c,p,g){if(r){const b=o.af(y);return o.a0(b,b,[g,g,1]),c||o.ae(b,b,-p.angle),b}return p.glCoordMatrix}function He(y,r,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],o.ag(p,p,r)):(p=[y.x,y.y,0,1],Ae(p,p,r));const g=p[3];return{point:new o.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function pt(y,r){return .5+y/r*.5}function dn(y,r){const c=y[0]/y[3],p=y[1]/y[3];return c>=-r[0]&&c<=r[0]&&p>=-r[1]&&p<=r[1]}function lt(y,r,c,p,g,b,C,M,B,F){const U=p?y.textSizeData:y.iconSizeData,q=o.ah(U,c.transform.zoom),le=[256/c.width*2+1,256/c.height*2+1],Ie=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ie.clear();const Se=y.lineVertexArray,Pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ve=c.transform.width/c.transform.height;let Ze=!1;for(let tt=0;tt<Pe.length;tt++){const Re=Pe.get(tt);if(Re.hidden||Re.writingMode===o.ai.vertical&&!Ze){me(Re.numGlyphs,Ie);continue}let We;if(Ze=!1,F?(We=[Re.anchorX,Re.anchorY,F(Re.anchorX,Re.anchorY),1],o.ag(We,We,r)):(We=[Re.anchorX,Re.anchorY,0,1],Ae(We,We,r)),!dn(We,le)){me(Re.numGlyphs,Ie);continue}const it=pt(c.transform.cameraToCenterDistance,We[3]),at=o.aj(U,q,Re),ft=C?at/it:at*it,Rt=new o.P(Re.anchorX,Re.anchorY),yt=He(Rt,g,F).point,jt={projections:{},offsets:{}},bn=wr(Re,ft,!1,M,r,g,b,y.glyphOffsetArray,Se,Ie,yt,Rt,jt,ve,B,F);Ze=bn.useVertical,(bn.notEnoughRoom||Ze||bn.needsFlipping&&wr(Re,ft,!0,M,r,g,b,y.glyphOffsetArray,Se,Ie,yt,Rt,jt,ve,B,F).notEnoughRoom)&&me(Re.numGlyphs,Ie)}p?y.text.dynamicLayoutVertexBuffer.updateData(Ie):y.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function en(y,r,c,p,g,b,C,M,B,F,U,q,le){const Ie=M.glyphStartIndex+M.numGlyphs,Se=M.lineStartIndex,Pe=M.lineStartIndex+M.lineLength,ve=r.getoffsetX(M.glyphStartIndex),Ze=r.getoffsetX(Ie-1),tt=X(y*ve,c,p,g,b,C,M.segment,Se,Pe,B,F,U,q,le);if(!tt)return null;const Re=X(y*Ze,c,p,g,b,C,M.segment,Se,Pe,B,F,U,q,le);return Re?{first:tt,last:Re}:null}function tn(y,r,c,p){return y===o.ai.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*p?{useVertical:!0}:(y===o.ai.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function wr(y,r,c,p,g,b,C,M,B,F,U,q,le,Ie,Se,Pe){const ve=r/24,Ze=y.lineOffsetX*ve,tt=y.lineOffsetY*ve;let Re;if(y.numGlyphs>1){const We=y.glyphStartIndex+y.numGlyphs,it=y.lineStartIndex,at=y.lineStartIndex+y.lineLength,ft=en(ve,M,Ze,tt,c,U,q,y,B,b,le,Se,Pe);if(!ft)return{notEnoughRoom:!0};const Rt=He(ft.first.point,C,Pe).point,yt=He(ft.last.point,C,Pe).point;if(p&&!c){const jt=tn(y.writingMode,Rt,yt,Ie);if(jt)return jt}Re=[ft.first];for(let jt=y.glyphStartIndex+1;jt<We-1;jt++)Re.push(X(ve*M.getoffsetX(jt),Ze,tt,c,U,q,y.segment,it,at,B,b,le,Se,Pe));Re.push(ft.last)}else{if(p&&!c){const it=He(q,g,Pe).point,at=y.lineStartIndex+y.segment+1,ft=new o.P(B.getx(at),B.gety(at)),Rt=He(ft,g,Pe),yt=Rt.signedDistanceFromCamera>0?Rt.point:mr(q,ft,it,1,g,Pe),jt=tn(y.writingMode,it,yt,Ie);if(jt)return jt}const We=X(ve*M.getoffsetX(y.glyphStartIndex),Ze,tt,c,U,q,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,B,b,le,Se,Pe);if(!We)return{notEnoughRoom:!0};Re=[We]}for(const We of Re)o.ak(F,We.point,We.angle);return{}}function mr(y,r,c,p,g,b){const C=He(y.add(y.sub(r)._unit()),g,b).point,M=c.sub(C);return c.add(M._mult(p/M.mag()))}function on(y,r){const{projectionCache:c,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:b,distanceFromAnchor:C,getElevation:M,previousVertex:B,direction:F,absOffsetX:U}=r;if(c.projections[y])return c.projections[y];const q=new o.P(p.getx(y),p.gety(y)),le=He(q,g,M);if(le.signedDistanceFromCamera>0)return c.projections[y]=le.point,le.point;const Ie=y-F;return mr(C===0?b:new o.P(p.getx(Ie),p.gety(Ie)),q,B,U-C+1,g,M)}function Xn(y,r,c){return y._unit()._perp()._mult(r*c)}function ke(y,r,c,p,g,b,C,M){const{projectionCache:B,direction:F}=M;if(B.offsets[y])return B.offsets[y];const U=c.add(r);if(y+F<p||y+F>=g)return B.offsets[y]=U,U;const q=on(y+F,M),le=Xn(q.sub(c),C,F),Ie=c.add(le),Se=q.add(le);return B.offsets[y]=o.al(b,U,Ie,Se)||U,B.offsets[y]}function X(y,r,c,p,g,b,C,M,B,F,U,q,le,Ie){const Se=p?y-r:y+r;let Pe=Se>0?1:-1,ve=0;p&&(Pe*=-1,ve=Math.PI),Pe<0&&(ve+=Math.PI);let Ze,tt,Re=Pe>0?M+C:M+C+1,We=g,it=g,at=0,ft=0;const Rt=Math.abs(Se),yt=[];let jt;for(;at+ft<=Rt;){if(Re+=Pe,Re<M||Re>=B)return null;at+=ft,it=We,tt=Ze;const nn={projectionCache:q,lineVertexArray:F,labelPlaneMatrix:U,tileAnchorPoint:b,distanceFromAnchor:at,getElevation:Ie,previousVertex:it,direction:Pe,absOffsetX:Rt};if(We=on(Re,nn),c===0)yt.push(it),jt=We.sub(it);else{let Dn;const wn=We.sub(it);Dn=wn.mag()===0?Xn(on(Re+Pe,nn).sub(We),c,Pe):Xn(wn,c,Pe),tt||(tt=it.add(Dn)),Ze=ke(Re,Dn,We,M,B,tt,c,nn),yt.push(tt),jt=Ze.sub(tt)}ft=jt.mag()}const bn=jt._mult((Rt-at)/ft)._add(tt||it),sr=ve+Math.atan2(We.y-it.y,We.x-it.x);return yt.push(bn),{point:bn,angle:le?sr:0,path:yt}}const ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function me(y,r){for(let c=0;c<y;c++){const p=r.length;r.resize(p+4),r.float32.set(ae,3*p)}}function Ae(y,r,c){const p=r[0],g=r[1];return y[0]=c[0]*p+c[4]*g+c[12],y[1]=c[1]*p+c[5]*g+c[13],y[3]=c[3]*p+c[7]*g+c[15],y}const Ce=100;class je{constructor(r,c=new rr(r.width+200,r.height+200,25),p=new rr(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=p,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ce,this.screenBottomBoundary=r.height+Ce,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,p,g,b,C){const M=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,C),B=p*M.perspectiveRatio,F=r.x1*B+M.point.x,U=r.y1*B+M.point.y,q=r.x2*B+M.point.x,le=r.y2*B+M.point.y;return!this.isInsideGrid(F,U,q,le)||c!=="always"&&this.grid.hitTest(F,U,q,le,c,b)||M.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[F,U,q,le],offscreen:this.isOffscreen(F,U,q,le)}}placeCollisionCircles(r,c,p,g,b,C,M,B,F,U,q,le,Ie,Se){const Pe=[],ve=new o.P(c.anchorX,c.anchorY),Ze=He(ve,C,Se),tt=pt(this.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),Re=(U?b/tt:b*tt)/o.ap,We=He(ve,M,Se).point,it=en(Re,g,c.lineOffsetX*Re,c.lineOffsetY*Re,!1,We,ve,c,p,M,{projections:{},offsets:{}},!1,Se);let at=!1,ft=!1,Rt=!0;if(it){const yt=.5*le*tt+Ie,jt=new o.P(-100,-100),bn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),sr=new br,nn=it.first,Dn=it.last;let wn=[];for(let Wn=nn.path.length-1;Wn>=1;Wn--)wn.push(nn.path[Wn]);for(let Wn=1;Wn<Dn.path.length;Wn++)wn.push(Dn.path[Wn]);const Nr=2.5*yt;if(B){const Wn=wn.map(or=>He(or,B,Se));wn=Wn.some(or=>or.signedDistanceFromCamera<=0)?[]:Wn.map(or=>or.point)}let ir=[];if(wn.length>0){const Wn=wn[0].clone(),or=wn[0].clone();for(let mi=1;mi<wn.length;mi++)Wn.x=Math.min(Wn.x,wn[mi].x),Wn.y=Math.min(Wn.y,wn[mi].y),or.x=Math.max(or.x,wn[mi].x),or.y=Math.max(or.y,wn[mi].y);ir=Wn.x>=jt.x&&or.x<=bn.x&&Wn.y>=jt.y&&or.y<=bn.y?[wn]:or.x<jt.x||Wn.x>bn.x||or.y<jt.y||Wn.y>bn.y?[]:o.am([wn],jt.x,jt.y,bn.x,bn.y)}for(const Wn of ir){sr.reset(Wn,.25*yt);let or=0;or=sr.length<=.5*yt?1:Math.ceil(sr.paddedLength/Nr)+1;for(let mi=0;mi<or;mi++){const $r=mi/Math.max(or-1,1),ra=sr.lerp($r),Ni=ra.x+Ce,Ei=ra.y+Ce;Pe.push(Ni,Ei,yt,0);const fs=Ni-yt,Hr=Ei-yt,eo=Ni+yt,to=Ei+yt;if(Rt=Rt&&this.isOffscreen(fs,Hr,eo,to),ft=ft||this.isInsideGrid(fs,Hr,eo,to),r!=="always"&&this.grid.hitTestCircle(Ni,Ei,yt,r,q)&&(at=!0,!F))return{circles:[],offscreen:!1,collisionDetected:at}}}}return{circles:!F&&at||!ft||tt<this.perspectiveRatioCutoff?[]:Pe,offscreen:Rt,collisionDetected:at}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,b=-1/0,C=-1/0;for(const U of r){const q=new o.P(U.x+Ce,U.y+Ce);p=Math.min(p,q.x),g=Math.min(g,q.y),b=Math.max(b,q.x),C=Math.max(C,q.y),c.push(q)}const M=this.grid.query(p,g,b,C).concat(this.ignoredGrid.query(p,g,b,C)),B={},F={};for(const U of M){const q=U.key;if(B[q.bucketInstanceId]===void 0&&(B[q.bucketInstanceId]={}),B[q.bucketInstanceId][q.featureIndex])continue;const le=[new o.P(U.x1,U.y1),new o.P(U.x2,U.y1),new o.P(U.x2,U.y2),new o.P(U.x1,U.y2)];o.an(c,le)&&(B[q.bucketInstanceId][q.featureIndex]=!0,F[q.bucketInstanceId]===void 0&&(F[q.bucketInstanceId]=[]),F[q.bucketInstanceId].push(q.featureIndex))}return F}insertCollisionBox(r,c,p,g,b,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:C,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,p,g,b,C){const M=p?this.ignoredGrid:this.grid,B={bucketInstanceId:g,featureIndex:b,collisionGroupID:C,overlapMode:c};for(let F=0;F<r.length;F+=4)M.insertCircle(B,r[F],r[F+1],r[F+2])}projectAndGetPerspectiveRatio(r,c,p,g){let b;return g?(b=[c,p,g(c,p),1],o.ag(b,b,r)):(b=[c,p,0,1],Ae(b,b,r)),{point:new o.P((b[0]/b[3]+1)/2*this.transform.width+Ce,(-b[1]/b[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(r,c,p,g){return p<Ce||r>=this.screenRightBoundary||g<Ce||c>this.screenBottomBoundary}isInsideGrid(r,c,p,g){return p>=0&&r<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.ao([]);return o.$(r,r,[-100,-100,0]),r}}function te(y,r,c){return r*(o.N/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class ue{constructor(r,c,p,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(r,c,p,g,b){this.text=new ue(r?r.text:null,c,p,b),this.icon=new ue(r?r.icon:null,c,g,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qe{constructor(r,c,p){this.text=r,this.icon=c,this.skipFade=p}}class Je{constructor(){this.invProjMatrix=o.Z(),this.viewportMatrix=o.Z(),this.circles=[]}}class Qe{constructor(r,c,p,g,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=b}}class Nt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[r]}}function Jt(y,r,c,p,g){const{horizontalAlign:b,verticalAlign:C}=o.au(y);return new o.P(-(b-.5)*r+p[0]*g,-(C-.5)*c+p[1]*g)}function Lt(y,r,c,p,g,b){const{x1:C,x2:M,y1:B,y2:F,anchorPointX:U,anchorPointY:q}=y,le=new o.P(r,c);return p&&le._rotate(g?b:-b),{x1:C+le.x,y1:B+le.y,x2:M+le.x,y2:F+le.y,anchorPointX:U,anchorPointY:q}}class qt{constructor(r,c,p,g,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new je(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Nt(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,c,p,g){const b=p.getBucket(c),C=p.latestFeatureIndex;if(!b||!C||c.id!==b.layerIds[0])return;const M=p.collisionBoxArray,B=b.layers[0].layout,F=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),U=p.tileSize/o.N,q=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),le=B.get("text-pitch-alignment")==="map",Ie=B.get("text-rotation-alignment")==="map",Se=te(p,1,this.transform.zoom),Pe=vt(q,le,Ie,this.transform,Se);let ve=null;if(le){const tt=Vn(q,le,Ie,this.transform,Se);ve=o.a1([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[b.bucketInstanceId]=new Qe(b.bucketInstanceId,C,b.sourceLayerIndex,b.index,p.tileID);const Ze={bucket:b,layout:B,posMatrix:q,textLabelPlaneMatrix:Pe,labelToScreenMatrix:ve,scale:F,textPixelRatio:U,holdingForFade:p.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.ah(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(g)for(const tt of b.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:We,symbolInstanceEnd:it}=tt;r.push({sortKey:Re,symbolInstanceStart:We,symbolInstanceEnd:it,parameters:Ze})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ze})}attemptAnchorPlacement(r,c,p,g,b,C,M,B,F,U,q,le,Ie,Se,Pe,ve){const Ze=o.aq[r.textAnchor],tt=[r.textOffset0,r.textOffset1],Re=Jt(Ze,p,g,tt,b),We=this.collisionIndex.placeCollisionBox(Lt(c,Re.x,Re.y,C,M,this.transform.angle),q,B,F,U.predicate,ve);if((!Pe||this.collisionIndex.placeCollisionBox(Lt(Pe,Re.x,Re.y,C,M,this.transform.angle),q,B,F,U.predicate,ve).box.length!==0)&&We.box.length>0){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(it=this.prevPlacement.variableOffsets[le.crossTileID].anchor),le.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[le.crossTileID]={textOffset:tt,width:p,height:g,anchor:Ze,textBoxScale:b,prevAnchor:it},this.markUsedJustification(Ie,Ze,le,Se),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Se,le),this.placedOrientations[le.crossTileID]=Se),{shift:Re,placedGlyphBoxes:We}}}placeLayerBucketPart(r,c,p){const{bucket:g,layout:b,posMatrix:C,textLabelPlaneMatrix:M,labelToScreenMatrix:B,textPixelRatio:F,holdingForFade:U,collisionBoxArray:q,partiallyEvaluatedTextSize:le,collisionGroup:Ie}=r.parameters,Se=b.get("text-optional"),Pe=b.get("icon-optional"),ve=o.ar(b,"text-overlap","text-allow-overlap"),Ze=ve==="always",tt=o.ar(b,"icon-overlap","icon-allow-overlap"),Re=tt==="always",We=b.get("text-rotation-alignment")==="map",it=b.get("text-pitch-alignment")==="map",at=b.get("icon-text-fit")!=="none",ft=b.get("symbol-z-order")==="viewport-y",Rt=Ze&&(Re||!g.hasIconData()||Pe),yt=Re&&(Ze||!g.hasTextData()||Se);!g.collisionArrays&&q&&g.deserializeCollisionBoxes(q);const jt=this.retainedQueryData[g.bucketInstanceId].tileID,bn=this.terrain?(nn,Dn)=>this.terrain.getElevation(jt,nn,Dn):null,sr=(nn,Dn)=>{var wn,Nr;if(c[nn.crossTileID])return;if(U)return void(this.placements[nn.crossTileID]=new qe(!1,!1,!1));let ir=!1,Wn=!1,or=!0,mi=null,$r={box:null,offscreen:null},ra={box:null},Ni=null,Ei=null,fs=null,Hr=0,eo=0,to=0;Dn.textFeatureIndex?Hr=Dn.textFeatureIndex:nn.useRuntimeCollisionCircles&&(Hr=nn.featureIndex),Dn.verticalTextFeatureIndex&&(eo=Dn.verticalTextFeatureIndex);const Fo=Dn.textBox;if(Fo){const ha=gi=>{let Fi=o.ai.horizontal;if(g.allowVerticalPlacement&&!gi&&this.prevPlacement){const Ga=this.prevPlacement.placedOrientations[nn.crossTileID];Ga&&(this.placedOrientations[nn.crossTileID]=Ga,Fi=Ga,this.markUsedOrientation(g,Fi,nn))}return Fi},ia=(gi,Fi)=>{if(g.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&Dn.verticalTextBox){for(const Ga of g.writingModes)if(Ga===o.ai.vertical?($r=Fi(),ra=$r):$r=gi(),$r&&$r.box&&$r.box.length)break}else $r=gi()},wa=nn.textAnchorOffsetStartIndex,il=nn.textAnchorOffsetEndIndex;if(il===wa){const gi=(Fi,Ga)=>{const _i=this.collisionIndex.placeCollisionBox(Fi,ve,F,C,Ie.predicate,bn);return _i&&_i.box&&_i.box.length&&(this.markUsedOrientation(g,Ga,nn),this.placedOrientations[nn.crossTileID]=Ga),_i};ia(()=>gi(Fo,o.ai.horizontal),()=>{const Fi=Dn.verticalTextBox;return g.allowVerticalPlacement&&nn.numVerticalGlyphVertices>0&&Fi?gi(Fi,o.ai.vertical):{box:null,offscreen:null}}),ha($r&&$r.box&&$r.box.length)}else{let gi=o.aq[(Nr=(wn=this.prevPlacement)===null||wn===void 0?void 0:wn.variableOffsets[nn.crossTileID])===null||Nr===void 0?void 0:Nr.anchor];const Fi=(_i,al,gu)=>{const wh=_i.x2-_i.x1,kh=_i.y2-_i.y1,hd=nn.textBoxScale,cc=at&&tt==="never"?al:null;let no={box:[],offscreen:!1},sl=ve==="never"?1:2,ro="never";gi&&sl++;for(let Ts=0;Ts<sl;Ts++){for(let io=wa;io<il;io++){const hc=g.textAnchorOffsets.get(io);if(gi&&hc.textAnchor!==gi)continue;const ko=this.attemptAnchorPlacement(hc,_i,wh,kh,hd,We,it,F,C,Ie,ro,nn,g,gu,cc,bn);if(ko&&(no=ko.placedGlyphBoxes,no&&no.box&&no.box.length))return ir=!0,mi=ko.shift,no}gi?gi=null:ro=ve}return no};ia(()=>Fi(Fo,Dn.iconBox,o.ai.horizontal),()=>{const _i=Dn.verticalTextBox;return g.allowVerticalPlacement&&!($r&&$r.box&&$r.box.length)&&nn.numVerticalGlyphVertices>0&&_i?Fi(_i,Dn.verticalIconBox,o.ai.vertical):{box:null,offscreen:null}}),$r&&(ir=$r.box,or=$r.offscreen);const Ga=ha($r&&$r.box);if(!ir&&this.prevPlacement){const _i=this.prevPlacement.variableOffsets[nn.crossTileID];_i&&(this.variableOffsets[nn.crossTileID]=_i,this.markUsedJustification(g,_i.anchor,nn,Ga))}}}if(Ni=$r,ir=Ni&&Ni.box&&Ni.box.length>0,or=Ni&&Ni.offscreen,nn.useRuntimeCollisionCircles){const ha=g.text.placedSymbolArray.get(nn.centerJustifiedTextSymbolIndex),ia=o.aj(g.textSizeData,le,ha),wa=b.get("text-padding");Ei=this.collisionIndex.placeCollisionCircles(ve,ha,g.lineVertexArray,g.glyphOffsetArray,ia,C,M,B,p,it,Ie.predicate,nn.collisionCircleDiameter,wa,bn),Ei.circles.length&&Ei.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),ir=Ze||Ei.circles.length>0&&!Ei.collisionDetected,or=or&&Ei.offscreen}if(Dn.iconFeatureIndex&&(to=Dn.iconFeatureIndex),Dn.iconBox){const ha=ia=>{const wa=at&&mi?Lt(ia,mi.x,mi.y,We,it,this.transform.angle):ia;return this.collisionIndex.placeCollisionBox(wa,tt,F,C,Ie.predicate,bn)};ra&&ra.box&&ra.box.length&&Dn.verticalIconBox?(fs=ha(Dn.verticalIconBox),Wn=fs.box.length>0):(fs=ha(Dn.iconBox),Wn=fs.box.length>0),or=or&&fs.offscreen}const rl=Se||nn.numHorizontalGlyphVertices===0&&nn.numVerticalGlyphVertices===0,Sl=Pe||nn.numIconVertices===0;if(rl||Sl?Sl?rl||(Wn=Wn&&ir):ir=Wn&&ir:Wn=ir=Wn&&ir,ir&&Ni&&Ni.box&&this.collisionIndex.insertCollisionBox(Ni.box,ve,b.get("text-ignore-placement"),g.bucketInstanceId,ra&&ra.box&&eo?eo:Hr,Ie.ID),Wn&&fs&&this.collisionIndex.insertCollisionBox(fs.box,tt,b.get("icon-ignore-placement"),g.bucketInstanceId,to,Ie.ID),Ei&&(ir&&this.collisionIndex.insertCollisionCircles(Ei.circles,ve,b.get("text-ignore-placement"),g.bucketInstanceId,Hr,Ie.ID),p)){const ha=g.bucketInstanceId;let ia=this.collisionCircleArrays[ha];ia===void 0&&(ia=this.collisionCircleArrays[ha]=new Je);for(let wa=0;wa<Ei.circles.length;wa+=4)ia.circles.push(Ei.circles[wa+0]),ia.circles.push(Ei.circles[wa+1]),ia.circles.push(Ei.circles[wa+2]),ia.circles.push(Ei.collisionDetected?1:0)}if(nn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[nn.crossTileID]=new qe(ir||Rt,Wn||yt,or||g.justReloaded),c[nn.crossTileID]=!0};if(ft){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const nn=g.getSortedSymbolIndexes(this.transform.angle);for(let Dn=nn.length-1;Dn>=0;--Dn){const wn=nn[Dn];sr(g.symbolInstances.get(wn),g.collisionArrays[wn])}}else for(let nn=r.symbolInstanceStart;nn<r.symbolInstanceEnd;nn++)sr(g.symbolInstances.get(nn),g.collisionArrays[nn]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const nn=this.collisionCircleArrays[g.bucketInstanceId];o.as(nn.invProjMatrix,C),nn.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,c,p,g){let b;b=g===o.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.at(c)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const M of C)M>=0&&(r.text.placedSymbolArray.get(M).crossTileID=b>=0&&M!==b?0:p.crossTileID)}markUsedOrientation(r,c,p){const g=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,b=c===o.ai.vertical?c:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const M of C)r.text.placedSymbolArray.get(M).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},C=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const B in this.placements){const F=this.placements[B],U=b[B];U?(this.opacities[B]=new _e(U,g,F.text,F.icon),p=p||F.text!==U.text.placed||F.icon!==U.icon.placed):(this.opacities[B]=new _e(null,g,F.text,F.icon,F.skipFade),p=p||F.text||F.icon)}for(const B in b){const F=b[B];if(!this.opacities[B]){const U=new _e(F,g,!1,!1);U.isHidden()||(this.opacities[B]=U,p=p||F.text.placed||F.icon.placed)}}for(const B in C)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=C[B]);for(const B in M)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=M[B]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const p={};for(const g of c){const b=g.getBucket(r);b&&g.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,g.collisionBoxArray)}}updateBucketOpacities(r,c,p){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0],b=g.layout,C=new _e(null,0,!1,!1,!0),M=b.get("text-allow-overlap"),B=b.get("icon-allow-overlap"),F=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=b.get("text-rotation-alignment")==="map",q=b.get("text-pitch-alignment")==="map",le=b.get("icon-text-fit")!=="none",Ie=new _e(null,0,M&&(B||!r.hasIconData()||b.get("icon-optional")),B&&(M||!r.hasTextData()||b.get("text-optional")),!0);!r.collisionArrays&&p&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(p);const Se=(Pe,ve,Ze)=>{for(let tt=0;tt<ve/4;tt++)Pe.opacityVertexArray.emplaceBack(Ze);Pe.hasVisibleVertices=Pe.hasVisibleVertices||Ze!==Fr};for(let Pe=0;Pe<r.symbolInstances.length;Pe++){const ve=r.symbolInstances.get(Pe),{numHorizontalGlyphVertices:Ze,numVerticalGlyphVertices:tt,crossTileID:Re}=ve;let We=this.opacities[Re];c[Re]?We=C:We||(We=Ie,this.opacities[Re]=We),c[Re]=!0;const it=ve.numIconVertices>0,at=this.placedOrientations[ve.crossTileID],ft=at===o.ai.vertical,Rt=at===o.ai.horizontal||at===o.ai.horizontalOnly;if(Ze>0||tt>0){const yt=ar(We.text);Se(r.text,Ze,ft?Fr:yt),Se(r.text,tt,Rt?Fr:yt);const jt=We.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(nn=>{nn>=0&&(r.text.placedSymbolArray.get(nn).hidden=jt||ft?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=jt||Rt?1:0);const bn=this.variableOffsets[ve.crossTileID];bn&&this.markUsedJustification(r,bn.anchor,ve,at);const sr=this.placedOrientations[ve.crossTileID];sr&&(this.markUsedJustification(r,"left",ve,sr),this.markUsedOrientation(r,sr,ve))}if(it){const yt=ar(We.icon),jt=!(le&&ve.verticalPlacedIconSymbolIndex&&ft);ve.placedIconSymbolIndex>=0&&(Se(r.icon,ve.numIconVertices,jt?yt:Fr),r.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=We.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(Se(r.icon,ve.numVerticalIconVertices,jt?Fr:yt),r.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const yt=r.collisionArrays[Pe];if(yt){let jt=new o.P(0,0);if(yt.textBox||yt.verticalTextBox){let sr=!0;if(F){const nn=this.variableOffsets[Re];nn?(jt=Jt(nn.anchor,nn.width,nn.height,nn.textOffset,nn.textBoxScale),U&&jt._rotate(q?this.transform.angle:-this.transform.angle)):sr=!1}yt.textBox&&cn(r.textCollisionBox.collisionVertexArray,We.text.placed,!sr||ft,jt.x,jt.y),yt.verticalTextBox&&cn(r.textCollisionBox.collisionVertexArray,We.text.placed,!sr||Rt,jt.x,jt.y)}const bn=!!(!Rt&&yt.verticalIconBox);yt.iconBox&&cn(r.iconCollisionBox.collisionVertexArray,We.icon.placed,bn,le?jt.x:0,le?jt.y:0),yt.verticalIconBox&&cn(r.iconCollisionBox.collisionVertexArray,We.icon.placed,!bn,le?jt.x:0,le?jt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Pe.invProjMatrix,r.placementViewportMatrix=Pe.viewportMatrix,r.collisionCircleArray=Pe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function cn(y,r,c,p,g){y.emplaceBack(r?1:0,c?1:0,p||0,g||0),y.emplaceBack(r?1:0,c?1:0,p||0,g||0),y.emplaceBack(r?1:0,c?1:0,p||0,g||0),y.emplaceBack(r?1:0,c?1:0,p||0,g||0)}const ln=Math.pow(2,25),In=Math.pow(2,24),Ln=Math.pow(2,17),Tn=Math.pow(2,16),hr=Math.pow(2,9),Rn=Math.pow(2,8),kr=Math.pow(2,1);function ar(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,c=Math.floor(127*y.opacity);return c*ln+r*In+c*Ln+r*Tn+c*hr+r*Rn+c*kr+r}const Fr=0;class bi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,p,g,b){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(C,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((M,B)=>M.sortKey-B.sortKey));this._currentPartIndex<C.length;)if(c.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class qr{constructor(r,c,p,g,b,C,M,B){this.placement=new qt(r,c,C,M,B),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,p){const g=o.h.now(),b=()=>!this._forceFullPlacement&&o.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=c[r[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=M)&&(!C.maxzoom||C.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new bi(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Jr=512/o.N/2;class hi{constructor(r,c,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let b=0;b<c.length;b++){const C=c.get(b),M=C.key,B=g.get(M);B?B.push(C):g.set(M,[C])}for(const[b,C]of g){const M={positions:C.map(B=>({x:Math.floor(B.anchorX*Jr),y:Math.floor(B.anchorY*Jr)})),crossTileIDs:C.map(B=>B.crossTileID)};if(M.positions.length>128){const B=new o.av(M.positions.length,16,Uint16Array);for(const{x:F,y:U}of M.positions)B.add(F,U);B.finish(),delete M.positions,M.index=B}this._symbolsByKey[b]=M}}getScaledCoordinates(r,c){const{x:p,y:g,z:b}=this.tileID.canonical,{x:C,y:M,z:B}=c.canonical,F=Jr/Math.pow(2,B-b),U=(M*o.N+r.anchorY)*F,q=g*o.N*Jr;return{x:Math.floor((C*o.N+r.anchorX)*F-p*o.N*Jr),y:Math.floor(U-q)}}findMatches(r,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const C=r.get(b);if(C.crossTileID)continue;const M=this._symbolsByKey[C.key];if(!M)continue;const B=this.getScaledCoordinates(C,c);if(M.index){const F=M.index.range(B.x-g,B.y-g,B.x+g,B.y+g).sort();for(const U of F){const q=M.crossTileIDs[U];if(!p[q]){p[q]=!0,C.crossTileID=q;break}}}else if(M.positions)for(let F=0;F<M.positions.length;F++){const U=M.positions[F],q=M.crossTileIDs[F];if(Math.abs(U.x-B.x)<=g&&Math.abs(U.y-B.y)<=g&&!p[q]){p[q]=!0,C.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class $n{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ma{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],b={};for(const C in g){const M=g[C];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),b[M.tileID.key]=M}this.indexes[p]=b}this.lng=r}addBucket(r,c,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const C=this.indexes[b];if(Number(b)>r.overscaledZ)for(const M in C){const B=C[M];B.tileID.isChildOf(r)&&B.findMatches(c.symbolInstances,r,g)}else{const M=C[r.scaledTo(Number(b)).key];M&&M.findMatches(c.symbolInstances,r,g)}}for(let b=0;b<c.symbolInstances.length;b++){const C=c.symbolInstances.get(b);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new hi(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const b in g)r[g[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[b]),delete g[b],c=!0)}return c}}class fi{constructor(){this.layerIndexes={},this.crossTileIDs=new $n,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,p){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new Ma);let b=!1;const C={};g.handleWrapJump(p);for(const M of c){const B=M.getBucket(r);B&&r.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,B,this.crossTileIDs)&&(b=!0),C[B.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const Un=(y,r)=>o.x(y,r&&r.filter(c=>c.identifier!=="source.canvas")),Bn=o.F(o.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),fr=o.F(o.ax,["setCenter","setZoom","setBearing","setPitch"]),Bt=o.aw();class Pn extends o.E{constructor(r,c={}){super(),this.map=r,this.dispatcher=new ht(Kn(),this,r._getMapId()),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new Ne(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new $e(256,512),this.crossTileSymbolIndex=new fi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.az());const p=this;this._rtlTextPluginCallback=Pn.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(b,C)=>{if(o.aA(b),C&&C.every(M=>M))for(const M in p.sourceCaches){const B=p.sourceCaches[M].getSource().type;B!=="vector"&&B!=="geojson"||p.sourceCaches[M].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const b=this.sourceCaches[g.sourceId];if(!b)return;const C=b.getSource();if(C&&C.vectorLayerIds)for(const M in this._layers){const B=this._layers[M];B.source===C.id&&this._validateLayer(B)}})}loadURL(r,c={},p){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(r,W.Style);this._request=o.f(g,(b,C)=>{this._request=null,b?this.fire(new o.j(b)):C&&this._load(C,c,p)})}loadJSON(r,c={},p){this.fire(new o.k("dataloading",{dataType:"style"})),this._request=o.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(r,c,p)})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Bt,{validate:!1})}_load(r,c,p){var g;const b=c.transformStyle?c.transformStyle(p,r):r;if(!c.validate||!Un(this,o.y(b))){this._loaded=!0,this.stylesheet=b;for(const C in b.sources)this.addSource(C,b.sources[C],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Me(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const r=o.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const p=o.aC(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(r,c=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,b,C,M){const B=oe(g),F=B.length,U=C>1?"@2x":"",q={},le={},Ie={};for(const{id:Se,url:Pe}of B){const ve=b.transformRequest(b.normalizeSpriteURL(Pe,U,".json"),W.SpriteJSON),Ze=`${Se}_${ve.url}`;q[Ze]=o.f(ve,(We,it)=>{delete q[Ze],le[Se]=it,Te(M,le,Ie,We,F)});const tt=b.transformRequest(b.normalizeSpriteURL(Pe,U,".png"),W.SpriteImage),Re=`${Se}_${tt.url}`;q[Re]=j.getImage(tt,(We,it)=>{delete q[Re],Ie[Se]=it,Te(M,le,Ie,We,F)})}return{cancel(){for(const Se of Object.values(q))Se.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(g,b)=>{if(this._spriteRequest=null,g)this.fire(new o.j(g));else if(b)for(const C in b){this._spritesImagesIds[C]=[];const M=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(B=>!(B in b)):[];for(const B of M)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in b[C]){const F=C==="default"?B:`${C}:${B}`;this._spritesImagesIds[C].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,b[C][B],!1):this.imageManager.addImage(F,b[C][B]),c&&(this._changedImages[F]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const p=r.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const c=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c);const p=[];for(const g of r)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(r[p]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(g.length||b.length)&&this._updateWorkerLayers(g,b);for(const C in this._updatedSources){const M=this._updatedSources[C];if(M==="reload")this._reloadSource(C);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const b=this.sourceCaches[g];p[g]=b.used,b.used=!1}for(const g of this._order){const b=this._layers[g];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const g in p){const b=this.sourceCaches[g];p[g]!==b.used&&b.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){this._checkLoaded();const p=this.serialize();if(r=c.transformStyle?c.transformStyle(p,r):r,Un(this,o.y(r)))return!1;(r=o.aD(r)).layers=o.aB(r.layers);const g=o.aE(p,r).filter(C=>!(C.command in fr));if(g.length===0)return!1;const b=g.filter(C=>!(C.command in Bn));if(b.length>0)throw new Error(`Unimplemented: ${b.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,c){if(this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${r}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[r]=new Et(r,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new o.j(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,p={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new o.j(new Error(`Layer "${g}" already exists on this map.`)));let b;if(r.type==="custom"){if(Un(this,o.aF(r)))return;b=o.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(g,r.source),r=o.aD(r),r=o.e(r,{source:g})),this._validate(o.y.layer,`layers.${g}`,r,{arrayIndex:-1},p))return;b=o.aC(r),this._validateLayer(b),b.setEventedParent(this,{layer:{id:g}})}const C=c?this._order.indexOf(c):this._order.length;if(c&&C===-1)this.fire(new o.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=b,this._removedLayers[g]&&b.source&&b.type!=="custom"){const M=this._removedLayers[g];delete this._removedLayers[g],M.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const p=this._order.indexOf(r);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new o.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,p){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,p={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!o.aG(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(o.y.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=o.aD(c),this._updateLayer(g)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.aD(this.getLayer(r).filter)}setLayoutProperty(r,c,p,g={}){this._checkLoaded();const b=this.getLayer(r);b?o.aG(b.getLayoutProperty(c),p)||(b.setLayoutProperty(c,p,g),this._updateLayer(b)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const p=this.getLayer(r);if(p)return p.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,p,g={}){this._checkLoaded();const b=this.getLayer(r);b?o.aG(b.getPaintProperty(c),p)||(b.setPaintProperty(c,p,g)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const p=r.source,g=r.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=b.getSource().type;C==="geojson"&&g?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(g,r.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const p=r.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const b=g.getSource().type,C=b==="vector"?r.sourceLayer:void 0;b!=="vector"||C?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,r.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,p=r.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,r.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.aH(this.sourceCaches,b=>b.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return o.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:r,layers:c,terrain:p},b=>b!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(c(M)){p[M]=C;for(const B of r){const F=B[M];if(F)for(const U of F)g.push(U)}}}g.sort((C,M)=>M.intersectionZ-C.intersectionZ);const b=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(c(M))for(let B=g.length-1;B>=0;B--){const F=g[B].feature;if(p[F.layer.id]<C)break;b.push(F),g.pop()}else for(const B of r){const F=B[M];if(F)for(const U of F)b.push(U.feature)}}return b}queryRenderedFeatures(r,c,p){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const M of c.layers){const B=this._layers[M];if(!B)return this.fire(new o.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];g[B.source]=!0}}const b=[];c.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const M in this.sourceCaches)c.layers&&!g[M]||b.push(Qt(this.sourceCaches[M],this._layers,C,r,c,p));return this.placement&&b.push(function(M,B,F,U,q,le,Ie){const Se={},Pe=le.queryRenderedSymbols(U),ve=[];for(const Ze of Object.keys(Pe).map(Number))ve.push(Ie[Ze]);ve.sort(Ht);for(const Ze of ve){const tt=Ze.featureIndex.lookupSymbolFeatures(Pe[Ze.bucketInstanceId],B,Ze.bucketIndex,Ze.sourceLayerIndex,q.filter,q.layers,q.availableImages,M);for(const Re in tt){const We=Se[Re]=Se[Re]||[],it=tt[Re];it.sort((at,ft)=>{const Rt=Ze.featureSortOrder;if(Rt){const yt=Rt.indexOf(at.featureIndex);return Rt.indexOf(ft.featureIndex)-yt}return ft.featureIndex-at.featureIndex});for(const at of it)We.push(at)}}for(const Ze in Se)Se[Ze].forEach(tt=>{const Re=tt.feature,We=F[M[Ze].source].getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=We});return Se}(this._layers,C,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[r];return p?function(g,b){const C=g.getRenderableIds().map(F=>g.getTileByID(F)),M=[],B={};for(let F=0;F<C.length;F++){const U=C[F],q=U.tileID.canonical.key;B[q]||(B[q]=!0,U.querySourceFeatures(M,b))}return M}(p,c):[]}addSourceType(r,c,p){return wt(r)?p(new Error(`A source type called "${r}" already exists.`)):(((g,b)=>{xt[g]=b})(r,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in r)if(!o.aG(r[C],p[C])){g=!0;break}if(!g)return;const b={now:o.h.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}_validate(r,c,p,g,b={}){return(!b||b.validate!==!1)&&Un(this,r.call(o.y,o.e({key:c,style:this.serialize(),value:p,styleSpec:o.v},g)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,p,g,b=!1){let C=!1,M=!1;const B={};for(const F of this._order){const U=this._layers[F];if(U.type!=="symbol")continue;if(!B[U.source]){const le=this.sourceCaches[U.source];B[U.source]=le.getRenderableIds(!0).map(Ie=>le.getTileByID(Ie)).sort((Ie,Se)=>Se.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Se.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(U,B[U.source],r.center.lng);C=C||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.h.now(),r.zoom))&&(this.pauseablePlacement=new qr(r,this.map.terrain,this._order,b,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.h.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(const F of this._order){const U=this._layers[F];U.type==="symbol"&&this.placement.updateLayerOpacities(U,B[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(r,c,p){this.glyphManager.getGlyphs(c.stacks,p);const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,[""])}getResource(r,c,p){return o.m(c,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,p={},g){this._checkLoaded();const b=[{id:r,url:c}],C=[...oe(this.stylesheet.sprite),...b];this._validate(o.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(b,!0,g))}removeSprite(r){this._checkLoaded();const c=oe(this.stylesheet.sprite);if(c.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(r,c={},p){this._checkLoaded(),r&&this._validate(o.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}Pn.registerForPluginStateChange=o.aK;var St=o.Q([{name:"a_pos",type:"Int16",components:2}]),Qi="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const dr={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Qi),terrainDepth:Fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Qi),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Qi)};function Fn(y,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=b?b.concat(g):g,M={};return{fragmentSource:y=y.replace(c,(B,F,U,q,le)=>(M[le]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${le}
varying ${U} ${q} ${le};
#else
uniform ${U} ${q} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${U} ${q} ${le} = u_${le};
#endif
`)),vertexSource:r=r.replace(c,(B,F,U,q,le)=>{const Ie=q==="float"?"vec2":"vec4",Se=le.match(/color/)?"color":Ie;return M[le]?F==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${U} ${Ie} a_${le};
varying ${U} ${q} ${le};
#else
uniform ${U} ${q} u_${le};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${U} ${q} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${Se}(a_${le}, u_${le}_t);
#else
    ${U} ${q} ${le} = u_${le};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${U} ${Ie} a_${le};
#else
uniform ${U} ${q} u_${le};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${U} ${q} ${le} = a_${le};
#else
    ${U} ${q} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${U} ${q} ${le} = unpack_mix_${Se}(a_${le}, u_${le}_t);
#else
    ${U} ${q} ${le} = u_${le};
#endif
`}),staticAttributes:p,staticUniforms:C}}class ni{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,p,g,b,C,M,B,F){this.context=r;let U=this.boundPaintVertexBuffers.length!==g.length;for(let q=0;!U&&q<g.length;q++)this.boundPaintVertexBuffers[q]!==g[q]&&(U=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||U||this.boundIndexBuffer!==b||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==F?this.freshBind(c,p,g,b,C,M,B,F):(r.bindVertexArray.set(this.vao),M&&M.bind(),b&&b.dynamicDraw&&b.bind(),B&&B.bind(),F&&F.bind())}freshBind(r,c,p,g,b,C,M,B){const F=r.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=B,c.enableAttributes(q,r);for(const le of p)le.enableAttributes(q,r);C&&C.enableAttributes(q,r),M&&M.enableAttributes(q,r),B&&B.enableAttributes(q,r),c.bind(),c.setVertexAttribPointers(q,r,b);for(const le of p)le.bind(),le.setVertexAttribPointers(q,r,b);C&&(C.bind(),C.setVertexAttribPointers(q,r,b)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(q,r,b)),B&&(B.bind(),B.setVertexAttribPointers(q,r,b)),U.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Er(y){const r=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");r.push(p.pop())}return r}class Ai{constructor(r,c,p,g,b,C){const M=r.gl;this.program=M.createProgram();const B=Er(c.staticAttributes),F=p?p.getBinderAttributes():[],U=B.concat(F),q=dr.prelude.staticUniforms?Er(dr.prelude.staticUniforms):[],le=c.staticUniforms?Er(c.staticUniforms):[],Ie=p?p.getBinderUniforms():[],Se=q.concat(le).concat(Ie),Pe=[];for(const at of Se)Pe.indexOf(at)<0&&Pe.push(at);const ve=p?p.defines():[];b&&ve.push("#define OVERDRAW_INSPECTOR;"),C&&ve.push("#define TERRAIN3D;");const Ze=ve.concat(dr.prelude.fragmentSource,c.fragmentSource).join(`
`),tt=ve.concat(dr.prelude.vertexSource,c.vertexSource).join(`
`),Re=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Re,Ze),M.compileShader(Re),!M.getShaderParameter(Re,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(Re)}`);M.attachShader(this.program,Re);const We=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(We,tt),M.compileShader(We),!M.getShaderParameter(We,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(We)}`);M.attachShader(this.program,We),this.attributes={};const it={};this.numAttributes=U.length;for(let at=0;at<this.numAttributes;at++)U[at]&&(M.bindAttribLocation(this.program,at,U[at]),this.attributes[U[at]]=at);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(We),M.deleteShader(Re);for(let at=0;at<Pe.length;at++){const ft=Pe[at];if(ft&&!it[ft]){const Rt=M.getUniformLocation(this.program,ft);Rt&&(it[ft]=Rt)}}this.fixedUniforms=g(r,it),this.terrainUniforms=((at,ft)=>({u_depth:new o.aL(at,ft.u_depth),u_terrain:new o.aL(at,ft.u_terrain),u_terrain_dim:new o.aM(at,ft.u_terrain_dim),u_terrain_matrix:new o.aN(at,ft.u_terrain_matrix),u_terrain_unpack:new o.aO(at,ft.u_terrain_unpack),u_terrain_exaggeration:new o.aM(at,ft.u_terrain_exaggeration)}))(r,it),this.binderUniforms=p?p.getUniforms(r,it):[]}draw(r,c,p,g,b,C,M,B,F,U,q,le,Ie,Se,Pe,ve,Ze,tt){const Re=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(g),r.setColorMode(b),r.setCullFace(C),B){r.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,B.depthTexture),r.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,B.texture);for(const it in this.terrainUniforms)this.terrainUniforms[it].set(B[it])}for(const it in this.fixedUniforms)this.fixedUniforms[it].set(M[it]);Pe&&Pe.setUniforms(r,this.binderUniforms,Ie,{zoom:Se});let We=0;switch(c){case Re.LINES:We=2;break;case Re.TRIANGLES:We=3;break;case Re.LINE_STRIP:We=1}for(const it of le.get()){const at=it.vaos||(it.vaos={});(at[F]||(at[F]=new ni)).bind(r,this,U,Pe?Pe.getPaintVertexBuffers():[],q,it.vertexOffset,ve,Ze,tt),Re.drawElements(c,it.primitiveLength*We,Re.UNSIGNED_SHORT,it.primitiveOffset*We*2)}}}function Gr(y,r,c){const p=1/te(c,1,r.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/g,C=b*(c.tileID.canonical.x+c.tileID.wrap*g),M=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,M>>16],u_pixel_coord_lower:[65535&C,65535&M]}}const xi=(y,r,c,p)=>{const g=r.style.light,b=g.properties.get("position"),C=[b.x,b.y,b.z],M=function(){var F=new o.A(9);return o.A!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[5]=0,F[6]=0,F[7]=0),F[0]=1,F[4]=1,F[8]=1,F}();g.properties.get("anchor")==="viewport"&&function(F,U){var q=Math.sin(U),le=Math.cos(U);F[0]=le,F[1]=q,F[2]=0,F[3]=-q,F[4]=le,F[5]=0,F[6]=0,F[7]=0,F[8]=1}(M,-r.transform.angle),function(F,U,q){var le=U[0],Ie=U[1],Se=U[2];F[0]=le*q[0]+Ie*q[3]+Se*q[6],F[1]=le*q[1]+Ie*q[4]+Se*q[7],F[2]=le*q[2]+Ie*q[5]+Se*q[8]}(C,C,M);const B=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+c,u_opacity:p}},Ci=(y,r,c,p,g,b,C)=>o.e(xi(y,r,c,p),Gr(b,r,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),Qa=y=>({u_matrix:y}),Xr=(y,r,c,p)=>o.e(Qa(y),Gr(c,r,p)),wi=(y,r)=>({u_matrix:y,u_world:r}),ma=(y,r,c,p,g)=>o.e(Xr(y,r,c,p),{u_world:g}),Xi=(y,r,c,p)=>{const g=y.transform;let b,C;if(p.paint.get("circle-pitch-alignment")==="map"){const M=te(c,1,g.zoom);b=!0,C=[M,M]}else b=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},Di=(y,r,c)=>{const p=te(c,1,r.zoom),g=Math.pow(2,r.zoom-c.tileID.overscaledZ),b=c.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[r.pixelsToGLUnits[0]/(p*g),r.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:b}},ea=(y,r,c=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:c}),vs=y=>({u_matrix:y}),Ds=(y,r,c,p)=>({u_matrix:y,u_extrude_scale:te(r,1,c),u_intensity:p});function ga(y,r){const c=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new o.U(0,p/c).toLngLat().lat,new o.U(0,(p+1)/c).toLngLat().lat]}const ta=(y,r,c,p)=>{const g=y.transform;return{u_matrix:oa(y,r,c,p),u_ratio:1/te(r,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},za=(y,r,c,p,g)=>o.e(ta(y,r,c,g),{u_image:0,u_image_height:p}),po=(y,r,c,p,g)=>{const b=y.transform,C=sa(r,b);return{u_matrix:oa(y,r,c,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/te(r,1,b.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Da=(y,r,c,p,g,b)=>{const C=y.lineAtlas,M=sa(r,y.transform),B=c.layout.get("line-cap")==="round",F=C.getDash(p.from,B),U=C.getDash(p.to,B),q=F.width*g.fromScale,le=U.width*g.toScale;return o.e(ta(y,r,c,b),{u_patternscale_a:[M/q,-F.height/2],u_patternscale_b:[M/le,-U.height/2],u_sdfgamma:C.width/(256*Math.min(q,le)*y.pixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:U.y,u_mix:g.t})};function sa(y,r){return 1/te(y,1,r.tileZoom)}function oa(y,r,c,p){return y.translatePosMatrix(p?p.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Hs=(y,r,c,p,g)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Do(g.paint.get("raster-hue-rotate"))};var b,C};function Do(y){y*=Math.PI/180;const r=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const _a=(y,r,c,p,g,b,C,M,B,F)=>{const U=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:U.width/U.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:C,u_coord_matrix:M,u_is_text:+B,u_pitch_with_map:+p,u_texsize:F,u_texture:0}},es=(y,r,c,p,g,b,C,M,B,F,U)=>{const q=g.transform;return o.e(_a(y,r,c,p,g,b,C,M,B,F),{u_gamma_scale:p?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:1})},ts=(y,r,c,p,g,b,C,M,B,F)=>o.e(es(y,r,c,p,g,b,C,M,!0,B),{u_texsize_icon:F,u_texture_icon:1}),Ws=(y,r,c)=>({u_matrix:y,u_opacity:r,u_color:c}),ri=(y,r,c,p,g,b)=>o.e(function(C,M,B,F){const U=B.imageManager.getPattern(C.from.toString()),q=B.imageManager.getPattern(C.to.toString()),{width:le,height:Ie}=B.imageManager.getPixelSize(),Se=Math.pow(2,F.tileID.overscaledZ),Pe=F.tileSize*Math.pow(2,B.transform.tileZoom)/Se,ve=Pe*(F.tileID.canonical.x+F.tileID.wrap*Se),Ze=Pe*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[le,Ie],u_mix:M.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/te(F,1,B.transform.tileZoom),u_pixel_coord_upper:[ve>>16,Ze>>16],u_pixel_coord_lower:[65535&ve,65535&Ze]}}(p,b,c,g),{u_matrix:y,u_opacity:r}),bs={fillExtrusion:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_lightpos:new o.aP(y,r.u_lightpos),u_lightintensity:new o.aM(y,r.u_lightintensity),u_lightcolor:new o.aP(y,r.u_lightcolor),u_vertical_gradient:new o.aM(y,r.u_vertical_gradient),u_opacity:new o.aM(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_lightpos:new o.aP(y,r.u_lightpos),u_lightintensity:new o.aM(y,r.u_lightintensity),u_lightcolor:new o.aP(y,r.u_lightcolor),u_vertical_gradient:new o.aM(y,r.u_vertical_gradient),u_height_factor:new o.aM(y,r.u_height_factor),u_image:new o.aL(y,r.u_image),u_texsize:new o.aQ(y,r.u_texsize),u_pixel_coord_upper:new o.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,r.u_pixel_coord_lower),u_scale:new o.aP(y,r.u_scale),u_fade:new o.aM(y,r.u_fade),u_opacity:new o.aM(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_image:new o.aL(y,r.u_image),u_texsize:new o.aQ(y,r.u_texsize),u_pixel_coord_upper:new o.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,r.u_pixel_coord_lower),u_scale:new o.aP(y,r.u_scale),u_fade:new o.aM(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_world:new o.aQ(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_world:new o.aQ(y,r.u_world),u_image:new o.aL(y,r.u_image),u_texsize:new o.aQ(y,r.u_texsize),u_pixel_coord_upper:new o.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,r.u_pixel_coord_lower),u_scale:new o.aP(y,r.u_scale),u_fade:new o.aM(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_scale_with_map:new o.aL(y,r.u_scale_with_map),u_pitch_with_map:new o.aL(y,r.u_pitch_with_map),u_extrude_scale:new o.aQ(y,r.u_extrude_scale),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_matrix:new o.aN(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aM(y,r.u_pixels_to_tile_units),u_extrude_scale:new o.aQ(y,r.u_extrude_scale),u_overscale_factor:new o.aM(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_inv_matrix:new o.aN(y,r.u_inv_matrix),u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_viewport_size:new o.aQ(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new o.aR(y,r.u_color),u_matrix:new o.aN(y,r.u_matrix),u_overlay:new o.aL(y,r.u_overlay),u_overlay_scale:new o.aM(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new o.aM(y,r.u_extrude_scale),u_intensity:new o.aM(y,r.u_intensity),u_matrix:new o.aN(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_world:new o.aQ(y,r.u_world),u_image:new o.aL(y,r.u_image),u_color_ramp:new o.aL(y,r.u_color_ramp),u_opacity:new o.aM(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_image:new o.aL(y,r.u_image),u_latrange:new o.aQ(y,r.u_latrange),u_light:new o.aQ(y,r.u_light),u_shadow:new o.aR(y,r.u_shadow),u_highlight:new o.aR(y,r.u_highlight),u_accent:new o.aR(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_image:new o.aL(y,r.u_image),u_dimension:new o.aQ(y,r.u_dimension),u_zoom:new o.aM(y,r.u_zoom),u_unpack:new o.aO(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_ratio:new o.aM(y,r.u_ratio),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_ratio:new o.aM(y,r.u_ratio),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,r.u_units_to_pixels),u_image:new o.aL(y,r.u_image),u_image_height:new o.aM(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_texsize:new o.aQ(y,r.u_texsize),u_ratio:new o.aM(y,r.u_ratio),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_image:new o.aL(y,r.u_image),u_units_to_pixels:new o.aQ(y,r.u_units_to_pixels),u_scale:new o.aP(y,r.u_scale),u_fade:new o.aM(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_ratio:new o.aM(y,r.u_ratio),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,r.u_units_to_pixels),u_patternscale_a:new o.aQ(y,r.u_patternscale_a),u_patternscale_b:new o.aQ(y,r.u_patternscale_b),u_sdfgamma:new o.aM(y,r.u_sdfgamma),u_image:new o.aL(y,r.u_image),u_tex_y_a:new o.aM(y,r.u_tex_y_a),u_tex_y_b:new o.aM(y,r.u_tex_y_b),u_mix:new o.aM(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_tl_parent:new o.aQ(y,r.u_tl_parent),u_scale_parent:new o.aM(y,r.u_scale_parent),u_buffer_scale:new o.aM(y,r.u_buffer_scale),u_fade_t:new o.aM(y,r.u_fade_t),u_opacity:new o.aM(y,r.u_opacity),u_image0:new o.aL(y,r.u_image0),u_image1:new o.aL(y,r.u_image1),u_brightness_low:new o.aM(y,r.u_brightness_low),u_brightness_high:new o.aM(y,r.u_brightness_high),u_saturation_factor:new o.aM(y,r.u_saturation_factor),u_contrast_factor:new o.aM(y,r.u_contrast_factor),u_spin_weights:new o.aP(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new o.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,r.u_is_size_feature_constant),u_size_t:new o.aM(y,r.u_size_t),u_size:new o.aM(y,r.u_size),u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_pitch:new o.aM(y,r.u_pitch),u_rotate_symbol:new o.aL(y,r.u_rotate_symbol),u_aspect_ratio:new o.aM(y,r.u_aspect_ratio),u_fade_change:new o.aM(y,r.u_fade_change),u_matrix:new o.aN(y,r.u_matrix),u_label_plane_matrix:new o.aN(y,r.u_label_plane_matrix),u_coord_matrix:new o.aN(y,r.u_coord_matrix),u_is_text:new o.aL(y,r.u_is_text),u_pitch_with_map:new o.aL(y,r.u_pitch_with_map),u_texsize:new o.aQ(y,r.u_texsize),u_texture:new o.aL(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new o.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,r.u_is_size_feature_constant),u_size_t:new o.aM(y,r.u_size_t),u_size:new o.aM(y,r.u_size),u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_pitch:new o.aM(y,r.u_pitch),u_rotate_symbol:new o.aL(y,r.u_rotate_symbol),u_aspect_ratio:new o.aM(y,r.u_aspect_ratio),u_fade_change:new o.aM(y,r.u_fade_change),u_matrix:new o.aN(y,r.u_matrix),u_label_plane_matrix:new o.aN(y,r.u_label_plane_matrix),u_coord_matrix:new o.aN(y,r.u_coord_matrix),u_is_text:new o.aL(y,r.u_is_text),u_pitch_with_map:new o.aL(y,r.u_pitch_with_map),u_texsize:new o.aQ(y,r.u_texsize),u_texture:new o.aL(y,r.u_texture),u_gamma_scale:new o.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_is_halo:new o.aL(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new o.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,r.u_is_size_feature_constant),u_size_t:new o.aM(y,r.u_size_t),u_size:new o.aM(y,r.u_size),u_camera_to_center_distance:new o.aM(y,r.u_camera_to_center_distance),u_pitch:new o.aM(y,r.u_pitch),u_rotate_symbol:new o.aL(y,r.u_rotate_symbol),u_aspect_ratio:new o.aM(y,r.u_aspect_ratio),u_fade_change:new o.aM(y,r.u_fade_change),u_matrix:new o.aN(y,r.u_matrix),u_label_plane_matrix:new o.aN(y,r.u_label_plane_matrix),u_coord_matrix:new o.aN(y,r.u_coord_matrix),u_is_text:new o.aL(y,r.u_is_text),u_pitch_with_map:new o.aL(y,r.u_pitch_with_map),u_texsize:new o.aQ(y,r.u_texsize),u_texsize_icon:new o.aQ(y,r.u_texsize_icon),u_texture:new o.aL(y,r.u_texture),u_texture_icon:new o.aL(y,r.u_texture_icon),u_gamma_scale:new o.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,r.u_device_pixel_ratio),u_is_halo:new o.aL(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_opacity:new o.aM(y,r.u_opacity),u_color:new o.aR(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_opacity:new o.aM(y,r.u_opacity),u_image:new o.aL(y,r.u_image),u_pattern_tl_a:new o.aQ(y,r.u_pattern_tl_a),u_pattern_br_a:new o.aQ(y,r.u_pattern_br_a),u_pattern_tl_b:new o.aQ(y,r.u_pattern_tl_b),u_pattern_br_b:new o.aQ(y,r.u_pattern_br_b),u_texsize:new o.aQ(y,r.u_texsize),u_mix:new o.aM(y,r.u_mix),u_pattern_size_a:new o.aQ(y,r.u_pattern_size_a),u_pattern_size_b:new o.aQ(y,r.u_pattern_size_b),u_scale_a:new o.aM(y,r.u_scale_a),u_scale_b:new o.aM(y,r.u_scale_b),u_pixel_coord_upper:new o.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aM(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_texture:new o.aL(y,r.u_texture),u_ele_delta:new o.aM(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_ele_delta:new o.aM(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new o.aN(y,r.u_matrix),u_texture:new o.aL(y,r.u_texture),u_terrain_coords_id:new o.aM(y,r.u_terrain_coords_id),u_ele_delta:new o.aM(y,r.u_ele_delta)})};class xs{constructor(r,c,p){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Li={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ls{constructor(r,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,c,p){for(let g=0;g<this.attributes.length;g++){const b=this.attributes[g],C=c.attributes[b.name];C!==void 0&&r.vertexAttribPointer(C,b.components,r[Li[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rs=new WeakMap;function Lr(y){var r;if(Rs.has(y))return Rs.get(y);{const c=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Rs.set(y,c),c}}class Jn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mo extends Jn{getDefault(){return o.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ri extends Jn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ii extends Jn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class ai extends Jn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class La extends Jn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Qr extends Jn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ns extends Jn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class si extends Jn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ra extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class oi extends Jn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class rs extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class ei extends Jn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Jo extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class yl extends Jn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class is extends Jn{getDefault(){return o.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ks extends Jn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class di extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Ol extends Jn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class vl extends Jn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Qo extends Jn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Bs extends Jn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class li extends Jn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class rt extends Jn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class kn extends Jn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Gn extends Jn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class pi extends Jn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ya extends Jn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class _r extends Jn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const p=this.gl;Lr(p)?p.bindVertexArray(r):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Ft extends Jn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Sr extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class go extends Jn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ba extends Jn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Oa extends Ba{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class el extends Ba{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _o extends Ba{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class et{constructor(r,c,p,g,b){this.context=r,this.width=c,this.height=p;const C=r.gl,M=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Oa(r,M),g)this.depthAttachment=b?new _o(r,M):new el(r,M);else if(b)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class pn{constructor(r,c,p){this.blendFunction=r,this.blendColor=c,this.mask=p}}pn.Replace=[1,0],pn.disabled=new pn(pn.Replace,o.aT.transparent,[!1,!1,!1,!1]),pn.unblended=new pn(pn.Replace,o.aT.transparent,[!0,!0,!0,!0]),pn.alphaBlended=new pn([1,771],o.aT.transparent,[!0,!0,!0,!0]);class Na{constructor(r){var c,p;if(this.gl=r,this.clearColor=new mo(this),this.clearDepth=new Ri(this),this.clearStencil=new ii(this),this.colorMask=new ai(this),this.depthMask=new La(this),this.stencilMask=new Qr(this),this.stencilFunc=new ns(this),this.stencilOp=new si(this),this.stencilTest=new Ra(this),this.depthRange=new oi(this),this.depthTest=new rs(this),this.depthFunc=new ei(this),this.blend=new Jo(this),this.blendFunc=new yl(this),this.blendColor=new is(this),this.blendEquation=new Ks(this),this.cullFace=new di(this),this.cullFaceSide=new Ol(this),this.frontFace=new vl(this),this.program=new Qo(this),this.activeTexture=new Bs(this),this.viewport=new li(this),this.bindFramebuffer=new rt(this),this.bindRenderbuffer=new kn(this),this.bindTexture=new Gn(this),this.bindVertexBuffer=new pi(this),this.bindElementBuffer=new ya(this),this.bindVertexArray=new _r(this),this.pixelStoreUnpack=new Ft(this),this.pixelStoreUnpackPremultiplyAlpha=new Sr(this),this.pixelStoreUnpackFlipY=new go(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Lr(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new xs(this,r,c)}createVertexBuffer(r,c,p){return new Ls(this,r,c,p)}createRenderbuffer(r,c,p){const g=this.gl,b=g.createRenderbuffer();return this.bindRenderbuffer.set(b),g.renderbufferStorage(g.RENDERBUFFER,r,c,p),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,p,g){return new et(this,r,c,p,g)}clear({color:r,depth:c,stencil:p}){const g=this.gl;let b=0;r&&(b|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(b|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.aG(r.blendFunction,pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Lr(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Lr(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class jn{constructor(r,c,p){this.func=r,this.mask=c,this.range=p}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);const la=7680;class gr{constructor(r,c,p,g,b,C){this.test=r,this.ref=c,this.mask=p,this.fail=g,this.depthFail=b,this.pass=C}}gr.disabled=new gr({func:519,mask:0},0,0,la,la,la);class yr{constructor(r,c,p){this.enable=r,this.mode=c,this.frontFace=p}}let Fa;function va(y,r,c,p,g,b,C){const M=y.context,B=M.gl,F=y.useProgram("collisionBox"),U=[];let q=0,le=0;for(let Re=0;Re<p.length;Re++){const We=p[Re],it=r.getTile(We),at=it.getBucket(c);if(!at)continue;let ft=We.posMatrix;g[0]===0&&g[1]===0||(ft=y.translatePosMatrix(We.posMatrix,it,g,b));const Rt=C?at.textCollisionBox:at.iconCollisionBox,yt=at.collisionCircleArray;if(yt.length>0){const jt=o.Z(),bn=ft;o.aU(jt,at.placementInvProjMatrix,y.transform.glCoordMatrix),o.aU(jt,jt,at.placementViewportMatrix),U.push({circleArray:yt,circleOffset:le,transform:bn,invTransform:jt,coord:We}),q+=yt.length/4,le=q}Rt&&F.draw(M,B.LINES,jn.disabled,gr.disabled,y.colorModeForRenderPass(),yr.disabled,Di(ft,y.transform,it),y.style.map.terrain&&y.style.map.terrain.getTerrainData(We),c.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,null,y.transform.zoom,null,null,Rt.collisionVertexBuffer)}if(!C||!U.length)return;const Ie=y.useProgram("collisionCircle"),Se=new o.aV;Se.resize(4*q),Se._trim();let Pe=0;for(const Re of U)for(let We=0;We<Re.circleArray.length/4;We++){const it=4*We,at=Re.circleArray[it+0],ft=Re.circleArray[it+1],Rt=Re.circleArray[it+2],yt=Re.circleArray[it+3];Se.emplace(Pe++,at,ft,Rt,yt,0),Se.emplace(Pe++,at,ft,Rt,yt,1),Se.emplace(Pe++,at,ft,Rt,yt,2),Se.emplace(Pe++,at,ft,Rt,yt,3)}(!Fa||Fa.length<2*q)&&(Fa=function(Re){const We=2*Re,it=new o.aX;it.resize(We),it._trim();for(let at=0;at<We;at++){const ft=6*at;it.uint16[ft+0]=4*at+0,it.uint16[ft+1]=4*at+1,it.uint16[ft+2]=4*at+2,it.uint16[ft+3]=4*at+2,it.uint16[ft+4]=4*at+3,it.uint16[ft+5]=4*at+0}return it}(q));const ve=M.createIndexBuffer(Fa,!0),Ze=M.createVertexBuffer(Se,o.aW.members,!0);for(const Re of U){const We={u_matrix:Re.transform,u_inv_matrix:Re.invTransform,u_camera_to_center_distance:(tt=y.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Ie.draw(M,B.TRIANGLES,jn.disabled,gr.disabled,y.colorModeForRenderPass(),yr.disabled,We,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Re.coord),c.id,Ze,ve,o.S.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,y.transform.zoom,null,null,null)}var tt;Ze.destroy(),ve.destroy()}yr.disabled=new yr(!1,1029,2305),yr.backCCW=new yr(!0,1029,2305);const Va=o.ao(new Float32Array(16));function as(y,r,c,p,g,b){const{horizontalAlign:C,verticalAlign:M}=o.au(y);return new o.P((-(C-.5)*r/g+p[0])*b,(-(M-.5)*c/g+p[1])*b)}function na(y,r,c,p,g,b,C,M,B,F,U){const q=y.text.placedSymbolArray,le=y.text.dynamicLayoutVertexArray,Ie=y.icon.dynamicLayoutVertexArray,Se={};le.clear();for(let Pe=0;Pe<q.length;Pe++){const ve=q.get(Pe),Ze=ve.hidden||!ve.crossTileID||y.allowVerticalPlacement&&!ve.placedOrientation?null:p[ve.crossTileID];if(Ze){const tt=new o.P(ve.anchorX,ve.anchorY),Re=He(tt,c?C:b,U),We=pt(g.cameraToCenterDistance,Re.signedDistanceFromCamera);let it=o.aj(y.textSizeData,B,ve)*We/o.ap;c&&(it*=y.tilePixelRatio/M);const{width:at,height:ft,anchor:Rt,textOffset:yt,textBoxScale:jt}=Ze,bn=as(Rt,at,ft,yt,jt,it),sr=c?He(tt.add(bn),b,U).point:Re.point.add(r?bn.rotate(-g.angle):bn),nn=y.allowVerticalPlacement&&ve.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let Dn=0;Dn<ve.numGlyphs;Dn++)o.ak(le,sr,nn);F&&ve.associatedIconIndex>=0&&(Se[ve.associatedIconIndex]={shiftedAnchor:sr,angle:nn})}else me(ve.numGlyphs,le)}if(F){Ie.clear();const Pe=y.icon.placedSymbolArray;for(let ve=0;ve<Pe.length;ve++){const Ze=Pe.get(ve);if(Ze.hidden)me(Ze.numGlyphs,Ie);else{const tt=Se[ve];if(tt)for(let Re=0;Re<Ze.numGlyphs;Re++)o.ak(Ie,tt.shiftedAnchor,tt.angle);else me(Ze.numGlyphs,Ie)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ie)}y.text.dynamicLayoutVertexBuffer.updateData(le)}function $a(y,r,c){return c.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function ba(y,r,c,p,g,b,C,M,B,F,U,q){const le=y.context,Ie=le.gl,Se=y.transform,Pe=M==="map",ve=B==="map",Ze=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",tt=Pe&&!ve&&!Ze,Re=!c.layout.get("symbol-sort-key").isConstant();let We=!1;const it=y.depthModeForSublayer(0,jn.ReadOnly),at=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ft=[];for(const Rt of p){const yt=r.getTile(Rt),jt=yt.getBucket(c);if(!jt)continue;const bn=g?jt.text:jt.icon;if(!bn||!bn.segments.get().length||!bn.hasVisibleVertices)continue;const sr=bn.programConfigurations.get(c.id),nn=g||jt.sdfIcons,Dn=g?jt.textSizeData:jt.iconSizeData,wn=ve||Se.pitch!==0,Nr=y.useProgram($a(nn,g,jt),sr),ir=o.ah(Dn,Se.zoom),Wn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Rt);let or,mi,$r,ra,Ni=[0,0],Ei=null;if(g)mi=yt.glyphAtlasTexture,$r=Ie.LINEAR,or=yt.glyphAtlasTexture.size,jt.iconsInText&&(Ni=yt.imageAtlasTexture.size,Ei=yt.imageAtlasTexture,ra=wn||y.options.rotating||y.options.zooming||Dn.kind==="composite"||Dn.kind==="camera"?Ie.LINEAR:Ie.NEAREST);else{const gi=c.layout.get("icon-size").constantOr(0)!==1||jt.iconsNeedLinear;mi=yt.imageAtlasTexture,$r=nn||y.options.rotating||y.options.zooming||gi||wn?Ie.LINEAR:Ie.NEAREST,or=yt.imageAtlasTexture.size}const fs=te(yt,1,y.transform.zoom),Hr=vt(Rt.posMatrix,ve,Pe,y.transform,fs),eo=Vn(Rt.posMatrix,ve,Pe,y.transform,fs),to=at&&jt.hasTextData(),Fo=c.layout.get("icon-text-fit")!=="none"&&to&&jt.hasIconData();if(Ze){const gi=y.style.map.terrain?(Ga,_i)=>y.style.map.terrain.getElevation(Rt,Ga,_i):null,Fi=c.layout.get("text-rotation-alignment")==="map";lt(jt,Rt.posMatrix,y,g,Hr,eo,ve,F,Fi,gi)}const rl=y.translatePosMatrix(Rt.posMatrix,yt,b,C),Sl=Ze||g&&at||Fo?Va:Hr,ha=y.translatePosMatrix(eo,yt,b,C,!0),ia=nn&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let wa;wa=nn?jt.iconsInText?ts(Dn.kind,ir,tt,ve,y,rl,Sl,ha,or,Ni):es(Dn.kind,ir,tt,ve,y,rl,Sl,ha,g,or):_a(Dn.kind,ir,tt,ve,y,rl,Sl,ha,g,or);const il={program:Nr,buffers:bn,uniformValues:wa,atlasTexture:mi,atlasTextureIcon:Ei,atlasInterpolation:$r,atlasInterpolationIcon:ra,isSDF:nn,hasHalo:ia};if(Re&&jt.canOverlap){We=!0;const gi=bn.segments.get();for(const Fi of gi)ft.push({segments:new o.S([Fi]),sortKey:Fi.sortKey,state:il,terrainData:Wn})}else ft.push({segments:bn.segments,sortKey:0,state:il,terrainData:Wn})}We&&ft.sort((Rt,yt)=>Rt.sortKey-yt.sortKey);for(const Rt of ft){const yt=Rt.state;if(le.activeTexture.set(Ie.TEXTURE0),yt.atlasTexture.bind(yt.atlasInterpolation,Ie.CLAMP_TO_EDGE),yt.atlasTextureIcon&&(le.activeTexture.set(Ie.TEXTURE1),yt.atlasTextureIcon&&yt.atlasTextureIcon.bind(yt.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),yt.isSDF){const jt=yt.uniformValues;yt.hasHalo&&(jt.u_is_halo=1,ua(yt.buffers,Rt.segments,c,y,yt.program,it,U,q,jt,Rt.terrainData)),jt.u_is_halo=0}ua(yt.buffers,Rt.segments,c,y,yt.program,it,U,q,yt.uniformValues,Rt.terrainData)}}function ua(y,r,c,p,g,b,C,M,B,F){const U=p.context;g.draw(U,U.gl.TRIANGLES,b,C,M,yr.disabled,B,F,c.id,y.layoutVertexBuffer,y.indexBuffer,r,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Ua(y,r,c,p,g){if(!c||!p||!p.imageAtlas)return;const b=p.imageAtlas.patternPositions;let C=b[c.to.toString()],M=b[c.from.toString()];if(!C&&M&&(C=M),!M&&C&&(M=C),!C||!M){const B=g.getPaintProperty(r);C=b[B],M=b[B]}C&&M&&y.setConstantPatternPositions(C,M)}function ca(y,r,c,p,g,b,C){const M=y.context.gl,B="fill-pattern",F=c.paint.get(B),U=F&&F.constantOr(1),q=c.getCrossfadeParameters();let le,Ie,Se,Pe,ve;C?(Ie=U&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=M.LINES):(Ie=U?"fillPattern":"fill",le=M.TRIANGLES);const Ze=F.constantOr(null);for(const tt of p){const Re=r.getTile(tt);if(U&&!Re.patternsLoaded())continue;const We=Re.getBucket(c);if(!We)continue;const it=We.programConfigurations.get(c.id),at=y.useProgram(Ie,it),ft=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);U&&(y.context.activeTexture.set(M.TEXTURE0),Re.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),it.updatePaintBuffers(q)),Ua(it,B,Ze,Re,c);const Rt=ft?tt:null,yt=y.translatePosMatrix(Rt?Rt.posMatrix:tt.posMatrix,Re,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(C){Pe=We.indexBuffer2,ve=We.segments2;const jt=[M.drawingBufferWidth,M.drawingBufferHeight];Se=Ie==="fillOutlinePattern"&&U?ma(yt,y,q,Re,jt):wi(yt,jt)}else Pe=We.indexBuffer,ve=We.segments,Se=U?Xr(yt,y,q,Re):Qa(yt);at.draw(y.context,le,g,y.stencilModeForClipping(tt),b,yr.disabled,Se,ft,c.id,We.layoutVertexBuffer,Pe,ve,c.paint,y.transform.zoom,it)}}function Bi(y,r,c,p,g,b,C){const M=y.context,B=M.gl,F="fill-extrusion-pattern",U=c.paint.get(F),q=U.constantOr(1),le=c.getCrossfadeParameters(),Ie=c.paint.get("fill-extrusion-opacity"),Se=U.constantOr(null);for(const Pe of p){const ve=r.getTile(Pe),Ze=ve.getBucket(c);if(!Ze)continue;const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Re=Ze.programConfigurations.get(c.id),We=y.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Re);q&&(y.context.activeTexture.set(B.TEXTURE0),ve.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Re.updatePaintBuffers(le)),Ua(Re,F,Se,ve,c);const it=y.translatePosMatrix(Pe.posMatrix,ve,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),at=c.paint.get("fill-extrusion-vertical-gradient"),ft=q?Ci(it,y,at,Ie,Pe,le,ve):xi(it,y,at,Ie);We.draw(M,M.gl.TRIANGLES,g,b,C,yr.backCCW,ft,tt,c.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,c.paint,y.transform.zoom,Re,y.style.map.terrain&&Ze.centroidVertexBuffer)}}function ws(y,r,c,p,g,b,C){const M=y.context,B=M.gl,F=c.fbo;if(!F)return;const U=y.useProgram("hillshade"),q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);M.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,F.colorAttachment.get()),U.draw(M,B.TRIANGLES,g,b,C,yr.disabled,((le,Ie,Se,Pe)=>{const ve=Se.paint.get("hillshade-shadow-color"),Ze=Se.paint.get("hillshade-highlight-color"),tt=Se.paint.get("hillshade-accent-color");let Re=Se.paint.get("hillshade-illumination-direction")*(Math.PI/180);Se.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=le.transform.angle);const We=!le.options.moving;return{u_matrix:Pe?Pe.posMatrix:le.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),We),u_image:0,u_latrange:ga(0,Ie.tileID),u_light:[Se.paint.get("hillshade-exaggeration"),Re],u_shadow:ve,u_highlight:Ze,u_accent:tt}})(y,c,p,q?r:null),q,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function ks(y,r,c,p,g,b){const C=y.context,M=C.gl,B=r.dem;if(B&&B.data){const F=B.dim,U=B.stride,q=B.getPixels();if(C.activeTexture.set(M.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(U),r.demTexture){const Ie=r.demTexture;Ie.update(q,{premultiply:!1}),Ie.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else r.demTexture=new fe(C,q,M.RGBA,{premultiply:!1}),r.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);C.activeTexture.set(M.TEXTURE0);let le=r.fbo;if(!le){const Ie=new fe(C,{width:F,height:F,data:null},M.RGBA);Ie.bind(M.LINEAR,M.CLAMP_TO_EDGE),le=r.fbo=C.createFramebuffer(F,F,!0,!1),le.colorAttachment.set(Ie.texture)}C.bindFramebuffer.set(le.framebuffer),C.viewport.set([0,0,F,F]),y.useProgram("hillshadePrepare").draw(C,M.TRIANGLES,p,g,b,yr.disabled,((Ie,Se)=>{const Pe=Se.stride,ve=o.Z();return o.aS(ve,0,o.N,-o.N,0,0,1),o.$(ve,ve,[0,-o.N,0]),{u_matrix:ve,u_image:1,u_dimension:[Pe,Pe],u_zoom:Ie.overscaledZ,u_unpack:Se.getUnpackVector()}})(r.tileID,B),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function ja(y,r,c,p,g,b){const C=p.paint.get("raster-fade-duration");if(!b&&C>0){const M=o.h.now(),B=(M-y.timeAdded)/C,F=r?(M-r.timeAdded)/C:-1,U=c.getSource(),q=g.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),le=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(y.tileID.overscaledZ-q),Ie=le&&y.refreshedUponExpiration?1:o.ad(le?B:1-F,0,1);return y.refreshedUponExpiration&&B>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const ss=new o.aT(1,0,0,1),Oi=new o.aT(0,1,0,1),Yi=new o.aT(0,0,1,1),Es=new o.aT(1,0,1,1),os=new o.aT(0,1,1,1);function Pi(y,r,c,p){Ys(y,0,r+c/2,y.transform.width,c,p)}function Xs(y,r,c,p){Ys(y,r-c/2,0,c,y.transform.height,p)}function Ys(y,r,c,p,g,b){const C=y.context,M=C.gl;M.enable(M.SCISSOR_TEST),M.scissor(r*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:b}),M.disable(M.SCISSOR_TEST)}function ls(y,r,c){const p=y.context,g=p.gl,b=c.posMatrix,C=y.useProgram("debug"),M=jn.disabled,B=gr.disabled,F=y.colorModeForRenderPass(),U="$debug",q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const le=r.getTileByID(c.key).latestRawTileData,Ie=Math.floor((le&&le.byteLength||0)/1024),Se=r.getTile(c).tileSize,Pe=512/Math.min(Se,512)*(c.overscaledZ/y.transform.zoom)*.5;let ve=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ve+=` => ${c.overscaledZ}`),function(Ze,tt){Ze.initDebugOverlayCanvas();const Re=Ze.debugOverlayCanvas,We=Ze.context.gl,it=Ze.debugOverlayCanvas.getContext("2d");it.clearRect(0,0,Re.width,Re.height),it.shadowColor="white",it.shadowBlur=2,it.lineWidth=1.5,it.strokeStyle="white",it.textBaseline="top",it.font="bold 36px Open Sans, sans-serif",it.fillText(tt,5,5),it.strokeText(tt,5,5),Ze.debugOverlayTexture.update(Re),Ze.debugOverlayTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE)}(y,`${ve} ${Ie}kB`),C.draw(p,g.TRIANGLES,M,B,pn.alphaBlended,yr.disabled,ea(b,o.aT.transparent,Pe),null,U,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,M,B,F,yr.disabled,ea(b,o.aT.red),q,U,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Rr(y,r,c){const p=y.context,g=p.gl,b=y.colorModeForRenderPass(),C=new jn(g.LEQUAL,jn.ReadWrite,y.depthRangeFor3D),M=y.useProgram("terrain"),B=r.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const F of c){const U=y.renderToTexture.getTexture(F),q=r.getTerrainData(F.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,U.texture);const le={u_matrix:y.transform.calculatePosMatrix(F.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};M.draw(p,g.TRIANGLES,C,gr.disabled,b,yr.backCCW,le,q,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class us{constructor(r,c){this.context=new Na(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.Z(),renderTime:0},this.setup(),this.numSublayers=Et.maxUnderzooming+Et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fi}resize(r,c,p){if(this.width=Math.floor(r*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,c=new o.a_;c.emplaceBack(0,0),c.emplaceBack(o.N,0),c.emplaceBack(0,o.N),c.emplaceBack(o.N,o.N),this.tileExtentBuffer=r.createVertexBuffer(c,St.members),this.tileExtentSegments=o.S.simpleSegment(0,0,4,2);const p=new o.a_;p.emplaceBack(0,0),p.emplaceBack(o.N,0),p.emplaceBack(0,o.N),p.emplaceBack(o.N,o.N),this.debugBuffer=r.createVertexBuffer(p,St.members),this.debugSegments=o.S.simpleSegment(0,0,4,5);const g=new o.V;g.emplaceBack(0,0,0,0),g.emplaceBack(o.N,0,o.N,0),g.emplaceBack(0,o.N,0,o.N),g.emplaceBack(o.N,o.N,o.N,o.N),this.rasterBoundsBuffer=r.createVertexBuffer(g,sn.members),this.rasterBoundsSegments=o.S.simpleSegment(0,0,4,2);const b=new o.a_;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(b,St.members),this.viewportSegments=o.S.simpleSegment(0,0,4,2);const C=new o.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const M=new o.b0;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(M);const B=this.context.gl;this.stencilClearMode=new gr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=o.Z();o.aS(p,0,this.width,this.height,0,0,1),o.a0(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,jn.disabled,this.stencilClearMode,pn.disabled,yr.disabled,vs(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(pn.disabled),p.setDepthMode(jn.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of c){const M=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);b.draw(p,g.TRIANGLES,jn.disabled,new gr({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),pn.disabled,yr.disabled,vs(C.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new gr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new gr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,p=r.sort((C,M)=>M.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,b=p[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const C={};for(let M=0;M<b;M++)C[M+g]=new gr({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[C,p]}return[{[g]:gr.disabled},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new pn([r.CONSTANT_COLOR,r.ONE],new o.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pn.unblended:pn.alphaBlended}depthModeForSublayer(r,c,p){if(!this.opaquePassEnabledForLayer())return jn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new jn(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(o.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,b={},C={},M={};for(const B in g){const F=g[B];F.used&&F.prepare(this.context),b[B]=F.getVisibleCoordinates(),C[B]=b[B].slice().reverse(),M[B]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<p.length;B++)if(this.style._layers[p[B]].is3D()){this.opaquePassCutoff=B;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const B=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||B.length)&&(o.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(F,U){const q=F.context,le=q.gl,Ie=pn.unblended,Se=new jn(le.LEQUAL,jn.ReadWrite,[0,1]),Pe=U.getTerrainMesh(),ve=U.sourceCache.getRenderableTiles(),Ze=F.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),q.clear({color:o.aT.transparent,depth:1});for(const tt of ve){const Re=U.getTerrainData(tt.tileID),We={u_matrix:F.transform.calculatePosMatrix(tt.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(F.transform.zoom)};Ze.draw(q,le.TRIANGLES,Se,gr.disabled,Ie,yr.backCCW,We,Re,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,F.width,F.height])}(this,this.style.map.terrain),function(F,U){const q=F.context,le=q.gl,Ie=pn.unblended,Se=new jn(le.LEQUAL,jn.ReadWrite,[0,1]),Pe=U.getTerrainMesh(),ve=U.getCoordsTexture(),Ze=U.sourceCache.getRenderableTiles(),tt=F.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),q.clear({color:o.aT.transparent,depth:1}),U.coordsIndex=[];for(const Re of Ze){const We=U.getTerrainData(Re.tileID);q.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,ve.texture);const it={u_matrix:F.transform.calculatePosMatrix(Re.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(F.transform.zoom)};tt.draw(q,le.TRIANGLES,Se,gr.disabled,Ie,yr.backCCW,it,We,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments),U.coordsIndex.push(Re.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,F.width,F.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const B of p){const F=this.style._layers[B];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const U=C[F.source];(F.type==="custom"||U.length)&&this.renderLayer(this,g[F.source],F,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.aT.black:o.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[p[this.currentLayer]],F=g[B.source],U=b[B.source];this._renderTileClippingMasks(B,U),this.renderLayer(this,F,B,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const B=this.style._layers[p[this.currentLayer]],F=g[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const U=(B.type==="symbol"?M:C)[B.source];this._renderTileClippingMasks(B,b[B.source]),this.renderLayer(this,F,B,U)}if(this.options.showTileBoundaries){const B=function(F,U){let q=null;const le=Object.values(F._layers).flatMap(ve=>ve.source&&!ve.isHidden(U)?[F.sourceCaches[ve.source]]:[]),Ie=le.filter(ve=>ve.getSource().type==="vector"),Se=le.filter(ve=>ve.getSource().type!=="vector"),Pe=ve=>{(!q||q.getSource().maxzoom<ve.getSource().maxzoom)&&(q=ve)};return Ie.forEach(ve=>Pe(ve)),q||Se.forEach(ve=>Pe(ve)),q}(this.style,this.transform.zoom);B&&function(F,U,q){for(let le=0;le<q.length;le++)ls(F,U,q[le])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const F=B.transform.padding;Pi(B,B.transform.height-(F.top||0),3,ss),Pi(B,F.bottom||0,3,Oi),Xs(B,F.left||0,3,Yi),Xs(B,B.transform.width-(F.right||0),3,Es);const U=B.transform.centerPoint;(function(q,le,Ie,Se){Ys(q,le-1,Ie-10,2,20,Se),Ys(q,le-10,Ie-1,20,2,Se)})(B,U.x,B.transform.height-U.y,os)}(this),this.context.setDefault()}renderLayer(r,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(b,C,M,B,F){if(b.renderPass!=="translucent")return;const U=gr.disabled,q=b.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(le,Ie,Se,Pe,ve,Ze,tt){const Re=Ie.transform,We=ve==="map",it=Ze==="map";for(const at of le){const ft=Pe.getTile(at),Rt=ft.getBucket(Se);if(!Rt||!Rt.text||!Rt.text.segments.get().length)continue;const yt=o.ah(Rt.textSizeData,Re.zoom),jt=te(ft,1,Ie.transform.zoom),bn=vt(at.posMatrix,it,We,Ie.transform,jt),sr=Se.layout.get("icon-text-fit")!=="none"&&Rt.hasIconData();if(yt){const nn=Math.pow(2,Re.zoom-ft.tileID.overscaledZ);na(Rt,We,it,tt,Re,bn,at.posMatrix,nn,yt,sr,Ie.style.map.terrain?(Dn,wn)=>Ie.style.map.terrain.getElevation(at,Dn,wn):null)}}}(B,b,M,C,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),F),M.paint.get("icon-opacity").constantOr(1)!==0&&ba(b,C,M,B,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),U,q),M.paint.get("text-opacity").constantOr(1)!==0&&ba(b,C,M,B,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),U,q),C.map.showCollisionBoxes&&(va(b,C,M,B,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),!0),va(b,C,M,B,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),!1))})(r,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(b,C,M,B){if(b.renderPass!=="translucent")return;const F=M.paint.get("circle-opacity"),U=M.paint.get("circle-stroke-width"),q=M.paint.get("circle-stroke-opacity"),le=!M.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(U.constantOr(1)===0||q.constantOr(1)===0))return;const Ie=b.context,Se=Ie.gl,Pe=b.depthModeForSublayer(0,jn.ReadOnly),ve=gr.disabled,Ze=b.colorModeForRenderPass(),tt=[];for(let Re=0;Re<B.length;Re++){const We=B[Re],it=C.getTile(We),at=it.getBucket(M);if(!at)continue;const ft=at.programConfigurations.get(M.id),Rt=b.useProgram("circle",ft),yt=at.layoutVertexBuffer,jt=at.indexBuffer,bn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(We),sr={programConfiguration:ft,program:Rt,layoutVertexBuffer:yt,indexBuffer:jt,uniformValues:Xi(b,We,it,M),terrainData:bn};if(le){const nn=at.segments.get();for(const Dn of nn)tt.push({segments:new o.S([Dn]),sortKey:Dn.sortKey,state:sr})}else tt.push({segments:at.segments,sortKey:0,state:sr})}le&&tt.sort((Re,We)=>Re.sortKey-We.sortKey);for(const Re of tt){const{programConfiguration:We,program:it,layoutVertexBuffer:at,indexBuffer:ft,uniformValues:Rt,terrainData:yt}=Re.state;it.draw(Ie,Se.TRIANGLES,Pe,ve,Ze,yr.disabled,Rt,yt,M.id,at,ft,Re.segments,M.paint,b.transform.zoom,We)}})(r,c,p,g);break;case"heatmap":(function(b,C,M,B){if(M.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const F=b.context,U=F.gl,q=gr.disabled,le=new pn([U.ONE,U.ONE],o.aT.transparent,[!0,!0,!0,!0]);(function(Ie,Se,Pe){const ve=Ie.gl;Ie.activeTexture.set(ve.TEXTURE1),Ie.viewport.set([0,0,Se.width/4,Se.height/4]);let Ze=Pe.heatmapFbo;if(Ze)ve.bindTexture(ve.TEXTURE_2D,Ze.colorAttachment.get()),Ie.bindFramebuffer.set(Ze.framebuffer);else{const tt=ve.createTexture();ve.bindTexture(ve.TEXTURE_2D,tt),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR),Ze=Pe.heatmapFbo=Ie.createFramebuffer(Se.width/4,Se.height/4,!1,!1),function(Re,We,it,at){var ft,Rt;const yt=Re.gl,jt=(ft=Re.HALF_FLOAT)!==null&&ft!==void 0?ft:yt.UNSIGNED_BYTE,bn=(Rt=Re.RGBA16F)!==null&&Rt!==void 0?Rt:yt.RGBA;yt.texImage2D(yt.TEXTURE_2D,0,bn,We.width/4,We.height/4,0,yt.RGBA,jt,null),at.colorAttachment.set(it)}(Ie,Se,tt,Ze)}})(F,b,M),F.clear({color:o.aT.transparent});for(let Ie=0;Ie<B.length;Ie++){const Se=B[Ie];if(C.hasRenderableParent(Se))continue;const Pe=C.getTile(Se),ve=Pe.getBucket(M);if(!ve)continue;const Ze=ve.programConfigurations.get(M.id),tt=b.useProgram("heatmap",Ze),{zoom:Re}=b.transform;tt.draw(F,U.TRIANGLES,jn.disabled,q,le,yr.disabled,Ds(Se.posMatrix,Pe,Re,M.paint.get("heatmap-intensity")),null,M.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,M.paint,b.transform.zoom,Ze)}F.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(F,U){const q=F.context,le=q.gl,Ie=U.heatmapFbo;if(!Ie)return;q.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,Ie.colorAttachment.get()),q.activeTexture.set(le.TEXTURE1);let Se=U.colorRampTexture;Se||(Se=U.colorRampTexture=new fe(q,U.colorRamp,le.RGBA)),Se.bind(le.LINEAR,le.CLAMP_TO_EDGE),F.useProgram("heatmapTexture").draw(q,le.TRIANGLES,jn.disabled,gr.disabled,F.colorModeForRenderPass(),yr.disabled,((Pe,ve,Ze,tt)=>{const Re=o.Z();o.aS(Re,0,Pe.width,Pe.height,0,0,1);const We=Pe.context.gl;return{u_matrix:Re,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ve.paint.get("heatmap-opacity")}})(F,U),null,U.id,F.viewportBuffer,F.quadTriangleIndexBuffer,F.viewportSegments,U.paint,F.transform.zoom)}(b,M))})(r,c,p,g);break;case"line":(function(b,C,M,B){if(b.renderPass!=="translucent")return;const F=M.paint.get("line-opacity"),U=M.paint.get("line-width");if(F.constantOr(1)===0||U.constantOr(1)===0)return;const q=b.depthModeForSublayer(0,jn.ReadOnly),le=b.colorModeForRenderPass(),Ie=M.paint.get("line-dasharray"),Se=M.paint.get("line-pattern"),Pe=Se.constantOr(1),ve=M.paint.get("line-gradient"),Ze=M.getCrossfadeParameters(),tt=Pe?"linePattern":Ie?"lineSDF":ve?"lineGradient":"line",Re=b.context,We=Re.gl;let it=!0;for(const at of B){const ft=C.getTile(at);if(Pe&&!ft.patternsLoaded())continue;const Rt=ft.getBucket(M);if(!Rt)continue;const yt=Rt.programConfigurations.get(M.id),jt=b.context.program.get(),bn=b.useProgram(tt,yt),sr=it||bn.program!==jt,nn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(at),Dn=Se.constantOr(null);if(Dn&&ft.imageAtlas){const ir=ft.imageAtlas,Wn=ir.patternPositions[Dn.to.toString()],or=ir.patternPositions[Dn.from.toString()];Wn&&or&&yt.setConstantPatternPositions(Wn,or)}const wn=nn?at:null,Nr=Pe?po(b,ft,M,Ze,wn):Ie?Da(b,ft,M,Ie,Ze,wn):ve?za(b,ft,M,Rt.lineClipsArray.length,wn):ta(b,ft,M,wn);if(Pe)Re.activeTexture.set(We.TEXTURE0),ft.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),yt.updatePaintBuffers(Ze);else if(Ie&&(sr||b.lineAtlas.dirty))Re.activeTexture.set(We.TEXTURE0),b.lineAtlas.bind(Re);else if(ve){const ir=Rt.gradients[M.id];let Wn=ir.texture;if(M.gradientVersion!==ir.version){let or=256;if(M.stepInterpolant){const mi=C.getSource().maxzoom,$r=at.canonical.z===mi?Math.ceil(1<<b.transform.maxZoom-at.canonical.z):1;or=o.ad(o.aY(Rt.maxLineLength/o.N*1024*$r),256,Re.maxTextureSize)}ir.gradient=o.aZ({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:or,image:ir.gradient||void 0,clips:Rt.lineClipsArray}),ir.texture?ir.texture.update(ir.gradient):ir.texture=new fe(Re,ir.gradient,We.RGBA),ir.version=M.gradientVersion,Wn=ir.texture}Re.activeTexture.set(We.TEXTURE0),Wn.bind(M.stepInterpolant?We.NEAREST:We.LINEAR,We.CLAMP_TO_EDGE)}bn.draw(Re,We.TRIANGLES,q,b.stencilModeForClipping(at),le,yr.disabled,Nr,nn,M.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,M.paint,b.transform.zoom,yt,Rt.layoutVertexBuffer2),it=!1}})(r,c,p,g);break;case"fill":(function(b,C,M,B){const F=M.paint.get("fill-color"),U=M.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const q=b.colorModeForRenderPass(),le=M.paint.get("fill-pattern"),Ie=b.opaquePassEnabledForLayer()&&!le.constantOr(1)&&F.constantOr(o.aT.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===Ie){const Se=b.depthModeForSublayer(1,b.renderPass==="opaque"?jn.ReadWrite:jn.ReadOnly);ca(b,C,M,B,Se,q,!1)}if(b.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Se=b.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);ca(b,C,M,B,Se,q,!0)}})(r,c,p,g);break;case"fill-extrusion":(function(b,C,M,B){const F=M.paint.get("fill-extrusion-opacity");if(F!==0&&b.renderPass==="translucent"){const U=new jn(b.context.gl.LEQUAL,jn.ReadWrite,b.depthRangeFor3D);if(F!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Bi(b,C,M,B,U,gr.disabled,pn.disabled),Bi(b,C,M,B,U,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const q=b.colorModeForRenderPass();Bi(b,C,M,B,U,gr.disabled,q)}}})(r,c,p,g);break;case"hillshade":(function(b,C,M,B){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const F=b.context,U=b.depthModeForSublayer(0,jn.ReadOnly),q=b.colorModeForRenderPass(),[le,Ie]=b.renderPass==="translucent"?b.stencilConfigForOverlap(B):[{},B];for(const Se of Ie){const Pe=C.getTile(Se);Pe.needsHillshadePrepare!==void 0&&Pe.needsHillshadePrepare&&b.renderPass==="offscreen"?ks(b,Pe,M,U,gr.disabled,q):b.renderPass==="translucent"&&ws(b,Se,Pe,M,U,le[Se.overscaledZ],q)}F.viewport.set([0,0,b.width,b.height])})(r,c,p,g);break;case"raster":(function(b,C,M,B){if(b.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!B.length)return;const F=b.context,U=F.gl,q=C.getSource(),le=b.useProgram("raster"),Ie=b.colorModeForRenderPass(),[Se,Pe]=q instanceof Dt?[{},B]:b.stencilConfigForOverlap(B),ve=Pe[Pe.length-1].overscaledZ,Ze=!b.options.moving;for(const tt of Pe){const Re=b.depthModeForSublayer(tt.overscaledZ-ve,M.paint.get("raster-opacity")===1?jn.ReadWrite:jn.ReadOnly,U.LESS),We=C.getTile(tt);We.registerFadeDuration(M.paint.get("raster-fade-duration"));const it=C.findLoadedParent(tt,0),at=ja(We,it,C,M,b.transform,b.style.map.terrain);let ft,Rt;const yt=M.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;F.activeTexture.set(U.TEXTURE0),We.texture.bind(yt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(U.TEXTURE1),it?(it.texture.bind(yt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,it.tileID.overscaledZ-We.tileID.overscaledZ),Rt=[We.tileID.canonical.x*ft%1,We.tileID.canonical.y*ft%1]):We.texture.bind(yt,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const jt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(tt),bn=jt?tt:null,sr=bn?bn.posMatrix:b.transform.calculatePosMatrix(tt.toUnwrapped(),Ze),nn=Hs(sr,Rt||[0,0],ft||1,at,M);q instanceof Dt?le.draw(F,U.TRIANGLES,Re,gr.disabled,Ie,yr.disabled,nn,jt,M.id,q.boundsBuffer,b.quadTriangleIndexBuffer,q.boundsSegments):le.draw(F,U.TRIANGLES,Re,Se[tt.overscaledZ],Ie,yr.disabled,nn,jt,M.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(r,c,p,g);break;case"background":(function(b,C,M,B){const F=M.paint.get("background-color"),U=M.paint.get("background-opacity");if(U===0)return;const q=b.context,le=q.gl,Ie=b.transform,Se=Ie.tileSize,Pe=M.paint.get("background-pattern");if(b.isPatternMissing(Pe))return;const ve=!Pe&&F.a===1&&U===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ve)return;const Ze=gr.disabled,tt=b.depthModeForSublayer(0,ve==="opaque"?jn.ReadWrite:jn.ReadOnly),Re=b.colorModeForRenderPass(),We=b.useProgram(Pe?"backgroundPattern":"background"),it=B||Ie.coveringTiles({tileSize:Se,terrain:b.style.map.terrain});Pe&&(q.activeTexture.set(le.TEXTURE0),b.imageManager.bind(b.context));const at=M.getCrossfadeParameters();for(const ft of it){const Rt=B?ft.posMatrix:b.transform.calculatePosMatrix(ft.toUnwrapped()),yt=Pe?ri(Rt,U,b,Pe,{tileID:ft,tileSize:Se},at):Ws(Rt,U,F),jt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ft);We.draw(q,le.TRIANGLES,tt,Ze,Re,yr.disabled,yt,jt,M.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(r,0,p,g);break;case"custom":(function(b,C,M){const B=b.context,F=M.implementation;if(b.renderPass==="offscreen"){const U=F.prerender;U&&(b.setCustomLayerDefaults(),B.setColorMode(b.colorModeForRenderPass()),U.call(F,B.gl,b.transform.customLayerMatrix()),B.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),B.setColorMode(b.colorModeForRenderPass()),B.setStencilMode(gr.disabled);const U=F.renderingMode==="3d"?new jn(b.context.gl.LEQUAL,jn.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,jn.ReadOnly);B.setDepthMode(U),F.render(B.gl,b.transform.customLayerMatrix()),B.setDirty(),b.setBaseState(),B.bindFramebuffer.set(null)}})(r,0,p)}}translatePosMatrix(r,c,p,g,b){if(!p[0]&&!p[1])return r;const C=b?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const F=Math.sin(C),U=Math.cos(C);p=[p[0]*U-p[1]*F,p[0]*F+p[1]*U]}const M=[b?p[0]:te(c,p[0],this.transform.zoom),b?p[1]:te(c,p[1],this.transform.zoom),0],B=new Float32Array(16);return o.$(B,r,M),B}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!c||!p}useProgram(r,c){this.cache=this.cache||{};const p=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Ai(this.context,dr[r],c,bs[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new fe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class qn{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,p){const g=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const B=1/(M=o.ag([],M,r))[3]/c*g;return o.b3(M,M,[B,B,1/M[3],B])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const B=function(le,Ie){var Se=Ie[0],Pe=Ie[1],ve=Ie[2],Ze=Se*Se+Pe*Pe+ve*ve;return Ze>0&&(Ze=1/Math.sqrt(Ze)),le[0]=Ie[0]*Ze,le[1]=Ie[1]*Ze,le[2]=Ie[2]*Ze,le}([],function(le,Ie,Se){var Pe=Ie[0],ve=Ie[1],Ze=Ie[2],tt=Se[0],Re=Se[1],We=Se[2];return le[0]=ve*We-Ze*Re,le[1]=Ze*tt-Pe*We,le[2]=Pe*Re-ve*tt,le}([],Q([],b[M[0]],b[M[1]]),Q([],b[M[2]],b[M[1]]))),F=-((U=B)[0]*(q=b[M[1]])[0]+U[1]*q[1]+U[2]*q[2]);var U,q;return B.concat(F)});return new qn(b,C)}}class yo{constructor(r,c){this.min=r,this.max=c,this.center=function(p,g,b){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,b){return p[0]=g[0]+b[0],p[1]=g[1]+b[1],p[2]=g[2]+b[2],p}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],p=Y(this.min),g=Y(this.max);for(let b=0;b<c.length;b++)p[b]=c[b]?this.min[b]:this.center[b],g[b]=c[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new yo(p,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<r.planes.length;g++){const b=r.planes[g];let C=0;for(let M=0;M<c.length;M++)o.b4(b,c[M])>=0&&C++;if(C===0)return 0;C!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let M=0;M<r.points.length;M++){const B=r.points[M][g]-this.min[g];b=Math.min(b,B),C=Math.max(C,B)}if(C<0||b>this.max[g]-this.min[g])return 0}return 1}}class Lo{constructor(r=0,c=0,p=0,g=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=p,this.right=g}interpolate(r,c,p){return c.top!=null&&r.top!=null&&(this.top=o.B.number(r.top,c.top,p)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.B.number(r.bottom,c.bottom,p)),c.left!=null&&r.left!=null&&(this.left=o.B.number(r.left,c.left,p)),c.right!=null&&r.right!=null&&(this.right=o.B.number(r.right,c.right,p)),this}getCenter(r,c){const p=o.ad((this.left+r-this.right)/2,0,r),g=o.ad((this.top+c-this.bottom)/2,0,c);return new o.P(p,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Lo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Os{constructor(r,c,p,g,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Os(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-o.b5(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new o.A(4);return o.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,b){var C=g[0],M=g[1],B=g[2],F=g[3],U=Math.sin(b),q=Math.cos(b);p[0]=C*q+B*U,p[1]=M*q+F*U,p[2]=C*-U+B*q,p[3]=M*-U+F*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=o.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,p){this._unmodified=!1,this._edgeInsets.interpolate(r,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new o.b6(0,r)];if(this._renderWorldCopies){const p=this.pointCoordinate(new o.P(0,0)),g=this.pointCoordinate(new o.P(this.width,0)),b=this.pointCoordinate(new o.P(this.width,this.height)),C=this.pointCoordinate(new o.P(0,this.height)),M=Math.floor(Math.min(p.x,g.x,b.x,C.x)),B=Math.floor(Math.max(p.x,g.x,b.x,C.x)),F=1;for(let U=M-F;U<=B+F;U++)U!==0&&c.push(new o.b6(U,r))}return c}coveringTiles(r){var c,p;let g=this.coveringZoomLevel(r);const b=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),M=o.U.fromLngLat(this.center),B=Math.pow(2,g),F=[B*C.x,B*C.y,0],U=[B*M.x,B*M.y,0],q=qn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let le=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(le=g);const Ie=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Se=Re=>({aabb:new yo([Re*B,0,0],[(Re+1)*B,B,0]),zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),Pe=[],ve=[],Ze=g,tt=r.reparseOverscaled?b:g;if(this._renderWorldCopies)for(let Re=1;Re<=3;Re++)Pe.push(Se(-Re)),Pe.push(Se(Re));for(Pe.push(Se(0));Pe.length>0;){const Re=Pe.pop(),We=Re.x,it=Re.y;let at=Re.fullyVisible;if(!at){const bn=Re.aabb.intersects(q);if(bn===0)continue;at=bn===2}const ft=r.terrain?F:U,Rt=Re.aabb.distanceX(ft),yt=Re.aabb.distanceY(ft),jt=Math.max(Math.abs(Rt),Math.abs(yt));if(Re.zoom===Ze||jt>Ie+(1<<Ze-Re.zoom)-2&&Re.zoom>=le){const bn=Ze-Re.zoom,sr=F[0]-.5-(We<<bn),nn=F[1]-.5-(it<<bn);ve.push({tileID:new o.O(Re.zoom===Ze?tt:Re.zoom,Re.wrap,Re.zoom,We,it),distanceSq:se([U[0]-.5-We,U[1]-.5-it]),tileDistanceToCamera:Math.sqrt(sr*sr+nn*nn)})}else for(let bn=0;bn<4;bn++){const sr=(We<<1)+bn%2,nn=(it<<1)+(bn>>1),Dn=Re.zoom+1;let wn=Re.aabb.quadrant(bn);if(r.terrain){const Nr=new o.O(Dn,Re.wrap,Dn,sr,nn),ir=r.terrain.getMinMaxElevation(Nr),Wn=(c=ir.minElevation)!==null&&c!==void 0?c:this.elevation,or=(p=ir.maxElevation)!==null&&p!==void 0?p:this.elevation;wn=new yo([wn.min[0],wn.min[1],Wn],[wn.max[0],wn.max[1],or])}Pe.push({aabb:wn,zoom:Dn,x:sr,y:nn,wrap:Re.wrap,fullyVisible:at})}}return ve.sort((Re,We)=>Re.distanceSq-We.distanceSq).map(Re=>Re.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=o.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.P(o.G(r.lng)*this.worldSize,o.H(c)*this.worldSize)}unproject(r){return new o.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.pointLocation(this.centerPoint,r),p=r.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),b=o.U.fromLngLat(g.lngLat,g.altitude),C=o.U.fromLngLat(c,p),M=b.x-C.x,B=b.y-C.y,F=b.z-C.z,U=Math.sqrt(M*M+B*B+F*F),q=this.scaleZoom(this.cameraToCenterDistance/U/this.tileSize);this._elevation=p,this._center=c,this.zoom=q}setLocationAtPoint(r,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(r),C=new o.U(b.x-(p.x-g.x),b.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return o.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const le=c.pointCoordinate(r);if(le!=null)return le}const p=[r.x,r.y,0,1],g=[r.x,r.y,1,1];o.ag(p,p,this.pixelMatrixInverse),o.ag(g,g,this.pixelMatrixInverse);const b=p[3],C=g[3],M=p[1]/b,B=g[1]/C,F=p[2]/b,U=g[2]/C,q=F===U?0:(0-F)/(U-F);return new o.U(o.B.number(p[0]/b,g[0]/C,q)/this.worldSize,o.B.number(M,B,q)/this.worldSize)}coordinatePoint(r,c=0,p=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.ag(g,g,p),new o.P(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Fe().extend(this.pointLocation(new o.P(0,r))).extend(this.pointLocation(new o.P(this.width,r))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Fe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,c=!1){const p=r.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const b=r.canonical,C=this.worldSize/this.zoomScale(b.z),M=b.x+Math.pow(2,b.z)*r.wrap,B=o.ao(new Float64Array(16));return o.$(B,B,[M*C,b.y*C,0]),o.a0(B,B,[C/o.N,C/o.N,1]),o.a1(B,c?this.alignedProjMatrix:this.projMatrix,B),g[p]=new Float32Array(B),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,c,p,g,b=-90,C=90,M=-180,B=180;const F=this.size,U=this._unmodified;if(this.latRange){const Ie=this.latRange;b=o.H(Ie[1])*this.worldSize,C=o.H(Ie[0])*this.worldSize,r=C-b<F.y?F.y/(C-b):0}if(this.lngRange){const Ie=this.lngRange;M=o.b5(o.G(Ie[0])*this.worldSize,0,this.worldSize),B=o.b5(o.G(Ie[1])*this.worldSize,0,this.worldSize),B<M&&(B+=this.worldSize),c=B-M<F.x?F.x/(B-M):0}const q=this.point,le=Math.max(c||0,r||0);if(le)return this.center=this.unproject(new o.P(c?(B+M)/2:q.x,r?(C+b)/2:q.y)),this.zoom+=this.scaleZoom(le),this._unmodified=U,void(this._constraining=!1);if(this.latRange){const Ie=q.y,Se=F.y/2;Ie-Se<b&&(g=b+Se),Ie+Se>C&&(g=C-Se)}if(this.lngRange){const Ie=(M+B)/2,Se=o.b5(q.x,Ie-this.worldSize/2,Ie+this.worldSize/2),Pe=F.x/2;Se-Pe<M&&(p=M+Pe),Se+Pe>B&&(p=B-Pe)}p===void 0&&g===void 0||(this.center=this.unproject(new o.P(p!==void 0?p:q.x,g!==void 0?g:q.y)).wrap()),this._unmodified=U,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b7(1,this.center.lat)*this.worldSize;let g=o.ao(new Float64Array(16));o.a0(g,g,[this.width/2,-this.height/2,1]),o.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=o.ao(new Float64Array(16)),o.a0(g,g,[1,-1,1]),o.$(g,g,[-1,-1,0]),o.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),M=b-C*this._pixelPerMeter/Math.cos(this._pitch),B=C<0?M:b,F=Math.PI/2+this._pitch,U=this._fov*(.5+r.y/this.height),q=Math.sin(U)*B/Math.sin(o.ad(Math.PI-F-U,.01,Math.PI-.01)),le=this.getHorizon(),Ie=2*Math.atan(le/this.cameraToCenterDistance)*(.5+r.y/(2*le)),Se=Math.sin(Ie)*B/Math.sin(o.ad(Math.PI-F-Ie,.01,Math.PI-.01)),Pe=Math.min(q,Se),ve=1.01*(Math.cos(Math.PI/2-this._pitch)*Pe+B),Ze=this.height/50;g=new Float64Array(16),o.b8(g,this._fov,this.width/this.height,Ze,ve),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,o.a0(g,g,[1,-1,1]),o.$(g,g,[0,0,-this.cameraToCenterDistance]),o.b9(g,g,this._pitch),o.ae(g,g,this.angle),o.$(g,g,[-c,-p,0]),this.mercatorMatrix=o.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),o.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.a1(new Float64Array(16),this.labelPlaneMatrix,g),o.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=o.as([],g),this.pixelMatrix3D=o.a1(new Float64Array(16),this.labelPlaneMatrix,g);const tt=this.width%2/2,Re=this.height%2/2,We=Math.cos(this.angle),it=Math.sin(this.angle),at=c-Math.round(c)+We*tt+it*Re,ft=p-Math.round(p)+We*Re+it*tt,Rt=new Float64Array(g);if(o.$(Rt,Rt,[at>.5?at-1:at,ft>.5?ft-1:ft,0]),this.alignedProjMatrix=Rt,g=o.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let p=c.x,g=c.y,b=c.x,C=c.y;for(const M of r)p=Math.min(p,M.x),g=Math.min(g,M.y),b=Math.max(b,M.x),C=Math.max(C,M.y);return[new o.P(p,g),new o.P(b,g),new o.P(b,C),new o.P(p,C),new o.P(p,g)]}}}function Js(y,r){let c,p=!1,g=null,b=null;const C=()=>{g=null,p&&(y.apply(b,c),g=setTimeout(C,r),p=!1)};return(...M)=>(p=!0,b=this,c=M,g||C(),g)}class Ro{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Js(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,g),C=Math.round(c.lng*b)/b,M=Math.round(c.lat*b)/b,B=this._map.getBearing(),F=this._map.getPitch();let U="";if(U+=r?`/${C}/${M}/${p}`:`${p}/${M}/${C}`,(B||F)&&(U+="/"+Math.round(10*B)/10),F&&(U+=`/${Math.round(F)}`),this._hashName){const q=this._hashName;let le=!1;const Ie=window.location.hash.slice(1).split("&").map(Se=>{const Pe=Se.split("=")[0];return Pe===q?(le=!0,`${Pe}=${U}`):Se}).filter(Se=>Se);return le||Ie.push(`${q}=${U}`),`#${Ie.join("&")}`}return`#${U}`}}const bl={linearity:.3,easing:o.ba(0,0,.3,1)},rh=o.e({deceleration:2500,maxSpeed:1400},bl),ih=o.e({deceleration:20,maxSpeed:1400},bl),ah=o.e({deceleration:1e3,maxSpeed:360},bl),sh=o.e({deceleration:1e3,maxSpeed:90},bl);class oh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=o.h.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const b=Nl(c.pan.mag(),p,o.e({},rh,r||{}));g.offset=c.pan.mult(b.amount/c.pan.mag()),g.center=this._map.transform.center,Qs(g,b)}if(c.zoom){const b=Nl(c.zoom,p,ih);g.zoom=this._map.transform.zoom+b.amount,Qs(g,b)}if(c.bearing){const b=Nl(c.bearing,p,ah);g.bearing=this._map.transform.bearing+o.ad(b.amount,-179,179),Qs(g,b)}if(c.pitch){const b=Nl(c.pitch,p,sh);g.pitch=this._map.transform.pitch+b.amount,Qs(g,b)}if(g.zoom||g.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;g.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),o.e(g,{noMoveStart:!0})}}function Qs(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Nl(y,r,c){const{maxSpeed:p,linearity:g,deceleration:b}=c,C=o.ad(y*g/(r/1e3),-p,p),M=Math.abs(C)/(b*g);return{easing:c.easing,duration:1e3*M,amount:C*(M/2)}}class cs extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p,g={}){const b=v.mousePos(c.getCanvasContainer(),p),C=c.unproject(b);super(r,o.e({point:b,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class Fl extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){const g=r==="touchend"?p.changedTouches:p.touches,b=v.touchPos(c.getCanvasContainer(),g),C=b.map(B=>c.unproject(B)),M=b.reduce((B,F,U,q)=>B.add(F.div(q.length)),new o.P(0,0));super(r,{points:b,point:M,lngLats:C,lngLat:c.unproject(M),originalEvent:p}),this._defaultPrevented=!1}}class lh extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class uh{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new lh(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new cs(r.type,this._map,r))}mouseup(r){this._map.fire(new cs(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new cs(r.type,this._map,r))}dblclick(r){return this._firePreventable(new cs(r.type,this._map,r))}mouseover(r){this._map.fire(new cs(r.type,this._map,r))}mouseout(r){this._map.fire(new cs(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Fl(r.type,this._map,r))}touchmove(r){this._map.fire(new Fl(r.type,this._map,r))}touchend(r){this._map.fire(new Fl(r.type,this._map,r))}touchcancel(r){this._map.fire(new Fl(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ch{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new cs(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new cs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new cs(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bo{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(o.P.convert(r),this._map.terrain)}}class hh{constructor(r,c){this._map=r,this._tr=new Bo(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(v.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=v.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(g.x,p.x),C=Math.max(g.x,p.x),M=Math.min(g.y,p.y),B=Math.max(g.y,p.y);v.setTransform(this._box,`translate(${b}px,${M}px)`),this._box.style.width=C-b+"px",this._box.style.height=B-M+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const p=this._startPos,g=c;if(this.reset(),v.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.k(r,{originalEvent:c}))}}function Ss(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=r[p];return c}class vo{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const b=new o.P(0,0);for(const C of g)b._add(C);return b.div(g.length)}(c),this.touches=Ss(p,c)))}touchmove(r,c,p){if(this.aborted||!this.centroid)return;const g=Ss(p,c);for(const b in this.touches){const C=g[b];(!C||C.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class hu{constructor(r){this.singleTap=new vo(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,p){this.singleTap.touchstart(r,c,p)}touchmove(r,c,p){this.singleTap.touchmove(r,c,p)}touchend(r,c,p){const g=this.singleTap.touchend(r,c,p);if(g){const b=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(b&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class bo{constructor(r){this._tr=new Bo(r),this._zoomIn=new hu({numTouches:1,numTaps:2}),this._zoomOut=new hu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,p){this._zoomIn.touchstart(r,c,p),this._zoomOut.touchstart(r,c,p)}touchmove(r,c,p){this._zoomIn.touchmove(r,c,p),this._zoomOut.touchmove(r,c,p)}touchend(r,c,p){const g=this._zoomIn.touchend(r,c,p),b=this._zoomOut.touchend(r,c,p),C=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&v.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const od={0:1,2:2};class Zu{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=v.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,p){const g=od[p];return c.buttons===void 0||(c.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return v.mouseButton(r)===this._eventButton}}class fh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const fu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},xl=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const p=new Zu({checkCorrectEvent:g=>v.mouseButton(g)===0&&g.ctrlKey||v.mouseButton(g)===2});return new xo({clickTolerance:r,move:(g,b)=>({bearingDelta:(b.x-g.x)*c}),moveStateManager:p,enable:y,assignEvents:fu})},wo=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new Zu({checkCorrectEvent:g=>v.mouseButton(g)===0&&g.ctrlKey||v.mouseButton(g)===2});return new xo({clickTolerance:r,move:(g,b)=>({pitchDelta:(b.y-g.y)*c}),moveStateManager:p,enable:y,assignEvents:fu})};class mn{constructor(r,c){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,c,p){return this._calculateTransform(r,c,p)}touchmove(r,c,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,c,p)}touchend(r,c,p){this._calculateTransform(r,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,p){p.length>0&&(this._active=!0);const g=Ss(p,c),b=new o.P(0,0),C=new o.P(0,0);let M=0;for(const F in g){const U=g[F],q=this._touches[F];q&&(b._add(U),C._add(U.sub(q)),M++,g[F]=U)}if(this._touches=g,M<this._minTouches||!C.mag())return;const B=C.div(M);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(M),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class du{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,p){if(!this._firstTwoTouches)return;r.preventDefault();const[g,b]=this._firstTwoTouches,C=Oo(p,c,g),M=Oo(p,c,b);if(!C||!M)return;const B=this._aroundCenter?null:C.add(M).div(2);return this._move([C,M],B,r)}touchend(r,c,p){if(!this._firstTwoTouches)return;const[g,b]=this._firstTwoTouches,C=Oo(p,c,g),M=Oo(p,c,b);C&&M||(this._active&&v.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Oo(y,r,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return r[p]}function wl(y,r){return Math.log(y/r)/Math.LN2}class dh extends du{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(wl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wl(this._distance,p),pinchAround:c}}}function hn(y,r){return 180*y.angleWith(r)/Math.PI}class Hu extends du{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c){const p=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:hn(this._vector,p),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,p=hn(r,this._startVector);return Math.abs(p)<c}}function Wu(y){return Math.abs(y.y)>Math.abs(y.x)}class ld extends du{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,p){super.touchstart(r,c,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Wu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,b,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,p){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,b=c.mag()>=2;if(!g&&!b)return;if(!g||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=r.y>0==c.y>0;return Wu(r)&&Wu(c)&&C}}const Ku={panStep:100,bearingStep:15,pitchStep:10};class ph{constructor(r){this._tr=new Bo(r);const c=Ku;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,p=0,g=0,b=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:M=>{const B=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:mh,zoom:c?Math.round(B.zoom)+c*(r.shiftKey?2:1):B.zoom,bearing:B.bearing+p*this._bearingStep,pitch:B.pitch+g*this._pitchStep,offset:[-b*this._panStep,-C*this._panStep],center:B.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mh(y){return y*(2-y)}const gh=4.000244140625;class ud{constructor(r,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new Bo(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=o.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%gh==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=v.mousePos(this._el,r),p=this._tr;this._around=o.L.convert(this._aroundCenter?p.center:p.unproject(c)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>gh?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&B!==0&&(B=1/B);const F=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(F*B))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,p=this._startZoom,g=this._easing;let b,C=!1;if(this._type==="wheel"&&p&&g){const M=Math.min((o.h.now()-this._lastWheelEventTime)/200,1),B=g(M);b=o.B.number(p,c,B),M<1?this._frameId||(this._frameId=!0):C=!0}else b=c,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.bb;if(this._prevEase){const p=this._prevEase,g=(o.h.now()-p.start)/p.duration,b=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(b*b+1e-4)*.01,M=Math.sqrt(.0729-C*C);c=o.ba(C,M,.25,1)}return this._prevEase={start:o.h.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xu{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yu{constructor(r){this._tr=new Bo(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ju{constructor(){this._tap=new hu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],b=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;b&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,c,p)}touchmove(r,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],b=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,p)}touchend(r,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(r,c,p);g&&(this._tapTime=r.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qu{constructor(r,c,p){this._el=r,this._mousePan=c,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qa{constructor(r,c,p){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class No{constructor(r,c,p,g){this._el=r,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vl=y=>y.zoom||y.drag||y.pitch||y.rotate;class ec extends o.k{}function $l(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class tc{constructor(r,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,b)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},B={},F={},U=g.touches,q=U?this._getMapTouches(U):void 0,le=q?v.touchPos(this._el,q):v.mousePos(this._el,g);for(const{handlerName:Pe,handler:ve,allowed:Ze}of this._handlers){if(!ve.isEnabled())continue;let tt;this._blockedByActive(F,Ze,Pe)?ve.reset():ve[b||g.type]&&(tt=ve[b||g.type](g,le,q),this.mergeHandlerResult(M,B,tt,Pe,C),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||ve.isActive())&&(F[Pe]=ve)}const Ie={};for(const Pe in this._previousActiveHandlers)F[Pe]||(Ie[Pe]=C);this._previousActiveHandlers=F,(Object.keys(Ie).length||$l(M))&&(this._changes.push([M,B,Ie]),this._triggerRenderFrame()),(Object.keys(F).length||$l(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Se}=M;Se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Se(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new oh(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,b,C]of this._listeners)v.addEventListener(g,b,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,c,p]of this._listeners)v.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new uh(c,r));const g=c.boxZoom=new hh(c,r);this._add("boxZoom",g),r.interactive&&r.boxZoom&&g.enable();const b=new bo(c),C=new Yu(c);c.doubleClickZoom=new Xu(C,b),this._add("tapZoom",b),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const M=new Ju;this._add("tapDragZoom",M);const B=c.touchPitch=new ld(c);this._add("touchPitch",B),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const F=xl(r),U=wo(r);c.dragRotate=new qa(r,F,U),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const q=(({enable:Ze,clickTolerance:tt})=>{const Re=new Zu({checkCorrectEvent:We=>v.mouseButton(We)===0&&!We.ctrlKey});return new xo({clickTolerance:tt,move:(We,it)=>({around:it,panDelta:it.sub(We)}),activateOnStart:!0,moveStateManager:Re,enable:Ze,assignEvents:fu})})(r),le=new mn(r,c);c.dragPan=new Qu(p,q,le),this._add("mousePan",q),this._add("touchPan",le,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const Ie=new Hu,Se=new dh;c.touchZoomRotate=new No(p,Se,Ie,M),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const Pe=c.scrollZoom=new ud(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Pe,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const ve=c.keyboard=new ph(c);this._add("keyboard",ve),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new ch(c))}_add(r,c,p){this._handlers.push({handlerName:r,handler:c,allowed:p}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vl(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,p){for(const g in r)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const p of r)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(r,c,p,g,b){if(!p)return;o.e(r,p);const C={handlerName:g,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(c.zoom=C),p.panDelta!==void 0&&(c.drag=C),p.pitchDelta!==void 0&&(c.pitch=C),p.bearingDelta!==void 0&&(c.rotate=C)}_applyChanges(){const r={},c={},p={};for(const[g,b,C]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),o.e(c,b),o.e(p,C);this._updateMapTransform(r,c,p),this._changes=[]}_updateMapTransform(r,c,p){const g=this._map,b=g._getTransformForUpdate(),C=g.terrain;if(!($l(r)||C&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:M,zoomDelta:B,bearingDelta:F,pitchDelta:U,around:q,pinchAround:le}=r;le!==void 0&&(q=le),g._stop(!0),q=q||g.transform.centerPoint;const Ie=b.pointLocation(M?q.sub(M):q);F&&(b.bearing+=F),U&&(b.pitch+=U),B&&(b.zoom+=B),C?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(M)):b.setLocationAtPoint(Ie,q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(Ie,q),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(g.terrain)})):b.setLocationAtPoint(Ie,q),g._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,p,!0)}_fireEvents(r,c,p){const g=Vl(this._eventsInProgress),b=Vl(r),C={};for(const U in r){const{originalEvent:q}=r[U];this._eventsInProgress[U]||(C[`${U}start`]=q),this._eventsInProgress[U]=r[U]}!g&&b&&this._fireEvent("movestart",b.originalEvent);for(const U in C)this._fireEvent(U,C[U]);b&&this._fireEvent("move",b.originalEvent);for(const U in r){const{originalEvent:q}=r[U];this._fireEvent(U,q)}const M={};let B;for(const U in this._eventsInProgress){const{handlerName:q,originalEvent:le}=this._eventsInProgress[U];this._handlersById[q].isActive()||(delete this._eventsInProgress[U],B=c[q]||le,M[`${U}end`]=B)}for(const U in M)this._fireEvent(U,M[U]);const F=Vl(this._eventsInProgress);if(p&&(g||b)&&!F){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;!U||!U.essential&&o.h.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:B})),q(this._map.getBearing())&&this._map.resetNorth()):(q(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ec("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _h extends o.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const p=Math.min((o.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,p){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),p)}panTo(r,c,p){return this.easeTo(o.e({center:r},c),p)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,p){return this.easeTo(o.e({zoom:r},c),p)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,p){return this.easeTo(o.e({bearing:r},c),p)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=Fe.convert(r);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,c)}_cameraForBoxAndBearing(r,c,p,g){const b={top:0,bottom:0,right:0,left:0};if(typeof(g=o.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const it=g.padding;g.padding={top:it,bottom:it,right:it,left:it}}g.padding=o.e(b,g.padding);const C=this.transform,M=C.padding,B=C.project(o.L.convert(r)),F=C.project(o.L.convert(c)),U=B.rotate(-p*Math.PI/180),q=F.rotate(-p*Math.PI/180),le=new o.P(Math.max(U.x,q.x),Math.max(U.y,q.y)),Ie=new o.P(Math.min(U.x,q.x),Math.min(U.y,q.y)),Se=le.sub(Ie),Pe=(C.width-(M.left+M.right+g.padding.left+g.padding.right))/Se.x,ve=(C.height-(M.top+M.bottom+g.padding.top+g.padding.bottom))/Se.y;if(ve<0||Pe<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ze=Math.min(C.scaleZoom(C.scale*Math.min(Pe,ve)),g.maxZoom),tt=o.P.convert(g.offset),Re=new o.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),We=tt.add(Re).mult(C.scale/C.zoomScale(Ze));return{center:C.unproject(B.add(F).div(2).sub(We)),zoom:Ze,bearing:p}}fitBounds(r,c,p){return this._fitInternal(this.cameraForBounds(r,c),c,p)}fitScreenCoordinates(r,c,p,g,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(r)),this.transform.pointLocation(o.P.convert(c)),p,g),g,b)}_fitInternal(r,c,p){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(r,c){this.stop();const p=this._getTransformForUpdate();let g=!1,b=!1,C=!1;return"zoom"in r&&p.zoom!==+r.zoom&&(g=!0,p.zoom=+r.zoom),r.center!==void 0&&(p.center=o.L.convert(r.center)),"bearing"in r&&p.bearing!==+r.bearing&&(b=!0,p.bearing=+r.bearing),"pitch"in r&&p.pitch!==+r.pitch&&(C=!0,p.pitch=+r.pitch),r.padding==null||p.isPaddingEqual(r.padding)||(p.padding=r.padding),this._applyUpdatedTransform(p),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),g&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),b&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),C&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(r,c,p,g=0){const b=o.U.fromLngLat(r,c),C=o.U.fromLngLat(p,g),M=C.x-b.x,B=C.y-b.y,F=C.z-b.z,U=Math.hypot(M,B,F);if(U===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(M,B),le=this.transform.scaleZoom(this.transform.cameraToCenterDistance/U/this.transform.tileSize),Ie=180*Math.atan2(M,-B)/Math.PI;let Se=180*Math.acos(q/U)/Math.PI;return Se=F<0?90-Se:90+Se,{center:C.toLngLat(),zoom:le,pitch:Se,bearing:Ie}}easeTo(r,c){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.bb},r)).animate===!1||!r.essential&&o.h.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),b=this.getBearing(),C=this.getPitch(),M=this.getPadding(),B="zoom"in r?+r.zoom:g,F="bearing"in r?this._normalizeBearing(r.bearing,b):b,U="pitch"in r?+r.pitch:C,q="padding"in r?r.padding:p.padding,le=o.P.convert(r.offset);let Ie=p.centerPoint.add(le);const Se=p.pointLocation(Ie),Pe=o.L.convert(r.center||Se);this._normalizeCenter(Pe);const ve=p.project(Se),Ze=p.project(Pe).sub(ve),tt=p.zoomScale(B-g);let Re,We;r.around&&(Re=o.L.convert(r.around),We=p.locationPoint(Re));const it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==g,this._rotating=this._rotating||b!==F,this._pitching=this._pitching||U!==C,this._padding=!p.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,it),this.terrain&&this._prepareElevation(Pe),this._ease(at=>{if(this._zooming&&(p.zoom=o.B.number(g,B,at)),this._rotating&&(p.bearing=o.B.number(b,F,at)),this._pitching&&(p.pitch=o.B.number(C,U,at)),this._padding&&(p.interpolatePadding(M,q,at),Ie=p.centerPoint.add(le)),this.terrain&&!r.freezeElevation&&this._updateElevation(at),Re)p.setLocationAtPoint(Re,We);else{const ft=p.zoomScale(p.zoom-g),Rt=B>g?Math.min(2,tt):Math.max(.5,tt),yt=Math.pow(Rt,1-at),jt=p.unproject(ve.add(Ze.mult(at*yt)).mult(ft));p.setLocationAtPoint(p.renderWorldCopies?jt.wrap():jt,Ie)}this._applyUpdatedTransform(p),this._fireMoveEvents(c)},at=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,at)},r),this}_prepareEase(r,c,p={}){this._moving=!0,c||p.moving||this.fire(new o.k("movestart",r)),this._zooming&&!p.zooming&&this.fire(new o.k("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new o.k("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new o.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(c-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=o.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const c=r.clone(),{center:p,zoom:g,pitch:b,bearing:C,elevation:M}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),b!==void 0&&(c.pitch=b),C!==void 0&&(c.bearing=C),M!==void 0&&(c.elevation=M),this.transform.apply(c)}_fireMoveEvents(r){this.fire(new o.k("move",r)),this._zooming&&this.fire(new o.k("zoom",r)),this._rotating&&this.fire(new o.k("rotate",r)),this._pitching&&this.fire(new o.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new o.k("zoomend",r)),g&&this.fire(new o.k("rotateend",r)),b&&this.fire(new o.k("pitchend",r)),this.fire(new o.k("moveend",r))}flyTo(r,c){if(!r.essential&&o.h.prefersReducedMotion){const wn=o.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wn,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.bb},r);const p=this._getTransformForUpdate(),g=this.getZoom(),b=this.getBearing(),C=this.getPitch(),M=this.getPadding(),B="zoom"in r?o.ad(+r.zoom,p.minZoom,p.maxZoom):g,F="bearing"in r?this._normalizeBearing(r.bearing,b):b,U="pitch"in r?+r.pitch:C,q="padding"in r?r.padding:p.padding,le=p.zoomScale(B-g),Ie=o.P.convert(r.offset);let Se=p.centerPoint.add(Ie);const Pe=p.pointLocation(Se),ve=o.L.convert(r.center||Pe);this._normalizeCenter(ve);const Ze=p.project(Pe),tt=p.project(ve).sub(Ze);let Re=r.curve;const We=Math.max(p.width,p.height),it=We/le,at=tt.mag();if("minZoom"in r){const wn=o.ad(Math.min(r.minZoom,g,B),p.minZoom,p.maxZoom),Nr=We/p.zoomScale(wn-g);Re=Math.sqrt(Nr/at*2)}const ft=Re*Re;function Rt(wn){const Nr=(it*it-We*We+(wn?-1:1)*ft*ft*at*at)/(2*(wn?it:We)*ft*at);return Math.log(Math.sqrt(Nr*Nr+1)-Nr)}function yt(wn){return(Math.exp(wn)-Math.exp(-wn))/2}function jt(wn){return(Math.exp(wn)+Math.exp(-wn))/2}const bn=Rt(!1);let sr=function(wn){return jt(bn)/jt(bn+Re*wn)},nn=function(wn){return We*((jt(bn)*(yt(Nr=bn+Re*wn)/jt(Nr))-yt(bn))/ft)/at;var Nr},Dn=(Rt(!0)-bn)/Re;if(Math.abs(at)<1e-6||!isFinite(Dn)){if(Math.abs(We-it)<1e-6)return this.easeTo(r,c);const wn=it<We?-1:1;Dn=Math.abs(Math.log(it/We))/Re,nn=function(){return 0},sr=function(Nr){return Math.exp(wn*Re*Nr)}}return r.duration="duration"in r?+r.duration:1e3*Dn/("screenSpeed"in r?+r.screenSpeed/Re:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=b!==F,this._pitching=U!==C,this._padding=!p.isPaddingEqual(q),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ve),this._ease(wn=>{const Nr=wn*Dn,ir=1/sr(Nr);p.zoom=wn===1?B:g+p.scaleZoom(ir),this._rotating&&(p.bearing=o.B.number(b,F,wn)),this._pitching&&(p.pitch=o.B.number(C,U,wn)),this._padding&&(p.interpolatePadding(M,q,wn),Se=p.centerPoint.add(Ie)),this.terrain&&!r.freezeElevation&&this._updateElevation(wn);const Wn=wn===1?ve:p.unproject(Ze.add(tt.mult(nn(Nr))).mult(ir));p.setLocationAtPoint(p.renderWorldCopies?Wn.wrap():Wn,Se),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,c)}if(!r){const p=this.handlers;p&&p.stop(!1)}return this}_ease(r,c,p){p.animate===!1||p.duration===0?(r(1),c()):(this._easeStart=o.h.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.b5(r,-180,180);const p=Math.abs(r-c);return Math.abs(r-360-c)<p&&(r-=360),Math.abs(r+360-c)<p&&(r+=360),r}_normalizeCenter(r){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=r.lng-c.center.lng;r.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class hs{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=v.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=v.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const p=this._map._getUIString(`AttributionControl.${c}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const b=c[g];if(b.used||b.usedForTerrain){const C=b.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,b)=>g.length-b.length),r=r.filter((g,b)=>{for(let C=b+1;C<r.length;C++)if(r[C].indexOf(g)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Zr{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=v.create("div","maplibregl-ctrl");const c=v.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){v.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class pu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const nc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var yh=o.Q([{name:"a_pos3d",type:"Int16",components:3}]);class vh extends o.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const p={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),o.aS(g.posMatrix,0,o.N,0,o.N,0,1),this._tiles[g.key]=new kt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(r){for(const c in this._tiles){const p=this._tiles[c];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(r.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16),o.aS(b.posMatrix,0,o.N,0,o.N,0,1),c[p]=b}else if(g.canonical.isChildOf(r.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16);const C=g.canonical.z-r.canonical.z,M=g.canonical.x-(g.canonical.x>>C<<C),B=g.canonical.y-(g.canonical.y>>C<<C),F=o.N>>C;o.aS(b.posMatrix,0,F,0,F,0,1),o.$(b.posMatrix,b.posMatrix,[-M*F,-B*F,0]),c[p]=b}else if(r.canonical.isChildOf(g.canonical)){const b=r.clone();b.posMatrix=new Float64Array(16);const C=r.canonical.z-g.canonical.z,M=r.canonical.x-(r.canonical.x>>C<<C),B=r.canonical.y-(r.canonical.y>>C<<C),F=o.N>>C;o.aS(b.posMatrix,0,o.N,0,o.N,0,1),o.$(b.posMatrix,b.posMatrix,[M*F,B*F,0]),o.a0(b.posMatrix,b.posMatrix,[1/2**C,1/2**C,0]),c[p]=b}}return c}getSourceTile(r,c){const p=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!b||!b.dem)&&c)for(;g>=p.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(r.scaledTo(g--).key);return b}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class bh{constructor(r,c,p){this.painter=r,this.sourceCache=new vh(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,p,g=o.N){var b;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(r),M=(b=C.tile)===null||b===void 0?void 0:b.dem;if(!M)return 0;const B=function(Se,Pe,ve){var Ze=Pe[0],tt=Pe[1];return Se[0]=ve[0]*Ze+ve[4]*tt+ve[12],Se[1]=ve[1]*Ze+ve[5]*tt+ve[13],Se}([],[c/g*o.N,p/g*o.N],C.u_terrain_matrix),F=[B[0]*M.dim,B[1]*M.dim],U=Math.floor(F[0]),q=Math.floor(F[1]),le=F[0]-U,Ie=F[1]-q;return M.get(U,q)*(1-le)*(1-Ie)+M.get(U+1,q)*le*(1-Ie)+M.get(U,q+1)*(1-le)*Ie+M.get(U+1,q+1)*le*Ie}getElevationForLngLatZoom(r,c){const{tileID:p,mercatorX:g,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(p,g%o.N,b%o.N,o.N)}getElevation(r,c,p,g=o.N){return this.getDEMElevation(r,c,p,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,b=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new fe(g,b,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new fe(g,new o.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ao([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new fe(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?b=r.canonical.z-g:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>b<<b),M=r.canonical.y-(r.canonical.y>>b<<b),B=o.bc(new Float64Array(16),[1/(o.N<<b),1/(o.N<<b),0]);o.$(B,B,[C*o.N,M*o.N,0]),this._demMatrixCache[r.key]={matrix:B,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new fe(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new fe(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,C=0;b<this._coordsTextureSize;b++)for(let M=0;M<this._coordsTextureSize;M++,C+=4)c[C+0]=255&M,c[C+1]=255&b,c[C+2]=M>>8<<4|b>>8,c[C+3]=0;const p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new fe(r,p,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const b=c[0]+(c[2]>>4<<8),C=c[1]+((15&c[2])<<8),M=this.coordsIndex[255-c[3]],B=M&&this.sourceCache.getTileByID(M);if(!B)return null;const F=this._coordsTextureSize,U=(1<<B.tileID.canonical.z)*F;return new o.U(this._allowMercatorOverflow(r,(B.tileID.canonical.x*F+b)/U),(B.tileID.canonical.y*F+C)/U,this.getElevation(B.tileID,b,C,F))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new o.bd,p=new o.b0,g=this.meshSize,b=o.N/g,C=g*g;for(let q=0;q<=g;q++)for(let le=0;le<=g;le++)c.emplaceBack(le*b,q*b,0);for(let q=0;q<C;q+=g+1)for(let le=0;le<g;le++)p.emplaceBack(le+q,g+le+q+1,g+le+q+2),p.emplaceBack(le+q,g+le+q+2,le+q+1);const M=c.length,B=M+2*(g+1);for(const q of[0,1])for(let le=0;le<=g;le++)for(const Ie of[0,1])c.emplaceBack(le*b,q*o.N,Ie);for(let q=0;q<2*g;q+=2)p.emplaceBack(B+q,B+q+1,B+q+3),p.emplaceBack(B+q,B+q+3,B+q+2),p.emplaceBack(M+q,M+q+3,M+q+1),p.emplaceBack(M+q,M+q+2,M+q+3);const F=c.length,U=F+2*(g+1);for(const q of[0,1])for(let le=0;le<=g;le++)for(const Ie of[0,1])c.emplaceBack(q*o.N,le*b,Ie);for(let q=0;q<2*g;q+=2)p.emplaceBack(F+q,F+q+1,F+q+3),p.emplaceBack(F+q,F+q+3,F+q+2),p.emplaceBack(U+q,U+q+3,U+q+1),p.emplaceBack(U+q,U+q+2,U+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(p),vertexBuffer:r.createVertexBuffer(c,yh.members),segments:o.S.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*o.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,c){const p=o.U.fromLngLat(r.wrap()),g=(1<<c)*o.N,b=p.x*g,C=p.y*g,M=Math.floor(b/o.N),B=Math.floor(C/o.N);return{tileID:new o.O(c,0,c,M,B),mercatorX:b,mercatorY:C}}_allowMercatorOverflow(r,c){const p=r.x<this.painter.width/2;let g=o.bf(c);const b=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(b)<0||!p&&Math.sign(g)<0&&Math.sign(b)>0?(g=360*Math.sign(b)+g,o.G(g)):c}}class cd{constructor(r,c,p){this._context=r,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new fe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:r,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const xa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class mu{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new cd(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in r.sourceCaches){this._coordsDescendingInv[p]={};const g=r.sourceCaches[p].getVisibleCoordinates();for(const b of g){const C=this.terrain.sourceCache.getTerrainCoords(b);for(const M in C)this._coordsDescendingInv[p][M]||(this._coordsDescendingInv[p][M]=[]),this._coordsDescendingInv[p][M].push(C[M])}}this._coordsDescendingInvStr={};for(const p of r._order){const g=r._layers[p],b=g.source;if(xa[g.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const C in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][C]=this._coordsDescendingInv[b][C].map(M=>M.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[g][p.tileID.key];b&&b!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(xa[c]&&(this._prevType&&xa[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(xa[this._prevType]||xa[c]&&g){this._prevType=c;const b=this._stacks.length-1,C=this._stacks[b]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(Rr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[b]){const F=this.pool.getObjectForId(M.rtt[b].id);if(F.stamp===M.rtt[b].stamp){this.pool.useObject(F);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),M.rtt[b]={id:B.id,stamp:B.stamp},p.context.bindFramebuffer.set(B.fbo.framebuffer),p.context.clear({color:o.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let F=0;F<C.length;F++){const U=p.style._layers[C[F]],q=U.source?this._coordsDescendingInv[U.source][M.tileID.key]:[M.tileID];p.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),p._renderTileClippingMasks(U,q),p.renderLayer(p,p.style.sourceCaches[U.source],U,q),U.source&&(M.rttCoords[U.source]=this._coordsDescendingInvStr[U.source][M.tileID.key])}}return Rr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xa[c]}return!1}}const Sn=_,zn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ul=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},rc={showCompass:!0,showZoom:!0,visualizePitch:!1};class ic{constructor(r,c,p=!1){this.mousedown=C=>{this.startMouse(o.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),v.mousePos(this.element,C)),v.addEventListener(window,"mousemove",this.mousemove),v.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,v.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),v.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),b=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=xl({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:M,bearingDegreesPerPixelMoved:B=.8})=>{const F=new fh;return new xo({clickTolerance:M,move:(U,q)=>({bearingDelta:(q.x-U.x)*B}),moveStateManager:F,enable:C,assignEvents:Ul})})({clickTolerance:g,enable:!0}),this.map=r,p&&(this.mousePitch=wo({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:M,pitchDegreesPerPixelMoved:B=-.5})=>{const F=new fh;return new xo({clickTolerance:M,move:(U,q)=>({pitchDelta:(q.y-U.y)*B}),moveStateManager:F,enable:C,assignEvents:Ul})})({clickTolerance:b,enable:!0})),v.addEventListener(c,"mousedown",this.mousedown),v.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),v.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),v.disableDrag()}moveMouse(r,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(r,c)||{};b&&p.setPitch(p.getPitch()+b)}}moveTouch(r,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(r,c)||{};b&&p.setPitch(p.getPitch()+b)}}off(){const r=this.element;v.removeEventListener(r,"mousedown",this.mousedown),v.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend),v.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){v.enableDrag(),v.removeEventListener(window,"mousemove",this.mousemove),v.removeEventListener(window,"mouseup",this.mouseup),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend)}}let ki;function ac(y,r,c){if(y=new o.L(y.lng,y.lat),r){const p=new o.L(y.lng-360,y.lat),g=new o.L(y.lng+360,y.lat),b=c.locationPoint(y).distSqr(r);c.locationPoint(p).distSqr(r)<b?y=p:c.locationPoint(g).distSqr(r)<b&&(y=g)}for(;Math.abs(y.lng-c.center.lng)>180;){const p=c.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y}const Is={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xh(y,r,c){const p=y.classList;for(const g in Is)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${r}`)}class tl extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ac(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,`${Is[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),M=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*M?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div"),this._element.setAttribute("aria-label","Map marker");const c=v.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const b=v.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const C=v.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const M=v.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ze of B){const tt=v.createNS("http://www.w3.org/2000/svg","ellipse");tt.setAttributeNS(null,"opacity","0.04"),tt.setAttributeNS(null,"cx","10.5"),tt.setAttributeNS(null,"cy","5.80029008"),tt.setAttributeNS(null,"rx",Ze.rx),tt.setAttributeNS(null,"ry",Ze.ry),M.appendChild(tt)}const F=v.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const U=v.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(U);const q=v.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const le=v.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(le);const Ie=v.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Se=v.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Pe=v.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#000000"),Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962");const ve=v.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),Se.appendChild(Pe),Se.appendChild(ve),C.appendChild(M),C.appendChild(F),C.appendChild(q),C.appendChild(Ie),C.appendChild(Se),c.appendChild(C),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),xh(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ui={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ti=0,kl=!1;const jl={maxWidth:100,unit:"metric"};function ql(y,r,c){const p=c&&c.maxWidth||100,g=y._container.clientHeight/2,b=y.unproject([0,g]),C=y.unproject([p,g]),M=b.distanceTo(C);if(c&&c.unit==="imperial"){const B=3.2808*M;B>5280?nl(r,p,B/5280,y._getUIString("ScaleControl.Miles")):nl(r,p,B,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?nl(r,p,M/1852,y._getUIString("ScaleControl.NauticalMiles")):M>=1e3?nl(r,p,M/1e3,y._getUIString("ScaleControl.Kilometers")):nl(r,p,M,y._getUIString("ScaleControl.Meters"))}function nl(y,r,c,p){const g=function(b){const C=Math.pow(10,`${Math.floor(b)}`.length-1);let M=b/C;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(B){const F=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*F)/F}(M),C*M}(c);y.style.width=r*(g/c)+"px",y.innerHTML=`${g}&nbsp;${p}`}const sc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},oc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function El(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,y),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-y),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(y,0),right:new o.P(-y,0)}}if(y instanceof o.P||Array.isArray(y)){const r=o.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(y.center||[0,0]),top:o.P.convert(y.top||[0,0]),"top-left":o.P.convert(y["top-left"]||[0,0]),"top-right":o.P.convert(y["top-right"]||[0,0]),bottom:o.P.convert(y.bottom||[0,0]),"bottom-left":o.P.convert(y["bottom-left"]||[0,0]),"bottom-right":o.P.convert(y["bottom-right"]||[0,0]),left:o.P.convert(y.left||[0,0]),right:o.P.convert(y.right||[0,0])}}return El(new o.P(0,0))}const lc={extend:(y,...r)=>o.e(y,...r),run(y){y()},logToElement(y,r=!1,c="log"){const p=window.document.getElementById(c);p&&(r&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},uc=_;class Ir{static get version(){return uc}static get workerCount(){return gn.workerCount}static set workerCount(r){gn.workerCount=r}static get maxParallelImageRequests(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){o.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return o.c.WORKER_URL}static set workerUrl(r){o.c.WORKER_URL=r}static addProtocol(r,c){o.c.REGISTERED_PROTOCOLS[r]=c}static removeProtocol(r){delete o.c.REGISTERED_PROTOCOLS[r]}}return Ir.Map=class extends _h{constructor(y){if(o.bg.mark(o.bh.create),(y=o.e({},zn,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Os(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new pu,this._controls=[],this._mapId=o.a2(),this._locale=o.e({},nc,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=j.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const c=Js(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{r?c(p):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new tc(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Ro(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,o.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new hs({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Zr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new o.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new o.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new o.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,c,p)}resize(y){var r;const c=this._containerDimensions(),p=c[0],g=c[1],b=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,b),this.painter.resize(p,g,b),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const B=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,B),this.painter.resize(p,g,B)}this.transform.resize(p,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new o.k("movestart",y)).fire(new o.k("move",y))),this.fire(new o.k("resize",y)),C&&this.fire(new o.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),b=y*g,C=r*g;return Math.min(b>c?c/b:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Fe.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(o.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(o.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:r,listener:c,delegates:{mousemove:b=>{const C=this.getLayer(r)?this.queryRenderedFeatures(b.point,{layers:[r]}):[];C.length?p||(p=!0,c.call(this,new cs(y,this,b.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:r,listener:c,delegates:{mousemove:C=>{(this.getLayer(r)?this.queryRenderedFeatures(C.point,{layers:[r]}):[]).length?p=!0:p&&(p=!1,c.call(this,new cs(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,c.call(this,new cs(y,this,C.originalEvent)))}}}}{const p=g=>{const b=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];b.length&&(g.features=b,c.call(this,g),delete g.features)};return{layer:r,listener:c,delegates:{[y]:p}}}}on(y,r,c){if(c===void 0)return super.on(y,r);const p=this._createDelegatedListener(y,r,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,r,c){if(c===void 0)return super.once(y,r);const p=this._createDelegatedListener(y,r,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,r,c){return c===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let b=0;b<g.length;b++){const C=g[b];if(C.layer===r&&C.listener===c){for(const M in C.delegates)this.off(M,C.delegates[M]);return g.splice(b,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let c;const p=y instanceof o.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:y)||{},g instanceof o.P||typeof g[0]=="number")c=[o.P.convert(g)];else{const b=o.P.convert(g[0]),C=o.P.convert(g[1]);c=[b,new o.P(C.x,b.y),C,new o.P(b.x,C.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Pn(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,c):this.style.loadJSON(y,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,W.Style);o.f(c,(p,g)=>{p?this.fire(new o.j(p)):g&&this._updateDiff(g,r)})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new o.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bh(this.painter,r,y),this.painter.renderToTexture=new mu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const c=y[r]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,r,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,r,c)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:b,stretchY:C,content:M}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:F,data:U}=r,q=r;return this.style.addImage(y,{data:new o.R({width:B,height:F},new Uint8Array(U)),pixelRatio:p,stretchX:b,stretchY:C,content:M,sdf:g,version:0,userImage:q}),q.onAdd&&q.onAdd(this,y),this}}{const{width:B,height:F,data:U}=o.h.getImageData(r);this.style.addImage(y,{data:new o.R({width:B,height:F},U),pixelRatio:p,stretchX:b,stretchY:C,content:M,sdf:g,version:0})}}updateImage(y,r){const c=this.style.getImage(y);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||o.a(r)?o.h.getImageData(r):r,{width:g,height:b,data:C}=p;if(g===void 0||b===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||b!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(r instanceof HTMLImageElement||o.a(r));return c.data.replace(C,M),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,r){j.getImage(this._requestManager.transformRequest(y,W.Image),r)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,c){return this.style.setLayerZoomRange(y,r,c),this._update(!0)}setFilter(y,r,c={}){return this.style.setFilter(y,r,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,c,p={}){return this.style.setPaintProperty(y,r,c,p),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,c,p={}){return this.style.setLayoutProperty(y,r,c,p),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,c=>{c||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=v.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=v.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=v.create("div","maplibregl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=v.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=v.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){v.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,r,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:y},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new us(c,this.transform),E.testSupport(c)}_onCooperativeGesture(y,r,c){return!r&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,b=o.h.now();this.style.zoomHistory.update(g,b);const C=new o.a8(g,{now:b,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=C.crossFadingFactor();M===1&&M===this._crossFadingFactor||(c=!0,this._crossFadingFactor=M),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bg.mark(o.bh.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,o.bg.mark(o.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),j.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),v.remove(this._canvasContainer),v.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),o.bg.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.h.frame(y=>{o.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Sn}getCameraTargetElevation(){return this.transform.elevation}},Ir.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);r.title=p,r.setAttribute("aria-label",p)},this.options=o.e({},rc,y),this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),v.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),v.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=v.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ic(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const c=v.create("button",y,this._container);return c.type="button",c.addEventListener("click",r),c}},Ir.GeolocateControl=class extends o.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.L(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,g=this._map.getBearing(),b=o.e({bearing:g},this.options.fitBoundsOptions),C=Fe.fromLngLat(c,p);this._map.fitBounds(C,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&kl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=v.create("button","maplibregl-ctrl-geolocate",this._container),v.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new tl({element:this._dotElement}),this._circleElement=v.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},ui,y)}onAdd(y){return this._map=y,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,c=!1){ki===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{ki=p.state!=="denied",r(ki)}).catch(()=>{ki=!!window.navigator.geolocation,r(ki)}):(ki=!!window.navigator.geolocation,r(ki)):r(ki)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ti=0,kl=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),c=y.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),c=y.getNorthEast(),p=r.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ti--,kl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ti++,ti>1?(y={maximumAge:6e5,timeout:0},kl=!0):(y=this.options.positionOptions,kl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ir.AttributionControl=hs,Ir.LogoControl=Zr,Ir.ScaleControl=class{constructor(y){this._onMove=()=>{ql(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,ql(this._map,this._container,this.options)},this.options=o.e({},jl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ir.FullscreenControl=class extends o.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){v.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=v.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);v.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ir.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=v.create("button","maplibregl-ctrl-terrain",this._container),v.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){v.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ir.Popup=class extends o.E{constructor(y){super(),this.remove=()=>(this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=v.create("div","maplibregl-popup",this._map.getContainer()),this._tip=v.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ac(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const c=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let p=this.options.anchor;const g=El(this.options.offset);if(!p){const C=this._container.offsetWidth,M=this._container.offsetHeight;let B;B=c.y+g.bottom.y<M?["top"]:c.y>this._map.transform.height-M?["bottom"]:[],c.x<C/2?B.push("left"):c.x>this._map.transform.width-C/2&&B.push("right"),p=B.length===0?"bottom":B.join("-")}const b=c.add(g[p]).round();v.setTransform(this._container,`${Is[p]} translate(${b.x}px,${b.y}px)`),xh(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(sc),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=o.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=v.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(oc);y&&y.focus()}},Ir.Marker=tl,Ir.Style=Pn,Ir.LngLat=o.L,Ir.LngLatBounds=Fe,Ir.Point=o.P,Ir.MercatorCoordinate=o.U,Ir.Evented=o.E,Ir.AJAXError=o.bi,Ir.config=o.c,Ir.CanvasSource=ct,Ir.GeoJSONSource=yn,Ir.ImageSource=Dt,Ir.RasterDEMTileSource=an,Ir.RasterTileSource=Zt,Ir.VectorTileSource=gt,Ir.VideoSource=$t,Ir.setRTLTextPlugin=o.bj,Ir.getRTLTextPluginStatus=o.bk,Ir.prewarm=function(){Kn().acquire(zt)},Ir.clearPrewarmedResources=function(){const y=Hn;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(zt),Hn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},lc.extend(Ir,{isSafari:o.ac,getPerformanceMetrics:o.bg.getPerformanceMetrics}),Ir});var d=u;return d})})(xv);var a5=xv.exports;const cr=Qf(a5),kv="3.7.7",s5=kv,Gu=typeof Buffer=="function",H0=typeof TextDecoder=="function"?new TextDecoder:void 0,W0=typeof TextEncoder=="function"?new TextEncoder:void 0,o5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",zc=Array.prototype.slice.call(o5),Gh=(t=>{let e={};return t.forEach((i,s)=>e[i]=s),e})(zc),l5=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Aa=String.fromCharCode.bind(String),K0=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Ev=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Sv=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Iv=t=>{let e,i,s,u,f="";const d=t.length%3;for(let o=0;o<t.length;){if((i=t.charCodeAt(o++))>255||(s=t.charCodeAt(o++))>255||(u=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");e=i<<16|s<<8|u,f+=zc[e>>18&63]+zc[e>>12&63]+zc[e>>6&63]+zc[e&63]}return d?f.slice(0,d-3)+"===".substring(d):f},Am=typeof btoa=="function"?t=>btoa(t):Gu?t=>Buffer.from(t,"binary").toString("base64"):Iv,Lp=Gu?t=>Buffer.from(t).toString("base64"):t=>{let i=[];for(let s=0,u=t.length;s<u;s+=4096)i.push(Aa.apply(null,t.subarray(s,s+4096)));return Am(i.join(""))},hf=(t,e=!1)=>e?Ev(Lp(t)):Lp(t),u5=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?Aa(192|e>>>6)+Aa(128|e&63):Aa(224|e>>>12&15)+Aa(128|e>>>6&63)+Aa(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return Aa(240|e>>>18&7)+Aa(128|e>>>12&63)+Aa(128|e>>>6&63)+Aa(128|e&63)}},c5=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Tv=t=>t.replace(c5,u5),X0=Gu?t=>Buffer.from(t,"utf8").toString("base64"):W0?t=>Lp(W0.encode(t)):t=>Am(Tv(t)),zu=(t,e=!1)=>e?Ev(X0(t)):X0(t),Y0=t=>zu(t,!0),h5=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,f5=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return Aa((i>>>10)+55296)+Aa((i&1023)+56320);case 3:return Aa((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Aa((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Av=t=>t.replace(h5,f5),Cv=t=>{if(t=t.replace(/\s+/g,""),!l5.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,i="",s,u;for(let f=0;f<t.length;)e=Gh[t.charAt(f++)]<<18|Gh[t.charAt(f++)]<<12|(s=Gh[t.charAt(f++)])<<6|(u=Gh[t.charAt(f++)]),i+=s===64?Aa(e>>16&255):u===64?Aa(e>>16&255,e>>8&255):Aa(e>>16&255,e>>8&255,e&255);return i},Cm=typeof atob=="function"?t=>atob(Sv(t)):Gu?t=>Buffer.from(t,"base64").toString("binary"):Cv,Pv=Gu?t=>K0(Buffer.from(t,"base64")):t=>K0(Cm(t).split("").map(e=>e.charCodeAt(0))),Mv=t=>Pv(zv(t)),d5=Gu?t=>Buffer.from(t,"base64").toString("utf8"):H0?t=>H0.decode(Pv(t)):t=>Av(Cm(t)),zv=t=>Sv(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Rp=t=>d5(zv(t)),p5=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},Dv=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Lv=function(){const t=(e,i)=>Object.defineProperty(String.prototype,e,Dv(i));t("fromBase64",function(){return Rp(this)}),t("toBase64",function(e){return zu(this,e)}),t("toBase64URI",function(){return zu(this,!0)}),t("toBase64URL",function(){return zu(this,!0)}),t("toUint8Array",function(){return Mv(this)})},Rv=function(){const t=(e,i)=>Object.defineProperty(Uint8Array.prototype,e,Dv(i));t("toBase64",function(e){return hf(this,e)}),t("toBase64URI",function(){return hf(this,!0)}),t("toBase64URL",function(){return hf(this,!0)})},m5=()=>{Lv(),Rv()},g5={version:kv,VERSION:s5,atob:Cm,atobPolyfill:Cv,btoa:Am,btoaPolyfill:Iv,fromBase64:Rp,toBase64:zu,encode:zu,encodeURI:Y0,encodeURL:Y0,utob:Tv,btou:Av,decode:Rp,isValid:p5,fromUint8Array:hf,toUint8Array:Mv,extendString:Lv,extendUint8Array:Rv,extendBuiltins:m5};var Pm={exports:{}},Du=typeof Reflect=="object"?Reflect:null,J0=Du&&typeof Du.apply=="function"?Du.apply:function(e,i,s){return Function.prototype.apply.call(e,i,s)},ff;Du&&typeof Du.ownKeys=="function"?ff=Du.ownKeys:Object.getOwnPropertySymbols?ff=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ff=function(e){return Object.getOwnPropertyNames(e)};function _5(t){console&&console.warn&&console.warn(t)}var Bv=Number.isNaN||function(e){return e!==e};function Kr(){Kr.init.call(this)}Pm.exports=Kr;Pm.exports.once=x5;Kr.EventEmitter=Kr;Kr.prototype._events=void 0;Kr.prototype._eventsCount=0;Kr.prototype._maxListeners=void 0;var Q0=10;function nd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Kr,"defaultMaxListeners",{enumerable:!0,get:function(){return Q0},set:function(t){if(typeof t!="number"||t<0||Bv(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Q0=t}});Kr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Kr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Bv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ov(t){return t._maxListeners===void 0?Kr.defaultMaxListeners:t._maxListeners}Kr.prototype.getMaxListeners=function(){return Ov(this)};Kr.prototype.emit=function(e){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var u=e==="error",f=this._events;if(f!==void 0)u=u&&f.error===void 0;else if(!u)return!1;if(u){var d;if(i.length>0&&(d=i[0]),d instanceof Error)throw d;var o=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw o.context=d,o}var _=f[e];if(_===void 0)return!1;if(typeof _=="function")J0(_,this,i);else for(var v=_.length,E=Uv(_,v),s=0;s<v;++s)J0(E[s],this,i);return!0};function Nv(t,e,i,s){var u,f,d;if(nd(i),f=t._events,f===void 0?(f=t._events=Object.create(null),t._eventsCount=0):(f.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),f=t._events),d=f[e]),d===void 0)d=f[e]=i,++t._eventsCount;else if(typeof d=="function"?d=f[e]=s?[i,d]:[d,i]:s?d.unshift(i):d.push(i),u=Ov(t),u>0&&d.length>u&&!d.warned){d.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=d.length,_5(o)}return t}Kr.prototype.addListener=function(e,i){return Nv(this,e,i,!1)};Kr.prototype.on=Kr.prototype.addListener;Kr.prototype.prependListener=function(e,i){return Nv(this,e,i,!0)};function y5(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Fv(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},u=y5.bind(s);return u.listener=i,s.wrapFn=u,u}Kr.prototype.once=function(e,i){return nd(i),this.on(e,Fv(this,e,i)),this};Kr.prototype.prependOnceListener=function(e,i){return nd(i),this.prependListener(e,Fv(this,e,i)),this};Kr.prototype.removeListener=function(e,i){var s,u,f,d,o;if(nd(i),u=this._events,u===void 0)return this;if(s=u[e],s===void 0)return this;if(s===i||s.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete u[e],u.removeListener&&this.emit("removeListener",e,s.listener||i));else if(typeof s!="function"){for(f=-1,d=s.length-1;d>=0;d--)if(s[d]===i||s[d].listener===i){o=s[d].listener,f=d;break}if(f<0)return this;f===0?s.shift():v5(s,f),s.length===1&&(u[e]=s[0]),u.removeListener!==void 0&&this.emit("removeListener",e,o||i)}return this};Kr.prototype.off=Kr.prototype.removeListener;Kr.prototype.removeAllListeners=function(e){var i,s,u;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var f=Object.keys(s),d;for(u=0;u<f.length;++u)d=f[u],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=s[e],typeof i=="function")this.removeListener(e,i);else if(i!==void 0)for(u=i.length-1;u>=0;u--)this.removeListener(e,i[u]);return this};function Vv(t,e,i){var s=t._events;if(s===void 0)return[];var u=s[e];return u===void 0?[]:typeof u=="function"?i?[u.listener||u]:[u]:i?b5(u):Uv(u,u.length)}Kr.prototype.listeners=function(e){return Vv(this,e,!0)};Kr.prototype.rawListeners=function(e){return Vv(this,e,!1)};Kr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):$v.call(t,e)};Kr.prototype.listenerCount=$v;function $v(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Kr.prototype.eventNames=function(){return this._eventsCount>0?ff(this._events):[]};function Uv(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function v5(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function b5(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function x5(t,e){return new Promise(function(i,s){function u(d){t.removeListener(e,f),s(d)}function f(){typeof t.removeListener=="function"&&t.removeListener("error",u),i([].slice.call(arguments))}jv(t,e,f,{once:!0}),e!=="error"&&w5(t,u,{once:!0})})}function w5(t,e,i){typeof t.on=="function"&&jv(t,"error",e,i)}function jv(t,e,i,s){if(typeof t.on=="function")s.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function u(f){s.once&&t.removeEventListener(e,u),i(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var k5=Pm.exports;const E5=Qf(k5);function S5(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class I5{constructor(){this._apiKey="",this._fetch=S5(),this.tileCacheSize=200}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set fetch(e){this._fetch=e}get fetch(){return this._fetch}}const Lu=new I5,T5={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(T5));async function A5(t,e={}){if(Lu.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(t).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Lu.fetch(t,e)}const qv={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(qv);class C5 extends Error{constructor(e,i=""){super(`Call to enpoint ${e.url} failed with the status code ${e.status}. ${i}`),this.res=e}}const e_={403:"Key is missing, invalid or restricted"};async function P5(t={}){const e=new URL("geolocation/ip.json",qv.maptilerApiURL);e.searchParams.set("key",t.apiKey??Lu.apiKey);const i=e.toString(),s=await A5(i);if(!s.ok)throw new C5(s,s.status in e_?e_[s.status]:"");return await s.json()}const t_={info:P5};function Gv(t){const e=/^maptiler:\/\/(.*)/;let i;const s=t.trim();let u;return s.startsWith("http://")||s.startsWith("https://")?u=s:(i=e.exec(s))!==null?u=`https://api.maptiler.com/maps/${i[1]}/style.json`:u=`https://api.maptiler.com/maps/${s}/style.json`,u}class Zv{constructor(e,i,s,u,f,d){this.name=e,this.variantType=i,this.id=s,this.referenceStyle=u,this.description=f,this.imageURL=d}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(e){return this.referenceStyle.hasVariant(e)}getVariant(e){return this.referenceStyle.getVariant(e)}getVariants(){return this.referenceStyle.getVariants().filter(e=>e!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return Gv(this.getId())}}class Hv{constructor(e,i){this.name=e,this.id=i,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}hasVariant(e){return e in this.variants}getVariant(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const Bp=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function M5(t){return new Proxy(t,{get(e,i,s){return e.hasVariant(i)?e.getVariant(i):i.toString().toUpperCase()===i?t.getDefaultVariant():Reflect.get(e,i,s)}})}function z5(){const t={};for(let e=0;e<Bp.length;e+=1){const i=Bp[e],s=M5(new Hv(i.name,i.referenceStyleID));for(let u=0;u<i.variants.length;u+=1){const f=i.variants[u],d=new Zv(f.name,f.variantType,f.id,s,f.description,f.imageURL);s.addVariant(d)}t[i.referenceStyleID]=s}return t}const Wv=z5();let Zh;const D5=new Uint8Array(16);function L5(){if(!Zh&&(Zh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zh(D5)}const Ta=[];for(let t=0;t<256;++t)Ta.push((t+256).toString(16).slice(1));function R5(t,e=0){return Ta[t[e+0]]+Ta[t[e+1]]+Ta[t[e+2]]+Ta[t[e+3]]+"-"+Ta[t[e+4]]+Ta[t[e+5]]+"-"+Ta[t[e+6]]+Ta[t[e+7]]+"-"+Ta[t[e+8]]+Ta[t[e+9]]+"-"+Ta[t[e+10]]+Ta[t[e+11]]+Ta[t[e+12]]+Ta[t[e+13]]+Ta[t[e+14]]+Ta[t[e+15]]}const B5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),n_={randomUUID:B5};function O5(t,e,i){if(n_.randomUUID&&!t)return n_.randomUUID();t=t||{};const s=t.random||(t.rng||L5)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,R5(s)}const Br={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},N5=new Set(Object.values(Br));function r_(t){return N5.has(t)}const F5=new Set(Object.values(Br));function i_(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const t=Array.from(new Set(navigator.languages.map(e=>`name:${e.split("-")[0]}`))).filter(e=>F5.has(e));return t.length?t[0]:Br.LOCAL}const uo={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Br.STYLE,secondaryLanguage:Br.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(uo);var V5=Object.defineProperty,$5=(t,e,i)=>e in t?V5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Pc=(t,e,i)=>($5(t,typeof e!="symbol"?e+"":e,i),i);const Kv=O5();class U5 extends E5{constructor(){super(),Pc(this,"primaryLanguage",uo.primaryLanguage),Pc(this,"secondaryLanguage"),Pc(this,"session",!0),Pc(this,"_unit","metric"),Pc(this,"_apiKey","")}set unit(e){this._unit=e,this.emit("unit",e)}get unit(){return this._unit}set apiKey(e){this._apiKey=e,Lu.apiKey=e,this.emit("apiKey",e)}get apiKey(){return this._apiKey}set fetch(e){Lu.fetch=e}get fetch(){return Lu.fetch}}const Ao=new U5;class j5 extends cr.LogoControl{onAdd(e){return super.onAdd(e)}}var q5=Object.defineProperty,G5=(t,e,i)=>e in t?q5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,a_=(t,e,i)=>(G5(t,typeof e!="symbol"?e+"":e,i),i);class s_ extends j5{constructor(e={}){var i,s;super(e),a_(this,"logoURL",""),a_(this,"linkURL",""),this.logoURL=(i=e.logoURL)!=null?i:uo.maptilerLogoURL,this.linkURL=(s=e.linkURL)!=null?s:uo.maptilerURL}onAdd(e){var i;this._map=e,this._compact=(i=this.options.compact)!=null?i:!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const s=window.document.createElement("a");return s.style.backgroundRepeat="no-repeat",s.style.cursor="pointer",s.style.display="block",s.style.height="23px",s.style.margin="0 0 -4px -4px",s.style.overflow="hidden",s.style.width="88px",s.style.backgroundImage=`url(${this.logoURL})`,s.style.backgroundSize="100px 30px",s.style.width="100px",s.style.height="30px",s.target="_blank",s.rel="noopener",s.href=this.linkURL,s.setAttribute("aria-label","MapTiler logo"),s.setAttribute("rel","noopener"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var Z5=Object.defineProperty,o_=Object.getOwnPropertySymbols,H5=Object.prototype.hasOwnProperty,W5=Object.prototype.propertyIsEnumerable,l_=(t,e,i)=>e in t?Z5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,u_=(t,e)=>{for(var i in e||(e={}))H5.call(e,i)&&l_(t,i,e[i]);if(o_)for(var i of o_(e))W5.call(e,i)&&l_(t,i,e[i]);return t};function K5(){cr.getRTLTextPluginStatus()==="unavailable"&&cr.setRTLTextPlugin(uo.rtlPluginURL,t=>{t&&console.error(t)},!0)}function X5(t,e){t.forEach(i=>{typeof e[i]=="function"&&(e[i]=e[i].bind(e))})}function Ll(t,e,i){const s=window.document.createElement(t);return e!==void 0&&(s.className=e),i&&i.appendChild(s),s}function Xv(t){t.parentNode&&t.parentNode.removeChild(t)}function c_(t,e){let i=null;try{i=new URL(t)}catch{return{url:t}}return i.host===uo.maptilerApiHost&&(i.searchParams.has("key")||i.searchParams.append("key",Ao.apiKey),Ao.session&&i.searchParams.append("mtsid",Kv)),{url:i.href}}function h_(t){return function(e,i){var s;if(t!==void 0){const u=t(e,i),f=c_((s=u==null?void 0:u.url)!=null?s:"");return u_(u_({},u),f)}else return c_(e)}}function f_(t){return t?typeof t=="string"||t instanceof String?!t.startsWith("http")&&t.toLowerCase().includes(".json")?t:Gv(t):t instanceof Zv?t.getExpandedStyleURL():t instanceof Hv?t.getDefaultVariant().getExpandedStyleURL():t:Wv[Bp[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}var Y5=Object.defineProperty,J5=(t,e,i)=>e in t?Y5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ip=(t,e,i)=>(J5(t,typeof e!="symbol"?e+"":e,i),i);class Q5{constructor(){ip(this,"_map"),ip(this,"_container"),ip(this,"_terrainButton"),X5(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=Ll("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ll("button","maplibregl-ctrl-terrain",this._container),Ll("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Xv(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}}class e3 extends cr.NavigationControl{onAdd(e){return super.onAdd(e)}}var t3=Object.defineProperty,n3=(t,e,i)=>e in t?t3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,r3=(t,e,i)=>(n3(t,e+"",i),i);class i3 extends e3{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),r3(this,"_rotateCompassArrow",()=>{const e=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}),this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",e=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})}_createButton(e,i){const s=super._createButton(e,i);return s.clickFunction=i,s}}class a3 extends cr.GeolocateControl{onAdd(e){return super.onAdd(e)}}var s3=Object.defineProperty,o3=Object.defineProperties,l3=Object.getOwnPropertyDescriptors,d_=Object.getOwnPropertySymbols,u3=Object.prototype.hasOwnProperty,c3=Object.prototype.propertyIsEnumerable,Op=(t,e,i)=>e in t?s3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,h3=(t,e)=>{for(var i in e||(e={}))u3.call(e,i)&&Op(t,i,e[i]);if(d_)for(var i of d_(e))c3.call(e,i)&&Op(t,i,e[i]);return t},f3=(t,e)=>o3(t,l3(e)),Hh=(t,e,i)=>(Op(t,typeof e!="symbol"?e+"":e,i),i);const p_=cr.Marker,m_=cr.LngLat,d3=cr.LngLatBounds;class p3 extends a3{constructor(){super(...arguments),Hh(this,"lastUpdatedCenter",new m_(0,0)),Hh(this,"_updateCamera",e=>{var i,s,u;const f=new m_(e.coords.longitude,e.coords.latitude),d=e.coords.accuracy,o=this._map.getBearing(),_=f3(h3({bearing:o},this.options.fitBoundsOptions),{linear:!0}),v=this._map.getZoom();v>((u=(s=(i=this.options)==null?void 0:i.fitBoundsOptions)==null?void 0:s.maxZoom)!=null?u:30)&&(_.zoom=v),this._map.fitBounds(d3.fromLngLat(f,d),_,{geolocateSource:!0});let E=!1;const S=()=>{E=!0};this._map.once("click",S),this._map.once("dblclick",S),this._map.once("dragstart",S),this._map.once("mousedown",S),this._map.once("touchstart",S),this._map.once("wheel",S),this._map.once("moveend",()=>{this._map.off("click",S),this._map.off("dblclick",S),this._map.off("dragstart",S),this._map.off("mousedown",S),this._map.off("touchstart",S),this._map.off("wheel",S),!E&&(this.lastUpdatedCenter=this._map.getCenter())})}),Hh(this,"_setupUI",e=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=Ll("button","maplibregl-ctrl-geolocate",this._container),Ll("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",e===!1){const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ll("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new p_({element:this._dotElement}),this._circleElement=Ll("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new p_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",i=>{const s=i.originalEvent&&i.originalEvent.type==="resize",u=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!i.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!s&&u>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}),Hh(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],i=this._map.project(e),s=this._map.unproject([i.x,i.y]),u=this._map.unproject([i.x+20,i.y]),f=s.distanceTo(u)/20,d=Math.ceil(2*this._accuracy/f);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}}class m3 extends cr.AttributionControl{onAdd(e){return super.onAdd(e)}}class g3 extends cr.ScaleControl{onAdd(e){return super.onAdd(e)}}class _3 extends cr.FullscreenControl{onAdd(e){return super.onAdd(e)}}var y3=Object.defineProperty,v3=Object.defineProperties,b3=Object.getOwnPropertyDescriptors,g_=Object.getOwnPropertySymbols,x3=Object.prototype.hasOwnProperty,w3=Object.prototype.propertyIsEnumerable,Np=(t,e,i)=>e in t?y3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ru=(t,e)=>{for(var i in e||(e={}))x3.call(e,i)&&Np(t,i,e[i]);if(g_)for(var i of g_(e))w3.call(e,i)&&Np(t,i,e[i]);return t},__=(t,e)=>v3(t,b3(e)),k3=(t,e,i)=>(Np(t,e+"",i),i),Mm=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Tr=(t,e,i)=>(Mm(t,e,"read from private field"),i?i.call(t):e.get(t)),Uo=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Iu=(t,e,i,s)=>(Mm(t,e,"write to private field"),e.set(t,i),i),Us=(t,e,i)=>(Mm(t,e,"access private method"),i),js,Wo,Ql,Yv,ru,oo,df,Fp,Jv,qs,lo,Vp,Qv;class ap{constructor(e,i){Uo(this,Fp),Uo(this,qs),Uo(this,Vp),Uo(this,js,void 0),k3(this,"map"),Uo(this,Wo,void 0),Uo(this,Ql,void 0),Uo(this,Yv,void 0),Uo(this,ru,void 0),Uo(this,oo,!1),Uo(this,df,void 0);var s;e.style!==void 0&&Iu(this,oo,!0),Iu(this,js,__(Ru(__(Ru({zoomAdjust:-4,position:"top-right"},i),{forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1}),e),{containerStyle:Ru({border:"1px solid #000",width:"400px",height:"300px"},(s=e.containerStyle)!=null?s:{})})),e.lockZoom!==void 0&&(Tr(this,js).minZoom=e.lockZoom,Tr(this,js).maxZoom=e.lockZoom)}setStyle(e,i){Tr(this,oo)||this.map.setStyle(e,i),Us(this,qs,lo).call(this)}addLayer(e,i){return Tr(this,oo)||this.map.addLayer(e,i),Us(this,qs,lo).call(this),this.map}moveLayer(e,i){return Tr(this,oo)||this.map.moveLayer(e,i),Us(this,qs,lo).call(this),this.map}removeLayer(e){return Tr(this,oo)||this.map.removeLayer(e),Us(this,qs,lo).call(this),this}setLayerZoomRange(e,i,s){return Tr(this,oo)||this.map.setLayerZoomRange(e,i,s),Us(this,qs,lo).call(this),this}setFilter(e,i,s){return Tr(this,oo)||this.map.setFilter(e,i,s),Us(this,qs,lo).call(this),this}setPaintProperty(e,i,s,u){return Tr(this,oo)||this.map.setPaintProperty(e,i,s,u),Us(this,qs,lo).call(this),this}setLayoutProperty(e,i,s,u){return Tr(this,oo)||this.map.setLayoutProperty(e,i,s,u),Us(this,qs,lo).call(this),this}setGlyphs(e,i){return Tr(this,oo)||this.map.setGlyphs(e,i),Us(this,qs,lo).call(this),this}onAdd(e){Iu(this,Wo,e),Iu(this,Ql,Ll("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[i,s]of Object.entries(Tr(this,js).containerStyle))Tr(this,Ql).style.setProperty(i,s);return Tr(this,js).container=Tr(this,Ql),Tr(this,js).zoom=e.getZoom()+Tr(this,js).zoomAdjust,this.map=new Af(Tr(this,js)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Us(this,Fp,Jv).call(this,Tr(this,js).parentRect),Iu(this,df,Us(this,Vp,Qv).call(this))}),Tr(this,Ql)}onRemove(){var e;(e=Tr(this,df))==null||e.call(this),Xv(Tr(this,Ql))}}js=new WeakMap;Wo=new WeakMap;Ql=new WeakMap;Yv=new WeakMap;ru=new WeakMap;oo=new WeakMap;df=new WeakMap;Fp=new WeakSet;Jv=function(t){t===void 0||t.linePaint===void 0&&t.fillPaint===void 0||(Iu(this,ru,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:Tr(this,ru)}),(t.lineLayout!==void 0||t.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:Ru({},t.lineLayout),paint:Ru({"line-color":"#FFF","line-width":1,"line-opacity":.85},t.linePaint)}),t.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:Ru({"fill-color":"#08F","fill-opacity":.135},t.fillPaint)}),Us(this,qs,lo).call(this))};qs=new WeakSet;lo=function(){if(Tr(this,ru)===void 0)return;const{devicePixelRatio:t}=window,e=Tr(this,Wo).getCanvas(),i=e.width/t,s=e.height/t,u=Tr(this,Wo).unproject.bind(Tr(this,Wo)),f=u([0,0]),d=u([i,0]),o=u([0,s]),_=u([i,s]);Tr(this,ru).geometry.coordinates=[[o.toArray(),_.toArray(),d.toArray(),f.toArray(),o.toArray()]],this.map.getSource("parentRect").setData(Tr(this,ru))};Vp=new WeakSet;Qv=function(){const{pitchAdjust:t}=Tr(this,js),e=()=>{f("parent")},i=()=>{f("minimap")},s=()=>{Tr(this,Wo).on("move",e),this.map.on("move",i)},u=()=>{Tr(this,Wo).off("move",e),this.map.off("move",i)},f=d=>{var o;u();const _=d==="parent"?Tr(this,Wo):this.map,v=d==="parent"?this.map:Tr(this,Wo),E=_.getCenter(),S=_.getZoom()+((o=Tr(this,js).zoomAdjust)!=null?o:-4)*(d==="parent"?1:-1),I=_.getBearing(),A=_.getPitch();v.jumpTo({center:E,zoom:S,bearing:I,pitch:t?A:0}),Us(this,qs,lo).call(this),s()};return s(),()=>{u()}};var E3=Object.defineProperty,S3=Object.defineProperties,I3=Object.getOwnPropertyDescriptors,y_=Object.getOwnPropertySymbols,T3=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable,$p=(t,e,i)=>e in t?E3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,C3=(t,e)=>{for(var i in e||(e={}))T3.call(e,i)&&$p(t,i,e[i]);if(y_)for(var i of y_(e))A3.call(e,i)&&$p(t,i,e[i]);return t},P3=(t,e)=>S3(t,I3(e)),hl=(t,e,i)=>($p(t,typeof e!="symbol"?e+"":e,i),i),jo=(t,e,i)=>new Promise((s,u)=>{var f=_=>{try{o(i.next(_))}catch(v){u(v)}},d=_=>{try{o(i.throw(_))}catch(v){u(v)}},o=_=>_.done?s(_.value):Promise.resolve(_.value).then(f,d);o((i=i.apply(t,e)).next())});const M3={POINT:"POINT",COUNTRY:"COUNTRY"};let Af=class extends cr.Map{constructor(e){var i,s,u;e.apiKey&&(Ao.apiKey=e.apiKey);const f=f_(e.style),d=location.hash;Ao.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!"),super(P3(C3({},e),{style:f,maplibreLogo:!1,transformRequest:h_(e.transformRequest)})),hl(this,"isTerrainEnabled",!1),hl(this,"terrainExaggeration",1),hl(this,"primaryLanguage"),hl(this,"terrainGrowing",!1),hl(this,"terrainFlattening",!1),hl(this,"minimap"),hl(this,"forceLanguageUpdate"),hl(this,"languageAlwaysBeenStyle"),hl(this,"isReady",!1),this.primaryLanguage=(i=e.language)!=null?i:Ao.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===Br.STYLE||this.primaryLanguage===Br.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Br.STYLE,this.terrainExaggeration=(s=e.terrainExaggeration)!=null?s:this.terrainExaggeration,this.once("styledata",()=>jo(this,null,function*(){if(!e.geolocate||e.center||e.hash&&d)return;try{if(e.geolocate===M3.COUNTRY){yield this.fitToIpBounds();return}}catch(A){console.warn(A.message)}let S;try{yield this.centerOnIpPoint(e.zoom),S=this.getCameraHash()}catch(A){console.warn(A.message)}(yield navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(A=>{S===this.getCameraHash()&&(this.terrain?this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:e.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[A.coords.longitude,A.coords.latitude],zoom:e.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})})),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>jo(this,null,function*(){K5()})),this.once("load",()=>jo(this,null,function*(){let S={logo:null};try{const I=Object.keys(this.style.sourceCaches).map(V=>this.getSource(V)).filter(V=>V&&"url"in V&&typeof V.url=="string"&&(V==null?void 0:V.url.includes("tiles.json"))),A=new URL(I[0].url);A.searchParams.has("key")||A.searchParams.append("key",Ao.apiKey),S=yield(yield fetch(A.href)).json()}catch{}if(e.forceNoAttributionControl!==!0)if("logo"in S&&S.logo){const I=S.logo;this.addControl(new s_({logoURL:I}),e.logoPosition),e.attributionControl===!1&&this.addControl(new m3({customAttribution:e.customAttribution}))}else e.maptilerLogo&&this.addControl(new s_,e.logoPosition);if(e.scaleControl){const I=e.scaleControl===!0||e.scaleControl===void 0?"bottom-right":e.scaleControl,A=new g3({unit:Ao.unit});this.addControl(A,I),Ao.on("unit",N=>{A.setUnit(N)})}if(e.navigationControl!==!1){const I=e.navigationControl===!0||e.navigationControl===void 0?"top-right":e.navigationControl;this.addControl(new i3,I)}if(e.geolocateControl!==!1){const I=e.geolocateControl===!0||e.geolocateControl===void 0?"top-right":e.geolocateControl;this.addControl(new p3({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),I)}if(e.terrainControl){const I=e.terrainControl===!0||e.terrainControl===void 0?"top-right":e.terrainControl;this.addControl(new Q5,I)}if(e.fullscreenControl){const I=e.fullscreenControl===!0||e.fullscreenControl===void 0?"top-right":e.fullscreenControl;this.addControl(new _3({}),I)}this.isReady=!0,this.fire("ready",{target:this})}));let o=!1,_=!1,v;this.once("ready",()=>{o=!0,_&&this.fire("loadWithTerrain",v)}),this.once("style.load",()=>{var S;const{minimap:I}=e;if(typeof I=="object"){const{zoom:A,center:N,style:V,language:j,apiKey:W,maptilerLogo:K,antialias:ne,refreshExpiredTiles:Y,maxBounds:re,scrollZoom:Q,minZoom:se,maxZoom:oe,boxZoom:Te,locale:fe,fadeDuration:ee,crossSourceCollisions:ge,clickTolerance:pe,bounds:ye,fitBoundsOptions:de,pixelRatio:Ne,validateStyle:Ge}=e;this.minimap=new ap(I,{zoom:A,center:N,style:V,language:j,apiKey:W,container:"null",maptilerLogo:K,antialias:ne,refreshExpiredTiles:Y,maxBounds:re,scrollZoom:Q,minZoom:se,maxZoom:oe,boxZoom:Te,locale:fe,fadeDuration:ee,crossSourceCollisions:ge,clickTolerance:pe,bounds:ye,fitBoundsOptions:de,pixelRatio:Ne,validateStyle:Ge}),this.addControl(this.minimap,(S=I.position)!=null?S:"bottom-left")}else I===!0?(this.minimap=new ap({},e),this.addControl(this.minimap,"bottom-left")):I!==void 0&&I!==!1&&(this.minimap=new ap({},e),this.addControl(this.minimap,I))});const E=S=>{S.terrain&&(_=!0,v={type:"loadWithTerrain",target:this,terrain:S.terrain},this.off("terrain",E),o&&this.fire("loadWithTerrain",v))};this.on("terrain",E),e.terrain&&this.enableTerrain((u=e.terrainExaggeration)!=null?u:this.terrainExaggeration)}onLoadAsync(){return jo(this,null,function*(){return new Promise(e=>{if(this.loaded())return e(this);this.once("load",()=>{e(this)})})})}onReadyAsync(){return jo(this,null,function*(){return new Promise(e=>{if(this.isReady)return e(this);this.once("ready",()=>{e(this)})})})}onLoadWithTerrainAsync(){return jo(this,null,function*(){return new Promise(e=>{if(this.isReady&&this.terrain)return e(this);this.once("loadWithTerrain",()=>{e(this)})})})}setStyle(e,i){var s;return(s=this.minimap)==null||s.setStyle(e),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(f_(e),i)}addLayer(e,i){var s;return(s=this.minimap)==null||s.addLayer(e,i),super.addLayer(e,i)}moveLayer(e,i){var s;return(s=this.minimap)==null||s.moveLayer(e,i),super.moveLayer(e,i)}removeLayer(e){var i;return(i=this.minimap)==null||i.removeLayer(e),super.removeLayer(e)}setLayerZoomRange(e,i,s){var u;return(u=this.minimap)==null||u.setLayerZoomRange(e,i,s),super.setLayerZoomRange(e,i,s)}setFilter(e,i,s){var u;return(u=this.minimap)==null||u.setFilter(e,i,s),super.setFilter(e,i,s)}setPaintProperty(e,i,s,u){var f;return(f=this.minimap)==null||f.setPaintProperty(e,i,s,u),super.setPaintProperty(e,i,s,u)}setLayoutProperty(e,i,s,u){var f;return(f=this.minimap)==null||f.setLayoutProperty(e,i,s,u),super.setLayoutProperty(e,i,s,u)}setGlyphs(e,i){var s;return(s=this.minimap)==null||s.setGlyphs(e,i),super.setGlyphs(e,i)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(e){var i,s;(s=(i=this.minimap)==null?void 0:i.map)==null||s.setLanguage(e),this.onStyleReady(()=>{this.setPrimaryLanguage(e)})}setPrimaryLanguage(e){const i=this.getStyleLanguage();if(!(e===Br.STYLE&&(i===Br.AUTO||i===Br.VISITOR))&&(e!==Br.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===e&&!this.forceLanguageUpdate))return;if(!r_(e)){console.warn(`The language "${e}" is not supported.`);return}if(this.primaryLanguage===Br.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=e;let s=e;if(e===Br.STYLE){if(!i){console.warn("The style has no default languages.");return}if(!r_(i)){console.warn("The language defined in the style is not valid.");return}s=i}let u=Br.LOCAL,f=`{${u}}`;s==Br.VISITOR?(u=i_(),f=["case",["all",["has",u],["has",Br.LOCAL]],["case",["==",["get",u],["get",Br.LOCAL]],["get",Br.LOCAL],["format",["get",u],{"font-scale":.8},`
`,["get",Br.LOCAL],{"font-scale":1.1}]],["get",Br.LOCAL]]):s==Br.VISITOR_ENGLISH?(u=Br.ENGLISH,f=["case",["all",["has",u],["has",Br.LOCAL]],["case",["==",["get",u],["get",Br.LOCAL]],["get",Br.LOCAL],["format",["get",u],{"font-scale":.8},`
`,["get",Br.LOCAL],{"font-scale":1.1}]],["get",Br.LOCAL]]):s===Br.AUTO?(u=i_(),f=["case",["has",u],["get",u],["get",Br.LOCAL]]):s===Br.LOCAL?(u=Br.LOCAL,f=`{${u}}`):(u=s,f=["case",["has",u],["get",u],["get",Br.LOCAL]]);const{layers:d}=this.getStyle();for(const{id:o,layout:_}of d){if(!_||!("text-field"in _))continue;const v=this.getLayoutProperty(o,"text-field");typeof v=="string"&&(v.toLowerCase().includes("ref")||v.toLowerCase().includes("housenumber"))||this.setLayoutProperty(o,"text-field",f)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(e,i=1e3){if(!this.terrain)return;const s=performance.now(),u=this.terrain.exaggeration,f=e-u,d=()=>{if(!this.terrain||this.terrainFlattening)return;const o=(performance.now()-s)/i;if(o<.99){const _=1-Math.pow(1-o,4),v=u+_*f;this.terrain.exaggeration=v,requestAnimationFrame(d)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=e;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(d)}enableTerrain(e=this.terrainExaggeration){if(e<0){console.warn("Terrain exaggeration cannot be negative.");return}const i=u=>jo(this,null,function*(){!this.terrain||u.type!=="data"||u.dataType!=="source"||!("source"in u)||u.sourceId!=="maptiler-terrain"||u.source.type!=="raster-dem"||u.isSourceLoaded&&(this.off("data",i),this.growTerrain(e))}),s=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=e,this.on("data",i),this.addSource(uo.terrainSourceId,{type:"raster-dem",url:uo.terrainSourceURL}),this.setTerrain({source:uo.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(e);return}this.loaded()||this.isTerrainEnabled?s():this.once("load",()=>{this.getTerrain()&&this.getSource(uo.terrainSourceId)||s()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const e=1*1e3,i=performance.now(),s=this.terrain.exaggeration,u=()=>{if(!this.terrain||this.terrainGrowing)return;const f=(performance.now()-i)/e;if(f<.99){const d=Math.pow(1-f,4),o=s*d;this.terrain.exaggeration=o,requestAnimationFrame(u)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(uo.terrainSourceId)&&this.removeSource(uo.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(u)}setTerrainExaggeration(e,i=!0){!i&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}onStyleReady(e){this.isStyleLoaded()?e():this.once("styledata",()=>{e()})}fitToIpBounds(){return jo(this,null,function*(){const e=yield t_.info();this.fitBounds(e.country_bounds,{duration:0,padding:100})})}centerOnIpPoint(e){return jo(this,null,function*(){var i,s;const u=yield t_.info();this.jumpTo({center:[(i=u==null?void 0:u.longitude)!=null?i:0,(s=u==null?void 0:u.latitude)!=null?s:0],zoom:e||11})})}getCameraHash(){const e=new Float32Array(5),i=this.getCenter();return e[0]=i.lng,e[1]=i.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),g5.fromUint8Array(new Uint8Array(e.buffer))}getSdkConfig(){return Ao}getMaptilerSessionId(){return Kv}setTransformRequest(e){return super.setTransformRequest(h_(e)),this}loadImageAsync(e){return jo(this,null,function*(){return new Promise((i,s)=>{this.loadImage(e,(u,f)=>{if(u){s(u);return}i(f)})})})}};class pf extends cr.Marker{addTo(e){return super.addTo(e)}}class z3 extends cr.Popup{addTo(e){return super.addTo(e)}}class VP extends cr.Style{constructor(e,i={}){super(e,i)}}class $P extends cr.CanvasSource{onAdd(e){super.onAdd(e)}}class UP extends cr.GeoJSONSource{onAdd(e){super.onAdd(e)}}class jP extends cr.ImageSource{onAdd(e){super.onAdd(e)}}class qP extends cr.RasterTileSource{onAdd(e){super.onAdd(e)}}class GP extends cr.RasterDEMTileSource{onAdd(e){super.onAdd(e)}}class ZP extends cr.VectorTileSource{onAdd(e){super.onAdd(e)}}class HP extends cr.VideoSource{onAdd(e){super.onAdd(e)}}class WP extends cr.TerrainControl{onAdd(e){return super.onAdd(e)}}var D3=Object.defineProperty,L3=(t,e,i)=>e in t?D3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,v_=(t,e,i)=>(L3(t,typeof e!="symbol"?e+"":e,i),i);function Wh(t){const e=t.toString(16);return e.length==1?"0"+e:e}function R3(t){return"#"+Wh(t[0])+Wh(t[1])+Wh(t[2])+(t.length===4?Wh(t[3]):"")}class Nn extends Array{constructor(e={}){super(),v_(this,"min",0),v_(this,"max",1),"min"in e&&(this.min=e.min),"max"in e&&(this.max=e.max),"stops"in e&&this.setStops(e.stops,{clone:!1})}static fromArrayDefinition(e){return new Nn({stops:e.map(i=>({value:i[0],color:i[1]}))})}setStops(e,i={clone:!0}){const s=i.clone?this.clone():this;s.length=0;let u=1/0,f=-1/0;for(let d=0;d<e.length;d+=1)u=Math.min(u,e[d].value),f=Math.max(f,e[d].value),s.push({value:e[d].value,color:e[d].color.slice()});return s.sort((d,o)=>d.value<o.value?-1:1),this.min=u,this.max=f,s}scale(e,i,s={clone:!0}){const u=s.clone,f=this[0].value,o=this.at(-1).value-f,_=i-e,v=[];for(let E=0;E<this.length;E+=1){const A=(this[E].value-f)/o*_+e;u?v.push({value:A,color:this[E].color.slice()}):this[E].value=A}return u?new Nn({stops:v}):this}at(e){return e<0?this[this.length+e]:this[e]}clone(){return new Nn({stops:this.getRawColorStops()})}getRawColorStops(){const e=[];for(let i=0;i<this.length;i+=1)e.push({value:this[i].value,color:this[i].color});return e}reverse(e={clone:!0}){const i=e.clone?this.clone():this;for(let s=0;s<~~(i.length/2);s+=1){const u=i[s].color;i[s].color=i.at(-(s+1)).color,i.at(-(s+1)).color=u}return i}getBounds(){return{min:this.min,max:this.max}}getColor(e,i={smooth:!0}){if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(let s=0;s<this.length-1;s+=1){if(e>this[s+1].value)continue;const u=this[s].color;if(!i.smooth)return u.slice();const f=this[s].value,d=this[s+1].value,o=this[s+1].color,_=(d-e)/(d-f);return u.map((v,E)=>Math.round(v*_+o[E]*(1-_)))}return[0,0,0]}getColorHex(e,i={smooth:!0,withAlpha:!1}){return R3(this.getColor(e,i))}getColorRelative(e,i={smooth:!0}){const s=this.getBounds();return this.getColor(s.min+e*(s.max-s.min),i)}getCanvasStrip(e={horizontal:!0,size:512,smooth:!0}){const i=document.createElement("canvas");i.width=e.horizontal?e.size:1,i.height=e.horizontal?1:e.size;const s=i.getContext("2d");if(!s)throw new Error("Canvs context is missing");const u=s.getImageData(0,0,i.width,i.height),f=u.data,d=e.size,o=this[0].value,E=(this.at(-1).value-o)/d;for(let S=0;S<d;S+=1){const I=this.getColor(o+S*E,{smooth:e.smooth});f[S*4]=I[0],f[S*4+1]=I[1],f[S*4+2]=I[2],f[S*4+3]=I.length>3?I[3]:255}return s.putImageData(u,0,0),i}resample(e,i=15){const s=this.getBounds(),u=this.scale(0,1),f=1/(i-1);let d;if(e==="ease-in-square")d=Array.from({length:i},(v,E)=>{const S=E*f,I=Math.pow(S,2),A=u.getColor(I);return{value:S,color:A}});else if(e==="ease-out-square")d=Array.from({length:i},(v,E)=>{const S=E*f,I=1-Math.pow(1-S,2),A=u.getColor(I);return{value:S,color:A}});else if(e==="ease-out-sqrt")d=Array.from({length:i},(v,E)=>{const S=E*f,I=Math.pow(S,.5),A=u.getColor(I);return{value:S,color:A}});else if(e==="ease-in-sqrt")d=Array.from({length:i},(v,E)=>{const S=E*f,I=1-Math.pow(1-S,.5),A=u.getColor(I);return{value:S,color:A}});else if(e==="ease-out-exp")d=Array.from({length:i},(v,E)=>{const S=E*f,I=1-Math.pow(2,-10*S),A=u.getColor(I);return{value:S,color:A}});else if(e==="ease-in-exp")d=Array.from({length:i},(v,E)=>{const S=E*f,I=Math.pow(2,10*S-10),A=u.getColor(I);return{value:S,color:A}});else throw new Error("Invalid ressampling method.");return new Nn({stops:d}).scale(s.min,s.max)}transparentStart(){const e=this.getRawColorStops();return e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001,e.forEach(i=>{i.color.length===3&&i.color.push(255)}),e[0].color[3]=0,new Nn({stops:e})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Nn({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Nn({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Nn({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Nn({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Nn({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Nn({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Nn({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Nn({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Nn({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Nn({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Nn({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Nn({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Nn({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Nn({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Nn({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Nn({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Nn({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Nn({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Nn({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Nn({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Nn({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Nn({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Nn({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Nn({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Nn({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Nn({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Nn({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Nn({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Nn({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Nn({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Nn({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Nn({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Nn({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Nn({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Nn({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Nn({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Nn({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Nn({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Nn({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Nn({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Nn({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Nn({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});const{setRTLTextPlugin:KP,getRTLTextPluginStatus:XP,LngLat:YP,LngLatBounds:JP,MercatorCoordinate:QP,Evented:e6,AJAXError:t6,prewarm:n6,clearPrewarmedResources:r6,version:i6,workerCount:a6,maxParallelImageRequests:s6,workerUrl:o6,addProtocol:l6,removeProtocol:u6}=cr;cr.Map;cr.Marker;cr.Popup;cr.Style;cr.CanvasSource;cr.GeoJSONSource;cr.ImageSource;cr.RasterTileSource;cr.RasterDEMTileSource;cr.VectorTileSource;cr.VideoSource;cr.NavigationControl;cr.GeolocateControl;cr.AttributionControl;cr.LogoControl;cr.ScaleControl;cr.FullscreenControl;cr.TerrainControl;var Dc={},zm={};Object.defineProperty(zm,"__esModule",{value:!0});function B3(t,e){if(!t)return[];var i=[],s=!1;return t.split("").forEach(function(u){var f=e[u];if(s&&f&&(f=null,s=!1),!f){if(!s&&u==="\\"){s=!0;return}s=!1,i.push({char:u});return}f.regexp&&i.push(f)}),i}zm.default=B3;var Dm={},eh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.USER=1]="USER",e[e.CHAR=2]="CHAR",e[e.MASK=3]="MASK"}(t.CharTypes||(t.CharTypes={}))})(eh);var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0});var Yl=eh;function O3(t,e,i,s,u,f){var d=[],o=0,_=0,v="",E=0;function S(N,V,j){V&&V[0]===N.char?_++:(j&&(j.char===N.char||j.type!==Yl.CharTypes.USER)||i)&&o++,d.push({char:N.char,type:Yl.CharTypes.CHAR}),V&&E++,v+=N.char}function I(N,V,j,W){var K=null;if(j){for(var ne=0;!N.regexp.test(j[ne])&&j.length>ne;)ne++,_++;j.length>ne&&(_++,E++,o++,K=j[ne],d.push({char:K,type:Yl.CharTypes.USER}),v+=K)}if(!K){if(W&&W.type===Yl.CharTypes.CHAR&&t.length>o+1){o++,A(N,V);return}if(W&&W.type===Yl.CharTypes.USER&&N.regexp.test(W.char)){d.push({char:W.char,type:Yl.CharTypes.USER}),v+=W.char,o++;return}K=u?u[V]:s,d.push({char:K,type:Yl.CharTypes.MASK}),t.length>V&&o++,v+=K}}function A(N,V){var j=t.length>o?t[o]:null,W=null;if(f.start<=V&&_<i.length&&(W=i.slice(_)),N.char)return S(N,W,j);if(N.regexp)return I(N,V,W,j)}return e.forEach(function(N,V){A(N,V)}),{value:d,maskedValue:v,inputValuesApplied:E}}Lm.buildInputStrings=O3;Object.defineProperty(Dm,"__esModule",{value:!0});var sp=eh,N3=Lm;function F3(t){for(var e=t.data,i=t.input,s=i===void 0?"":i,u=t.selection,f=t.mask,d=t.maskChar,o=t.maskString,_=N3.buildInputStrings(e,f,s,d,o,u),v=_.value,E=_.maskedValue,S=_.inputValuesApplied,I=u.start+S,A=v.length-1,N=0;A>=0&&v[A].type!==sp.CharTypes.USER;)v[A].type===sp.CharTypes.MASK&&(N=0),v[A].type===sp.CharTypes.CHAR&&N++,A--;A+=N;for(var V="",j=0;j<=A;j++)V+=v[j].char;return{value:v,visibleValue:V,maskedValue:E,selection:{start:I,end:I}}}Dm.default=F3;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var eb=eh,V3=function(t,e){for(var i=[],s=0;s<t;s++)i.push({char:e,type:eb.CharTypes.MASK});return i},$3=function(t,e,i){if(t){for(var s=[],u=i.start;u<i.end;u++)s.push({char:t[u],type:eb.CharTypes.MASK});return s}return V3(i.end-i.start,e)};function U3(t){var e=t.value,i=t.selection,s=t.maskChar,u=t.maskString;if(i.end<i.start){var f=i.end;i.end=i.start,i.start=f}return i.start===i.end?e:e.length>i.start?e.slice(0,i.start).concat($3(u,s,i),e.slice(i.end,e.length)):e}Rm.default=U3;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=zm,i=Dm,s=Rm,u=eh;t.defaults={maskFormat:[{str:"0",regexp:/[0-9]/},{str:"*",regexp:/./},{str:"a",regexp:/[a-zA-Z]/}],maskChar:"",showMask:!1,removeSelectedRange:s.default},t.createInput=function(f){var d=f.maskString,o=f.reformat,_=f.maskFormat,v=_===void 0?t.defaults.maskFormat:_,E=f.maskChar,S=E===void 0?t.defaults.maskChar:E;if(!o&&!f.mask?o=function(Q){var se=Q.value.map(function(oe){return oe.char}).join("");return{value:Q.value,visibleValue:se,maskedValue:se,selection:Q.selection}}:o&&(f.mask=null),d&&d.length!==f.mask.length)throw new Error("maskString must have same length as mask");if(S.length>1)throw new Error("maskChar must have only 1 char");var I,A={start:0,end:0},N,V,j,W,K=[],ne={subscribe:function(Q){K.push(Q)},unsubscribe:function(Q){K=K.filter(function(se){return se!==Q})},setMaskFormat:function(Q){I=Q.reduce(function(se,oe){return se[oe.str]=oe,se},{})},setValue:function(Q){var se;if(o)se=o({value:Q,selection:A});else{var oe=void 0;if(Array.isArray(Q))oe=Q;else{oe=[];for(var Te=0;Te<Q.length;Te++)oe.push({char:Q[Te],type:u.CharTypes.USER})}se=i.default({data:oe,selection:A,mask:W,maskChar:S,maskString:d})}Y(se)},setSelection:function(Q){A=Q},getSelection:function(){return{start:A.start,end:A.end}},backspace:function(){ne.removePreviosOrSelected()},removePreviosOrSelected:function(){A.start===A.end&&(A.start=A.end-1,A.start<0&&(A.start=0)),ne.input("")},removeNextOrSelected:function(){A.start===A.end&&A.end++,ne.input("")},getState:function(){return{value:N,maskedValue:V,visibleValue:j,selection:A}},setMask:function(Q){W=e.default(Q,I),ne.setValue(N)},setMaskChar:function(Q){if(S.length>1)throw new Error("maskChar must have only 1 char");S=Q,ne.setValue(N)},setMaskString:function(Q){if(Q&&Q.length!==W.length)throw new Error("maskString must have the same length as mask");d=Q,ne.setValue(N)},setReformat:function(Q){o=Q,ne.setValue(N)},paste:function(Q){ne.input(Q)},input:function(Q){var se;if(o)se=o({value:N,input:Q,selection:A});else{var oe=s.default({value:N,selection:A,maskChar:S,maskString:d});A.end=A.start,se=i.default({data:oe,input:Q,selection:A,mask:W,maskChar:S,maskString:d})}Y(se)}};function Y(Q){var se=V,oe=j,Te=A;N=Q.value,V=Q.maskedValue,j=Q.visibleValue,ne.setSelection(Q.selection),(se!==V||oe!==j||Te.start!==A.start||Te.end!==A.end)&&re()}function re(){var Q=ne.getState();K.forEach(function(se){se(Q)})}return ne.setMaskFormat(v),W=e.default(f.mask,I),ne.setValue(f.value),ne}})(Dc);function j3(t){let e,i,s,u=[t[8],{value:t[0]}],f={};for(let d=0;d<u.length;d+=1)f=Xo(f,u[d]);return{c(){e=Z("input"),this.h()},l(d){e=G(d,"INPUT",{}),this.h()},h(){Sf(e,f)},m(d,o){Oe(d,e,o),"value"in f&&(e.value=f.value),e.autofocus&&e.focus(),t[18](e),i||(s=[bt(e,"input",t[2]),bt(e,"keydown",t[5]),bt(e,"keypress",t[4]),bt(e,"paste",t[3]),bt(e,"focus",t[6]),bt(e,"blur",t[7])],i=!0)},p(d,[o]){Sf(e,f=gv(u,[o&256&&d[8],o&1&&e.value!==d[0]&&{value:d[0]}])),"value"in f&&(e.value=f.value)},i:nr,o:nr,d(d){d&&R(e),t[18](null),i=!1,Or(s)}}}function q3(t,e,i){const s=["value","defaultValue","reformat","maskString","maskChar","mask","maskFormat","alwaysShowMask","showMask"];let u=Nu(e,s),{value:f=""}=e,{defaultValue:d=void 0}=e,{reformat:o=void 0}=e,{maskString:_=void 0}=e,{maskChar:v=Dc.defaults.maskChar}=e,{mask:E=Dc.defaults.mask}=e,{maskFormat:S=Dc.defaults.maskFormat}=e,{alwaysShowMask:I=!1}=e,{showMask:A=!1}=e;const N={BACKSPACE:8,DELETE:46},V=Jf(),j=Dc.createInput({value:f||d||"",reformat:o,maskString:_,maskChar:v,mask:E,maskFormat:S});let W=I||A;ys(()=>{j.subscribe(Q)}),Yf(()=>{j.unsubscribe(Q)});let K=!1,ne=re(j.getState()),Y;function re({maskedValue:Le,visibleValue:Me}){return W&&(K||I)?Le:Me}function Q({maskedValue:Le,visibleValue:Me,selection:$e,value:ht}){i(0,ne=re({maskedValue:Le,visibleValue:Me})),se($e),Ne({unmasked:o?ht:ht.filter(ut=>ut.type===1).map(ut=>ut.char).join(""),maskedValue:Le,visibleValue:Me})}async function se({start:Le,end:Me}){if(!K)return;await ew(),Y.setSelectionRange(Le,Me),(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||(ht=>setTimeout(ht,0)))(()=>Y.setSelectionRange(Le,Me))}function oe(){j.setSelection({start:Y.selectionStart,end:Y.selectionEnd})}function Te(){return A&&(K||I)?j.getState().maskedValue:j.getState().visibleValue}function fe(Le){const Me=Te();Le.target.value!==Me&&(j.input(Le.data),se(j.getSelection()),setTimeout(()=>se(j.getSelection()),0))}function ee(Le){Le.preventDefault(),oe(),j.paste(Le.clipboardData.getData("Text")),se(j.getSelection()),setTimeout(()=>se(j.getSelection()),0)}function ge(Le){Le.metaKey||Le.altKey||Le.ctrlKey||Le.key==="Enter"||(Le.preventDefault(),oe(),j.input(Le.key||Le.data||String.fromCharCode(Le.which)),se(j.getSelection()))}function pe(Le){Le.which===N.BACKSPACE&&(Le.preventDefault(),oe(),j.removePreviosOrSelected(),se(j.getSelection())),Le.which===N.DELETE&&(Le.preventDefault(),oe(),j.removeNextOrSelected(),se(j.getSelection()))}function ye(Le){K=!0,V("focus",Le)}function de(Le){K=!1,V("blur",Le)}function Ne({unmasked:Le,maskedValue:Me,visibleValue:$e}){V("change",{element:Y,inputState:{unmaskedValue:Le,maskedValue:Me,visibleValue:$e}})}function Ge(Le){Cn[Le?"unshift":"push"](()=>{Y=Le,i(1,Y)})}return t.$$set=Le=>{e=Xo(Xo({},e),Ef(Le)),i(8,u=Nu(e,s)),"value"in Le&&i(9,f=Le.value),"defaultValue"in Le&&i(10,d=Le.defaultValue),"reformat"in Le&&i(11,o=Le.reformat),"maskString"in Le&&i(12,_=Le.maskString),"maskChar"in Le&&i(13,v=Le.maskChar),"mask"in Le&&i(14,E=Le.mask),"maskFormat"in Le&&i(15,S=Le.maskFormat),"alwaysShowMask"in Le&&i(16,I=Le.alwaysShowMask),"showMask"in Le&&i(17,A=Le.showMask)},t.$$.update=()=>{t.$$.dirty&196608&&(W=I||A),t.$$.dirty&2048&&j.setReformat(o),t.$$.dirty&32768&&j.setMaskFormat(S),t.$$.dirty&16384&&j.setMask(E),t.$$.dirty&4096&&j.setMaskString(_),t.$$.dirty&8192&&j.setMaskChar(v),t.$$.dirty&512&&f!==void 0&&j.setValue(f)},[ne,Y,fe,ee,ge,pe,ye,de,u,f,d,o,_,v,E,S,I,A,Ge]}class G3 extends Pr{constructor(e){super(),Mr(this,e,q3,j3,Cr,{value:9,defaultValue:10,reformat:11,maskString:12,maskChar:13,mask:14,maskFormat:15,alwaysShowMask:16,showMask:17})}}const{document:b_,window:Z3}=td;function x_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function w_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function k_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function E_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function S_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function I_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function T_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function A_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function C_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function P_(t,e,i){const s=t.slice();return s[62]=e[i][0],s[63]=e[i][1],s}function M_(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function z_(t){let e,i,s='<span class="number_type noselect">1</span> Lokalizacja',u,f,d,o,_,v,E,S,I='<span class="number_type noselect">3</span>Wycena posiadłości',A,N,V,j,W="zł",K,ne,Y="Ogólna wartość lokalu",re,Q,se,oe='<span class="number_type noselect">2</span>Charakterystyka lokum',Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut,Fe,ze,gt,Zt,an,yn,sn,Dt,$t="Dostępność jasnej, osobnej kuchni",ct,xt,wt,Wt,Qt,Ht,kt="Balkon lub taras",dt,be,Et,Ut,_t,zt,gn="Dostep do windy",Mn,Hn,Kn,br,Yn,rr,vt="Piwnica lub komórka lokatorska",Vn,He,pt,dn,lt,en,tn="Miejsce postojowe",wr,mr,on,Xn,ke,X,ae="Księga wieczysta",me,Ae,Ce,je,te,ue,_e,qe="Rodzaj budynku",Je,Qe,Nt,Jt,Lt,qt,cn="Rok powstania",ln,In,Ln,Tn,hr,Rn,kr,ar,Fr,bi,qr,Jr,hi="Rynek",$n,Ma,fi,Un,Bn,fr,Bt,Pn=t[0].params.M2_PRICE+"",St,Qi,dr,Fn,ni,Er,Ai,Gr,xi,Ci,Qa,Xr,wi,ma,Xi=t[0].params.FROM_PRICE+"",Di,ea,vs,Ds=t[0].params.TO_PRICE+"",ga,ta,za,po,Da,sa,oa,Hs="Ogólna wartość lokalu",Do,_a,es,ts='<span class="number_type noselect">4</span>Ogólny wniosek',Ws,ri,bs=t[0].params.WNIOSEK+"",xs,Li,Ls,Rs,Lr=t[1]==!0&&D_();N=new G3({props:{alwaysShowMask:!0,mask:"000 000",class:"lokalization_price",value:t[0].params.price.toString()}}),N.$on("change",t[13]);function Jn(rt){t[18](rt)}function mo(rt){t[19](rt)}let Ri={editValue:!0,$$slots:{default:[K3]},$$scope:{ctx:t}};t[0].params.STANDARD!==void 0&&(Ri.selectedValue=t[0].params.STANDARD),t[0].params.STANDARD!==void 0&&(Ri.customValue=t[0].params.STANDARD),$e=new rp({props:Ri}),Cn.push(()=>tr($e,"selectedValue",Jn)),Cn.push(()=>tr($e,"customValue",mo));let ii=xr(Object.entries(t[8].answers.bool)),ai=[];for(let rt=0;rt<ii.length;rt+=1)ai[rt]=R_(C_(t,ii,rt));let La=xr(Object.entries(t[8].answers.bool)),Qr=[];for(let rt=0;rt<La.length;rt+=1)Qr[rt]=B_(A_(t,La,rt));let ns=xr(Object.entries(t[8].answers.bool)),si=[];for(let rt=0;rt<ns.length;rt+=1)si[rt]=O_(T_(t,ns,rt));let Ra=xr(Object.entries(t[8].answers.bool)),oi=[];for(let rt=0;rt<Ra.length;rt+=1)oi[rt]=N_(I_(t,Ra,rt));let rs=xr(Object.entries(t[8].answers.PARKING)),ei=[];for(let rt=0;rt<rs.length;rt+=1)ei[rt]=F_(S_(t,rs,rt));function Jo(rt){t[25](rt)}function yl(rt){t[26](rt)}let is={editValue:!0,$$slots:{default:[lk]},$$scope:{ctx:t}};t[0].params.KSIEGA!==void 0&&(is.selectedValue=t[0].params.KSIEGA),t[0].params.KSIEGA!==void 0&&(is.customValue=t[0].params.KSIEGA),Ae=new rp({props:is}),Cn.push(()=>tr(Ae,"selectedValue",Jo)),Cn.push(()=>tr(Ae,"customValue",yl));let Ks=xr(Object.entries(t[8].answers.RODZAJ)),di=[];for(let rt=0;rt<Ks.length;rt+=1)di[rt]=$_(k_(t,Ks,rt));function Ol(rt){t[28](rt)}function vl(rt){t[29](rt)}let Qo={editValue:!0,$$slots:{default:[dk]},$$scope:{ctx:t}};t[0].params.ROK_POWSTANIA!==void 0&&(Qo.selectedValue=t[0].params.ROK_POWSTANIA),t[0].params.ROK_POWSTANIA!==void 0&&(Qo.customValue=t[0].params.ROK_POWSTANIA),In=new rp({props:Qo}),Cn.push(()=>tr(In,"selectedValue",Ol)),Cn.push(()=>tr(In,"customValue",vl));let Bs=xr(Object.entries(t[8].answers.RYNEK)),li=[];for(let rt=0;rt<Bs.length;rt+=1)li[rt]=j_(x_(t,Bs,rt));return{c(){e=Z("div"),i=Z("h2"),i.innerHTML=s,u=we(),f=Z("textarea"),o=we(),Lr&&Lr.c(),_=we(),v=Z("div"),E=Z("div"),S=Z("h2"),S.innerHTML=I,A=we(),Ct(N.$$.fragment),V=we(),j=Z("span"),j.textContent=W,K=we(),ne=Z("p"),ne.textContent=Y,re=we(),Q=Z("div"),se=Z("h2"),se.innerHTML=oe,Te=we(),fe=Z("ul"),ee=Z("li"),ge=Mt(`Powierzchnia
						`),pe=Z("input"),ye=we(),de=Z("span"),Ne=new Dl(!1),Ge=we(),Le=Z("li"),Me=Mt(`Standard mieszkania

						`),Ct($e.$$.fragment),Fe=we(),ze=Z("li"),gt=Mt("Pokoje"),Zt=Z("input"),yn=we(),sn=Z("li"),Dt=Z("p"),Dt.textContent=$t,ct=we(),xt=Z("span"),wt=Z("select");for(let rt=0;rt<ai.length;rt+=1)ai[rt].c();Wt=we(),Qt=Z("li"),Ht=Z("p"),Ht.textContent=kt,dt=we(),be=Z("span"),Et=Z("select");for(let rt=0;rt<Qr.length;rt+=1)Qr[rt].c();Ut=we(),_t=Z("li"),zt=Z("p"),zt.textContent=gn,Mn=we(),Hn=Z("span"),Kn=Z("select");for(let rt=0;rt<si.length;rt+=1)si[rt].c();br=we(),Yn=Z("li"),rr=Z("p"),rr.textContent=vt,Vn=we(),He=Z("span"),pt=Z("select");for(let rt=0;rt<oi.length;rt+=1)oi[rt].c();dn=we(),lt=Z("li"),en=Z("p"),en.textContent=tn,wr=we(),mr=Z("span"),on=Z("select");for(let rt=0;rt<ei.length;rt+=1)ei[rt].c();Xn=we(),ke=Z("li"),X=Z("p"),X.textContent=ae,me=we(),Ct(Ae.$$.fragment),te=we(),ue=Z("li"),_e=Z("p"),_e.textContent=qe,Je=we(),Qe=Z("span"),Nt=Z("select");for(let rt=0;rt<di.length;rt+=1)di[rt].c();Jt=we(),Lt=Z("li"),qt=Z("p"),qt.textContent=cn,ln=we(),Ct(In.$$.fragment),hr=we(),Rn=Z("li"),kr=Mt("Liczba kondygnacji"),ar=Z("input"),bi=we(),qr=Z("li"),Jr=Z("p"),Jr.textContent=hi,$n=we(),Ma=Z("span"),fi=Z("select");for(let rt=0;rt<li.length;rt+=1)li[rt].c();Un=we(),Bn=Z("div"),fr=Z("div"),Bt=Z("p"),St=Mt(Pn),Qi=we(),dr=Z("span"),Fn=Mt("zł/"),ni=new Dl(!1),Er=we(),Ai=Z("p"),Gr=Mt("Cena za "),xi=new Dl(!1),Ci=Mt(" mieszkania"),Qa=we(),Xr=Z("p"),wi=Mt(`od
						`),ma=Z("span"),Di=Mt(Xi),ea=Mt(`
						do
						`),vs=Z("span"),ga=Mt(Ds),ta=we(),za=Z("span"),po=Mt("zł/"),Da=new Dl(!1),sa=we(),oa=Z("p"),oa.textContent=Hs,Do=we(),_a=Z("div"),es=Z("h2"),es.innerHTML=ts,Ws=we(),ri=Z("p"),xs=Mt(bs),this.h()},l(rt){e=G(rt,"DIV",{class:!0});var kn=J(e);i=G(kn,"H2",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-e9nt6g"&&(i.innerHTML=s),u=xe(kn),f=G(kn,"TEXTAREA",{class:!0,type:!0,rows:!0}),J(f).forEach(R),o=xe(kn),Lr&&Lr.l(kn),kn.forEach(R),_=xe(rt),v=G(rt,"DIV",{class:!0});var Gn=J(v);E=G(Gn,"DIV",{class:!0});var pi=J(E);S=G(pi,"H2",{class:!0,"data-svelte-h":!0}),Vt(S)!=="svelte-1exs96m"&&(S.innerHTML=I),A=xe(pi),At(N.$$.fragment,pi),V=xe(pi),j=G(pi,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(j)!=="svelte-aeqywh"&&(j.textContent=W),K=xe(pi),ne=G(pi,"P",{class:!0,"data-svelte-h":!0}),Vt(ne)!=="svelte-hasn52"&&(ne.textContent=Y),pi.forEach(R),Gn.forEach(R),re=xe(rt),Q=G(rt,"DIV",{class:!0});var ya=J(Q);se=G(ya,"H2",{class:!0,"data-svelte-h":!0}),Vt(se)!=="svelte-obc2s6"&&(se.innerHTML=oe),Te=xe(ya),fe=G(ya,"UL",{class:!0});var _r=J(fe);ee=G(_r,"LI",{class:!0});var Ft=J(ee);ge=Pt(Ft,`Powierzchnia
						`),pe=G(Ft,"INPUT",{type:!0,class:!0,style:!0}),ye=xe(Ft),de=G(Ft,"SPAN",{class:!0});var Sr=J(de);Ne=zl(Sr,!1),Sr.forEach(R),Ft.forEach(R),Ge=xe(_r),Le=G(_r,"LI",{class:!0});var go=J(Le);Me=Pt(go,`Standard mieszkania

						`),At($e.$$.fragment,go),go.forEach(R),Fe=xe(_r),ze=G(_r,"LI",{class:!0});var Ba=J(ze);gt=Pt(Ba,"Pokoje"),Zt=G(Ba,"INPUT",{type:!0,class:!0}),Ba.forEach(R),yn=xe(_r),sn=G(_r,"LI",{class:!0});var Oa=J(sn);Dt=G(Oa,"P",{"data-svelte-h":!0}),Vt(Dt)!=="svelte-15e43kz"&&(Dt.textContent=$t),ct=xe(Oa),xt=G(Oa,"SPAN",{});var el=J(xt);wt=G(el,"SELECT",{});var _o=J(wt);for(let qn=0;qn<ai.length;qn+=1)ai[qn].l(_o);_o.forEach(R),el.forEach(R),Oa.forEach(R),Wt=xe(_r),Qt=G(_r,"LI",{class:!0});var et=J(Qt);Ht=G(et,"P",{"data-svelte-h":!0}),Vt(Ht)!=="svelte-1xt9i3r"&&(Ht.textContent=kt),dt=xe(et),be=G(et,"SPAN",{});var pn=J(be);Et=G(pn,"SELECT",{});var Na=J(Et);for(let qn=0;qn<Qr.length;qn+=1)Qr[qn].l(Na);Na.forEach(R),pn.forEach(R),et.forEach(R),Ut=xe(_r),_t=G(_r,"LI",{class:!0});var jn=J(_t);zt=G(jn,"P",{"data-svelte-h":!0}),Vt(zt)!=="svelte-10tmi09"&&(zt.textContent=gn),Mn=xe(jn),Hn=G(jn,"SPAN",{});var la=J(Hn);Kn=G(la,"SELECT",{});var gr=J(Kn);for(let qn=0;qn<si.length;qn+=1)si[qn].l(gr);gr.forEach(R),la.forEach(R),jn.forEach(R),br=xe(_r),Yn=G(_r,"LI",{class:!0});var yr=J(Yn);rr=G(yr,"P",{"data-svelte-h":!0}),Vt(rr)!=="svelte-1gnjihv"&&(rr.textContent=vt),Vn=xe(yr),He=G(yr,"SPAN",{});var Fa=J(He);pt=G(Fa,"SELECT",{});var va=J(pt);for(let qn=0;qn<oi.length;qn+=1)oi[qn].l(va);va.forEach(R),Fa.forEach(R),yr.forEach(R),dn=xe(_r),lt=G(_r,"LI",{class:!0});var Va=J(lt);en=G(Va,"P",{"data-svelte-h":!0}),Vt(en)!=="svelte-1t3kegi"&&(en.textContent=tn),wr=xe(Va),mr=G(Va,"SPAN",{});var as=J(mr);on=G(as,"SELECT",{});var na=J(on);for(let qn=0;qn<ei.length;qn+=1)ei[qn].l(na);na.forEach(R),as.forEach(R),Va.forEach(R),Xn=xe(_r),ke=G(_r,"LI",{class:!0});var $a=J(ke);X=G($a,"P",{"data-svelte-h":!0}),Vt(X)!=="svelte-9nhi5f"&&(X.textContent=ae),me=xe($a),At(Ae.$$.fragment,$a),$a.forEach(R),te=xe(_r),ue=G(_r,"LI",{class:!0});var ba=J(ue);_e=G(ba,"P",{"data-svelte-h":!0}),Vt(_e)!=="svelte-omu0cm"&&(_e.textContent=qe),Je=xe(ba),Qe=G(ba,"SPAN",{});var ua=J(Qe);Nt=G(ua,"SELECT",{});var Ua=J(Nt);for(let qn=0;qn<di.length;qn+=1)di[qn].l(Ua);Ua.forEach(R),ua.forEach(R),ba.forEach(R),Jt=xe(_r),Lt=G(_r,"LI",{class:!0});var ca=J(Lt);qt=G(ca,"P",{"data-svelte-h":!0}),Vt(qt)!=="svelte-vwy4x4"&&(qt.textContent=cn),ln=xe(ca),At(In.$$.fragment,ca),ca.forEach(R),hr=xe(_r),Rn=G(_r,"LI",{class:!0});var Bi=J(Rn);kr=Pt(Bi,"Liczba kondygnacji"),ar=G(Bi,"INPUT",{type:!0,class:!0}),Bi.forEach(R),bi=xe(_r),qr=G(_r,"LI",{class:!0});var ws=J(qr);Jr=G(ws,"P",{"data-svelte-h":!0}),Vt(Jr)!=="svelte-1l1hnqd"&&(Jr.textContent=hi),$n=xe(ws),Ma=G(ws,"SPAN",{});var ks=J(Ma);fi=G(ks,"SELECT",{});var ja=J(fi);for(let qn=0;qn<li.length;qn+=1)li[qn].l(ja);ja.forEach(R),ks.forEach(R),ws.forEach(R),_r.forEach(R),ya.forEach(R),Un=xe(rt),Bn=G(rt,"DIV",{class:!0});var ss=J(Bn);fr=G(ss,"DIV",{class:!0});var Oi=J(fr);Bt=G(Oi,"P",{class:!0,contenteditable:!0});var Yi=J(Bt);St=Pt(Yi,Pn),Qi=xe(Yi),dr=G(Yi,"SPAN",{class:!0});var Es=J(dr);Fn=Pt(Es,"zł/"),ni=zl(Es,!1),Es.forEach(R),Yi.forEach(R),Er=xe(Oi),Ai=G(Oi,"P",{class:!0});var os=J(Ai);Gr=Pt(os,"Cena za "),xi=zl(os,!1),Ci=Pt(os," mieszkania"),os.forEach(R),Qa=xe(Oi),Xr=G(Oi,"P",{class:!0});var Pi=J(Xr);wi=Pt(Pi,`od
						`),ma=G(Pi,"SPAN",{class:!0});var Xs=J(ma);Di=Pt(Xs,Xi),Xs.forEach(R),ea=Pt(Pi,`
						do
						`),vs=G(Pi,"SPAN",{class:!0});var Ys=J(vs);ga=Pt(Ys,Ds),Ys.forEach(R),ta=xe(Pi),za=G(Pi,"SPAN",{class:!0});var ls=J(za);po=Pt(ls,"zł/"),Da=zl(ls,!1),ls.forEach(R),Pi.forEach(R),sa=xe(Oi),oa=G(Oi,"P",{class:!0,"data-svelte-h":!0}),Vt(oa)!=="svelte-dwzpa2"&&(oa.textContent=Hs),Oi.forEach(R),Do=xe(ss),_a=G(ss,"DIV",{class:!0});var Rr=J(_a);es=G(Rr,"H2",{class:!0,"data-svelte-h":!0}),Vt(es)!=="svelte-4iu2q6"&&(es.innerHTML=ts),Ws=xe(Rr),ri=G(Rr,"P",{class:!0,contenteditable:!0});var us=J(ri);xs=Pt(us,bs),us.forEach(R),Rr.forEach(R),ss.forEach(R),this.h()},h(){z(i,"class","title_medium noselect"),z(f,"class","lokalization_name"),z(f,"type","text"),z(f,"rows","auto"),f.value=d=t[0].adres,z(e,"class","grid_content noselect"),z(S,"class","title_medium noselect"),z(j,"class","symbol"),z(ne,"class","noselect opis"),z(E,"class","backgr_rounded"),z(v,"class","grid_content"),z(se,"class","title_medium noselect"),z(pe,"type","number"),z(pe,"class","value m2class"),Hi(pe,"right","66px"),Ne.a=null,z(de,"class","val_symbol"),z(ee,"class","place_ noselect"),z(Le,"class","place_ noselect"),z(Zt,"type","number"),z(Zt,"class","value"),Zt.value=an=t[0].params.POKOJE,z(ze,"class","place_ noselect"),t[0].params.KUCHNIA===void 0&&vi(()=>t[20].call(wt)),z(sn,"class","place_ noselect"),t[0].params.BALKON_TARAS===void 0&&vi(()=>t[21].call(Et)),z(Qt,"class","place_ noselect"),t[0].params.WINDA===void 0&&vi(()=>t[22].call(Kn)),z(_t,"class","place_ noselect"),t[0].params.PIWNICA===void 0&&vi(()=>t[23].call(pt)),z(Yn,"class","place_ noselect"),t[0].params.PARKING===void 0&&vi(()=>t[24].call(on)),z(lt,"class","place_ noselect"),z(ke,"class","place_ noselect"),t[0].params.RODZAJ===void 0&&vi(()=>t[27].call(Nt)),z(ue,"class","place_ noselect"),z(Lt,"class","place_ noselect"),z(ar,"type","number"),z(ar,"class","value"),ar.value=Fr=t[0].params.LICZBAKOND,z(Rn,"class","place_ noselect"),t[0].params.RYNEK===void 0&&vi(()=>t[30].call(fi)),z(qr,"class","place_ noselect"),z(fe,"class","place_params"),z(Q,"class","grid_content"),ni.a=null,z(dr,"class","sign"),z(Bt,"class","noselect opis1"),z(Bt,"contenteditable","true"),xi.a=Ci,z(Ai,"class","noselect opis2"),z(ma,"class","from_price"),z(vs,"class","to_price"),Da.a=null,z(za,"class","sign"),z(Xr,"class","noselect opis1"),z(oa,"class","noselect opis2"),z(fr,"class","podsumowanie"),z(es,"class","title_medium noselect"),z(ri,"class","text"),z(ri,"contenteditable","true"),z(_a,"class","wniosek"),z(Bn,"class","grid_content")},m(rt,kn){Oe(rt,e,kn),P(e,i),P(e,u),P(e,f),P(e,o),Lr&&Lr.m(e,null),Oe(rt,_,kn),Oe(rt,v,kn),P(v,E),P(E,S),P(E,A),Tt(N,E,null),P(E,V),P(E,j),P(E,K),P(E,ne),Oe(rt,re,kn),Oe(rt,Q,kn),P(Q,se),P(Q,Te),P(Q,fe),P(fe,ee),P(ee,ge),P(ee,pe),Gt(pe,t[0].params.POW),P(ee,ye),P(ee,de),Ne.m(Kh,de),P(fe,Ge),P(fe,Le),P(Le,Me),Tt($e,Le,null),P(fe,Fe),P(fe,ze),P(ze,gt),P(ze,Zt),P(fe,yn),P(fe,sn),P(sn,Dt),P(sn,ct),P(sn,xt),P(xt,wt);for(let Gn=0;Gn<ai.length;Gn+=1)ai[Gn]&&ai[Gn].m(wt,null);Cs(wt,t[0].params.KUCHNIA,!0),P(fe,Wt),P(fe,Qt),P(Qt,Ht),P(Qt,dt),P(Qt,be),P(be,Et);for(let Gn=0;Gn<Qr.length;Gn+=1)Qr[Gn]&&Qr[Gn].m(Et,null);Cs(Et,t[0].params.BALKON_TARAS,!0),P(fe,Ut),P(fe,_t),P(_t,zt),P(_t,Mn),P(_t,Hn),P(Hn,Kn);for(let Gn=0;Gn<si.length;Gn+=1)si[Gn]&&si[Gn].m(Kn,null);Cs(Kn,t[0].params.WINDA,!0),P(fe,br),P(fe,Yn),P(Yn,rr),P(Yn,Vn),P(Yn,He),P(He,pt);for(let Gn=0;Gn<oi.length;Gn+=1)oi[Gn]&&oi[Gn].m(pt,null);Cs(pt,t[0].params.PIWNICA,!0),P(fe,dn),P(fe,lt),P(lt,en),P(lt,wr),P(lt,mr),P(mr,on);for(let Gn=0;Gn<ei.length;Gn+=1)ei[Gn]&&ei[Gn].m(on,null);Cs(on,t[0].params.PARKING,!0),P(fe,Xn),P(fe,ke),P(ke,X),P(ke,me),Tt(Ae,ke,null),P(fe,te),P(fe,ue),P(ue,_e),P(ue,Je),P(ue,Qe),P(Qe,Nt);for(let Gn=0;Gn<di.length;Gn+=1)di[Gn]&&di[Gn].m(Nt,null);Cs(Nt,t[0].params.RODZAJ,!0),P(fe,Jt),P(fe,Lt),P(Lt,qt),P(Lt,ln),Tt(In,Lt,null),P(fe,hr),P(fe,Rn),P(Rn,kr),P(Rn,ar),P(fe,bi),P(fe,qr),P(qr,Jr),P(qr,$n),P(qr,Ma),P(Ma,fi);for(let Gn=0;Gn<li.length;Gn+=1)li[Gn]&&li[Gn].m(fi,null);Cs(fi,t[0].params.RYNEK,!0),Oe(rt,Un,kn),Oe(rt,Bn,kn),P(Bn,fr),P(fr,Bt),P(Bt,St),P(Bt,Qi),P(Bt,dr),P(dr,Fn),ni.m(Kh,dr),P(fr,Er),P(fr,Ai),P(Ai,Gr),xi.m(Kh,Ai),P(Ai,Ci),P(fr,Qa),P(fr,Xr),P(Xr,wi),P(Xr,ma),P(ma,Di),P(Xr,ea),P(Xr,vs),P(vs,ga),P(Xr,ta),P(Xr,za),P(za,po),Da.m(Kh,za),P(fr,sa),P(fr,oa),P(Bn,Do),P(Bn,_a),P(_a,es),P(_a,Ws),P(_a,ri),P(ri,xs),Li=!0,Ls||(Rs=[bt(f,"stopTyping",t[11]),Ho(hw.call(null,f)),bt(pe,"input",t[16]),bt(pe,"change",t[17]),bt(wt,"change",t[20]),bt(Et,"change",t[21]),bt(Kn,"change",t[22]),bt(pt,"change",t[23]),bt(on,"change",t[24]),bt(Nt,"change",t[27]),bt(fi,"change",t[30])],Ls=!0)},p(rt,kn){(!Li||kn[0]&257&&d!==(d=rt[0].adres))&&(f.value=d),rt[1]==!0?Lr?kn[0]&2&&Ve(Lr,1):(Lr=D_(),Lr.c(),Ve(Lr,1),Lr.m(e,null)):Lr&&(lr(),Xe(Lr,1,1,()=>{Lr=null}),ur());const Gn={};kn[0]&1&&(Gn.value=rt[0].params.price.toString()),N.$set(Gn),kn[0]&257&&Ii(pe.value)!==rt[0].params.POW&&Gt(pe,rt[0].params.POW);const pi={};if(kn[0]&257|kn[2]&4194304&&(pi.$$scope={dirty:kn,ctx:rt}),!ht&&kn[0]&1&&(ht=!0,pi.selectedValue=rt[0].params.STANDARD,er(()=>ht=!1)),!ut&&kn[0]&1&&(ut=!0,pi.customValue=rt[0].params.STANDARD,er(()=>ut=!1)),$e.$set(pi),(!Li||kn[0]&257&&an!==(an=rt[0].params.POKOJE)&&Zt.value!==an)&&(Zt.value=an),kn[0]&257){ii=xr(Object.entries(rt[8].answers.bool));let Ft;for(Ft=0;Ft<ii.length;Ft+=1){const Sr=C_(rt,ii,Ft);ai[Ft]?ai[Ft].p(Sr,kn):(ai[Ft]=R_(Sr),ai[Ft].c(),ai[Ft].m(wt,null))}for(;Ft<ai.length;Ft+=1)ai[Ft].d(1);ai.length=ii.length}if(kn[0]&257&&Cs(wt,rt[0].params.KUCHNIA),kn[0]&257){La=xr(Object.entries(rt[8].answers.bool));let Ft;for(Ft=0;Ft<La.length;Ft+=1){const Sr=A_(rt,La,Ft);Qr[Ft]?Qr[Ft].p(Sr,kn):(Qr[Ft]=B_(Sr),Qr[Ft].c(),Qr[Ft].m(Et,null))}for(;Ft<Qr.length;Ft+=1)Qr[Ft].d(1);Qr.length=La.length}if(kn[0]&257&&Cs(Et,rt[0].params.BALKON_TARAS),kn[0]&257){ns=xr(Object.entries(rt[8].answers.bool));let Ft;for(Ft=0;Ft<ns.length;Ft+=1){const Sr=T_(rt,ns,Ft);si[Ft]?si[Ft].p(Sr,kn):(si[Ft]=O_(Sr),si[Ft].c(),si[Ft].m(Kn,null))}for(;Ft<si.length;Ft+=1)si[Ft].d(1);si.length=ns.length}if(kn[0]&257&&Cs(Kn,rt[0].params.WINDA),kn[0]&257){Ra=xr(Object.entries(rt[8].answers.bool));let Ft;for(Ft=0;Ft<Ra.length;Ft+=1){const Sr=I_(rt,Ra,Ft);oi[Ft]?oi[Ft].p(Sr,kn):(oi[Ft]=N_(Sr),oi[Ft].c(),oi[Ft].m(pt,null))}for(;Ft<oi.length;Ft+=1)oi[Ft].d(1);oi.length=Ra.length}if(kn[0]&257&&Cs(pt,rt[0].params.PIWNICA),kn[0]&257){rs=xr(Object.entries(rt[8].answers.PARKING));let Ft;for(Ft=0;Ft<rs.length;Ft+=1){const Sr=S_(rt,rs,Ft);ei[Ft]?ei[Ft].p(Sr,kn):(ei[Ft]=F_(Sr),ei[Ft].c(),ei[Ft].m(on,null))}for(;Ft<ei.length;Ft+=1)ei[Ft].d(1);ei.length=rs.length}kn[0]&257&&Cs(on,rt[0].params.PARKING);const ya={};if(kn[0]&257|kn[2]&4194304&&(ya.$$scope={dirty:kn,ctx:rt}),!Ce&&kn[0]&1&&(Ce=!0,ya.selectedValue=rt[0].params.KSIEGA,er(()=>Ce=!1)),!je&&kn[0]&1&&(je=!0,ya.customValue=rt[0].params.KSIEGA,er(()=>je=!1)),Ae.$set(ya),kn[0]&257){Ks=xr(Object.entries(rt[8].answers.RODZAJ));let Ft;for(Ft=0;Ft<Ks.length;Ft+=1){const Sr=k_(rt,Ks,Ft);di[Ft]?di[Ft].p(Sr,kn):(di[Ft]=$_(Sr),di[Ft].c(),di[Ft].m(Nt,null))}for(;Ft<di.length;Ft+=1)di[Ft].d(1);di.length=Ks.length}kn[0]&257&&Cs(Nt,rt[0].params.RODZAJ);const _r={};if(kn[0]&257|kn[2]&4194304&&(_r.$$scope={dirty:kn,ctx:rt}),!Ln&&kn[0]&1&&(Ln=!0,_r.selectedValue=rt[0].params.ROK_POWSTANIA,er(()=>Ln=!1)),!Tn&&kn[0]&1&&(Tn=!0,_r.customValue=rt[0].params.ROK_POWSTANIA,er(()=>Tn=!1)),In.$set(_r),(!Li||kn[0]&257&&Fr!==(Fr=rt[0].params.LICZBAKOND)&&ar.value!==Fr)&&(ar.value=Fr),kn[0]&257){Bs=xr(Object.entries(rt[8].answers.RYNEK));let Ft;for(Ft=0;Ft<Bs.length;Ft+=1){const Sr=x_(rt,Bs,Ft);li[Ft]?li[Ft].p(Sr,kn):(li[Ft]=j_(Sr),li[Ft].c(),li[Ft].m(fi,null))}for(;Ft<li.length;Ft+=1)li[Ft].d(1);li.length=Bs.length}kn[0]&257&&Cs(fi,rt[0].params.RYNEK),(!Li||kn[0]&1)&&Pn!==(Pn=rt[0].params.M2_PRICE+"")&&gl(St,Pn),(!Li||kn[0]&1)&&Xi!==(Xi=rt[0].params.FROM_PRICE+"")&&Zn(Di,Xi),(!Li||kn[0]&1)&&Ds!==(Ds=rt[0].params.TO_PRICE+"")&&Zn(ga,Ds),(!Li||kn[0]&1)&&bs!==(bs=rt[0].params.WNIOSEK+"")&&gl(xs,bs)},i(rt){Li||(Ve(Lr),Ve(N.$$.fragment,rt),Ve($e.$$.fragment,rt),Ve(Ae.$$.fragment,rt),Ve(In.$$.fragment,rt),Li=!0)},o(rt){Xe(Lr),Xe(N.$$.fragment,rt),Xe($e.$$.fragment,rt),Xe(Ae.$$.fragment,rt),Xe(In.$$.fragment,rt),Li=!1},d(rt){rt&&(R(e),R(_),R(v),R(re),R(Q),R(Un),R(Bn)),Lr&&Lr.d(),It(N),It($e),Ca(ai,rt),Ca(Qr,rt),Ca(si,rt),Ca(oi,rt),Ca(ei,rt),It(Ae),Ca(di,rt),It(In),Ca(li,rt),Ls=!1,Or(Rs)}}}function D_(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","adress_loading")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function H3(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{contenteditable:!0});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&gl(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function W3(t){let e,i=t[63]+"",s,u,f;return{c(){e=Z("option"),s=Mt(i),this.h()},l(d){e=G(d,"OPTION",{contenteditable:!0});var o=J(e);s=Pt(o,i),o.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value),e.selected=f=t[0].params.STANDARD==t[62]},m(d,o){Oe(d,e,o),P(e,s)},p(d,o){o[0]&256&&i!==(i=d[63]+"")&&gl(s,i),o[0]&256&&u!==(u=d[62])&&(e.__value=u,Gt(e,e.__value)),o[0]&257&&f!==(f=d[0].params.STANDARD==d[62])&&(e.selected=f)},d(d){d&&R(e)}}}function L_(t){let e;function i(f,d){return f[0].params.STANDARD==f[62]?W3:H3}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function K3(t){let e,i=xr(Object.entries(t[8].answers.STANDARD)),s=[];for(let u=0;u<i.length;u+=1)s[u]=L_(P_(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f[0]&257){i=xr(Object.entries(u[8].answers.STANDARD));let d;for(d=0;d<i.length;d+=1){const o=P_(u,i,d);s[d]?s[d].p(o,f):(s[d]=L_(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function X3(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function Y3(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.KUCHNIA==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.KUCHNIA==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function R_(t){let e;function i(f,d){return f[0].params.KUCHNIA==f[62]?Y3:X3}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function J3(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function Q3(t){let e,i=t[63]+"",s,u,f;return{c(){e=Z("option"),s=Mt(i),this.h()},l(d){e=G(d,"OPTION",{});var o=J(e);s=Pt(o,i),o.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value),e.selected=f=t[0].params.BALKON_TARAS==t[62]},m(d,o){Oe(d,e,o),P(e,s)},p(d,o){o[0]&256&&i!==(i=d[63]+"")&&Zn(s,i),o[0]&256&&u!==(u=d[62])&&(e.__value=u,Gt(e,e.__value)),o[0]&257&&f!==(f=d[0].params.BALKON_TARAS==d[62])&&(e.selected=f)},d(d){d&&R(e)}}}function B_(t){let e;function i(f,d){return f[0].params.BALKON_TARAS==f[62]?Q3:J3}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function ek(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function tk(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.WINDA==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.WINDA==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function O_(t){let e;function i(f,d){return f[0].params.WINDA==f[62]?tk:ek}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function nk(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function rk(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.PIWNICA==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.PIWNICA==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function N_(t){let e;function i(f,d){return f[0].params.PIWNICA==f[62]?rk:nk}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function ik(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function ak(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.PARKING==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.PARKING==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function F_(t){let e;function i(f,d){return f[0].params.PARKING==f[62]?ak:ik}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function sk(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{contenteditable:!0});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&gl(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function ok(t){let e,i=t[63]+"",s,u,f;return{c(){e=Z("option"),s=Mt(i),this.h()},l(d){e=G(d,"OPTION",{contenteditable:!0});var o=J(e);s=Pt(o,i),o.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value),e.selected=f=t[0].params.KSIEGA==t[62]},m(d,o){Oe(d,e,o),P(e,s)},p(d,o){o[0]&256&&i!==(i=d[63]+"")&&gl(s,i),o[0]&256&&u!==(u=d[62])&&(e.__value=u,Gt(e,e.__value)),o[0]&257&&f!==(f=d[0].params.KSIEGA==d[62])&&(e.selected=f)},d(d){d&&R(e)}}}function V_(t){let e;function i(f,d){return f[0].params.KSIEGA==f[62]?ok:sk}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function lk(t){let e,i=xr(Object.entries(t[8].answers.KSIEGA)),s=[];for(let u=0;u<i.length;u+=1)s[u]=V_(E_(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f[0]&257){i=xr(Object.entries(u[8].answers.KSIEGA));let d;for(d=0;d<i.length;d+=1){const o=E_(u,i,d);s[d]?s[d].p(o,f):(s[d]=V_(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function uk(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function ck(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.RODZAJ==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.RODZAJ==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function $_(t){let e;function i(f,d){return f[0].params.RODZAJ==f[62]?ck:uk}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function hk(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{contenteditable:!0});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&gl(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function fk(t){let e,i=t[63]+"",s,u,f;return{c(){e=Z("option"),s=Mt(i),this.h()},l(d){e=G(d,"OPTION",{contenteditable:!0});var o=J(e);s=Pt(o,i),o.forEach(R),this.h()},h(){z(e,"contenteditable","true"),e.__value=u=t[62],Gt(e,e.__value),e.selected=f=t[0].params.ROK_POWSTANIA==t[62]},m(d,o){Oe(d,e,o),P(e,s)},p(d,o){o[0]&256&&i!==(i=d[63]+"")&&gl(s,i),o[0]&256&&u!==(u=d[62])&&(e.__value=u,Gt(e,e.__value)),o[0]&257&&f!==(f=d[0].params.ROK_POWSTANIA==d[62])&&(e.selected=f)},d(d){d&&R(e)}}}function U_(t){let e;function i(f,d){return f[0].params.ROK_POWSTANIA==f[62]?fk:hk}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function dk(t){let e,i=xr(Object.entries(t[8].answers.ROK_POWSTANIA)),s=[];for(let u=0;u<i.length;u+=1)s[u]=U_(w_(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f[0]&257){i=xr(Object.entries(u[8].answers.ROK_POWSTANIA));let d;for(d=0;d<i.length;d+=1){const o=w_(u,i,d);s[d]?s[d].p(o,f):(s[d]=U_(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function pk(t){let e,i=t[63]+"",s,u;return{c(){e=Z("option"),s=Mt(i),this.h()},l(f){e=G(f,"OPTION",{});var d=J(e);s=Pt(d,i),d.forEach(R),this.h()},h(){e.__value=u=t[62],Gt(e,e.__value)},m(f,d){Oe(f,e,d),P(e,s)},p(f,d){d[0]&256&&i!==(i=f[63]+"")&&Zn(s,i),d[0]&256&&u!==(u=f[62])&&(e.__value=u,Gt(e,e.__value))},d(f){f&&R(e)}}}function mk(t){let e,i,s=t[63]+"",u,f,d;return{c(){e=Mt(`=
										`),i=Z("option"),u=Mt(s),this.h()},l(o){e=Pt(o,`=
										`),i=G(o,"OPTION",{});var _=J(i);u=Pt(_,s),_.forEach(R),this.h()},h(){i.__value=f=t[62],Gt(i,i.__value),i.selected=d=t[0].params.RYNEK==t[62]},m(o,_){Oe(o,e,_),Oe(o,i,_),P(i,u)},p(o,_){_[0]&256&&s!==(s=o[63]+"")&&Zn(u,s),_[0]&256&&f!==(f=o[62])&&(i.__value=f,Gt(i,i.__value)),_[0]&257&&d!==(d=o[0].params.RYNEK==o[62])&&(i.selected=d)},d(o){o&&(R(e),R(i))}}}function j_(t){let e;function i(f,d){return f[0].params.RYNEK==f[62]?mk:pk}let s=i(t),u=s(t);return{c(){u.c(),e=vn()},l(f){u.l(f),e=vn()},m(f,d){u.m(f,d),Oe(f,e,d)},p(f,d){s===(s=i(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(e.parentNode,e)))},d(f){f&&R(e),u.d(f)}}}function q_(t){let e,i,s,u,f;function d(_){t[33](_)}let o={title:"Aktualizacja?",autoclose:!0,$$slots:{footer:[yk],default:[gk]},$$scope:{ctx:t}};return t[7]!==void 0&&(o.open=t[7]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[2]&4194304&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&128&&(s=!0,E.open=_[7],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function gk(t){let e,i="Czy na pewno chcesz zaktualizować dane? <br/>",s,u,f="Spowoduje to przeliczenie wszystkich parametrów punktów POI";return{c(){e=Z("p"),e.innerHTML=i,s=we(),u=Z("p"),u.textContent=f,this.h()},l(d){e=G(d,"P",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-422tv5"&&(e.innerHTML=i),s=xe(d),u=G(d,"P",{class:!0,"data-svelte-h":!0}),Vt(u)!=="svelte-rppw2q"&&(u.textContent=f),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400"),z(u,"class","text-base text-gray-500 dark:text-gray-400")},m(d,o){Oe(d,e,o),Oe(d,s,o),Oe(d,u,o)},p:nr,d(d){d&&(R(e),R(s),R(u))}}}function _k(t){let e;return{c(){e=Mt("Przelicz")},l(i){e=Pt(i,"Przelicz")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function yk(t){let e,i;return e=new Ja({props:{$$slots:{default:[_k]},$$scope:{ctx:t}}}),e.$on("click",t[32]),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u[2]&4194304&&(f.$$scope={dirty:u,ctx:s}),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function G_(t){let e,i,s,u,f;function d(_){t[36](_)}let o={title:"Wybierz z listy lokalizację",autoclose:!0,$$slots:{footer:[xk],default:[vk]},$$scope:{ctx:t}};return t[5]!==void 0&&(o.open=t[5]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[0]&177|v[2]&4194304&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&32&&(s=!0,E.open=_[5],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function Z_(t){let e,i,s=t[4].formatted_address+"",u,f,d;return{c(){e=Z("li"),i=Z("a"),u=Mt(s),this.h()},l(o){e=G(o,"LI",{class:!0});var _=J(e);i=G(_,"A",{"aria-hidden":!0,class:!0,href:!0});var v=J(i);u=Pt(v,s),v.forEach(R),_.forEach(R),this.h()},h(){z(i,"aria-hidden","true"),z(i,"class","noselect"),z(i,"href","#"),z(e,"class","locLI noselect")},m(o,_){Oe(o,e,_),P(e,i),P(i,u),f||(d=bt(i,"click",t[35]),f=!0)},p(o,_){_[0]&16&&s!==(s=o[4].formatted_address+"")&&Zn(u,s)},d(o){o&&R(e),f=!1,d()}}}function vk(t){let e,i=t[4]&&Z_(t);return{c(){i&&i.c(),e=vn()},l(s){i&&i.l(s),e=vn()},m(s,u){i&&i.m(s,u),Oe(s,e,u)},p(s,u){s[4]?i?i.p(s,u):(i=Z_(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(s){s&&R(e),i&&i.d(s)}}}function bk(t){let e;return{c(){e=Mt("Zapisz nową nazwę")},l(i){e=Pt(i,"Zapisz nową nazwę")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function xk(t){let e,i;return e=new Ja({props:{$$slots:{default:[bk]},$$scope:{ctx:t}}}),e.$on("click",t[34]),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u[2]&4194304&&(f.$$scope={dirty:u,ctx:s}),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function H_(t){let e,i,s,u,f;function d(_){t[37](_)}let o={title:"",autoclose:!0,$$slots:{footer:[Ek],default:[wk]},$$scope:{ctx:t}};return t[6]!==void 0&&(o.open=t[6]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[2]&4194304&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&64&&(s=!0,E.open=_[6],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function wk(t){let e,i="Wystąpił błąd!";return{c(){e=Z("p"),e.textContent=i,this.h()},l(s){e=G(s,"P",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-1m1vy1u"&&(e.textContent=i),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400")},m(s,u){Oe(s,e,u)},p:nr,d(s){s&&R(e)}}}function kk(t){let e;return{c(){e=Mt("OK")},l(i){e=Pt(i,"OK")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function Ek(t){let e,i;return e=new Ja({props:{$$slots:{default:[kk]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u[2]&4194304&&(f.$$scope={dirty:u,ctx:s}),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function Sk(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N="1",V,j,W,K,ne,Y,re;f=new Mo({});let Q=!t[0].adres&&M_(),se=t[0].adres&&t[3]==!0&&z_(t),oe=t[7]&&q_(t),Te=t[5]&&G_(t),fe=t[6]&&H_(t);return{c(){e=Z("script"),s=we(),u=Z("div"),Ct(f.$$.fragment),d=we(),o=Z("div"),Q&&Q.c(),_=we(),se&&se.c(),v=we(),E=Z("div"),S=Z("div"),I=we(),A=Z("div"),A.textContent=N,V=we(),oe&&oe.c(),j=we(),Te&&Te.c(),W=we(),fe&&fe.c(),K=vn(),this.h()},l(ee){const ge=qu("svelte-5hzu5h",b_.head);e=G(ge,"SCRIPT",{src:!0});var pe=J(e);pe.forEach(R),ge.forEach(R),s=xe(ee),u=G(ee,"DIV",{class:!0});var ye=J(u);At(f.$$.fragment,ye),d=xe(ye),o=G(ye,"DIV",{class:!0});var de=J(o);Q&&Q.l(de),_=xe(de),se&&se.l(de),de.forEach(R),v=xe(ye),E=G(ye,"DIV",{class:!0});var Ne=J(E);S=G(Ne,"DIV",{class:!0,id:!0}),J(S).forEach(R),Ne.forEach(R),I=xe(ye),A=G(ye,"DIV",{class:!0,"data-svelte-h":!0}),Vt(A)!=="svelte-17t5swy"&&(A.textContent=N),ye.forEach(R),V=xe(ee),oe&&oe.l(ee),j=xe(ee),Te&&Te.l(ee),W=xe(ee),fe&&fe.l(ee),K=vn(),this.h()},h(){Rl(e.src,i=t[9])||z(e,"src",i),e.async=!0,z(o,"class","page_content"),z(S,"class","map"),z(S,"id","map"),z(E,"class","map-wrap"),z(A,"class","pageNumber"),z(u,"class","content-block section page_01")},m(ee,ge){P(b_.head,e),Oe(ee,s,ge),Oe(ee,u,ge),Tt(f,u,null),P(u,d),P(u,o),Q&&Q.m(o,null),P(o,_),se&&se.m(o,null),P(u,v),P(u,E),P(E,S),t[31](S),P(u,I),P(u,A),Oe(ee,V,ge),oe&&oe.m(ee,ge),Oe(ee,j,ge),Te&&Te.m(ee,ge),Oe(ee,W,ge),fe&&fe.m(ee,ge),Oe(ee,K,ge),ne=!0,Y||(re=[bt(Z3,"keydown",t[10]),Ho(i5.call(null,u,"page_01"))],Y=!0)},p(ee,ge){ee[0].adres?Q&&(lr(),Xe(Q,1,1,()=>{Q=null}),ur()):Q?ge[0]&1&&Ve(Q,1):(Q=M_(),Q.c(),Ve(Q,1),Q.m(o,_)),ee[0].adres&&ee[3]==!0?se?(se.p(ee,ge),ge[0]&9&&Ve(se,1)):(se=z_(ee),se.c(),Ve(se,1),se.m(o,null)):se&&(lr(),Xe(se,1,1,()=>{se=null}),ur()),ee[7]?oe?(oe.p(ee,ge),ge[0]&128&&Ve(oe,1)):(oe=q_(ee),oe.c(),Ve(oe,1),oe.m(j.parentNode,j)):oe&&(lr(),Xe(oe,1,1,()=>{oe=null}),ur()),ee[5]?Te?(Te.p(ee,ge),ge[0]&32&&Ve(Te,1)):(Te=G_(ee),Te.c(),Ve(Te,1),Te.m(W.parentNode,W)):Te&&(lr(),Xe(Te,1,1,()=>{Te=null}),ur()),ee[6]?fe?(fe.p(ee,ge),ge[0]&64&&Ve(fe,1)):(fe=H_(ee),fe.c(),Ve(fe,1),fe.m(K.parentNode,K)):fe&&(lr(),Xe(fe,1,1,()=>{fe=null}),ur())},i(ee){ne||(Ve(f.$$.fragment,ee),Ve(Q),Ve(se),Ve(oe),Ve(Te),Ve(fe),ne=!0)},o(ee){Xe(f.$$.fragment,ee),Xe(Q),Xe(se),Xe(oe),Xe(Te),Xe(fe),ne=!1},d(ee){ee&&(R(s),R(u),R(V),R(j),R(W),R(K)),R(e),It(f),Q&&Q.d(),se&&se.d(),t[31](null),oe&&oe.d(ee),Te&&Te.d(ee),fe&&fe.d(ee),Y=!1,Or(re)}}}let Kh="&#13217;";function Ik(t,e,i){let s,u,f,d,o,_,v;Ur(t,Xt,be=>i(0,s=be)),Ur(t,qc,be=>i(49,u=be)),Ur(t,tp,be=>i(50,f=be)),Ur(t,aw,be=>i(51,d=be)),Ur(t,sw,be=>i(8,o=be)),Ur(t,Tp,be=>i(15,_=be)),Ur(t,yv,be=>i(52,v=be));let E="https://maps.googleapis.com/maps/api/js?key="+dw;const S=v.url.searchParams;Ao.apiKey=Cp,Af.workerCount=10,Pp.locale("pl"),Ar(qc,u=!1,u);let I=!1,A=!1,N,V,j,W=[],K=[],ne,Y=!1,re,Q=!1;Tp.set([]);let se=!1,oe=!1;function Te(be){be.key==="Escape"&&i(5,Q=!1)}let fe=be=>{be.target.value,i(1,I=!0),be.target.value.length>5&&be.target.value!="Wpisz lokalizację"&&Mp(be.target.value).then(Et=>{Et.error?console.log("unable to geocode : "+Et.error):(i(4,re=Et),i(5,Q=!0))})};function ee(){Ar(Xt,s.params.M2_PRICE=Number(s.params.price/s.params.POW).toFixed(2),s)}const ge=({detail:be})=>{Ar(Xt,s.params.price=be.inputState.unmaskedValue,s),Ar(Xt,s.params.M2_PRICE=Number(s.params.price/s.params.POW).toFixed(2),s)};function pe(be){if(be.length>0){K.forEach(Ut=>Ut.remove()),be.forEach(Ut=>{const _t=new pf({element:document.createElement("img")}).setLngLat([parseFloat(Ut.params.lon),parseFloat(Ut.params.lat)]).addTo(V);_t.getElement().src="/images/POI/locationsDot.svg",_t.getElement().style.width="15px",_t.getElement().style.height="15px",K.push(_t)});let Et=fw(be);O0(s.params.poiGeodata.features.concat(Et.features),s.params).then(Ut=>{Ut=[[Ut[0][0],Ut[0][1]],[Ut[1][0],Ut[1][1]]],window.dataCoor=Ut,V.fitBounds([[Ut[0][0],Ut[0][1]],[Ut[1][0],Ut[1][1]]],{padding:80})})}}let ye=be=>{if(V=new Af({container:j,center:[s.params.lon+1,s.params.lat+1],zoom:13,preserveDrawingBuffer:!0,style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Cp}`}),be==="edit")V.on("load",function(){Mp(s.place_id,"place_id").then(Et=>{}),de(),Ne(s.params.poiGeodata)});else if(be=="new"){let Et=[];for(const Ut of o.POIelementsDisplay)for(const[_t,zt]of Object.entries(B0))zt.id==Ut&&Et.push(B0[_t]);Ar(Xt,s.params.POI=Et,s),de()}else i(6,se=!0)};ys(async()=>{tp.set({}),Xt.set({}),np.set("");try{ne=await cw(),ne.error?(console.error("Failed to fetch data",ne.error),i(6,se=!0)):ne=="{}"?i(6,se=!0):tp.set(ne)}catch(be){console.error("Network error",be),i(6,se=!0)}if(S&&S.get("id")&&(await F0(()=>import("../chunks/yTwdm8a4.js").then(be=>be.l),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),L.icon({iconUrl:"/images/POI/miastoDot.png",iconSize:[50,50]}),A=!1,N=S.get("id"),typeof N=="string"&&A==!1&&(np.set(N),Xt.set(ne.filter(be=>be.ID==N)[0]),console.log("EDIT MODE extracted document	 ",s),s.params.price,ee(),i(3,Y=!0),ye("edit"))),S&&S.get("create")){await F0(()=>import("../chunks/yTwdm8a4.js").then(Ut=>Ut.l),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),L.layerGroup(),L.icon({iconUrl:"/images/POI/miastoDot.png",iconSize:[50,50]}),Ar(Xt,s=d,s);let be=0;for(let Ut in f){let _t=parseInt(f[Ut].ID);_t>be&&(be=_t)}let Et=be+1;Ar(Xt,s.ID=Et.toString(),s),Ar(Xt,s.params.lat=50,s),Ar(Xt,s.params.lon=20,s),np.set(Et),Ar(Xt,s.createDate=Pp().format("YYYY-MM-DD"),s),ee(),i(3,Y=!0),ye("new")}});let de=async function(){W.forEach(_t=>{_t.remove()});const be=document.createElement("div");be.className="marker",be.style.backgroundImage="url(/images/POI/miastoDotC.svg)",be.style.width="80px",be.style.height="80px";var Et=new z3({offset:25}).setText("Aktualna lokalizacja");let Ut=new pf({element:be}).setLngLat([s.params.lon,s.params.lat]).setPopup(Et).addTo(V);W.push(Ut),V.flyTo({center:[s.params.lon,s.params.lat],zoom:12,essential:!0})},Ne=be=>{W.forEach(Et=>{Et.remove()}),de(),be.features.forEach(Et=>{let Ut=[Et.geometry.coordinates[0],Et.geometry.coordinates[1]];const _t=new pf({element:document.createElement("img")}).setLngLat(Ut).addTo(V);_t.getElement().src=Et.properties.iconSRC,_t.getElement().style.width="50px",_t.getElement().style.height="50px",W.push(_t)}),O0(be.features,s.params).then(Et=>{Et=[[Et[0][0],Et[0][1]],[Et[1][0],Et[1][1]]],Ar(Xt,s.params.fitBounds=Et,s),V.fitBounds([[Et[0][0],Et[0][1]],[Et[1][0],Et[1][1]]],{padding:80})}),gw(s.params.POI,[s.params.lon,s.params.lat]).then(Et=>{Et==!0&&Ar(qc,u=!0,u)})},Ge=(be="new_location_search")=>{Ar(Xt,s.params.lon=re.geometry.location.lng,s),Ar(Xt,s.params.lat=re.geometry.location.lat,s),Ar(Xt,s.place_id=re.place_id,s),Ar(Xt,s.adres=re.formatted_address,s),i(7,oe=!1),pw(s).then(Et=>{mw(s.params.POI).then(Ut=>{Ar(Xt,s.params.poiGeodata=Ut,s),console.log("createPOIforMap",Ut),Ne(Ut)})})};function Le(){s.params.POW=Ii(this.value),Xt.set(s)}const Me=()=>ee();function $e(be){t.$$.not_equal(s.params.STANDARD,be)&&(s.params.STANDARD=be,Xt.set(s))}function ht(be){t.$$.not_equal(s.params.STANDARD,be)&&(s.params.STANDARD=be,Xt.set(s))}function ut(){s.params.KUCHNIA=Xl(this),Xt.set(s)}function Fe(){s.params.BALKON_TARAS=Xl(this),Xt.set(s)}function ze(){s.params.WINDA=Xl(this),Xt.set(s)}function gt(){s.params.PIWNICA=Xl(this),Xt.set(s)}function Zt(){s.params.PARKING=Xl(this),Xt.set(s)}function an(be){t.$$.not_equal(s.params.KSIEGA,be)&&(s.params.KSIEGA=be,Xt.set(s))}function yn(be){t.$$.not_equal(s.params.KSIEGA,be)&&(s.params.KSIEGA=be,Xt.set(s))}function sn(){s.params.RODZAJ=Xl(this),Xt.set(s)}function Dt(be){t.$$.not_equal(s.params.ROK_POWSTANIA,be)&&(s.params.ROK_POWSTANIA=be,Xt.set(s))}function $t(be){t.$$.not_equal(s.params.ROK_POWSTANIA,be)&&(s.params.ROK_POWSTANIA=be,Xt.set(s))}function ct(){s.params.RYNEK=Xl(this),Xt.set(s)}function xt(be){Cn[be?"unshift":"push"](()=>{j=be,i(2,j)})}const wt=()=>{Ge()};function Wt(be){oe=be,i(7,oe)}const Qt=()=>{Ar(Xt,s.adres=re.formatted_address,s),_v()},Ht=be=>{be.preventDefault(),i(5,Q=!Q),i(7,oe=!0)};function kt(be){Q=be,i(5,Q)}function dt(be){se=be,i(6,se)}return t.$$.update=()=>{t.$$.dirty[0]&32769&&(s&&s.params&&s.params.POW&&ee(),_&&_[0]&&_.length>0&&(pe(_),Ar(Xt,s.params.page01.nearPoints=_,s)))},[s,I,j,Y,re,Q,se,oe,o,E,Te,fe,ee,ge,Ge,_,Le,Me,$e,ht,ut,Fe,ze,gt,Zt,an,yn,sn,Dt,$t,ct,xt,wt,Wt,Qt,Ht,kt,dt]}class Tk extends Pr{constructor(e){super(),Mr(this,e,Ik,Sk,Cr,{},null,[-1,-1,-1])}}function Ak(t){let e,i,s,u,f,d;return{c(){e=ot("svg"),i=ot("defs"),s=ot("style"),u=Mt(`.cls-x.enabled {
			
				fill: #ef4136;
				fill-rule: evenodd;
				stroke-width: 0px;
				
			}
			.cls-x {
				transition:all ease-out 0.3s;
				scale: 0.7;
				fill-rule: evenodd;
				fill: rgba(120, 120, 120, 0.3);
				stroke-width: 0.09px !important;
				stroke: rgba(0, 0, 0, 0.2);
			}
			svg:hover .cls-x{
				scale: 0.7;
				fill-rule: evenodd;
				fill: rgba(120, 120, 120, 0.7);
				stroke-width: 0.09px !important;
				stroke: rgba(0, 0, 0, 0.2);
			}
		`),f=ot("path"),this.h()},l(o){e=st(o,"svg",{class:!0,xmlns:!0,viewBox:!0});var _=J(e);i=st(_,"defs",{});var v=J(i);s=st(v,"style",{});var E=J(s);u=Pt(E,`.cls-x.enabled {
			
				fill: #ef4136;
				fill-rule: evenodd;
				stroke-width: 0px;
				
			}
			.cls-x {
				transition:all ease-out 0.3s;
				scale: 0.7;
				fill-rule: evenodd;
				fill: rgba(120, 120, 120, 0.3);
				stroke-width: 0.09px !important;
				stroke: rgba(0, 0, 0, 0.2);
			}
			svg:hover .cls-x{
				scale: 0.7;
				fill-rule: evenodd;
				fill: rgba(120, 120, 120, 0.7);
				stroke-width: 0.09px !important;
				stroke: rgba(0, 0, 0, 0.2);
			}
		`),E.forEach(R),v.forEach(R),f=st(_,"path",{class:!0,d:!0}),J(f).forEach(R),_.forEach(R),this.h()},h(){z(f,"class",d="cls-x "+(t[0]?"enabled":"")),z(f,"d","m2.51,6.25s-.11.04-.16,0c-.52-.33-.99-.75-1.38-1.23C.47,4.39.15,3.7.04,3.02c-.11-.68,0-1.34.33-1.87.14-.22.31-.41.51-.57C1.37.2,1.92,0,2.46,0c.53,0,1.04.2,1.49.61.16.14.29.31.4.48.37.6.44,1.37.28,2.15-.27,1.25-1.04,2.34-2.13,3.01h0Zm-.15-5.04c.65,0,1.18.52,1.18,1.17s-.52,1.18-1.17,1.18c-.65,0-1.18-.52-1.18-1.17,0,0,0,0,0,0,0-.65.53-1.17,1.17-1.18h0Z"),z(e,"class","pin"),z(e,"xmlns","http://www.w3.org/2000/svg"),z(e,"viewBox","0 0 4.71 6.28")},m(o,_){Oe(o,e,_),P(e,i),P(i,s),P(s,u),P(e,f)},p(o,[_]){_&1&&d!==(d="cls-x "+(o[0]?"enabled":""))&&z(f,"class",d)},i:nr,o:nr,d(o){o&&R(e)}}}function Ck(t,e,i){let{enabled:s="false"}=e;return t.$$set=u=>{"enabled"in u&&i(0,s=u.enabled)},[s]}class Pk extends Pr{constructor(e){super(),Mr(this,e,Ck,Ak,Cr,{enabled:0})}}const{Boolean:Mk}=td;function W_(t,e,i){const s=t.slice();return s[45]=e[i],s[46]=e,s[47]=i,s}function zk(t){let e,i,s="+",u,f,d,o,_,v,E="ADRES NIERUCHOMOŚCI",S,I,A="DATA",N,V,j="m2",W,K,ne="CENA",Y,re,Q="CENA ZA M2",se,oe,Te,fe,ee,ge=xr(t[4]),pe=[];for(let de=0;de<ge.length;de+=1)pe[de]=Y_(W_(t,ge,de));const ye=de=>Xe(pe[de],1,1,()=>{pe[de]=null});return{c(){e=Z("table"),i=Z("button"),i.textContent=s,u=we(),f=Z("thead"),d=Z("tr"),o=Z("th"),_=we(),v=Z("th"),v.textContent=E,S=we(),I=Z("th"),I.textContent=A,N=we(),V=Z("th"),V.textContent=j,W=we(),K=Z("th"),K.textContent=ne,Y=we(),re=Z("th"),re.textContent=Q,se=we(),oe=Z("tbody");for(let de=0;de<pe.length;de+=1)pe[de].c();this.h()},l(de){e=G(de,"TABLE",{class:!0});var Ne=J(e);i=G(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-145ktln"&&(i.textContent=s),u=xe(Ne),f=G(Ne,"THEAD",{});var Ge=J(f);d=G(Ge,"TR",{class:!0});var Le=J(d);o=G(Le,"TH",{class:!0}),J(o).forEach(R),_=xe(Le),v=G(Le,"TH",{class:!0,"data-svelte-h":!0}),Vt(v)!=="svelte-4okl1e"&&(v.textContent=E),S=xe(Le),I=G(Le,"TH",{class:!0,"data-svelte-h":!0}),Vt(I)!=="svelte-1rx3ead"&&(I.textContent=A),N=xe(Le),V=G(Le,"TH",{class:!0,"data-svelte-h":!0}),Vt(V)!=="svelte-i3a7xz"&&(V.textContent=j),W=xe(Le),K=G(Le,"TH",{class:!0,"data-svelte-h":!0}),Vt(K)!=="svelte-2wp6so"&&(K.textContent=ne),Y=xe(Le),re=G(Le,"TH",{class:!0,"data-svelte-h":!0}),Vt(re)!=="svelte-1ancisx"&&(re.textContent=Q),Le.forEach(R),Ge.forEach(R),se=xe(Ne),oe=G(Ne,"TBODY",{});var Me=J(oe);for(let $e=0;$e<pe.length;$e+=1)pe[$e].l(Me);Me.forEach(R),Ne.forEach(R),this.h()},h(){z(i,"class","addELEM noPrint svelte-167ff77"),z(o,"class","nth"),z(v,"class","adres"),z(I,"class","data"),z(V,"class","m2"),z(K,"class","cena svelte-167ff77"),z(re,"class","cenam2 svelte-167ff77"),z(d,"class","svelte-167ff77"),z(e,"class","firstTable svelte-167ff77")},m(de,Ne){Oe(de,e,Ne),P(e,i),P(e,u),P(e,f),P(f,d),P(d,o),P(d,_),P(d,v),P(d,S),P(d,I),P(d,N),P(d,V),P(d,W),P(d,K),P(d,Y),P(d,re),P(e,se),P(e,oe);for(let Ge=0;Ge<pe.length;Ge+=1)pe[Ge]&&pe[Ge].m(oe,null);Te=!0,fe||(ee=[bt(i,"click",t[14]),bt(V,"click",t[15]),bt(K,"click",t[16]),bt(re,"click",t[17])],fe=!0)},p(de,Ne){if(Ne[0]&3921){ge=xr(de[4]);let Ge;for(Ge=0;Ge<ge.length;Ge+=1){const Le=W_(de,ge,Ge);pe[Ge]?(pe[Ge].p(Le,Ne),Ve(pe[Ge],1)):(pe[Ge]=Y_(Le),pe[Ge].c(),Ve(pe[Ge],1),pe[Ge].m(oe,null))}for(lr(),Ge=ge.length;Ge<pe.length;Ge+=1)ye(Ge);ur()}},i(de){if(!Te){for(let Ne=0;Ne<ge.length;Ne+=1)Ve(pe[Ne]);Te=!0}},o(de){pe=pe.filter(Mk);for(let Ne=0;Ne<pe.length;Ne+=1)Xe(pe[Ne]);Te=!1},d(de){de&&R(e),Ca(pe,de),fe=!1,Or(ee)}}}function Dk(t){let e,i;return e=new fo({}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p:nr,i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function K_(t){let e,i="x",s,u;function f(){return t[18](t[45])}return{c(){e=Z("span"),e.textContent=i,this.h()},l(d){e=G(d,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-gvhl7m"&&(e.textContent=i),this.h()},h(){z(e,"class","delete noPrint svelte-167ff77")},m(d,o){Oe(d,e,o),s||(u=bt(e,"click",f),s=!0)},p(d,o){t=d},d(d){d&&R(e),s=!1,u()}}}function Lk(t){let e,i,s,u;function f(){t[21].call(i,t[46],t[47])}function d(){return t[22](t[45])}return{c(){e=Z("td"),i=Z("input"),this.h()},l(o){e=G(o,"TD",{class:!0});var _=J(e);i=G(_,"INPUT",{class:!0,onclick:!0}),_.forEach(R),this.h()},h(){z(i,"class","inputTD adres svelte-167ff77"),z(i,"onclick","this.select();"),z(e,"class","adres")},m(o,_){Oe(o,e,_),P(e,i),Gt(i,t[45].adres),s||(u=[bt(i,"input",f),bt(i,"blur",d)],s=!0)},p(o,_){t=o,_[0]&16&&i.value!==t[45].adres&&Gt(i,t[45].adres)},d(o){o&&R(e),s=!1,Or(u)}}}function Rk(t){let e,i,s,u;function f(){return t[20](t[45])}return{c(){e=Z("td"),i=Z("input"),this.h()},l(d){e=G(d,"TD",{class:!0});var o=J(e);i=G(o,"INPUT",{class:!0,onclick:!0}),o.forEach(R),this.h()},h(){z(i,"class","inputTD adres svelte-167ff77"),z(i,"onclick","this.select();"),i.readOnly=!0,z(e,"class","adres")},m(d,o){Oe(d,e,o),P(e,i),Gt(i,t[0].adres),s||(u=[bt(i,"input",t[19]),bt(i,"blur",f)],s=!0)},p(d,o){t=d,o[0]&1&&i.value!==t[0].adres&&Gt(i,t[0].adres)},d(d){d&&R(e),s=!1,Or(u)}}}function Bk(t){let e,i,s;function u(){t[25].call(e,t[46],t[47])}return{c(){e=Z("input"),this.h()},l(f){e=G(f,"INPUT",{type:!0,class:!0}),this.h()},h(){z(e,"type","date"),z(e,"class","inputTD createDate svelte-167ff77"),e.readOnly=!0},m(f,d){Oe(f,e,d),Gt(e,t[45].createDate),i||(s=bt(e,"input",u),i=!0)},p(f,d){t=f,d[0]&16&&Gt(e,t[45].createDate)},d(f){f&&R(e),i=!1,s()}}}function Ok(t){let e,i,s;function u(){t[23].call(e,t[46],t[47])}function f(){return t[24](t[45])}return{c(){e=Z("input"),this.h()},l(d){e=G(d,"INPUT",{type:!0,class:!0}),this.h()},h(){z(e,"type","date"),z(e,"class","inputTD createDate svelte-167ff77")},m(d,o){Oe(d,e,o),Gt(e,t[45].createDate),i||(s=[bt(e,"input",u),bt(e,"blur",f)],i=!0)},p(d,o){t=d,o[0]&16&&Gt(e,t[45].createDate)},d(d){d&&R(e),i=!1,Or(s)}}}function Nk(t){let e,i,s;function u(){t[28].call(e,t[46],t[47])}return{c(){e=Z("input"),this.h()},l(f){e=G(f,"INPUT",{type:!0,step:!0,class:!0,min:!0}),this.h()},h(){z(e,"type","number"),z(e,"step","1"),z(e,"class","inputTD POW svelte-167ff77"),z(e,"min","1"),e.readOnly=!0},m(f,d){Oe(f,e,d),Gt(e,t[45].params.POW),i||(s=bt(e,"input",u),i=!0)},p(f,d){t=f,d[0]&16&&Ii(e.value)!==t[45].params.POW&&Gt(e,t[45].params.POW)},d(f){f&&R(e),i=!1,s()}}}function Fk(t){let e,i,s;function u(){t[26].call(e,t[46],t[47])}function f(){return t[27](t[45])}return{c(){e=Z("input"),this.h()},l(d){e=G(d,"INPUT",{type:!0,step:!0,class:!0,min:!0,onclick:!0}),this.h()},h(){z(e,"type","number"),z(e,"step","1"),z(e,"class","inputTD POW svelte-167ff77"),z(e,"min","1"),z(e,"onclick","this.select();")},m(d,o){Oe(d,e,o),Gt(e,t[45].params.POW),i||(s=[bt(e,"input",u),bt(e,"input",f)],i=!0)},p(d,o){t=d,o[0]&16&&Ii(e.value)!==t[45].params.POW&&Gt(e,t[45].params.POW)},d(d){d&&R(e),i=!1,Or(s)}}}function Vk(t){let e,i,s;function u(){t[31].call(e,t[46],t[47])}return{c(){e=Z("input"),this.h()},l(f){e=G(f,"INPUT",{type:!0,min:!0,class:!0,step:!0}),this.h()},h(){z(e,"type","number"),z(e,"min","1"),z(e,"class","inputTD price svelte-167ff77"),z(e,"step","100"),e.readOnly=!0},m(f,d){Oe(f,e,d),Gt(e,t[45].params.price),i||(s=bt(e,"input",u),i=!0)},p(f,d){t=f,d[0]&16&&Ii(e.value)!==t[45].params.price&&Gt(e,t[45].params.price)},d(f){f&&R(e),i=!1,s()}}}function $k(t){let e,i,s;function u(){t[29].call(e,t[46],t[47])}function f(){return t[30](t[45])}return{c(){e=Z("input"),this.h()},l(d){e=G(d,"INPUT",{type:!0,min:!0,class:!0,step:!0,onclick:!0}),this.h()},h(){z(e,"type","number"),z(e,"min","1"),z(e,"class","inputTD price svelte-167ff77"),z(e,"step","100"),z(e,"onclick","this.select();")},m(d,o){Oe(d,e,o),Gt(e,t[45].params.price),i||(s=[bt(e,"input",u),bt(e,"input",f)],i=!0)},p(d,o){t=d,o[0]&16&&Ii(e.value)!==t[45].params.price&&Gt(e,t[45].params.price)},d(d){d&&R(e),i=!1,Or(s)}}}function Uk(t){let e,i,s;function u(){t[34].call(e,t[46],t[47])}return{c(){e=Z("input"),this.h()},l(f){e=G(f,"INPUT",{type:!0,step:!0,min:!0,class:!0,onclick:!0}),this.h()},h(){z(e,"type","number"),z(e,"step","100"),z(e,"min","1"),z(e,"class","inputTD M2_PRICE svelte-167ff77"),e.readOnly=!0,z(e,"onclick","this.select();")},m(f,d){Oe(f,e,d),Gt(e,t[45].params.M2_PRICE),i||(s=bt(e,"input",u),i=!0)},p(f,d){t=f,d[0]&16&&Ii(e.value)!==t[45].params.M2_PRICE&&Gt(e,t[45].params.M2_PRICE)},d(f){f&&R(e),i=!1,s()}}}function jk(t){let e,i,s;function u(){t[32].call(e,t[46],t[47])}function f(){return t[33](t[45])}return{c(){e=Z("input"),this.h()},l(d){e=G(d,"INPUT",{type:!0,step:!0,min:!0,class:!0,onclick:!0}),this.h()},h(){z(e,"type","number"),z(e,"step","100"),z(e,"min","1"),z(e,"class","inputTD M2_PRICE svelte-167ff77"),z(e,"onclick","this.select();")},m(d,o){Oe(d,e,o),Gt(e,t[45].params.M2_PRICE),i||(s=[bt(e,"input",u),bt(e,"blur",f)],i=!0)},p(d,o){t=d,o[0]&16&&Ii(e.value)!==t[45].params.M2_PRICE&&Gt(e,t[45].params.M2_PRICE)},d(d){d&&R(e),i=!1,Or(s)}}}function X_(t){let e,i,s,u,f,d,o,_;s=new Pk({props:{enabled:t[10].get(t[45].ID)||!!(t[45].params.lat&&t[45].params.lon)}});function v(...E){return t[35](t[45],...E)}return{c(){e=Z("span"),i=Z("button"),Ct(s.$$.fragment),f=we(),this.h()},l(E){e=G(E,"SPAN",{class:!0});var S=J(e);i=G(S,"BUTTON",{});var I=J(i);At(s.$$.fragment,I),I.forEach(R),f=xe(S),S.forEach(R),this.h()},h(){i.disabled=u=!t[0].params.poiGeodata,z(e,"class","onMap noPrint")},m(E,S){Oe(E,e,S),P(e,i),Tt(s,i,null),P(e,f),d=!0,o||(_=bt(i,"click",v),o=!0)},p(E,S){t=E;const I={};S[0]&16&&(I.enabled=t[10].get(t[45].ID)||!!(t[45].params.lat&&t[45].params.lon)),s.$set(I),(!d||S[0]&1&&u!==(u=!t[0].params.poiGeodata))&&(i.disabled=u)},i(E){d||(Ve(s.$$.fragment,E),d=!0)},o(E){Xe(s.$$.fragment,E),d=!1},d(E){E&&R(e),It(s),o=!1,_()}}}function Y_(t){let e,i,s,u=t[47]+1+"",f,d,o,_,v,E,S,I,A,N,V,j,W,K=!t[45].center&&K_(t);function ne(Me,$e){return Me[45].center?Rk:Lk}let Y=ne(t),re=Y(t);function Q(Me,$e){return Me[45].center?Bk:Ok}let se=Q(t),oe=se(t);function Te(Me,$e){return Me[45].center?Nk:Fk}let fe=Te(t),ee=fe(t);function ge(Me,$e){return Me[45].center?Vk:$k}let pe=ge(t),ye=pe(t);function de(Me,$e){return Me[45].center?Uk:jk}let Ne=de(t),Ge=Ne(t),Le=t[45].center==!1&&X_(t);return{c(){K&&K.c(),e=we(),i=Z("tr"),s=Z("td"),f=Mt(u),d=we(),re.c(),o=we(),_=Z("td"),oe.c(),v=we(),E=Z("td"),ee.c(),S=we(),I=Z("td"),ye.c(),A=we(),N=Z("td"),Ge.c(),V=we(),Le&&Le.c(),j=vn(),this.h()},l(Me){K&&K.l(Me),e=xe(Me),i=G(Me,"TR",{class:!0});var $e=J(i);s=G($e,"TD",{});var ht=J(s);f=Pt(ht,u),ht.forEach(R),d=xe($e),re.l($e),o=xe($e),_=G($e,"TD",{});var ut=J(_);oe.l(ut),ut.forEach(R),v=xe($e),E=G($e,"TD",{});var Fe=J(E);ee.l(Fe),Fe.forEach(R),S=xe($e),I=G($e,"TD",{});var ze=J(I);ye.l(ze),ze.forEach(R),A=xe($e),N=G($e,"TD",{});var gt=J(N);Ge.l(gt),gt.forEach(R),$e.forEach(R),V=xe(Me),Le&&Le.l(Me),j=vn(),this.h()},h(){z(i,"class","svelte-167ff77"),On(i,"center",t[45].center)},m(Me,$e){K&&K.m(Me,$e),Oe(Me,e,$e),Oe(Me,i,$e),P(i,s),P(s,f),P(i,d),re.m(i,null),P(i,o),P(i,_),oe.m(_,null),P(i,v),P(i,E),ee.m(E,null),P(i,S),P(i,I),ye.m(I,null),P(i,A),P(i,N),Ge.m(N,null),Oe(Me,V,$e),Le&&Le.m(Me,$e),Oe(Me,j,$e),W=!0},p(Me,$e){Me[45].center?K&&(K.d(1),K=null):K?K.p(Me,$e):(K=K_(Me),K.c(),K.m(e.parentNode,e)),Y===(Y=ne(Me))&&re?re.p(Me,$e):(re.d(1),re=Y(Me),re&&(re.c(),re.m(i,o))),se===(se=Q(Me))&&oe?oe.p(Me,$e):(oe.d(1),oe=se(Me),oe&&(oe.c(),oe.m(_,null))),fe===(fe=Te(Me))&&ee?ee.p(Me,$e):(ee.d(1),ee=fe(Me),ee&&(ee.c(),ee.m(E,null))),pe===(pe=ge(Me))&&ye?ye.p(Me,$e):(ye.d(1),ye=pe(Me),ye&&(ye.c(),ye.m(I,null))),Ne===(Ne=de(Me))&&Ge?Ge.p(Me,$e):(Ge.d(1),Ge=Ne(Me),Ge&&(Ge.c(),Ge.m(N,null))),(!W||$e[0]&16)&&On(i,"center",Me[45].center),Me[45].center==!1?Le?(Le.p(Me,$e),$e[0]&16&&Ve(Le,1)):(Le=X_(Me),Le.c(),Ve(Le,1),Le.m(j.parentNode,j)):Le&&(lr(),Xe(Le,1,1,()=>{Le=null}),ur())},i(Me){W||(Ve(Le),W=!0)},o(Me){Xe(Le),W=!1},d(Me){Me&&(R(e),R(i),R(V),R(j)),K&&K.d(Me),re.d(),oe.d(),ee.d(),ye.d(),Ge.d(),Le&&Le.d(Me)}}}function J_(t){let e,i,s,u,f;function d(_){t[37](_)}let o={title:"Aktualizacja?",autoclose:!0,$$slots:{footer:[Zk],default:[qk]},$$scope:{ctx:t}};return t[2]!==void 0&&(o.open=t[2]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[1]&131072&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&4&&(s=!0,E.open=_[2],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function qk(t){let e,i="Czy na pewno chcesz zaktualizować dane?<br/>";return{c(){e=Z("p"),e.innerHTML=i,this.h()},l(s){e=G(s,"P",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-1hvfdvd"&&(e.innerHTML=i),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400")},m(s,u){Oe(s,e,u)},p:nr,d(s){s&&R(e)}}}function Gk(t){let e;return{c(){e=Mt("Tak")},l(i){e=Pt(i,"Tak")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function Zk(t){let e,i;return e=new Ja({props:{$$slots:{default:[Gk]},$$scope:{ctx:t}}}),e.$on("click",t[36]),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u[1]&131072&&(f.$$scope={dirty:u,ctx:s}),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function Q_(t){let e,i,s,u,f;function d(_){t[38](_)}let o={title:t[3],autoclose:!0};return t[3]!==void 0&&(o.open=t[3]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[0]&8&&(E.title=_[3]),!s&&v[0]&8&&(s=!0,E.open=_[3],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function Hk(t){let e,i,s,u,f,d,o;const _=[Dk,zk],v=[];function E(A,N){return A[4]===!1?0:A[4]?1:-1}~(i=E(t))&&(s=v[i]=_[i](t));let S=t[2]&&J_(t),I=t[3]&&Q_(t);return{c(){e=Z("div"),s&&s.c(),u=we(),S&&S.c(),f=we(),I&&I.c(),d=vn(),this.h()},l(A){e=G(A,"DIV",{class:!0});var N=J(e);s&&s.l(N),N.forEach(R),u=xe(A),S&&S.l(A),f=xe(A),I&&I.l(A),d=vn(),this.h()},h(){z(e,"class","tableData_")},m(A,N){Oe(A,e,N),~i&&v[i].m(e,null),Oe(A,u,N),S&&S.m(A,N),Oe(A,f,N),I&&I.m(A,N),Oe(A,d,N),o=!0},p(A,N){let V=i;i=E(A),i===V?~i&&v[i].p(A,N):(s&&(lr(),Xe(v[V],1,1,()=>{v[V]=null}),ur()),~i?(s=v[i],s?s.p(A,N):(s=v[i]=_[i](A),s.c()),Ve(s,1),s.m(e,null)):s=null),A[2]?S?(S.p(A,N),N[0]&4&&Ve(S,1)):(S=J_(A),S.c(),Ve(S,1),S.m(f.parentNode,f)):S&&(lr(),Xe(S,1,1,()=>{S=null}),ur()),A[3]?I?(I.p(A,N),N[0]&8&&Ve(I,1)):(I=Q_(A),I.c(),Ve(I,1),I.m(d.parentNode,d)):I&&(lr(),Xe(I,1,1,()=>{I=null}),ur())},i(A){o||(Ve(s),Ve(S),Ve(I),o=!0)},o(A){Xe(s),Xe(S),Xe(I),o=!1},d(A){A&&(R(e),R(u),R(f),R(d)),~i&&v[i].d(),S&&S.d(A),I&&I.d(A)}}}function Wk(t,e,i){let s;Ur(t,Xt,ct=>i(0,s=ct));let u="M2_PRICE",f=!1,d=!1,o,_=0,v;function E(ct,xt){let wt=ct.findIndex(kt=>kt.center===!0),Wt=ct.filter((kt,dt)=>dt!==wt);wt=ct.filter((kt,dt)=>dt==wt);let Qt=Wt.filter(kt=>kt.params[xt]<wt[0].params[xt]).sort((kt,dt)=>kt.params[xt]-dt.params[xt]),Ht=Wt.filter(kt=>kt.params[xt]>wt[0].params[xt]).sort((kt,dt)=>kt.params[xt]-dt.params[xt]);i(4,I=[...Qt,...wt,...Ht])}let I=[{ID:"9995",adres:"Warszawa PKP",createDate:"2024-01-24",params:{POW:100,price:2e5,M2_PRICE:2e3},center:!1,place_id:122},{ID:"9993",adres:"Adres 2",createDate:"2024-01-25",params:{POW:150,price:25e4,M2_PRICE:1666},center:!1,place_id:1223},{ID:"9912",adres:"Adres 2",createDate:"2024-01-25",params:{POW:150,price:9925e4,M2_PRICE:9934e3},center:!1,place_id:121}];function A(ct){i(4,I=I.filter(xt=>xt.ID!==ct.ID)),E(I,u)}let N=12;function V(){if(I.length<9){N++;let ct={ID:N.toString(),adres:"Adres "+N,createDate:"2024-01-25",params:{POW:150,price:25e4,M2_PRICE:1666},center:!1,place_id:N};i(4,I=[...I,ct]),E(I,u)}}function j(ct,xt){i(4,I=I.map(wt=>wt.ID===ct.ID?ct:wt)),E(I,u)}function W(ct){ct.params.POW&&ct.params.price&&(ct.params.M2_PRICE=Math.round(ct.params.price/ct.params.POW)),j(ct)}async function K(){let ct=await _w();if(o={ID:s.ID,adres:s.adres,createDate:s.createDate,params:{POW:parseFloat(s.params.POW),price:parseFloat(s.params.price),M2_PRICE:parseFloat(s.params.M2_PRICE)},center:!0,place_id:s.place_id},i(4,I=[...I,o]),ct.features.length>0){let xt=ct.features.map(wt=>({ID:`${wt.properties.id}`,adres:wt.properties.adres,createDate:wt.properties.createDate,params:{lat:parseFloat(wt.properties.params.lat),lon:parseFloat(wt.properties.params.lon),POW:parseFloat(wt.properties.params.POW),price:parseFloat(wt.properties.params.price),M2_PRICE:parseFloat(wt.properties.params.M2_PRICE)},center:!1,place_id:wt.properties.place_id}));i(4,I=[...I,...xt])}E(I,u)}let ne=!1;ys(()=>{i(13,ne=!0)});let Y=new Map;async function re(ct,xt){ct.preventDefault(),_++;let wt=async function(){if(!xt.params.lon&&!xt.params.lat){let Qt=await Mp(xt.adres);if(Qt.data&&Qt.data.status=="ZERO_RESULTS"&&i(3,d="Popraw adres lokalizacji"),Qt.address_components&&Qt.address_components.length>0){let Ht=I.find(kt=>kt.ID===xt.ID);Ht&&(Ht.params.lat=Qt.geometry.location.lat,Ht.params.lon=Qt.geometry.location.lng),Y.set(xt.ID,!0),E(I,u),Tp.set(I.filter(kt=>kt.params&&kt.params.lat&&kt.params.lon))}}},Wt=async function(){xt.params.lon=null,xt.params.lat=null,wt()};_===1?v=setTimeout(()=>{_=0,clearTimeout(v),wt()},400):_===2?(clearTimeout(v),_=0,Wt()):(clearTimeout(v),_=0)}let Q;const se=()=>V(),oe=()=>{i(1,u="POW"),E(I,u)},Te=()=>{i(1,u="price"),E(I,u)},fe=()=>{i(1,u="M2_PRICE"),E(I,u)},ee=ct=>A(ct);function ge(){s.adres=this.value,Xt.set(s)}const pe=ct=>j(ct);function ye(ct,xt){ct[xt].adres=this.value,i(4,I)}const de=ct=>j(ct);function Ne(ct,xt){ct[xt].createDate=this.value,i(4,I)}const Ge=ct=>j(ct);function Le(ct,xt){ct[xt].createDate=this.value,i(4,I)}function Me(ct,xt){ct[xt].params.POW=Ii(this.value),i(4,I)}const $e=ct=>W(ct);function ht(ct,xt){ct[xt].params.POW=Ii(this.value),i(4,I)}function ut(ct,xt){ct[xt].params.price=Ii(this.value),i(4,I)}const Fe=ct=>W(ct);function ze(ct,xt){ct[xt].params.price=Ii(this.value),i(4,I)}function gt(ct,xt){ct[xt].params.M2_PRICE=Ii(this.value),i(4,I)}const Zt=ct=>j(ct);function an(ct,xt){ct[xt].params.M2_PRICE=Ii(this.value),i(4,I)}const yn=(ct,xt)=>re(xt,ct),sn=()=>Q();function Dt(ct){f=ct,i(2,f)}function $t(ct){d=ct,i(3,d)}return t.$$.update=()=>{t.$$.dirty[0]&8193&&(s&&s.params&&ne==!1&&K(),s&&s.params&&ne==!0)},[s,u,f,d,I,E,A,V,j,W,Y,re,Q,ne,se,oe,Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut,Fe,ze,gt,Zt,an,yn,sn,Dt,$t]}class Kk extends Pr{constructor(e){super(),Mr(this,e,Wk,Hk,Cr,{},null,[-1,-1])}}function e1(t){let e,i,s;return{c(){e=Z("div"),this.h()},l(u){e=G(u,"DIV",{role:!0,tabindex:!0,class:!0}),J(e).forEach(R),this.h()},h(){z(e,"role","button"),z(e,"tabindex","2"),z(e,"class","svg-option-button svelte-1uxo7h2")},m(u,f){Oe(u,e,f),i||(s=[bt(e,"keydown",Qk),bt(e,"click",t[11])],i=!0)},p:nr,d(u){u&&R(e),i=!1,Or(s)}}}function Xk(t){let e=Math.floor(pl-t[4])+"",i,s;return{c(){i=Mt(e),s=Mt("%")},l(u){i=Pt(u,e),s=Pt(u,"%")},m(u,f){Oe(u,i,f),Oe(u,s,f)},p(u,f){f&16&&e!==(e=Math.floor(pl-u[4])+"")&&Zn(i,e)},d(u){u&&(R(i),R(s))}}}function Yk(t){let e=(pl-t[4]).toFixed(1)+"",i,s;return{c(){i=Mt(e),s=Mt("%")},l(u){i=Pt(u,e),s=Pt(u,"%")},m(u,f){Oe(u,i,f),Oe(u,s,f)},p(u,f){f&16&&e!==(e=(pl-u[4]).toFixed(1)+"")&&Zn(i,e)},d(u){u&&(R(i),R(s))}}}function Jk(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe=t[3]==!0&&e1(t);function Te(ge,pe){return ge[0]%1!==0?Yk:Xk}let fe=Te(t),ee=fe(t);return{c(){oe&&oe.c(),e=we(),i=Z("div"),s=ot("svg"),u=ot("defs"),f=ot("style"),d=Mt(`.cls-1 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(1.123);
					outline-color: var(--brand-blue);
				}
				.cls-2 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(0.85);
					outline-color: var(--brand-blue);
				}
			`),o=ot("path"),v=ot("g"),E=ot("use"),S=ot("use"),A=ot("g"),N=ot("text"),ee.c(),j=ot("path"),W=ot("path"),K=we(),ne=Z("div"),Y=Z("input"),this.h()},l(ge){oe&&oe.l(ge),e=xe(ge),i=G(ge,"DIV",{class:!0});var pe=J(i);s=st(pe,"svg",{viewBox:!0,class:!0});var ye=J(s);u=st(ye,"defs",{});var de=J(u);f=st(de,"style",{});var Ne=J(f);d=Pt(Ne,`.cls-1 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(1.123);
					outline-color: var(--brand-blue);
				}
				.cls-2 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(0.85);
					outline-color: var(--brand-blue);
				}
			`),Ne.forEach(R),o=st(de,"path",{pathLength:!0,fill:!0,"stroke-width":!0,id:!0,d:!0}),J(o).forEach(R),de.forEach(R),v=st(ye,"g",{mask:!0});var Ge=J(v);E=st(Ge,"use",{href:!0,stroke:!0}),J(E).forEach(R),S=st(Ge,"use",{href:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),J(S).forEach(R),Ge.forEach(R),A=st(ye,"g",{"text-anchor":!0,"dominant-baseline":!0,"font-size":!0,"font-weight":!0,fill:!0,"outline-color":!0,"stroke-width":!0});var Le=J(A);N=st(Le,"text",{});var Me=J(N);ee.l(Me),Me.forEach(R),Le.forEach(R),j=st(ye,"path",{class:!0,d:!0}),J(j).forEach(R),W=st(ye,"path",{class:!0,d:!0}),J(W).forEach(R),ye.forEach(R),pe.forEach(R),K=xe(ge),ne=G(ge,"DIV",{class:!0});var $e=J(ne);Y=G($e,"INPUT",{type:!0,class:!0,min:!0,max:!0}),$e.forEach(R),this.h()},h(){z(o,"pathLength",pl),z(o,"fill","none"),z(o,"stroke-width","14"),z(o,"id","donut-path-"+t[6]),z(o,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(E,"href","#donut-path-"+t[6]),z(E,"stroke","hsl(0, 0%, 100%)"),z(S,"href","#donut-path-"+t[6]),z(S,"stroke","currentColor"),z(S,"stroke-width","40"),z(S,"stroke-dasharray",pl),z(S,"stroke-dashoffset",t[4]),z(v,"mask","url(#donut-mask-"+t[6]+")"),z(A,"text-anchor","middle"),z(A,"dominant-baseline","central"),z(A,"font-size","25"),z(A,"font-weight","700"),z(A,"fill","currentColor"),z(A,"outline-color","var(--brand-blue)"),z(A,"stroke-width","3"),z(j,"class","cls-1"),z(j,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(W,"class","cls-2"),z(W,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(s,"viewBox","-70 -70 140 140"),z(s,"class","svelte-1uxo7h2"),Hi(s,"color",t[2]),z(i,"class","svg-item"),z(Y,"type","number"),z(Y,"class","option_number svelte-1uxo7h2"),z(Y,"min","1"),z(Y,"max","100"),z(ne,"class","options svelte-1uxo7h2"),On(ne,"active",t[1])},m(ge,pe){oe&&oe.m(ge,pe),Oe(ge,e,pe),Oe(ge,i,pe),P(i,s),P(s,u),P(u,f),P(f,d),P(u,o),P(s,v),P(v,E),P(v,S),P(s,A),P(A,N),ee.m(N,null),P(s,j),P(s,W),Oe(ge,K,pe),Oe(ge,ne,pe),P(ne,Y),Gt(Y,t[0]),re=!0,Q||(se=[bt(Y,"input",t[12]),bt(Y,"change",function(){Uc(t[5](t[0]))&&t[5](t[0]).apply(this,arguments)})],Q=!0)},p(ge,[pe]){t=ge,t[3]==!0?oe?oe.p(t,pe):(oe=e1(t),oe.c(),oe.m(e.parentNode,e)):oe&&(oe.d(1),oe=null),(!re||pe&16)&&z(S,"stroke-dashoffset",t[4]),fe===(fe=Te(t))&&ee?ee.p(t,pe):(ee.d(1),ee=fe(t),ee&&(ee.c(),ee.m(N,null))),pe&4&&Hi(s,"color",t[2]),pe&1&&Ii(Y.value)!==t[0]&&Gt(Y,t[0]),(!re||pe&2)&&On(ne,"active",t[1])},i(ge){re||(_&&_.end(1),I&&I.end(1),V&&V.end(1),re=!0)},o(ge){ge&&(_=Mu(o,jr,{duration:200})),ge&&(I=Mu(v,jr,{duration:400})),ge&&(V=Mu(N,au,{duration:200})),re=!1},d(ge){ge&&(R(e),R(i),R(K),R(ne)),oe&&oe.d(ge),ge&&_&&_.end(),ge&&I&&I.end(),ee.d(),ge&&V&&V.end(),Q=!1,Or(se)}}}const pl=100,Qk=()=>{};function e4(t,e,i){let s,u,f;const d=Jf();let{value:o=5.7}=e,{average:_=83}=e,{color:v="hsl(125, 50%, 60%)"}=e;function E(ne){S&&(i(0,o=ne),d("valueChange",o))}let{editable:S=!1,active:I=!1}=e;const A=Math.random().toString().slice(-5),N=Tf(pl,{duration:400});Ur(t,N,ne=>i(4,f=ne));const V=Tf(-10,{duration:200}),j=async(ne,Y)=>{await N.set(ne),V.set(Y)},W=()=>{i(1,I=!I)};function K(){o=Ii(this.value),i(0,o)}return t.$$set=ne=>{"value"in ne&&i(0,o=ne.value),"average"in ne&&i(8,_=ne.average),"color"in ne&&i(2,v=ne.color),"editable"in ne&&i(3,S=ne.editable),"active"in ne&&i(1,I=ne.active)},t.$$.update=()=>{t.$$.dirty&1&&i(10,s=pl-o),t.$$.dirty&256&&i(9,u=360*_/pl),t.$$.dirty&1536&&j(s,u)},[o,I,v,S,f,E,A,N,_,u,s,W,K]}class tb extends Pr{constructor(e){super(),Mr(this,e,e4,Jk,Cr,{value:0,average:8,color:2,editable:3,active:1})}}function t4(t){let e,i,s=`<h2 class="title_medium noselect"><span class="number_type noselect">5</span> Przedstawiono wycenę sporządzoną w oparciu o
					szereg licznych transakcji, graficzny wykaz tych przeprowadzonych w najbliższej okolicy
					uwzględniono na mapce za pomocq symbolu (<span class="dot"></span>). Co widać poniżej:</h2>`,u,f,d,o,_,v='<h2 class="title_medium noselect"><span class="number_type noselect">6</span>Rentowność wynajmu - długoterminowa</h2>',E,S,I,A,N,V,j,W="zł/mieś",K,ne,Y,re,Q="Przypuszczalny zysk w skali miesiąca",se,oe,Te,fe,ee,ge,pe,ye,de,Ne="<br/>Przypuszczalny zysk w skali roku",Ge,Le,Me,$e="Możliwy do uzyskania zysk w ciągu roku względem wartości lokalu",ht,ut,Fe='<h2 class="title_medium noselect"><span class="number_type noselect">7</span>Rentowność wynajmu - krótkoterminowa</h2>',ze,gt,Zt,an,yn,sn,Dt,$t,ct,xt,wt,Wt="Przypuszczalny zysk w przeliczeniu na dzień",Qt,Ht,kt,dt,be,Et,Ut,_t,zt,gn="<br/>Przypuszczalny zysk w skali miesiąca",Mn,Hn,Kn,br="Wskaźnik obłożenia<br/>w skali roku",Yn,rr,vt;d=new Kk({});let Vn=t[1].params&&t1(t),He=t[1]&&t[1].params.page02.rentownoscDPercent&&n1(t);return{c(){e=Z("div"),i=Z("div"),i.innerHTML=s,u=we(),f=Z("div"),Ct(d.$$.fragment),o=we(),_=Z("div"),_.innerHTML=v,E=we(),S=Z("div"),I=Z("div"),A=Z("span"),N=Z("input"),V=we(),j=Z("span"),j.textContent=W,K=we(),ne=Z("br"),Y=we(),re=Z("span"),re.textContent=Q,se=we(),oe=Z("hr"),Te=we(),fe=Z("span"),ee=Z("input"),pe=Mt("zł/rok"),ye=we(),de=Z("span"),de.innerHTML=Ne,Ge=we(),Vn&&Vn.c(),Le=we(),Me=Z("div"),Me.textContent=$e,ht=we(),ut=Z("div"),ut.innerHTML=Fe,ze=we(),gt=Z("div"),Zt=Z("div"),an=Z("span"),yn=Z("input"),Dt=Mt("zł/dzień"),$t=we(),ct=Z("br"),xt=we(),wt=Z("span"),wt.textContent=Wt,Qt=we(),Ht=Z("hr"),kt=we(),dt=Z("span"),be=Z("input"),Ut=Mt("zł/miesiąc"),_t=we(),zt=Z("span"),zt.innerHTML=gn,Mn=we(),He&&He.c(),Hn=we(),Kn=Z("div"),Kn.innerHTML=br,this.h()},l(pt){e=G(pt,"DIV",{class:!0});var dn=J(e);i=G(dn,"DIV",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-195o0zu"&&(i.innerHTML=s),u=xe(dn),f=G(dn,"DIV",{class:!0});var lt=J(f);At(d.$$.fragment,lt),lt.forEach(R),o=xe(dn),_=G(dn,"DIV",{class:!0,"data-svelte-h":!0}),Vt(_)!=="svelte-1kxyak1"&&(_.innerHTML=v),E=xe(dn),S=G(dn,"DIV",{class:!0});var en=J(S);I=G(en,"DIV",{class:!0});var tn=J(I);A=G(tn,"SPAN",{});var wr=J(A);N=G(wr,"INPUT",{class:!0}),wr.forEach(R),V=xe(tn),j=G(tn,"SPAN",{"data-svelte-h":!0}),Vt(j)!=="svelte-rvxrkb"&&(j.textContent=W),K=xe(tn),ne=G(tn,"BR",{}),Y=xe(tn),re=G(tn,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(re)!=="svelte-16q4se2"&&(re.textContent=Q),se=xe(tn),oe=G(tn,"HR",{class:!0}),Te=xe(tn),fe=G(tn,"SPAN",{});var mr=J(fe);ee=G(mr,"INPUT",{contenteditable:!0,class:!0}),pe=Pt(mr,"zł/rok"),mr.forEach(R),ye=xe(tn),de=G(tn,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(de)!=="svelte-1b4st78"&&(de.innerHTML=Ne),tn.forEach(R),Ge=xe(en),Vn&&Vn.l(en),Le=xe(en),Me=G(en,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Me)!=="svelte-1mf6s1p"&&(Me.textContent=$e),en.forEach(R),ht=xe(dn),ut=G(dn,"DIV",{class:!0,"data-svelte-h":!0}),Vt(ut)!=="svelte-1wxe8ft"&&(ut.innerHTML=Fe),ze=xe(dn),gt=G(dn,"DIV",{class:!0});var on=J(gt);Zt=G(on,"DIV",{class:!0});var Xn=J(Zt);an=G(Xn,"SPAN",{});var ke=J(an);yn=G(ke,"INPUT",{class:!0}),Dt=Pt(ke,"zł/dzień"),ke.forEach(R),$t=xe(Xn),ct=G(Xn,"BR",{}),xt=xe(Xn),wt=G(Xn,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(wt)!=="svelte-p5ce9"&&(wt.textContent=Wt),Qt=xe(Xn),Ht=G(Xn,"HR",{class:!0}),kt=xe(Xn),dt=G(Xn,"SPAN",{});var X=J(dt);be=G(X,"INPUT",{class:!0}),Ut=Pt(X,"zł/miesiąc"),X.forEach(R),_t=xe(Xn),zt=G(Xn,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(zt)!=="svelte-4ru6lx"&&(zt.innerHTML=gn),Xn.forEach(R),Mn=xe(on),He&&He.l(on),Hn=xe(on),Kn=G(on,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Kn)!=="svelte-6lwm8t"&&(Kn.innerHTML=br),on.forEach(R),dn.forEach(R),this.h()},h(){z(i,"class","grid_content noselect"),z(f,"class","grid_content noselect"),z(_,"class","grid_content noselect"),z(N,"class","rentownoscK"),z(re,"class","zl-mies-opis"),z(oe,"class","hr"),z(ee,"contenteditable","false"),z(ee,"class","rentownoscK12"),z(de,"class","zl-mies-opis"),z(I,"class","rent-dlugo"),z(Me,"class","opisLewy"),z(S,"class","grid_content noselect chart01"),z(ut,"class","grid_content noselect"),z(yn,"class","rentownoscD1"),z(wt,"class","zl-mies-opis"),z(Ht,"class","hr"),z(be,"class","rentownoscD12"),z(zt,"class","zl-mies-opis"),z(Zt,"class","rent-dlugo"),z(Kn,"class","opisLewy"),z(gt,"class","grid_content noselect chart01"),z(e,"class","page_content")},m(pt,dn){Oe(pt,e,dn),P(e,i),P(e,u),P(e,f),Tt(d,f,null),P(e,o),P(e,_),P(e,E),P(e,S),P(S,I),P(I,A),P(A,N),Gt(N,t[1].params.page02.rentownoscK),P(I,V),P(I,j),P(I,K),P(I,ne),P(I,Y),P(I,re),P(I,se),P(I,oe),P(I,Te),P(I,fe),P(fe,ee),Gt(ee,t[1].params.page02.rentownoscK12),P(fe,pe),P(I,ye),P(I,de),P(S,Ge),Vn&&Vn.m(S,null),P(S,Le),P(S,Me),P(e,ht),P(e,ut),P(e,ze),P(e,gt),P(gt,Zt),P(Zt,an),P(an,yn),Gt(yn,t[1].params.page02.rentownoscD1),P(an,Dt),P(Zt,$t),P(Zt,ct),P(Zt,xt),P(Zt,wt),P(Zt,Qt),P(Zt,Ht),P(Zt,kt),P(Zt,dt),P(dt,be),Gt(be,t[1].params.page02.rentownoscD12),P(dt,Ut),P(Zt,_t),P(Zt,zt),P(gt,Mn),He&&He.m(gt,null),P(gt,Hn),P(gt,Kn),Yn=!0,rr||(vt=[Ho(Xh.call(null,N)),bt(N,"input",t[4]),bt(N,"change",t[5]),Ho(ge=Xh.call(null,ee,{value:t[1].params.page02.rentownoscK12})),bt(ee,"input",t[6]),Ho(sn=Xh.call(null,yn,{value:t[1].params.page02.rentownoscD1})),bt(yn,"input",t[7]),Ho(Et=Xh.call(null,be,{value:t[1].params.page02.rentownoscD12})),bt(be,"input",t[8])],rr=!0)},p(pt,dn){dn&2&&N.value!==pt[1].params.page02.rentownoscK&&Gt(N,pt[1].params.page02.rentownoscK),ge&&Uc(ge.update)&&dn&2&&ge.update.call(null,{value:pt[1].params.page02.rentownoscK12}),dn&2&&ee.value!==pt[1].params.page02.rentownoscK12&&Gt(ee,pt[1].params.page02.rentownoscK12),pt[1].params?Vn?(Vn.p(pt,dn),dn&2&&Ve(Vn,1)):(Vn=t1(pt),Vn.c(),Ve(Vn,1),Vn.m(S,Le)):Vn&&(lr(),Xe(Vn,1,1,()=>{Vn=null}),ur()),sn&&Uc(sn.update)&&dn&2&&sn.update.call(null,{value:pt[1].params.page02.rentownoscD1}),dn&2&&yn.value!==pt[1].params.page02.rentownoscD1&&Gt(yn,pt[1].params.page02.rentownoscD1),Et&&Uc(Et.update)&&dn&2&&Et.update.call(null,{value:pt[1].params.page02.rentownoscD12}),dn&2&&be.value!==pt[1].params.page02.rentownoscD12&&Gt(be,pt[1].params.page02.rentownoscD12),pt[1]&&pt[1].params.page02.rentownoscDPercent?He?(He.p(pt,dn),dn&2&&Ve(He,1)):(He=n1(pt),He.c(),Ve(He,1),He.m(gt,Hn)):He&&(lr(),Xe(He,1,1,()=>{He=null}),ur())},i(pt){Yn||(Ve(d.$$.fragment,pt),Ve(Vn),Ve(He),Yn=!0)},o(pt){Xe(d.$$.fragment,pt),Xe(Vn),Xe(He),Yn=!1},d(pt){pt&&R(e),It(d),Vn&&Vn.d(),He&&He.d(),rr=!1,Or(vt)}}}function n4(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},p:nr,i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function t1(t){let e,i;return e=new tb({props:{value:t[1].params.page02.rentownoscKPercent}}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u&2&&(f.value=s[1].params.page02.rentownoscKPercent),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function n1(t){let e,i;return e=new tb({props:{value:t[1].params.page02.rentownoscDPercent,editable:!0}}),e.$on("valueChange",t[9]),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u&2&&(f.value=s[1].params.page02.rentownoscDPercent),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function r4(t){let e,i,s,u,f,d,o,_="2",v;i=new Mo({});const E=[n4,t4],S=[];function I(A,N){return A[0]===!1?0:A[0]===!0&&A[1].params?1:-1}return~(u=I(t))&&(f=S[u]=E[u](t)),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),f&&f.c(),d=we(),o=Z("div"),o.textContent=_,this.h()},l(A){e=G(A,"DIV",{class:!0});var N=J(e);At(i.$$.fragment,N),s=xe(N),f&&f.l(N),d=xe(N),o=G(N,"DIV",{class:!0,"data-svelte-h":!0}),Vt(o)!=="svelte-1mzqszp"&&(o.textContent=_),N.forEach(R),this.h()},h(){z(o,"class","pageNumber"),z(e,"class","content-block section page_02")},m(A,N){Oe(A,e,N),Tt(i,e,null),P(e,s),~u&&S[u].m(e,null),P(e,d),P(e,o),v=!0},p(A,[N]){let V=u;u=I(A),u===V?~u&&S[u].p(A,N):(f&&(lr(),Xe(S[V],1,1,()=>{S[V]=null}),ur()),~u?(f=S[u],f?f.p(A,N):(f=S[u]=E[u](A),f.c()),Ve(f,1),f.m(e,d)):f=null)},i(A){v||(Ve(i.$$.fragment,A),Ve(f),v=!0)},o(A){Xe(i.$$.fragment,A),Xe(f),v=!1},d(A){A&&R(e),It(i),~u&&S[u].d()}}}function Xh(t){const i=(()=>{const s=document.createElement("div");document.body.appendChild(s);function u(){const d=window.getComputedStyle(t);s.innerHTML=t.value,s.style.fontSize=d.fontSize,s.style.fontFamily=d.fontFamily,s.style.paddingLeft=d.paddingLeft,s.style.paddingRight=d.paddingRight,s.style.boxSizing="border-box",s.style.border=d.border,s.style.width="max-content",s.style.position="absolute",s.style.top="0",s.style.left="-9999px",s.style.overflow="hidden",s.style.visibility="hidden",s.style.whiteSpace="pre",s.style.height="0",t.style.width=`${s.offsetWidth}px`}u();const f=new MutationObserver(u);return f.observe(t,{attributes:!0,childList:!0,subtree:!0}),{update(){u()},destroy(){f.disconnect()}}})();return t.addEventListener("input",i.update),{update(){i.update()},destroy(){t.removeEventListener("input",i.update),i.destroy()}}}function i4(t,e,i){let s;Ur(t,Xt,A=>i(1,s=A));let u=()=>{let A=s.params.price/(s.params.page02.rentownoscK*12);Ar(Xt,s.params.page02.rentownoscKPercent=A,s),Ar(Xt,s.params.page02.rentownoscK12=s.params.page02.rentownoscK*12,s)},f=A=>{Ar(Xt,s.params.page02.rentownoscDPercent=A,s);let W=s.params.page02.rentownoscK/30*A,K=W*360;Ar(Xt,s.params.page02.rentownoscD1=W.toFixed(0),s),Ar(Xt,s.params.page02.rentownoscD12=K.toFixed(0),s)},d=!1;ys(async()=>{i(0,d=!0)});function o(){s.params.page02.rentownoscK=this.value,Xt.set(s)}const _=()=>{u()};function v(){s.params.page02.rentownoscK12=this.value,Xt.set(s)}function E(){s.params.page02.rentownoscD1=this.value,Xt.set(s)}function S(){s.params.page02.rentownoscD12=this.value,Xt.set(s)}return[d,s,u,f,o,_,v,E,S,A=>f(A.detail)]}class a4 extends Pr{constructor(e){super(),Mr(this,e,i4,r4,Cr,{})}}function mf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function s4(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nb(t){let e,i,s;t.length!==2?(e=mf,i=(o,_)=>mf(t(o),_),s=(o,_)=>t(o)-_):(e=t===mf||t===s4?t:o4,i=t,s=t);function u(o,_,v=0,E=o.length){if(v<E){if(e(_,_)!==0)return E;do{const S=v+E>>>1;i(o[S],_)<0?v=S+1:E=S}while(v<E)}return v}function f(o,_,v=0,E=o.length){if(v<E){if(e(_,_)!==0)return E;do{const S=v+E>>>1;i(o[S],_)<=0?v=S+1:E=S}while(v<E)}return v}function d(o,_,v=0,E=o.length){const S=u(o,_,v,E-1);return S>v&&s(o[S-1],_)>-s(o[S],_)?S-1:S}return{left:u,center:d,right:f}}function o4(){return 0}function l4(t){return t===null?NaN:+t}const u4=nb(mf),c4=u4.right;nb(l4).center;class su{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const i=this._partials;let s=0;for(let u=0;u<this._n&&u<32;u++){const f=i[u],d=e+f,o=Math.abs(e)<Math.abs(f)?e-(d-f):f-(d-e);o&&(i[s++]=o),e=d}return i[s]=e,this._n=s+1,this}valueOf(){const e=this._partials;let i=this._n,s,u,f,d=0;if(i>0){for(d=e[--i];i>0&&(s=d,u=e[--i],d=s+u,f=u-(d-s),!f););i>0&&(f<0&&e[i-1]<0||f>0&&e[i-1]>0)&&(u=f*2,s=d+u,u==s-d&&(d=s))}return d}}class r1 extends Map{constructor(e,i=d4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const[s,u]of e)this.set(s,u)}get(e){return super.get(i1(this,e))}has(e){return super.has(i1(this,e))}set(e,i){return super.set(h4(this,e),i)}delete(e){return super.delete(f4(this,e))}}function i1({_intern:t,_key:e},i){const s=e(i);return t.has(s)?t.get(s):i}function h4({_intern:t,_key:e},i){const s=e(i);return t.has(s)?t.get(s):(t.set(s,i),i)}function f4({_intern:t,_key:e},i){const s=e(i);return t.has(s)&&(i=t.get(s),t.delete(s)),i}function d4(t){return t!==null&&typeof t=="object"?t.valueOf():t}const p4=Math.sqrt(50),m4=Math.sqrt(10),g4=Math.sqrt(2);function Cf(t,e,i){const s=(e-t)/Math.max(0,i),u=Math.floor(Math.log10(s)),f=s/Math.pow(10,u),d=f>=p4?10:f>=m4?5:f>=g4?2:1;let o,_,v;return u<0?(v=Math.pow(10,-u)/d,o=Math.round(t*v),_=Math.round(e*v),o/v<t&&++o,_/v>e&&--_,v=-v):(v=Math.pow(10,u)*d,o=Math.round(t/v),_=Math.round(e/v),o*v<t&&++o,_*v>e&&--_),_<o&&.5<=i&&i<2?Cf(t,e,i*2):[o,_,v]}function _4(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const s=e<t,[u,f,d]=s?Cf(e,t,i):Cf(t,e,i);if(!(f>=u))return[];const o=f-u+1,_=new Array(o);if(s)if(d<0)for(let v=0;v<o;++v)_[v]=(f-v)/-d;else for(let v=0;v<o;++v)_[v]=(f-v)*d;else if(d<0)for(let v=0;v<o;++v)_[v]=(u+v)/-d;else for(let v=0;v<o;++v)_[v]=(u+v)*d;return _}function Up(t,e,i){return e=+e,t=+t,i=+i,Cf(t,e,i)[2]}function y4(t,e,i){e=+e,t=+t,i=+i;const s=e<t,u=s?Up(e,t,i):Up(t,e,i);return(s?-1:1)*(u<0?1/-u:u)}function v4(t,e){let i;if(e===void 0)for(const s of t)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let u of t)(u=e(u,++s,t))!=null&&(i<u||i===void 0&&u>=u)&&(i=u)}return i}function*b4(t){for(const e of t)yield*e}function rb(t){return Array.from(b4(t))}function jp(t,e,i){t=+t,e=+e,i=(u=arguments.length)<2?(e=t,t=0,1):u<3?1:+i;for(var s=-1,u=Math.max(0,Math.ceil((e-t)/i))|0,f=new Array(u);++s<u;)f[s]=t+s*i;return f}function x4(t){return t}var op=1,lp=2,qp=3,Lc=4,a1=1e-6;function w4(t){return"translate("+t+",0)"}function k4(t){return"translate(0,"+t+")"}function E4(t){return e=>+t(e)}function S4(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function I4(){return!this.__axis}function ib(t,e){var i=[],s=null,u=null,f=6,d=6,o=3,_=typeof window<"u"&&window.devicePixelRatio>1?0:.5,v=t===op||t===Lc?-1:1,E=t===Lc||t===lp?"x":"y",S=t===op||t===qp?w4:k4;function I(A){var N=s??(e.ticks?e.ticks.apply(e,i):e.domain()),V=u??(e.tickFormat?e.tickFormat.apply(e,i):x4),j=Math.max(f,0)+o,W=e.range(),K=+W[0]+_,ne=+W[W.length-1]+_,Y=(e.bandwidth?S4:E4)(e.copy(),_),re=A.selection?A.selection():A,Q=re.selectAll(".domain").data([null]),se=re.selectAll(".tick").data(N,e).order(),oe=se.exit(),Te=se.enter().append("g").attr("class","tick"),fe=se.select("line"),ee=se.select("text");Q=Q.merge(Q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),se=se.merge(Te),fe=fe.merge(Te.append("line").attr("stroke","currentColor").attr(E+"2",v*f)),ee=ee.merge(Te.append("text").attr("fill","currentColor").attr(E,v*j).attr("dy",t===op?"0em":t===qp?"0.71em":"0.32em")),A!==re&&(Q=Q.transition(A),se=se.transition(A),fe=fe.transition(A),ee=ee.transition(A),oe=oe.transition(A).attr("opacity",a1).attr("transform",function(ge){return isFinite(ge=Y(ge))?S(ge+_):this.getAttribute("transform")}),Te.attr("opacity",a1).attr("transform",function(ge){var pe=this.parentNode.__axis;return S((pe&&isFinite(pe=pe(ge))?pe:Y(ge))+_)})),oe.remove(),Q.attr("d",t===Lc||t===lp?d?"M"+v*d+","+K+"H"+_+"V"+ne+"H"+v*d:"M"+_+","+K+"V"+ne:d?"M"+K+","+v*d+"V"+_+"H"+ne+"V"+v*d:"M"+K+","+_+"H"+ne),se.attr("opacity",1).attr("transform",function(ge){return S(Y(ge)+_)}),fe.attr(E+"2",v*f),ee.attr(E,v*j).text(V),re.filter(I4).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===lp?"start":t===Lc?"end":"middle"),re.each(function(){this.__axis=Y})}return I.scale=function(A){return arguments.length?(e=A,I):e},I.ticks=function(){return i=Array.from(arguments),I},I.tickArguments=function(A){return arguments.length?(i=A==null?[]:Array.from(A),I):i.slice()},I.tickValues=function(A){return arguments.length?(s=A==null?null:Array.from(A),I):s&&s.slice()},I.tickFormat=function(A){return arguments.length?(u=A,I):u},I.tickSize=function(A){return arguments.length?(f=d=+A,I):f},I.tickSizeInner=function(A){return arguments.length?(f=+A,I):f},I.tickSizeOuter=function(A){return arguments.length?(d=+A,I):d},I.tickPadding=function(A){return arguments.length?(o=+A,I):o},I.offset=function(A){return arguments.length?(_=+A,I):_},I}function T4(t){return ib(qp,t)}function A4(t){return ib(Lc,t)}var C4={value:()=>{}};function Bm(){for(var t=0,e=arguments.length,i={},s;t<e;++t){if(!(s=arguments[t]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new gf(i)}function gf(t){this._=t}function P4(t,e){return t.trim().split(/^|\s+/).map(function(i){var s="",u=i.indexOf(".");if(u>=0&&(s=i.slice(u+1),i=i.slice(0,u)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}gf.prototype=Bm.prototype={constructor:gf,on:function(t,e){var i=this._,s=P4(t+"",i),u,f=-1,d=s.length;if(arguments.length<2){for(;++f<d;)if((u=(t=s[f]).type)&&(u=M4(i[u],t.name)))return u;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++f<d;)if(u=(t=s[f]).type)i[u]=s1(i[u],t.name,e);else if(e==null)for(u in i)i[u]=s1(i[u],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new gf(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var i=new Array(u),s=0,u,f;s<u;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(f=this._[t],s=0,u=f.length;s<u;++s)f[s].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],u=0,f=s.length;u<f;++u)s[u].value.apply(e,i)}};function M4(t,e){for(var i=0,s=t.length,u;i<s;++i)if((u=t[i]).name===e)return u.value}function s1(t,e,i){for(var s=0,u=t.length;s<u;++s)if(t[s].name===e){t[s]=C4,t=t.slice(0,s).concat(t.slice(s+1));break}return i!=null&&t.push({name:e,value:i}),t}var Gp="http://www.w3.org/1999/xhtml";const o1={svg:"http://www.w3.org/2000/svg",xhtml:Gp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rd(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),o1.hasOwnProperty(e)?{space:o1[e],local:t}:t}function z4(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Gp&&e.documentElement.namespaceURI===Gp?e.createElement(t):e.createElementNS(i,t)}}function D4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Om(t){var e=rd(t);return(e.local?D4:z4)(e)}function L4(){}function Nm(t){return t==null?L4:function(){return this.querySelector(t)}}function R4(t){typeof t!="function"&&(t=Nm(t));for(var e=this._groups,i=e.length,s=new Array(i),u=0;u<i;++u)for(var f=e[u],d=f.length,o=s[u]=new Array(d),_,v,E=0;E<d;++E)(_=f[E])&&(v=t.call(_,_.__data__,E,f))&&("__data__"in _&&(v.__data__=_.__data__),o[E]=v);return new _s(s,this._parents)}function ab(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function B4(){return[]}function sb(t){return t==null?B4:function(){return this.querySelectorAll(t)}}function O4(t){return function(){return ab(t.apply(this,arguments))}}function N4(t){typeof t=="function"?t=O4(t):t=sb(t);for(var e=this._groups,i=e.length,s=[],u=[],f=0;f<i;++f)for(var d=e[f],o=d.length,_,v=0;v<o;++v)(_=d[v])&&(s.push(t.call(_,_.__data__,v,d)),u.push(_));return new _s(s,u)}function ob(t){return function(){return this.matches(t)}}function lb(t){return function(e){return e.matches(t)}}var F4=Array.prototype.find;function V4(t){return function(){return F4.call(this.children,t)}}function $4(){return this.firstElementChild}function U4(t){return this.select(t==null?$4:V4(typeof t=="function"?t:lb(t)))}var j4=Array.prototype.filter;function q4(){return Array.from(this.children)}function G4(t){return function(){return j4.call(this.children,t)}}function Z4(t){return this.selectAll(t==null?q4:G4(typeof t=="function"?t:lb(t)))}function H4(t){typeof t!="function"&&(t=ob(t));for(var e=this._groups,i=e.length,s=new Array(i),u=0;u<i;++u)for(var f=e[u],d=f.length,o=s[u]=[],_,v=0;v<d;++v)(_=f[v])&&t.call(_,_.__data__,v,f)&&o.push(_);return new _s(s,this._parents)}function ub(t){return new Array(t.length)}function W4(){return new _s(this._enter||this._groups.map(ub),this._parents)}function Pf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pf.prototype={constructor:Pf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function K4(t){return function(){return t}}function X4(t,e,i,s,u,f){for(var d=0,o,_=e.length,v=f.length;d<v;++d)(o=e[d])?(o.__data__=f[d],s[d]=o):i[d]=new Pf(t,f[d]);for(;d<_;++d)(o=e[d])&&(u[d]=o)}function Y4(t,e,i,s,u,f,d){var o,_,v=new Map,E=e.length,S=f.length,I=new Array(E),A;for(o=0;o<E;++o)(_=e[o])&&(I[o]=A=d.call(_,_.__data__,o,e)+"",v.has(A)?u[o]=_:v.set(A,_));for(o=0;o<S;++o)A=d.call(t,f[o],o,f)+"",(_=v.get(A))?(s[o]=_,_.__data__=f[o],v.delete(A)):i[o]=new Pf(t,f[o]);for(o=0;o<E;++o)(_=e[o])&&v.get(I[o])===_&&(u[o]=_)}function J4(t){return t.__data__}function Q4(t,e){if(!arguments.length)return Array.from(this,J4);var i=e?Y4:X4,s=this._parents,u=this._groups;typeof t!="function"&&(t=K4(t));for(var f=u.length,d=new Array(f),o=new Array(f),_=new Array(f),v=0;v<f;++v){var E=s[v],S=u[v],I=S.length,A=eE(t.call(E,E&&E.__data__,v,s)),N=A.length,V=o[v]=new Array(N),j=d[v]=new Array(N),W=_[v]=new Array(I);i(E,S,V,j,W,A,e);for(var K=0,ne=0,Y,re;K<N;++K)if(Y=V[K]){for(K>=ne&&(ne=K+1);!(re=j[ne])&&++ne<N;);Y._next=re||null}}return d=new _s(d,s),d._enter=o,d._exit=_,d}function eE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tE(){return new _s(this._exit||this._groups.map(ub),this._parents)}function nE(t,e,i){var s=this.enter(),u=this,f=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),e!=null&&(u=e(u),u&&(u=u.selection())),i==null?f.remove():i(f),s&&u?s.merge(u).order():u}function rE(t){for(var e=t.selection?t.selection():t,i=this._groups,s=e._groups,u=i.length,f=s.length,d=Math.min(u,f),o=new Array(u),_=0;_<d;++_)for(var v=i[_],E=s[_],S=v.length,I=o[_]=new Array(S),A,N=0;N<S;++N)(A=v[N]||E[N])&&(I[N]=A);for(;_<u;++_)o[_]=i[_];return new _s(o,this._parents)}function iE(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var s=t[e],u=s.length-1,f=s[u],d;--u>=0;)(d=s[u])&&(f&&d.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(d,f),f=d);return this}function aE(t){t||(t=sE);function e(S,I){return S&&I?t(S.__data__,I.__data__):!S-!I}for(var i=this._groups,s=i.length,u=new Array(s),f=0;f<s;++f){for(var d=i[f],o=d.length,_=u[f]=new Array(o),v,E=0;E<o;++E)(v=d[E])&&(_[E]=v);_.sort(e)}return new _s(u,this._parents).order()}function sE(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function oE(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function lE(){return Array.from(this)}function uE(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s=t[e],u=0,f=s.length;u<f;++u){var d=s[u];if(d)return d}return null}function cE(){let t=0;for(const e of this)++t;return t}function hE(){return!this.node()}function fE(t){for(var e=this._groups,i=0,s=e.length;i<s;++i)for(var u=e[i],f=0,d=u.length,o;f<d;++f)(o=u[f])&&t.call(o,o.__data__,f,u);return this}function dE(t){return function(){this.removeAttribute(t)}}function pE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mE(t,e){return function(){this.setAttribute(t,e)}}function gE(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _E(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function yE(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function vE(t,e){var i=rd(t);if(arguments.length<2){var s=this.node();return i.local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}return this.each((e==null?i.local?pE:dE:typeof e=="function"?i.local?yE:_E:i.local?gE:mE)(i,e))}function cb(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bE(t){return function(){this.style.removeProperty(t)}}function xE(t,e,i){return function(){this.style.setProperty(t,e,i)}}function wE(t,e,i){return function(){var s=e.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,i)}}function kE(t,e,i){return arguments.length>1?this.each((e==null?bE:typeof e=="function"?wE:xE)(t,e,i??"")):Fu(this.node(),t)}function Fu(t,e){return t.style.getPropertyValue(e)||cb(t).getComputedStyle(t,null).getPropertyValue(e)}function EE(t){return function(){delete this[t]}}function SE(t,e){return function(){this[t]=e}}function IE(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function TE(t,e){return arguments.length>1?this.each((e==null?EE:typeof e=="function"?IE:SE)(t,e)):this.node()[t]}function hb(t){return t.trim().split(/^|\s+/)}function Fm(t){return t.classList||new fb(t)}function fb(t){this._node=t,this._names=hb(t.getAttribute("class")||"")}fb.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function db(t,e){for(var i=Fm(t),s=-1,u=e.length;++s<u;)i.add(e[s])}function pb(t,e){for(var i=Fm(t),s=-1,u=e.length;++s<u;)i.remove(e[s])}function AE(t){return function(){db(this,t)}}function CE(t){return function(){pb(this,t)}}function PE(t,e){return function(){(e.apply(this,arguments)?db:pb)(this,t)}}function ME(t,e){var i=hb(t+"");if(arguments.length<2){for(var s=Fm(this.node()),u=-1,f=i.length;++u<f;)if(!s.contains(i[u]))return!1;return!0}return this.each((typeof e=="function"?PE:e?AE:CE)(i,e))}function zE(){this.textContent=""}function DE(t){return function(){this.textContent=t}}function LE(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function RE(t){return arguments.length?this.each(t==null?zE:(typeof t=="function"?LE:DE)(t)):this.node().textContent}function BE(){this.innerHTML=""}function OE(t){return function(){this.innerHTML=t}}function NE(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function FE(t){return arguments.length?this.each(t==null?BE:(typeof t=="function"?NE:OE)(t)):this.node().innerHTML}function VE(){this.nextSibling&&this.parentNode.appendChild(this)}function $E(){return this.each(VE)}function UE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jE(){return this.each(UE)}function qE(t){var e=typeof t=="function"?t:Om(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function GE(){return null}function ZE(t,e){var i=typeof t=="function"?t:Om(t),s=e==null?GE:typeof e=="function"?e:Nm(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)})}function HE(){var t=this.parentNode;t&&t.removeChild(this)}function WE(){return this.each(HE)}function KE(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function XE(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function YE(t){return this.select(t?XE:KE)}function JE(t){return arguments.length?this.property("__data__",t):this.node().__data__}function QE(t){return function(e){t.call(this,e,this.__data__)}}function eS(t){return t.trim().split(/^|\s+/).map(function(e){var i="",s=e.indexOf(".");return s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),{type:e,name:i}})}function tS(t){return function(){var e=this.__on;if(e){for(var i=0,s=-1,u=e.length,f;i<u;++i)f=e[i],(!t.type||f.type===t.type)&&f.name===t.name?this.removeEventListener(f.type,f.listener,f.options):e[++s]=f;++s?e.length=s:delete this.__on}}}function nS(t,e,i){return function(){var s=this.__on,u,f=QE(e);if(s){for(var d=0,o=s.length;d<o;++d)if((u=s[d]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=f,u.options=i),u.value=e;return}}this.addEventListener(t.type,f,i),u={type:t.type,name:t.name,value:e,listener:f,options:i},s?s.push(u):this.__on=[u]}}function rS(t,e,i){var s=eS(t+""),u,f=s.length,d;if(arguments.length<2){var o=this.node().__on;if(o){for(var _=0,v=o.length,E;_<v;++_)for(u=0,E=o[_];u<f;++u)if((d=s[u]).type===E.type&&d.name===E.name)return E.value}return}for(o=e?nS:tS,u=0;u<f;++u)this.each(o(s[u],e,i));return this}function mb(t,e,i){var s=cb(t),u=s.CustomEvent;typeof u=="function"?u=new u(e,i):(u=s.document.createEvent("Event"),i?(u.initEvent(e,i.bubbles,i.cancelable),u.detail=i.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function iS(t,e){return function(){return mb(this,t,e)}}function aS(t,e){return function(){return mb(this,t,e.apply(this,arguments))}}function sS(t,e){return this.each((typeof e=="function"?aS:iS)(t,e))}function*oS(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s=t[e],u=0,f=s.length,d;u<f;++u)(d=s[u])&&(yield d)}var Vm=[null];function _s(t,e){this._groups=t,this._parents=e}function th(){return new _s([[document.documentElement]],Vm)}function lS(){return this}_s.prototype=th.prototype={constructor:_s,select:R4,selectAll:N4,selectChild:U4,selectChildren:Z4,filter:H4,data:Q4,enter:W4,exit:tE,join:nE,merge:rE,selection:lS,order:iE,sort:aE,call:oE,nodes:lE,node:uE,size:cE,empty:hE,each:fE,attr:vE,style:kE,property:TE,classed:ME,text:RE,html:FE,raise:$E,lower:jE,append:qE,insert:ZE,remove:WE,clone:YE,datum:JE,on:rS,dispatch:sS,[Symbol.iterator]:oS};function Pa(t){return typeof t=="string"?new _s([[document.querySelector(t)]],[document.documentElement]):new _s([[t]],Vm)}function uS(t){return Pa(Om(t).call(document.documentElement))}function cS(t){let e;for(;e=t.sourceEvent;)t=e;return t}function l1(t,e){if(t=cS(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var s=i.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var u=e.getBoundingClientRect();return[t.clientX-u.left-e.clientLeft,t.clientY-u.top-e.clientTop]}}return[t.pageX,t.pageY]}function Zp(t){return typeof t=="string"?new _s([document.querySelectorAll(t)],[document.documentElement]):new _s([ab(t)],Vm)}const hS={passive:!1},Gc={capture:!0,passive:!1};function up(t){t.stopImmediatePropagation()}function Bu(t){t.preventDefault(),t.stopImmediatePropagation()}function fS(t){var e=t.document.documentElement,i=Pa(t).on("dragstart.drag",Bu,Gc);"onselectstart"in e?i.on("selectstart.drag",Bu,Gc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function dS(t,e){var i=t.document.documentElement,s=Pa(t).on("dragstart.drag",null);e&&(s.on("click.drag",Bu,Gc),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const Yh=t=>()=>t;function Hp(t,{sourceEvent:e,subject:i,target:s,identifier:u,active:f,x:d,y:o,dx:_,dy:v,dispatch:E}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:E}})}Hp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function pS(t){return!t.ctrlKey&&!t.button}function mS(){return this.parentNode}function gS(t,e){return e??{x:t.x,y:t.y}}function _S(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wp(){var t=pS,e=mS,i=gS,s=_S,u={},f=Bm("start","drag","end"),d=0,o,_,v,E,S=0;function I(Y){Y.on("mousedown.drag",A).filter(s).on("touchstart.drag",j).on("touchmove.drag",W,hS).on("touchend.drag touchcancel.drag",K).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(Y,re){if(!(E||!t.call(this,Y,re))){var Q=ne(this,e.call(this,Y,re),Y,re,"mouse");Q&&(Pa(Y.view).on("mousemove.drag",N,Gc).on("mouseup.drag",V,Gc),fS(Y.view),up(Y),v=!1,o=Y.clientX,_=Y.clientY,Q("start",Y))}}function N(Y){if(Bu(Y),!v){var re=Y.clientX-o,Q=Y.clientY-_;v=re*re+Q*Q>S}u.mouse("drag",Y)}function V(Y){Pa(Y.view).on("mousemove.drag mouseup.drag",null),dS(Y.view,v),Bu(Y),u.mouse("end",Y)}function j(Y,re){if(t.call(this,Y,re)){var Q=Y.changedTouches,se=e.call(this,Y,re),oe=Q.length,Te,fe;for(Te=0;Te<oe;++Te)(fe=ne(this,se,Y,re,Q[Te].identifier,Q[Te]))&&(up(Y),fe("start",Y,Q[Te]))}}function W(Y){var re=Y.changedTouches,Q=re.length,se,oe;for(se=0;se<Q;++se)(oe=u[re[se].identifier])&&(Bu(Y),oe("drag",Y,re[se]))}function K(Y){var re=Y.changedTouches,Q=re.length,se,oe;for(E&&clearTimeout(E),E=setTimeout(function(){E=null},500),se=0;se<Q;++se)(oe=u[re[se].identifier])&&(up(Y),oe("end",Y,re[se]))}function ne(Y,re,Q,se,oe,Te){var fe=f.copy(),ee=l1(Te||Q,re),ge,pe,ye;if((ye=i.call(Y,new Hp("beforestart",{sourceEvent:Q,target:I,identifier:oe,active:d,x:ee[0],y:ee[1],dx:0,dy:0,dispatch:fe}),se))!=null)return ge=ye.x-ee[0]||0,pe=ye.y-ee[1]||0,function de(Ne,Ge,Le){var Me=ee,$e;switch(Ne){case"start":u[oe]=de,$e=d++;break;case"end":delete u[oe],--d;case"drag":ee=l1(Le||Ge,re),$e=d;break}fe.call(Ne,Y,new Hp(Ne,{sourceEvent:Ge,subject:ye,target:I,identifier:oe,active:$e,x:ee[0]+ge,y:ee[1]+pe,dx:ee[0]-Me[0],dy:ee[1]-Me[1],dispatch:fe}),se)}}return I.filter=function(Y){return arguments.length?(t=typeof Y=="function"?Y:Yh(!!Y),I):t},I.container=function(Y){return arguments.length?(e=typeof Y=="function"?Y:Yh(Y),I):e},I.subject=function(Y){return arguments.length?(i=typeof Y=="function"?Y:Yh(Y),I):i},I.touchable=function(Y){return arguments.length?(s=typeof Y=="function"?Y:Yh(!!Y),I):s},I.on=function(){var Y=f.on.apply(f,arguments);return Y===f?I:Y},I.clickDistance=function(Y){return arguments.length?(S=(Y=+Y)*Y,I):Math.sqrt(S)},I}function $m(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function gb(t,e){var i=Object.create(t.prototype);for(var s in e)i[s]=e[s];return i}function nh(){}var Zc=.7,Mf=1/Zc,Ou="\\s*([+-]?\\d+)\\s*",Hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yS=/^#([0-9a-f]{3,8})$/,vS=new RegExp(`^rgb\\(${Ou},${Ou},${Ou}\\)$`),bS=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),xS=new RegExp(`^rgba\\(${Ou},${Ou},${Ou},${Hc}\\)$`),wS=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${Hc}\\)$`),kS=new RegExp(`^hsl\\(${Hc},${Ko},${Ko}\\)$`),ES=new RegExp(`^hsla\\(${Hc},${Ko},${Ko},${Hc}\\)$`),u1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$m(nh,ou,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:c1,formatHex:c1,formatHex8:SS,formatHsl:IS,formatRgb:h1,toString:h1});function c1(){return this.rgb().formatHex()}function SS(){return this.rgb().formatHex8()}function IS(){return _b(this).formatHsl()}function h1(){return this.rgb().formatRgb()}function ou(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=yS.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?f1(e):i===3?new Ms(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Jh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Jh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vS.exec(t))?new Ms(e[1],e[2],e[3],1):(e=bS.exec(t))?new Ms(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xS.exec(t))?Jh(e[1],e[2],e[3],e[4]):(e=wS.exec(t))?Jh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kS.exec(t))?m1(e[1],e[2]/100,e[3]/100,1):(e=ES.exec(t))?m1(e[1],e[2]/100,e[3]/100,e[4]):u1.hasOwnProperty(t)?f1(u1[t]):t==="transparent"?new Ms(NaN,NaN,NaN,0):null}function f1(t){return new Ms(t>>16&255,t>>8&255,t&255,1)}function Jh(t,e,i,s){return s<=0&&(t=e=i=NaN),new Ms(t,e,i,s)}function TS(t){return t instanceof nh||(t=ou(t)),t?(t=t.rgb(),new Ms(t.r,t.g,t.b,t.opacity)):new Ms}function Kp(t,e,i,s){return arguments.length===1?TS(t):new Ms(t,e,i,s??1)}function Ms(t,e,i,s){this.r=+t,this.g=+e,this.b=+i,this.opacity=+s}$m(Ms,Kp,gb(nh,{brighter(t){return t=t==null?Mf:Math.pow(Mf,t),new Ms(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zc:Math.pow(Zc,t),new Ms(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ms(iu(this.r),iu(this.g),iu(this.b),zf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d1,formatHex:d1,formatHex8:AS,formatRgb:p1,toString:p1}));function d1(){return`#${nu(this.r)}${nu(this.g)}${nu(this.b)}`}function AS(){return`#${nu(this.r)}${nu(this.g)}${nu(this.b)}${nu((isNaN(this.opacity)?1:this.opacity)*255)}`}function p1(){const t=zf(this.opacity);return`${t===1?"rgb(":"rgba("}${iu(this.r)}, ${iu(this.g)}, ${iu(this.b)}${t===1?")":`, ${t})`}`}function zf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function iu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nu(t){return t=iu(t),(t<16?"0":"")+t.toString(16)}function m1(t,e,i,s){return s<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Po(t,e,i,s)}function _b(t){if(t instanceof Po)return new Po(t.h,t.s,t.l,t.opacity);if(t instanceof nh||(t=ou(t)),!t)return new Po;if(t instanceof Po)return t;t=t.rgb();var e=t.r/255,i=t.g/255,s=t.b/255,u=Math.min(e,i,s),f=Math.max(e,i,s),d=NaN,o=f-u,_=(f+u)/2;return o?(e===f?d=(i-s)/o+(i<s)*6:i===f?d=(s-e)/o+2:d=(e-i)/o+4,o/=_<.5?f+u:2-f-u,d*=60):o=_>0&&_<1?0:d,new Po(d,o,_,t.opacity)}function CS(t,e,i,s){return arguments.length===1?_b(t):new Po(t,e,i,s??1)}function Po(t,e,i,s){this.h=+t,this.s=+e,this.l=+i,this.opacity=+s}$m(Po,CS,gb(nh,{brighter(t){return t=t==null?Mf:Math.pow(Mf,t),new Po(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zc:Math.pow(Zc,t),new Po(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*e,u=2*i-s;return new Ms(cp(t>=240?t-240:t+120,u,s),cp(t,u,s),cp(t<120?t+240:t-120,u,s),this.opacity)},clamp(){return new Po(g1(this.h),Qh(this.s),Qh(this.l),zf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zf(this.opacity);return`${t===1?"hsl(":"hsla("}${g1(this.h)}, ${Qh(this.s)*100}%, ${Qh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function g1(t){return t=(t||0)%360,t<0?t+360:t}function Qh(t){return Math.max(0,Math.min(1,t||0))}function cp(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const Um=t=>()=>t;function PS(t,e){return function(i){return t+i*e}}function MS(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(s){return Math.pow(t+s*e,i)}}function zS(t){return(t=+t)==1?yb:function(e,i){return i-e?MS(e,i,t):Um(isNaN(e)?i:e)}}function yb(t,e){var i=e-t;return i?PS(t,i):Um(isNaN(t)?e:t)}const Df=function t(e){var i=zS(e);function s(u,f){var d=i((u=Kp(u)).r,(f=Kp(f)).r),o=i(u.g,f.g),_=i(u.b,f.b),v=yb(u.opacity,f.opacity);return function(E){return u.r=d(E),u.g=o(E),u.b=_(E),u.opacity=v(E),u+""}}return s.gamma=t,s}(1);function DS(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,s=e.slice(),u;return function(f){for(u=0;u<i;++u)s[u]=t[u]*(1-f)+e[u]*f;return s}}function LS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function RS(t,e){var i=e?e.length:0,s=t?Math.min(i,t.length):0,u=new Array(s),f=new Array(i),d;for(d=0;d<s;++d)u[d]=jm(t[d],e[d]);for(;d<i;++d)f[d]=e[d];return function(o){for(d=0;d<s;++d)f[d]=u[d](o);return f}}function BS(t,e){var i=new Date;return t=+t,e=+e,function(s){return i.setTime(t*(1-s)+e*s),i}}function Co(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function OS(t,e){var i={},s={},u;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(u in e)u in t?i[u]=jm(t[u],e[u]):s[u]=e[u];return function(f){for(u in i)s[u]=i[u](f);return s}}var Xp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hp=new RegExp(Xp.source,"g");function NS(t){return function(){return t}}function FS(t){return function(e){return t(e)+""}}function vb(t,e){var i=Xp.lastIndex=hp.lastIndex=0,s,u,f,d=-1,o=[],_=[];for(t=t+"",e=e+"";(s=Xp.exec(t))&&(u=hp.exec(e));)(f=u.index)>i&&(f=e.slice(i,f),o[d]?o[d]+=f:o[++d]=f),(s=s[0])===(u=u[0])?o[d]?o[d]+=u:o[++d]=u:(o[++d]=null,_.push({i:d,x:Co(s,u)})),i=hp.lastIndex;return i<e.length&&(f=e.slice(i),o[d]?o[d]+=f:o[++d]=f),o.length<2?_[0]?FS(_[0].x):NS(e):(e=_.length,function(v){for(var E=0,S;E<e;++E)o[(S=_[E]).i]=S.x(v);return o.join("")})}function jm(t,e){var i=typeof e,s;return e==null||i==="boolean"?Um(e):(i==="number"?Co:i==="string"?(s=ou(e))?(e=s,Df):vb:e instanceof ou?Df:e instanceof Date?BS:LS(e)?DS:Array.isArray(e)?RS:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?OS:Co)(t,e)}function VS(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var _1=180/Math.PI,Yp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bb(t,e,i,s,u,f){var d,o,_;return(d=Math.sqrt(t*t+e*e))&&(t/=d,e/=d),(_=t*i+e*s)&&(i-=t*_,s-=e*_),(o=Math.sqrt(i*i+s*s))&&(i/=o,s/=o,_/=o),t*s<e*i&&(t=-t,e=-e,_=-_,d=-d),{translateX:u,translateY:f,rotate:Math.atan2(e,t)*_1,skewX:Math.atan(_)*_1,scaleX:d,scaleY:o}}var ef;function $S(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yp:bb(e.a,e.b,e.c,e.d,e.e,e.f)}function US(t){return t==null||(ef||(ef=document.createElementNS("http://www.w3.org/2000/svg","g")),ef.setAttribute("transform",t),!(t=ef.transform.baseVal.consolidate()))?Yp:(t=t.matrix,bb(t.a,t.b,t.c,t.d,t.e,t.f))}function xb(t,e,i,s){function u(v){return v.length?v.pop()+" ":""}function f(v,E,S,I,A,N){if(v!==S||E!==I){var V=A.push("translate(",null,e,null,i);N.push({i:V-4,x:Co(v,S)},{i:V-2,x:Co(E,I)})}else(S||I)&&A.push("translate("+S+e+I+i)}function d(v,E,S,I){v!==E?(v-E>180?E+=360:E-v>180&&(v+=360),I.push({i:S.push(u(S)+"rotate(",null,s)-2,x:Co(v,E)})):E&&S.push(u(S)+"rotate("+E+s)}function o(v,E,S,I){v!==E?I.push({i:S.push(u(S)+"skewX(",null,s)-2,x:Co(v,E)}):E&&S.push(u(S)+"skewX("+E+s)}function _(v,E,S,I,A,N){if(v!==S||E!==I){var V=A.push(u(A)+"scale(",null,",",null,")");N.push({i:V-4,x:Co(v,S)},{i:V-2,x:Co(E,I)})}else(S!==1||I!==1)&&A.push(u(A)+"scale("+S+","+I+")")}return function(v,E){var S=[],I=[];return v=t(v),E=t(E),f(v.translateX,v.translateY,E.translateX,E.translateY,S,I),d(v.rotate,E.rotate,S,I),o(v.skewX,E.skewX,S,I),_(v.scaleX,v.scaleY,E.scaleX,E.scaleY,S,I),v=E=null,function(A){for(var N=-1,V=I.length,j;++N<V;)S[(j=I[N]).i]=j.x(A);return S.join("")}}}var jS=xb($S,"px, ","px)","deg)"),qS=xb(US,", ",")",")"),Vu=0,Rc=0,Mc=0,wb=1e3,Lf,Bc,Rf=0,lu=0,id=0,Wc=typeof performance=="object"&&performance.now?performance:Date,kb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qm(){return lu||(kb(GS),lu=Wc.now()+id)}function GS(){lu=0}function Bf(){this._call=this._time=this._next=null}Bf.prototype=Eb.prototype={constructor:Bf,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?qm():+i)+(e==null?0:+e),!this._next&&Bc!==this&&(Bc?Bc._next=this:Lf=this,Bc=this),this._call=t,this._time=i,Jp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jp())}};function Eb(t,e,i){var s=new Bf;return s.restart(t,e,i),s}function ZS(){qm(),++Vu;for(var t=Lf,e;t;)(e=lu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vu}function y1(){lu=(Rf=Wc.now())+id,Vu=Rc=0;try{ZS()}finally{Vu=0,WS(),lu=0}}function HS(){var t=Wc.now(),e=t-Rf;e>wb&&(id-=e,Rf=t)}function WS(){for(var t,e=Lf,i,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:Lf=i);Bc=t,Jp(s)}function Jp(t){if(!Vu){Rc&&(Rc=clearTimeout(Rc));var e=t-lu;e>24?(t<1/0&&(Rc=setTimeout(y1,t-Wc.now()-id)),Mc&&(Mc=clearInterval(Mc))):(Mc||(Rf=Wc.now(),Mc=setInterval(HS,wb)),Vu=1,kb(y1))}}function v1(t,e,i){var s=new Bf;return e=e==null?0:+e,s.restart(u=>{s.stop(),t(u+e)},e,i),s}var KS=Bm("start","end","cancel","interrupt"),XS=[],Sb=0,b1=1,Qp=2,_f=3,x1=4,em=5,yf=6;function ad(t,e,i,s,u,f){var d=t.__transition;if(!d)t.__transition={};else if(i in d)return;YS(t,i,{name:e,index:s,group:u,on:KS,tween:XS,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:Sb})}function Gm(t,e){var i=zo(t,e);if(i.state>Sb)throw new Error("too late; already scheduled");return i}function Yo(t,e){var i=zo(t,e);if(i.state>_f)throw new Error("too late; already running");return i}function zo(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function YS(t,e,i){var s=t.__transition,u;s[e]=i,i.timer=Eb(f,0,i.time);function f(v){i.state=b1,i.timer.restart(d,i.delay,i.time),i.delay<=v&&d(v-i.delay)}function d(v){var E,S,I,A;if(i.state!==b1)return _();for(E in s)if(A=s[E],A.name===i.name){if(A.state===_f)return v1(d);A.state===x1?(A.state=yf,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete s[E]):+E<e&&(A.state=yf,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete s[E])}if(v1(function(){i.state===_f&&(i.state=x1,i.timer.restart(o,i.delay,i.time),o(v))}),i.state=Qp,i.on.call("start",t,t.__data__,i.index,i.group),i.state===Qp){for(i.state=_f,u=new Array(I=i.tween.length),E=0,S=-1;E<I;++E)(A=i.tween[E].value.call(t,t.__data__,i.index,i.group))&&(u[++S]=A);u.length=S+1}}function o(v){for(var E=v<i.duration?i.ease.call(null,v/i.duration):(i.timer.restart(_),i.state=em,1),S=-1,I=u.length;++S<I;)u[S].call(t,E);i.state===em&&(i.on.call("end",t,t.__data__,i.index,i.group),_())}function _(){i.state=yf,i.timer.stop(),delete s[e];for(var v in s)return;delete t.__transition}}function JS(t,e){var i=t.__transition,s,u,f=!0,d;if(i){e=e==null?null:e+"";for(d in i){if((s=i[d]).name!==e){f=!1;continue}u=s.state>Qp&&s.state<em,s.state=yf,s.timer.stop(),s.on.call(u?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete i[d]}f&&delete t.__transition}}function QS(t){return this.each(function(){JS(this,t)})}function eI(t,e){var i,s;return function(){var u=Yo(this,t),f=u.tween;if(f!==i){s=i=f;for(var d=0,o=s.length;d<o;++d)if(s[d].name===e){s=s.slice(),s.splice(d,1);break}}u.tween=s}}function tI(t,e,i){var s,u;if(typeof i!="function")throw new Error;return function(){var f=Yo(this,t),d=f.tween;if(d!==s){u=(s=d).slice();for(var o={name:e,value:i},_=0,v=u.length;_<v;++_)if(u[_].name===e){u[_]=o;break}_===v&&u.push(o)}f.tween=u}}function nI(t,e){var i=this._id;if(t+="",arguments.length<2){for(var s=zo(this.node(),i).tween,u=0,f=s.length,d;u<f;++u)if((d=s[u]).name===t)return d.value;return null}return this.each((e==null?eI:tI)(i,t,e))}function Zm(t,e,i){var s=t._id;return t.each(function(){var u=Yo(this,s);(u.value||(u.value={}))[e]=i.apply(this,arguments)}),function(u){return zo(u,s).value[e]}}function Ib(t,e){var i;return(typeof e=="number"?Co:e instanceof ou?Df:(i=ou(e))?(e=i,Df):vb)(t,e)}function rI(t){return function(){this.removeAttribute(t)}}function iI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function aI(t,e,i){var s,u=i+"",f;return function(){var d=this.getAttribute(t);return d===u?null:d===s?f:f=e(s=d,i)}}function sI(t,e,i){var s,u=i+"",f;return function(){var d=this.getAttributeNS(t.space,t.local);return d===u?null:d===s?f:f=e(s=d,i)}}function oI(t,e,i){var s,u,f;return function(){var d,o=i(this),_;return o==null?void this.removeAttribute(t):(d=this.getAttribute(t),_=o+"",d===_?null:d===s&&_===u?f:(u=_,f=e(s=d,o)))}}function lI(t,e,i){var s,u,f;return function(){var d,o=i(this),_;return o==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),_=o+"",d===_?null:d===s&&_===u?f:(u=_,f=e(s=d,o)))}}function uI(t,e){var i=rd(t),s=i==="transform"?qS:Ib;return this.attrTween(t,typeof e=="function"?(i.local?lI:oI)(i,s,Zm(this,"attr."+t,e)):e==null?(i.local?iI:rI)(i):(i.local?sI:aI)(i,s,e))}function cI(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function hI(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function fI(t,e){var i,s;function u(){var f=e.apply(this,arguments);return f!==s&&(i=(s=f)&&hI(t,f)),i}return u._value=e,u}function dI(t,e){var i,s;function u(){var f=e.apply(this,arguments);return f!==s&&(i=(s=f)&&cI(t,f)),i}return u._value=e,u}function pI(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var s=rd(t);return this.tween(i,(s.local?fI:dI)(s,e))}function mI(t,e){return function(){Gm(this,t).delay=+e.apply(this,arguments)}}function gI(t,e){return e=+e,function(){Gm(this,t).delay=e}}function _I(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mI:gI)(e,t)):zo(this.node(),e).delay}function yI(t,e){return function(){Yo(this,t).duration=+e.apply(this,arguments)}}function vI(t,e){return e=+e,function(){Yo(this,t).duration=e}}function bI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yI:vI)(e,t)):zo(this.node(),e).duration}function xI(t,e){if(typeof e!="function")throw new Error;return function(){Yo(this,t).ease=e}}function wI(t){var e=this._id;return arguments.length?this.each(xI(e,t)):zo(this.node(),e).ease}function kI(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;Yo(this,t).ease=i}}function EI(t){if(typeof t!="function")throw new Error;return this.each(kI(this._id,t))}function SI(t){typeof t!="function"&&(t=ob(t));for(var e=this._groups,i=e.length,s=new Array(i),u=0;u<i;++u)for(var f=e[u],d=f.length,o=s[u]=[],_,v=0;v<d;++v)(_=f[v])&&t.call(_,_.__data__,v,f)&&o.push(_);return new _l(s,this._parents,this._name,this._id)}function II(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,s=e.length,u=i.length,f=Math.min(s,u),d=new Array(s),o=0;o<f;++o)for(var _=e[o],v=i[o],E=_.length,S=d[o]=new Array(E),I,A=0;A<E;++A)(I=_[A]||v[A])&&(S[A]=I);for(;o<s;++o)d[o]=e[o];return new _l(d,this._parents,this._name,this._id)}function TI(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function AI(t,e,i){var s,u,f=TI(e)?Gm:Yo;return function(){var d=f(this,t),o=d.on;o!==s&&(u=(s=o).copy()).on(e,i),d.on=u}}function CI(t,e){var i=this._id;return arguments.length<2?zo(this.node(),i).on.on(t):this.each(AI(i,t,e))}function PI(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function MI(){return this.on("end.remove",PI(this._id))}function zI(t){var e=this._name,i=this._id;typeof t!="function"&&(t=Nm(t));for(var s=this._groups,u=s.length,f=new Array(u),d=0;d<u;++d)for(var o=s[d],_=o.length,v=f[d]=new Array(_),E,S,I=0;I<_;++I)(E=o[I])&&(S=t.call(E,E.__data__,I,o))&&("__data__"in E&&(S.__data__=E.__data__),v[I]=S,ad(v[I],e,i,I,v,zo(E,i)));return new _l(f,this._parents,e,i)}function DI(t){var e=this._name,i=this._id;typeof t!="function"&&(t=sb(t));for(var s=this._groups,u=s.length,f=[],d=[],o=0;o<u;++o)for(var _=s[o],v=_.length,E,S=0;S<v;++S)if(E=_[S]){for(var I=t.call(E,E.__data__,S,_),A,N=zo(E,i),V=0,j=I.length;V<j;++V)(A=I[V])&&ad(A,e,i,V,I,N);f.push(I),d.push(E)}return new _l(f,d,e,i)}var LI=th.prototype.constructor;function RI(){return new LI(this._groups,this._parents)}function BI(t,e){var i,s,u;return function(){var f=Fu(this,t),d=(this.style.removeProperty(t),Fu(this,t));return f===d?null:f===i&&d===s?u:u=e(i=f,s=d)}}function Tb(t){return function(){this.style.removeProperty(t)}}function OI(t,e,i){var s,u=i+"",f;return function(){var d=Fu(this,t);return d===u?null:d===s?f:f=e(s=d,i)}}function NI(t,e,i){var s,u,f;return function(){var d=Fu(this,t),o=i(this),_=o+"";return o==null&&(_=o=(this.style.removeProperty(t),Fu(this,t))),d===_?null:d===s&&_===u?f:(u=_,f=e(s=d,o))}}function FI(t,e){var i,s,u,f="style."+e,d="end."+f,o;return function(){var _=Yo(this,t),v=_.on,E=_.value[f]==null?o||(o=Tb(e)):void 0;(v!==i||u!==E)&&(s=(i=v).copy()).on(d,u=E),_.on=s}}function VI(t,e,i){var s=(t+="")=="transform"?jS:Ib;return e==null?this.styleTween(t,BI(t,s)).on("end.style."+t,Tb(t)):typeof e=="function"?this.styleTween(t,NI(t,s,Zm(this,"style."+t,e))).each(FI(this._id,t)):this.styleTween(t,OI(t,s,e),i).on("end.style."+t,null)}function $I(t,e,i){return function(s){this.style.setProperty(t,e.call(this,s),i)}}function UI(t,e,i){var s,u;function f(){var d=e.apply(this,arguments);return d!==u&&(s=(u=d)&&$I(t,d,i)),s}return f._value=e,f}function jI(t,e,i){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(e==null)return this.tween(s,null);if(typeof e!="function")throw new Error;return this.tween(s,UI(t,e,i??""))}function qI(t){return function(){this.textContent=t}}function GI(t){return function(){var e=t(this);this.textContent=e??""}}function ZI(t){return this.tween("text",typeof t=="function"?GI(Zm(this,"text",t)):qI(t==null?"":t+""))}function HI(t){return function(e){this.textContent=t.call(this,e)}}function WI(t){var e,i;function s(){var u=t.apply(this,arguments);return u!==i&&(e=(i=u)&&HI(u)),e}return s._value=t,s}function KI(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,WI(t))}function XI(){for(var t=this._name,e=this._id,i=Ab(),s=this._groups,u=s.length,f=0;f<u;++f)for(var d=s[f],o=d.length,_,v=0;v<o;++v)if(_=d[v]){var E=zo(_,e);ad(_,t,i,v,d,{time:E.time+E.delay+E.duration,delay:0,duration:E.duration,ease:E.ease})}return new _l(s,this._parents,t,i)}function YI(){var t,e,i=this,s=i._id,u=i.size();return new Promise(function(f,d){var o={value:d},_={value:function(){--u===0&&f()}};i.each(function(){var v=Yo(this,s),E=v.on;E!==t&&(e=(t=E).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(_)),v.on=e}),u===0&&f()})}var JI=0;function _l(t,e,i,s){this._groups=t,this._parents=e,this._name=i,this._id=s}function Ab(){return++JI}var fl=th.prototype;_l.prototype={constructor:_l,select:zI,selectAll:DI,selectChild:fl.selectChild,selectChildren:fl.selectChildren,filter:SI,merge:II,selection:RI,transition:XI,call:fl.call,nodes:fl.nodes,node:fl.node,size:fl.size,empty:fl.empty,each:fl.each,on:CI,attr:uI,attrTween:pI,style:VI,styleTween:jI,text:ZI,textTween:KI,remove:MI,tween:nI,delay:_I,duration:bI,ease:wI,easeVarying:EI,end:YI,[Symbol.iterator]:fl[Symbol.iterator]};function QI(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var eT={time:null,delay:0,duration:250,ease:QI};function tT(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function nT(t){var e,i;t instanceof _l?(e=t._id,t=t._name):(e=Ab(),(i=eT).time=qm(),t=t==null?null:t+"");for(var s=this._groups,u=s.length,f=0;f<u;++f)for(var d=s[f],o=d.length,_,v=0;v<o;++v)(_=d[v])&&ad(_,t,e,v,d,i||tT(_,e));return new _l(s,this._parents,t,e)}th.prototype.interrupt=QS;th.prototype.transition=nT;const tm=Math.PI,nm=2*tm,eu=1e-6,rT=nm-eu;function Cb(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function iT(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Cb;const i=10**e;return function(s){this._+=s[0];for(let u=1,f=s.length;u<f;++u)this._+=Math.round(arguments[u]*i)/i+s[u]}}class aT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Cb:iT(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,s,u){this._append`Q${+e},${+i},${this._x1=+s},${this._y1=+u}`}bezierCurveTo(e,i,s,u,f,d){this._append`C${+e},${+i},${+s},${+u},${this._x1=+f},${this._y1=+d}`}arcTo(e,i,s,u,f){if(e=+e,i=+i,s=+s,u=+u,f=+f,f<0)throw new Error(`negative radius: ${f}`);let d=this._x1,o=this._y1,_=s-e,v=u-i,E=d-e,S=o-i,I=E*E+S*S;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(I>eu)if(!(Math.abs(S*_-v*E)>eu)||!f)this._append`L${this._x1=e},${this._y1=i}`;else{let A=s-d,N=u-o,V=_*_+v*v,j=A*A+N*N,W=Math.sqrt(V),K=Math.sqrt(I),ne=f*Math.tan((tm-Math.acos((V+I-j)/(2*W*K)))/2),Y=ne/K,re=ne/W;Math.abs(Y-1)>eu&&this._append`L${e+Y*E},${i+Y*S}`,this._append`A${f},${f},0,0,${+(S*A>E*N)},${this._x1=e+re*_},${this._y1=i+re*v}`}}arc(e,i,s,u,f,d){if(e=+e,i=+i,s=+s,d=!!d,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(u),_=s*Math.sin(u),v=e+o,E=i+_,S=1^d,I=d?u-f:f-u;this._x1===null?this._append`M${v},${E}`:(Math.abs(this._x1-v)>eu||Math.abs(this._y1-E)>eu)&&this._append`L${v},${E}`,s&&(I<0&&(I=I%nm+nm),I>rT?this._append`A${s},${s},0,1,${S},${e-o},${i-_}A${s},${s},0,1,${S},${this._x1=v},${this._y1=E}`:I>eu&&this._append`A${s},${s},0,${+(I>=tm)},${S},${this._x1=e+s*Math.cos(f)},${this._y1=i+s*Math.sin(f)}`)}rect(e,i,s,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${s=+s}v${+u}h${-s}Z`}toString(){return this._}}function sT(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Of(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,s=t.slice(0,i);return[s.length>1?s[0]+s.slice(2):s,+t.slice(i+1)]}function $u(t){return t=Of(Math.abs(t)),t?t[1]:NaN}function oT(t,e){return function(i,s){for(var u=i.length,f=[],d=0,o=t[0],_=0;u>0&&o>0&&(_+o+1>s&&(o=Math.max(1,s-_)),f.push(i.substring(u-=o,u+o)),!((_+=o+1)>s));)o=t[d=(d+1)%t.length];return f.reverse().join(e)}}function lT(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var uT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nf(t){if(!(e=uT.exec(t)))throw new Error("invalid format: "+t);var e;return new Hm({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nf.prototype=Hm.prototype;function Hm(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Hm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cT(t){e:for(var e=t.length,i=1,s=-1,u;i<e;++i)switch(t[i]){case".":s=u=i;break;case"0":s===0&&(s=i),u=i;break;default:if(!+t[i])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(u+1):t}var Pb;function hT(t,e){var i=Of(t,e);if(!i)return t+"";var s=i[0],u=i[1],f=u-(Pb=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,d=s.length;return f===d?s:f>d?s+new Array(f-d+1).join("0"):f>0?s.slice(0,f)+"."+s.slice(f):"0."+new Array(1-f).join("0")+Of(t,Math.max(0,e+f-1))[0]}function w1(t,e){var i=Of(t,e);if(!i)return t+"";var s=i[0],u=i[1];return u<0?"0."+new Array(-u).join("0")+s:s.length>u+1?s.slice(0,u+1)+"."+s.slice(u+1):s+new Array(u-s.length+2).join("0")}const k1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sT,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>w1(t*100,e),r:w1,s:hT,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function E1(t){return t}var S1=Array.prototype.map,I1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fT(t){var e=t.grouping===void 0||t.thousands===void 0?E1:oT(S1.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",u=t.decimal===void 0?".":t.decimal+"",f=t.numerals===void 0?E1:lT(S1.call(t.numerals,String)),d=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",_=t.nan===void 0?"NaN":t.nan+"";function v(S){S=Nf(S);var I=S.fill,A=S.align,N=S.sign,V=S.symbol,j=S.zero,W=S.width,K=S.comma,ne=S.precision,Y=S.trim,re=S.type;re==="n"?(K=!0,re="g"):k1[re]||(ne===void 0&&(ne=12),Y=!0,re="g"),(j||I==="0"&&A==="=")&&(j=!0,I="0",A="=");var Q=V==="$"?i:V==="#"&&/[boxX]/.test(re)?"0"+re.toLowerCase():"",se=V==="$"?s:/[%p]/.test(re)?d:"",oe=k1[re],Te=/[defgprs%]/.test(re);ne=ne===void 0?6:/[gprs]/.test(re)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function fe(ee){var ge=Q,pe=se,ye,de,Ne;if(re==="c")pe=oe(ee)+pe,ee="";else{ee=+ee;var Ge=ee<0||1/ee<0;if(ee=isNaN(ee)?_:oe(Math.abs(ee),ne),Y&&(ee=cT(ee)),Ge&&+ee==0&&N!=="+"&&(Ge=!1),ge=(Ge?N==="("?N:o:N==="-"||N==="("?"":N)+ge,pe=(re==="s"?I1[8+Pb/3]:"")+pe+(Ge&&N==="("?")":""),Te){for(ye=-1,de=ee.length;++ye<de;)if(Ne=ee.charCodeAt(ye),48>Ne||Ne>57){pe=(Ne===46?u+ee.slice(ye+1):ee.slice(ye))+pe,ee=ee.slice(0,ye);break}}}K&&!j&&(ee=e(ee,1/0));var Le=ge.length+ee.length+pe.length,Me=Le<W?new Array(W-Le+1).join(I):"";switch(K&&j&&(ee=e(Me+ee,Me.length?W-pe.length:1/0),Me=""),A){case"<":ee=ge+ee+pe+Me;break;case"=":ee=ge+Me+ee+pe;break;case"^":ee=Me.slice(0,Le=Me.length>>1)+ge+ee+pe+Me.slice(Le);break;default:ee=Me+ge+ee+pe;break}return f(ee)}return fe.toString=function(){return S+""},fe}function E(S,I){var A=v((S=Nf(S),S.type="f",S)),N=Math.max(-8,Math.min(8,Math.floor($u(I)/3)))*3,V=Math.pow(10,-N),j=I1[8+N/3];return function(W){return A(V*W)+j}}return{format:v,formatPrefix:E}}var tf,Mb,zb;dT({thousands:",",grouping:[3],currency:["$",""]});function dT(t){return tf=fT(t),Mb=tf.format,zb=tf.formatPrefix,tf}function pT(t){return Math.max(0,-$u(Math.abs(t)))}function mT(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($u(e)/3)))*3-$u(Math.abs(t)))}function gT(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$u(e)-$u(t))+1}var ci=1e-6,zr=Math.PI,zs=zr/2,T1=zr/4,Zs=zr*2,Gs=180/zr,Ji=zr/180,Ti=Math.abs,Db=Math.atan,Kc=Math.atan2,Wi=Math.cos,_T=Math.exp,yT=Math.log,Ki=Math.sin,vT=Math.sign||function(t){return t>0?1:t<0?-1:0},cu=Math.sqrt,bT=Math.tan;function xT(t){return t>1?0:t<-1?zr:Math.acos(t)}function Xc(t){return t>1?zs:t<-1?-zs:Math.asin(t)}function ho(){}function Ff(t,e){t&&C1.hasOwnProperty(t.type)&&C1[t.type](t,e)}var A1={Feature:function(t,e){Ff(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,s=-1,u=i.length;++s<u;)Ff(i[s].geometry,e)}},C1={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,s=-1,u=i.length;++s<u;)t=i[s],e.point(t[0],t[1],t[2])},LineString:function(t,e){rm(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,s=-1,u=i.length;++s<u;)rm(i[s],e,0)},Polygon:function(t,e){P1(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,s=-1,u=i.length;++s<u;)P1(i[s],e)},GeometryCollection:function(t,e){for(var i=t.geometries,s=-1,u=i.length;++s<u;)Ff(i[s],e)}};function rm(t,e,i){var s=-1,u=t.length-i,f;for(e.lineStart();++s<u;)f=t[s],e.point(f[0],f[1],f[2]);e.lineEnd()}function P1(t,e){var i=-1,s=t.length;for(e.polygonStart();++i<s;)rm(t[i],e,1);e.polygonEnd()}function Tu(t,e){t&&A1.hasOwnProperty(t.type)?A1[t.type](t,e):Ff(t,e)}function im(t){return[Kc(t[1],t[0]),Xc(t[2])]}function Uu(t){var e=t[0],i=t[1],s=Wi(i);return[s*Wi(e),s*Ki(e),Ki(i)]}function nf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vf(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fp(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function rf(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function am(t){var e=cu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function sm(t,e){function i(s,u){return s=t(s,u),e(s[0],s[1])}return t.invert&&e.invert&&(i.invert=function(s,u){return s=e.invert(s,u),s&&t.invert(s[0],s[1])}),i}function om(t,e){return Ti(t)>zr&&(t-=Math.round(t/Zs)*Zs),[t,e]}om.invert=om;function Lb(t,e,i){return(t%=Zs)?e||i?sm(z1(t),D1(e,i)):z1(t):e||i?D1(e,i):om}function M1(t){return function(e,i){return e+=t,Ti(e)>zr&&(e-=Math.round(e/Zs)*Zs),[e,i]}}function z1(t){var e=M1(t);return e.invert=M1(-t),e}function D1(t,e){var i=Wi(t),s=Ki(t),u=Wi(e),f=Ki(e);function d(o,_){var v=Wi(_),E=Wi(o)*v,S=Ki(o)*v,I=Ki(_),A=I*i+E*s;return[Kc(S*u-A*f,E*i-I*s),Xc(A*u+S*f)]}return d.invert=function(o,_){var v=Wi(_),E=Wi(o)*v,S=Ki(o)*v,I=Ki(_),A=I*u-S*f;return[Kc(S*u+I*f,E*i+A*s),Xc(A*i-E*s)]},d}function wT(t){t=Lb(t[0]*Ji,t[1]*Ji,t.length>2?t[2]*Ji:0);function e(i){return i=t(i[0]*Ji,i[1]*Ji),i[0]*=Gs,i[1]*=Gs,i}return e.invert=function(i){return i=t.invert(i[0]*Ji,i[1]*Ji),i[0]*=Gs,i[1]*=Gs,i},e}function kT(t,e,i,s,u,f){if(i){var d=Wi(e),o=Ki(e),_=s*i;u==null?(u=e+s*Zs,f=e-_/2):(u=L1(d,u),f=L1(d,f),(s>0?u<f:u>f)&&(u+=s*Zs));for(var v,E=u;s>0?E>f:E<f;E-=_)v=im([d,-o*Wi(E),-o*Ki(E)]),t.point(v[0],v[1])}}function L1(t,e){e=Uu(e),e[0]-=t,am(e);var i=xT(-e[1]);return((-e[2]<0?-i:i)+Zs-ci)%Zs}function Rb(){var t=[],e;return{point:function(i,s,u){e.push([i,s,u])},lineStart:function(){t.push(e=[])},lineEnd:ho,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function vf(t,e){return Ti(t[0]-e[0])<ci&&Ti(t[1]-e[1])<ci}function af(t,e,i,s){this.x=t,this.z=e,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function Bb(t,e,i,s,u){var f=[],d=[],o,_;if(t.forEach(function(N){if(!((V=N.length-1)<=0)){var V,j=N[0],W=N[V],K;if(vf(j,W)){if(!j[2]&&!W[2]){for(u.lineStart(),o=0;o<V;++o)u.point((j=N[o])[0],j[1]);u.lineEnd();return}W[0]+=2*ci}f.push(K=new af(j,N,null,!0)),d.push(K.o=new af(j,null,K,!1)),f.push(K=new af(W,N,null,!1)),d.push(K.o=new af(W,null,K,!0))}}),!!f.length){for(d.sort(e),R1(f),R1(d),o=0,_=d.length;o<_;++o)d[o].e=i=!i;for(var v=f[0],E,S;;){for(var I=v,A=!0;I.v;)if((I=I.n)===v)return;E=I.z,u.lineStart();do{if(I.v=I.o.v=!0,I.e){if(A)for(o=0,_=E.length;o<_;++o)u.point((S=E[o])[0],S[1]);else s(I.x,I.n.x,1,u);I=I.n}else{if(A)for(E=I.p.z,o=E.length-1;o>=0;--o)u.point((S=E[o])[0],S[1]);else s(I.x,I.p.x,-1,u);I=I.p}I=I.o,E=I.z,A=!A}while(!I.v);u.lineEnd()}}}function R1(t){if(e=t.length){for(var e,i=0,s=t[0],u;++i<e;)s.n=u=t[i],u.p=s,s=u;s.n=u=t[0],u.p=s}}function dp(t){return Ti(t[0])<=zr?t[0]:vT(t[0])*((Ti(t[0])+zr)%Zs-zr)}function ET(t,e){var i=dp(e),s=e[1],u=Ki(s),f=[Ki(i),-Wi(i),0],d=0,o=0,_=new su;u===1?s=zs+ci:u===-1&&(s=-zs-ci);for(var v=0,E=t.length;v<E;++v)if(I=(S=t[v]).length)for(var S,I,A=S[I-1],N=dp(A),V=A[1]/2+T1,j=Ki(V),W=Wi(V),K=0;K<I;++K,N=Y,j=Q,W=se,A=ne){var ne=S[K],Y=dp(ne),re=ne[1]/2+T1,Q=Ki(re),se=Wi(re),oe=Y-N,Te=oe>=0?1:-1,fe=Te*oe,ee=fe>zr,ge=j*Q;if(_.add(Kc(ge*Te*Ki(fe),W*se+ge*Wi(fe))),d+=ee?oe+Te*Zs:oe,ee^N>=i^Y>=i){var pe=Vf(Uu(A),Uu(ne));am(pe);var ye=Vf(f,pe);am(ye);var de=(ee^oe>=0?-1:1)*Xc(ye[2]);(s>de||s===de&&(pe[0]||pe[1]))&&(o+=ee^oe>=0?1:-1)}}return(d<-1e-6||d<ci&&_<-1e-12)^o&1}function Ob(t,e,i,s){return function(u){var f=e(u),d=Rb(),o=e(d),_=!1,v,E,S,I={point:A,lineStart:V,lineEnd:j,polygonStart:function(){I.point=W,I.lineStart=K,I.lineEnd=ne,E=[],v=[]},polygonEnd:function(){I.point=A,I.lineStart=V,I.lineEnd=j,E=rb(E);var Y=ET(v,s);E.length?(_||(u.polygonStart(),_=!0),Bb(E,IT,Y,i,u)):Y&&(_||(u.polygonStart(),_=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),_&&(u.polygonEnd(),_=!1),E=v=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function A(Y,re){t(Y,re)&&u.point(Y,re)}function N(Y,re){f.point(Y,re)}function V(){I.point=N,f.lineStart()}function j(){I.point=A,f.lineEnd()}function W(Y,re){S.push([Y,re]),o.point(Y,re)}function K(){o.lineStart(),S=[]}function ne(){W(S[0][0],S[0][1]),o.lineEnd();var Y=o.clean(),re=d.result(),Q,se=re.length,oe,Te,fe;if(S.pop(),v.push(S),S=null,!!se){if(Y&1){if(Te=re[0],(oe=Te.length-1)>0){for(_||(u.polygonStart(),_=!0),u.lineStart(),Q=0;Q<oe;++Q)u.point((fe=Te[Q])[0],fe[1]);u.lineEnd()}return}se>1&&Y&2&&re.push(re.pop().concat(re.shift())),E.push(re.filter(ST))}}return I}}function ST(t){return t.length>1}function IT(t,e){return((t=t.x)[0]<0?t[1]-zs-ci:zs-t[1])-((e=e.x)[0]<0?e[1]-zs-ci:zs-e[1])}const B1=Ob(function(){return!0},TT,CT,[-zr,-zs]);function TT(t){var e=NaN,i=NaN,s=NaN,u;return{lineStart:function(){t.lineStart(),u=1},point:function(f,d){var o=f>0?zr:-zr,_=Ti(f-e);Ti(_-zr)<ci?(t.point(e,i=(i+d)/2>0?zs:-zs),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(o,i),t.point(f,i),u=0):s!==o&&_>=zr&&(Ti(e-s)<ci&&(e-=s*ci),Ti(f-o)<ci&&(f-=o*ci),i=AT(e,i,f,d),t.point(s,i),t.lineEnd(),t.lineStart(),t.point(o,i),u=0),t.point(e=f,i=d),s=o},lineEnd:function(){t.lineEnd(),e=i=NaN},clean:function(){return 2-u}}}function AT(t,e,i,s){var u,f,d=Ki(t-i);return Ti(d)>ci?Db((Ki(e)*(f=Wi(s))*Ki(i)-Ki(s)*(u=Wi(e))*Ki(t))/(u*f*d)):(e+s)/2}function CT(t,e,i,s){var u;if(t==null)u=i*zs,s.point(-zr,u),s.point(0,u),s.point(zr,u),s.point(zr,0),s.point(zr,-u),s.point(0,-u),s.point(-zr,-u),s.point(-zr,0),s.point(-zr,u);else if(Ti(t[0]-e[0])>ci){var f=t[0]<e[0]?zr:-zr;u=i*f/2,s.point(-f,u),s.point(0,u),s.point(f,u)}else s.point(e[0],e[1])}function PT(t){var e=Wi(t),i=2*Ji,s=e>0,u=Ti(e)>ci;function f(E,S,I,A){kT(A,t,i,I,E,S)}function d(E,S){return Wi(E)*Wi(S)>e}function o(E){var S,I,A,N,V;return{lineStart:function(){N=A=!1,V=1},point:function(j,W){var K=[j,W],ne,Y=d(j,W),re=s?Y?0:v(j,W):Y?v(j+(j<0?zr:-zr),W):0;if(!S&&(N=A=Y)&&E.lineStart(),Y!==A&&(ne=_(S,K),(!ne||vf(S,ne)||vf(K,ne))&&(K[2]=1)),Y!==A)V=0,Y?(E.lineStart(),ne=_(K,S),E.point(ne[0],ne[1])):(ne=_(S,K),E.point(ne[0],ne[1],2),E.lineEnd()),S=ne;else if(u&&S&&s^Y){var Q;!(re&I)&&(Q=_(K,S,!0))&&(V=0,s?(E.lineStart(),E.point(Q[0][0],Q[0][1]),E.point(Q[1][0],Q[1][1]),E.lineEnd()):(E.point(Q[1][0],Q[1][1]),E.lineEnd(),E.lineStart(),E.point(Q[0][0],Q[0][1],3)))}Y&&(!S||!vf(S,K))&&E.point(K[0],K[1]),S=K,A=Y,I=re},lineEnd:function(){A&&E.lineEnd(),S=null},clean:function(){return V|(N&&A)<<1}}}function _(E,S,I){var A=Uu(E),N=Uu(S),V=[1,0,0],j=Vf(A,N),W=nf(j,j),K=j[0],ne=W-K*K;if(!ne)return!I&&E;var Y=e*W/ne,re=-e*K/ne,Q=Vf(V,j),se=rf(V,Y),oe=rf(j,re);fp(se,oe);var Te=Q,fe=nf(se,Te),ee=nf(Te,Te),ge=fe*fe-ee*(nf(se,se)-1);if(!(ge<0)){var pe=cu(ge),ye=rf(Te,(-fe-pe)/ee);if(fp(ye,se),ye=im(ye),!I)return ye;var de=E[0],Ne=S[0],Ge=E[1],Le=S[1],Me;Ne<de&&(Me=de,de=Ne,Ne=Me);var $e=Ne-de,ht=Ti($e-zr)<ci,ut=ht||$e<ci;if(!ht&&Le<Ge&&(Me=Ge,Ge=Le,Le=Me),ut?ht?Ge+Le>0^ye[1]<(Ti(ye[0]-de)<ci?Ge:Le):Ge<=ye[1]&&ye[1]<=Le:$e>zr^(de<=ye[0]&&ye[0]<=Ne)){var Fe=rf(Te,(-fe+pe)/ee);return fp(Fe,se),[ye,im(Fe)]}}}function v(E,S){var I=s?t:zr-t,A=0;return E<-I?A|=1:E>I&&(A|=2),S<-I?A|=4:S>I&&(A|=8),A}return Ob(d,o,f,s?[0,-t]:[-zr,t-zr])}function MT(t,e,i,s,u,f){var d=t[0],o=t[1],_=e[0],v=e[1],E=0,S=1,I=_-d,A=v-o,N;if(N=i-d,!(!I&&N>0)){if(N/=I,I<0){if(N<E)return;N<S&&(S=N)}else if(I>0){if(N>S)return;N>E&&(E=N)}if(N=u-d,!(!I&&N<0)){if(N/=I,I<0){if(N>S)return;N>E&&(E=N)}else if(I>0){if(N<E)return;N<S&&(S=N)}if(N=s-o,!(!A&&N>0)){if(N/=A,A<0){if(N<E)return;N<S&&(S=N)}else if(A>0){if(N>S)return;N>E&&(E=N)}if(N=f-o,!(!A&&N<0)){if(N/=A,A<0){if(N>S)return;N>E&&(E=N)}else if(A>0){if(N<E)return;N<S&&(S=N)}return E>0&&(t[0]=d+E*I,t[1]=o+E*A),S<1&&(e[0]=d+S*I,e[1]=o+S*A),!0}}}}}var sf=1e9,of=-1e9;function zT(t,e,i,s){function u(v,E){return t<=v&&v<=i&&e<=E&&E<=s}function f(v,E,S,I){var A=0,N=0;if(v==null||(A=d(v,S))!==(N=d(E,S))||_(v,E)<0^S>0)do I.point(A===0||A===3?t:i,A>1?s:e);while((A=(A+S+4)%4)!==N);else I.point(E[0],E[1])}function d(v,E){return Ti(v[0]-t)<ci?E>0?0:3:Ti(v[0]-i)<ci?E>0?2:1:Ti(v[1]-e)<ci?E>0?1:0:E>0?3:2}function o(v,E){return _(v.x,E.x)}function _(v,E){var S=d(v,1),I=d(E,1);return S!==I?S-I:S===0?E[1]-v[1]:S===1?v[0]-E[0]:S===2?v[1]-E[1]:E[0]-v[0]}return function(v){var E=v,S=Rb(),I,A,N,V,j,W,K,ne,Y,re,Q,se={point:oe,lineStart:ge,lineEnd:pe,polygonStart:fe,polygonEnd:ee};function oe(de,Ne){u(de,Ne)&&E.point(de,Ne)}function Te(){for(var de=0,Ne=0,Ge=A.length;Ne<Ge;++Ne)for(var Le=A[Ne],Me=1,$e=Le.length,ht=Le[0],ut,Fe,ze=ht[0],gt=ht[1];Me<$e;++Me)ut=ze,Fe=gt,ht=Le[Me],ze=ht[0],gt=ht[1],Fe<=s?gt>s&&(ze-ut)*(s-Fe)>(gt-Fe)*(t-ut)&&++de:gt<=s&&(ze-ut)*(s-Fe)<(gt-Fe)*(t-ut)&&--de;return de}function fe(){E=S,I=[],A=[],Q=!0}function ee(){var de=Te(),Ne=Q&&de,Ge=(I=rb(I)).length;(Ne||Ge)&&(v.polygonStart(),Ne&&(v.lineStart(),f(null,null,1,v),v.lineEnd()),Ge&&Bb(I,o,de,f,v),v.polygonEnd()),E=v,I=A=N=null}function ge(){se.point=ye,A&&A.push(N=[]),re=!0,Y=!1,K=ne=NaN}function pe(){I&&(ye(V,j),W&&Y&&S.rejoin(),I.push(S.result())),se.point=oe,Y&&E.lineEnd()}function ye(de,Ne){var Ge=u(de,Ne);if(A&&N.push([de,Ne]),re)V=de,j=Ne,W=Ge,re=!1,Ge&&(E.lineStart(),E.point(de,Ne));else if(Ge&&Y)E.point(de,Ne);else{var Le=[K=Math.max(of,Math.min(sf,K)),ne=Math.max(of,Math.min(sf,ne))],Me=[de=Math.max(of,Math.min(sf,de)),Ne=Math.max(of,Math.min(sf,Ne))];MT(Le,Me,t,e,i,s)?(Y||(E.lineStart(),E.point(Le[0],Le[1])),E.point(Me[0],Me[1]),Ge||E.lineEnd(),Q=!1):Ge&&(E.lineStart(),E.point(de,Ne),Q=!1)}K=de,ne=Ne,Y=Ge}return se}}const lm=t=>t;var pp=new su,um=new su,Nb,Fb,cm,hm,dl={point:ho,lineStart:ho,lineEnd:ho,polygonStart:function(){dl.lineStart=DT,dl.lineEnd=RT},polygonEnd:function(){dl.lineStart=dl.lineEnd=dl.point=ho,pp.add(Ti(um)),um=new su},result:function(){var t=pp/2;return pp=new su,t}};function DT(){dl.point=LT}function LT(t,e){dl.point=Vb,Nb=cm=t,Fb=hm=e}function Vb(t,e){um.add(hm*t-cm*e),cm=t,hm=e}function RT(){Vb(Nb,Fb)}var ju=1/0,$f=ju,Yc=-ju,Uf=Yc,jf={point:BT,lineStart:ho,lineEnd:ho,polygonStart:ho,polygonEnd:ho,result:function(){var t=[[ju,$f],[Yc,Uf]];return Yc=Uf=-($f=ju=1/0),t}};function BT(t,e){t<ju&&(ju=t),t>Yc&&(Yc=t),e<$f&&($f=e),e>Uf&&(Uf=e)}var fm=0,dm=0,Oc=0,qf=0,Gf=0,Au=0,pm=0,mm=0,Nc=0,$b,Ub,Go,Zo,co={point:uu,lineStart:O1,lineEnd:N1,polygonStart:function(){co.lineStart=FT,co.lineEnd=VT},polygonEnd:function(){co.point=uu,co.lineStart=O1,co.lineEnd=N1},result:function(){var t=Nc?[pm/Nc,mm/Nc]:Au?[qf/Au,Gf/Au]:Oc?[fm/Oc,dm/Oc]:[NaN,NaN];return fm=dm=Oc=qf=Gf=Au=pm=mm=Nc=0,t}};function uu(t,e){fm+=t,dm+=e,++Oc}function O1(){co.point=OT}function OT(t,e){co.point=NT,uu(Go=t,Zo=e)}function NT(t,e){var i=t-Go,s=e-Zo,u=cu(i*i+s*s);qf+=u*(Go+t)/2,Gf+=u*(Zo+e)/2,Au+=u,uu(Go=t,Zo=e)}function N1(){co.point=uu}function FT(){co.point=$T}function VT(){jb($b,Ub)}function $T(t,e){co.point=jb,uu($b=Go=t,Ub=Zo=e)}function jb(t,e){var i=t-Go,s=e-Zo,u=cu(i*i+s*s);qf+=u*(Go+t)/2,Gf+=u*(Zo+e)/2,Au+=u,u=Zo*t-Go*e,pm+=u*(Go+t),mm+=u*(Zo+e),Nc+=u*3,uu(Go=t,Zo=e)}function qb(t){this._context=t}qb.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Zs);break}}},result:ho};var gm=new su,mp,Gb,Zb,Fc,Vc,Jc={point:ho,lineStart:function(){Jc.point=UT},lineEnd:function(){mp&&Hb(Gb,Zb),Jc.point=ho},polygonStart:function(){mp=!0},polygonEnd:function(){mp=null},result:function(){var t=+gm;return gm=new su,t}};function UT(t,e){Jc.point=Hb,Gb=Fc=t,Zb=Vc=e}function Hb(t,e){Fc-=t,Vc-=e,gm.add(cu(Fc*Fc+Vc*Vc)),Fc=t,Vc=e}let F1,Zf,V1,$1;class U1{constructor(e){this._append=e==null?Wb:jT(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,i){switch(this._point){case 0:{this._append`M${e},${i}`,this._point=1;break}case 1:{this._append`L${e},${i}`;break}default:{if(this._append`M${e},${i}`,this._radius!==V1||this._append!==Zf){const s=this._radius,u=this._;this._="",this._append`m0,${s}a${s},${s} 0 1,1 0,${-2*s}a${s},${s} 0 1,1 0,${2*s}z`,V1=s,Zf=this._append,$1=this._,this._=u}this._+=$1;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Wb(t){let e=1;this._+=t[0];for(const i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function jT(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Wb;if(e!==F1){const i=10**e;F1=e,Zf=function(u){let f=1;this._+=u[0];for(const d=u.length;f<d;++f)this._+=Math.round(arguments[f]*i)/i+u[f]}}return Zf}function qT(t,e){let i=3,s=4.5,u,f;function d(o){return o&&(typeof s=="function"&&f.pointRadius(+s.apply(this,arguments)),Tu(o,u(f))),f.result()}return d.area=function(o){return Tu(o,u(dl)),dl.result()},d.measure=function(o){return Tu(o,u(Jc)),Jc.result()},d.bounds=function(o){return Tu(o,u(jf)),jf.result()},d.centroid=function(o){return Tu(o,u(co)),co.result()},d.projection=function(o){return arguments.length?(u=o==null?(t=null,lm):(t=o).stream,d):t},d.context=function(o){return arguments.length?(f=o==null?(e=null,new U1(i)):new qb(e=o),typeof s!="function"&&f.pointRadius(s),d):e},d.pointRadius=function(o){return arguments.length?(s=typeof o=="function"?o:(f.pointRadius(+o),+o),d):s},d.digits=function(o){if(!arguments.length)return i;if(o==null)i=null;else{const _=Math.floor(o);if(!(_>=0))throw new RangeError(`invalid digits: ${o}`);i=_}return e===null&&(f=new U1(i)),d},d.projection(t).digits(i).context(e)}function Wm(t){return function(e){var i=new _m;for(var s in t)i[s]=t[s];return i.stream=e,i}}function _m(){}_m.prototype={constructor:_m,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Km(t,e,i){var s=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),s!=null&&t.clipExtent(null),Tu(i,t.stream(jf)),e(jf.result()),s!=null&&t.clipExtent(s),t}function Kb(t,e,i){return Km(t,function(s){var u=e[1][0]-e[0][0],f=e[1][1]-e[0][1],d=Math.min(u/(s[1][0]-s[0][0]),f/(s[1][1]-s[0][1])),o=+e[0][0]+(u-d*(s[1][0]+s[0][0]))/2,_=+e[0][1]+(f-d*(s[1][1]+s[0][1]))/2;t.scale(150*d).translate([o,_])},i)}function GT(t,e,i){return Kb(t,[[0,0],e],i)}function ZT(t,e,i){return Km(t,function(s){var u=+e,f=u/(s[1][0]-s[0][0]),d=(u-f*(s[1][0]+s[0][0]))/2,o=-f*s[0][1];t.scale(150*f).translate([d,o])},i)}function HT(t,e,i){return Km(t,function(s){var u=+e,f=u/(s[1][1]-s[0][1]),d=-f*s[0][0],o=(u-f*(s[1][1]+s[0][1]))/2;t.scale(150*f).translate([d,o])},i)}var j1=16,WT=Wi(30*Ji);function q1(t,e){return+e?XT(t,e):KT(t)}function KT(t){return Wm({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function XT(t,e){function i(s,u,f,d,o,_,v,E,S,I,A,N,V,j){var W=v-s,K=E-u,ne=W*W+K*K;if(ne>4*e&&V--){var Y=d+I,re=o+A,Q=_+N,se=cu(Y*Y+re*re+Q*Q),oe=Xc(Q/=se),Te=Ti(Ti(Q)-1)<ci||Ti(f-S)<ci?(f+S)/2:Kc(re,Y),fe=t(Te,oe),ee=fe[0],ge=fe[1],pe=ee-s,ye=ge-u,de=K*pe-W*ye;(de*de/ne>e||Ti((W*pe+K*ye)/ne-.5)>.3||d*I+o*A+_*N<WT)&&(i(s,u,f,d,o,_,ee,ge,Te,Y/=se,re/=se,Q,V,j),j.point(ee,ge),i(ee,ge,Te,Y,re,Q,v,E,S,I,A,N,V,j))}}return function(s){var u,f,d,o,_,v,E,S,I,A,N,V,j={point:W,lineStart:K,lineEnd:Y,polygonStart:function(){s.polygonStart(),j.lineStart=re},polygonEnd:function(){s.polygonEnd(),j.lineStart=K}};function W(oe,Te){oe=t(oe,Te),s.point(oe[0],oe[1])}function K(){S=NaN,j.point=ne,s.lineStart()}function ne(oe,Te){var fe=Uu([oe,Te]),ee=t(oe,Te);i(S,I,E,A,N,V,S=ee[0],I=ee[1],E=oe,A=fe[0],N=fe[1],V=fe[2],j1,s),s.point(S,I)}function Y(){j.point=W,s.lineEnd()}function re(){K(),j.point=Q,j.lineEnd=se}function Q(oe,Te){ne(u=oe,Te),f=S,d=I,o=A,_=N,v=V,j.point=ne}function se(){i(S,I,E,A,N,V,f,d,u,o,_,v,j1,s),j.lineEnd=Y,Y()}return j}}var YT=Wm({point:function(t,e){this.stream.point(t*Ji,e*Ji)}});function JT(t){return Wm({point:function(e,i){var s=t(e,i);return this.stream.point(s[0],s[1])}})}function QT(t,e,i,s,u){function f(d,o){return d*=s,o*=u,[e+t*d,i-t*o]}return f.invert=function(d,o){return[(d-e)/t*s,(i-o)/t*u]},f}function G1(t,e,i,s,u,f){if(!f)return QT(t,e,i,s,u);var d=Wi(f),o=Ki(f),_=d*t,v=o*t,E=d/t,S=o/t,I=(o*i-d*e)/t,A=(o*e+d*i)/t;function N(V,j){return V*=s,j*=u,[_*V-v*j+e,i-v*V-_*j]}return N.invert=function(V,j){return[s*(E*V-S*j+I),u*(A-S*V-E*j)]},N}function eA(t){return tA(function(){return t})()}function tA(t){var e,i=150,s=480,u=250,f=0,d=0,o=0,_=0,v=0,E,S=0,I=1,A=1,N=null,V=B1,j=null,W,K,ne,Y=lm,re=.5,Q,se,oe,Te,fe;function ee(de){return oe(de[0]*Ji,de[1]*Ji)}function ge(de){return de=oe.invert(de[0],de[1]),de&&[de[0]*Gs,de[1]*Gs]}ee.stream=function(de){return Te&&fe===de?Te:Te=YT(JT(E)(V(Q(Y(fe=de)))))},ee.preclip=function(de){return arguments.length?(V=de,N=void 0,ye()):V},ee.postclip=function(de){return arguments.length?(Y=de,j=W=K=ne=null,ye()):Y},ee.clipAngle=function(de){return arguments.length?(V=+de?PT(N=de*Ji):(N=null,B1),ye()):N*Gs},ee.clipExtent=function(de){return arguments.length?(Y=de==null?(j=W=K=ne=null,lm):zT(j=+de[0][0],W=+de[0][1],K=+de[1][0],ne=+de[1][1]),ye()):j==null?null:[[j,W],[K,ne]]},ee.scale=function(de){return arguments.length?(i=+de,pe()):i},ee.translate=function(de){return arguments.length?(s=+de[0],u=+de[1],pe()):[s,u]},ee.center=function(de){return arguments.length?(f=de[0]%360*Ji,d=de[1]%360*Ji,pe()):[f*Gs,d*Gs]},ee.rotate=function(de){return arguments.length?(o=de[0]%360*Ji,_=de[1]%360*Ji,v=de.length>2?de[2]%360*Ji:0,pe()):[o*Gs,_*Gs,v*Gs]},ee.angle=function(de){return arguments.length?(S=de%360*Ji,pe()):S*Gs},ee.reflectX=function(de){return arguments.length?(I=de?-1:1,pe()):I<0},ee.reflectY=function(de){return arguments.length?(A=de?-1:1,pe()):A<0},ee.precision=function(de){return arguments.length?(Q=q1(se,re=de*de),ye()):cu(re)},ee.fitExtent=function(de,Ne){return Kb(ee,de,Ne)},ee.fitSize=function(de,Ne){return GT(ee,de,Ne)},ee.fitWidth=function(de,Ne){return ZT(ee,de,Ne)},ee.fitHeight=function(de,Ne){return HT(ee,de,Ne)};function pe(){var de=G1(i,0,0,I,A,S).apply(null,e(f,d)),Ne=G1(i,s-de[0],u-de[1],I,A,S);return E=Lb(o,_,v),se=sm(e,Ne),oe=sm(E,se),Q=q1(se,re),ye()}function ye(){return Te=fe=null,ee}return function(){return e=t.apply(this,arguments),ee.invert=e.invert&&ge,pe()}}function Xm(t,e){return[t,yT(bT((zs+e)/2))]}Xm.invert=function(t,e){return[t,2*Db(_T(e))-zs]};function nA(){return rA(Xm).scale(961/Zs)}function rA(t){var e=eA(t),i=e.center,s=e.scale,u=e.translate,f=e.clipExtent,d=null,o,_,v;e.scale=function(S){return arguments.length?(s(S),E()):s()},e.translate=function(S){return arguments.length?(u(S),E()):u()},e.center=function(S){return arguments.length?(i(S),E()):i()},e.clipExtent=function(S){return arguments.length?(S==null?d=o=_=v=null:(d=+S[0][0],o=+S[0][1],_=+S[1][0],v=+S[1][1]),E()):d==null?null:[[d,o],[_,v]]};function E(){var S=zr*s(),I=e(wT(e.rotate()).invert([0,0]));return f(d==null?[[I[0]-S,I[1]-S],[I[0]+S,I[1]+S]]:t===Xm?[[Math.max(I[0]-S,d),o],[Math.min(I[0]+S,_),v]]:[[d,Math.max(I[1]-S,o)],[_,Math.min(I[1]+S,v)]])}return E()}function Ym(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Z1=Symbol("implicit");function Jm(){var t=new r1,e=[],i=[],s=Z1;function u(f){let d=t.get(f);if(d===void 0){if(s!==Z1)return s;t.set(f,d=e.push(f)-1)}return i[d%i.length]}return u.domain=function(f){if(!arguments.length)return e.slice();e=[],t=new r1;for(const d of f)t.has(d)||t.set(d,e.push(d)-1);return u},u.range=function(f){return arguments.length?(i=Array.from(f),u):i.slice()},u.unknown=function(f){return arguments.length?(s=f,u):s},u.copy=function(){return Jm(e,i).unknown(s)},Ym.apply(u,arguments),u}function Xb(){var t=Jm().unknown(void 0),e=t.domain,i=t.range,s=0,u=1,f,d,o=!1,_=0,v=0,E=.5;delete t.unknown;function S(){var I=e().length,A=u<s,N=A?u:s,V=A?s:u;f=(V-N)/Math.max(1,I-_+v*2),o&&(f=Math.floor(f)),N+=(V-N-f*(I-_))*E,d=f*(1-_),o&&(N=Math.round(N),d=Math.round(d));var j=jp(I).map(function(W){return N+f*W});return i(A?j.reverse():j)}return t.domain=function(I){return arguments.length?(e(I),S()):e()},t.range=function(I){return arguments.length?([s,u]=I,s=+s,u=+u,S()):[s,u]},t.rangeRound=function(I){return[s,u]=I,s=+s,u=+u,o=!0,S()},t.bandwidth=function(){return d},t.step=function(){return f},t.round=function(I){return arguments.length?(o=!!I,S()):o},t.padding=function(I){return arguments.length?(_=Math.min(1,v=+I),S()):_},t.paddingInner=function(I){return arguments.length?(_=Math.min(1,I),S()):_},t.paddingOuter=function(I){return arguments.length?(v=+I,S()):v},t.align=function(I){return arguments.length?(E=Math.max(0,Math.min(1,I)),S()):E},t.copy=function(){return Xb(e(),[s,u]).round(o).paddingInner(_).paddingOuter(v).align(E)},Ym.apply(S(),arguments)}function iA(t){return function(){return t}}function aA(t){return+t}var H1=[0,1];function Cu(t){return t}function ym(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:iA(isNaN(e)?NaN:.5)}function sA(t,e){var i;return t>e&&(i=t,t=e,e=i),function(s){return Math.max(t,Math.min(e,s))}}function oA(t,e,i){var s=t[0],u=t[1],f=e[0],d=e[1];return u<s?(s=ym(u,s),f=i(d,f)):(s=ym(s,u),f=i(f,d)),function(o){return f(s(o))}}function lA(t,e,i){var s=Math.min(t.length,e.length)-1,u=new Array(s),f=new Array(s),d=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++d<s;)u[d]=ym(t[d],t[d+1]),f[d]=i(e[d],e[d+1]);return function(o){var _=c4(t,o,1,s)-1;return f[_](u[_](o))}}function uA(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cA(){var t=H1,e=H1,i=jm,s,u,f,d=Cu,o,_,v;function E(){var I=Math.min(t.length,e.length);return d!==Cu&&(d=sA(t[0],t[I-1])),o=I>2?lA:oA,_=v=null,S}function S(I){return I==null||isNaN(I=+I)?f:(_||(_=o(t.map(s),e,i)))(s(d(I)))}return S.invert=function(I){return d(u((v||(v=o(e,t.map(s),Co)))(I)))},S.domain=function(I){return arguments.length?(t=Array.from(I,aA),E()):t.slice()},S.range=function(I){return arguments.length?(e=Array.from(I),E()):e.slice()},S.rangeRound=function(I){return e=Array.from(I),i=VS,E()},S.clamp=function(I){return arguments.length?(d=I?!0:Cu,E()):d!==Cu},S.interpolate=function(I){return arguments.length?(i=I,E()):i},S.unknown=function(I){return arguments.length?(f=I,S):f},function(I,A){return s=I,u=A,E()}}function hA(){return cA()(Cu,Cu)}function fA(t,e,i,s){var u=y4(t,e,i),f;switch(s=Nf(s??",f"),s.type){case"s":{var d=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(f=mT(u,d))&&(s.precision=f),zb(s,d)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(f=gT(u,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=f-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(f=pT(u))&&(s.precision=f-(s.type==="%")*2);break}}return Mb(s)}function dA(t){var e=t.domain;return t.ticks=function(i){var s=e();return _4(s[0],s[s.length-1],i??10)},t.tickFormat=function(i,s){var u=e();return fA(u[0],u[u.length-1],i??10,s)},t.nice=function(i){i==null&&(i=10);var s=e(),u=0,f=s.length-1,d=s[u],o=s[f],_,v,E=10;for(o<d&&(v=d,d=o,o=v,v=u,u=f,f=v);E-- >0;){if(v=Up(d,o,i),v===_)return s[u]=d,s[f]=o,e(s);if(v>0)d=Math.floor(d/v)*v,o=Math.ceil(o/v)*v;else if(v<0)d=Math.ceil(d*v)/v,o=Math.floor(o*v)/v;else break;_=v}return t},t}function Yb(){var t=hA();return t.copy=function(){return uA(t,Yb())},Ym.apply(t,arguments),dA(t)}function Zi(t){return function(){return t}}const W1=Math.abs,Ya=Math.atan2,Jl=Math.cos,pA=Math.max,gp=Math.min,qo=Math.sin,Pu=Math.sqrt,Ps=1e-12,Qc=Math.PI,Hf=Qc/2,bf=2*Qc;function mA(t){return t>1?0:t<-1?Qc:Math.acos(t)}function K1(t){return t>=1?Hf:t<=-1?-Hf:Math.asin(t)}function Jb(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const s=Math.floor(i);if(!(s>=0))throw new RangeError(`invalid digits: ${i}`);e=s}return t},()=>new aT(e)}function gA(t){return t.innerRadius}function _A(t){return t.outerRadius}function yA(t){return t.startAngle}function vA(t){return t.endAngle}function bA(t){return t&&t.padAngle}function xA(t,e,i,s,u,f,d,o){var _=i-t,v=s-e,E=d-u,S=o-f,I=S*_-E*v;if(!(I*I<Ps))return I=(E*(e-f)-S*(t-u))/I,[t+I*_,e+I*v]}function lf(t,e,i,s,u,f,d){var o=t-i,_=e-s,v=(d?f:-f)/Pu(o*o+_*_),E=v*_,S=-v*o,I=t+E,A=e+S,N=i+E,V=s+S,j=(I+N)/2,W=(A+V)/2,K=N-I,ne=V-A,Y=K*K+ne*ne,re=u-f,Q=I*V-N*A,se=(ne<0?-1:1)*Pu(pA(0,re*re*Y-Q*Q)),oe=(Q*ne-K*se)/Y,Te=(-Q*K-ne*se)/Y,fe=(Q*ne+K*se)/Y,ee=(-Q*K+ne*se)/Y,ge=oe-j,pe=Te-W,ye=fe-j,de=ee-W;return ge*ge+pe*pe>ye*ye+de*de&&(oe=fe,Te=ee),{cx:oe,cy:Te,x01:-E,y01:-S,x11:oe*(u/re-1),y11:Te*(u/re-1)}}function Wf(){var t=gA,e=_A,i=Zi(0),s=null,u=yA,f=vA,d=bA,o=null,_=Jb(v);function v(){var E,S,I=+t.apply(this,arguments),A=+e.apply(this,arguments),N=u.apply(this,arguments)-Hf,V=f.apply(this,arguments)-Hf,j=W1(V-N),W=V>N;if(o||(o=E=_()),A<I&&(S=A,A=I,I=S),!(A>Ps))o.moveTo(0,0);else if(j>bf-Ps)o.moveTo(A*Jl(N),A*qo(N)),o.arc(0,0,A,N,V,!W),I>Ps&&(o.moveTo(I*Jl(V),I*qo(V)),o.arc(0,0,I,V,N,W));else{var K=N,ne=V,Y=N,re=V,Q=j,se=j,oe=d.apply(this,arguments)/2,Te=oe>Ps&&(s?+s.apply(this,arguments):Pu(I*I+A*A)),fe=gp(W1(A-I)/2,+i.apply(this,arguments)),ee=fe,ge=fe,pe,ye;if(Te>Ps){var de=K1(Te/I*qo(oe)),Ne=K1(Te/A*qo(oe));(Q-=de*2)>Ps?(de*=W?1:-1,Y+=de,re-=de):(Q=0,Y=re=(N+V)/2),(se-=Ne*2)>Ps?(Ne*=W?1:-1,K+=Ne,ne-=Ne):(se=0,K=ne=(N+V)/2)}var Ge=A*Jl(K),Le=A*qo(K),Me=I*Jl(re),$e=I*qo(re);if(fe>Ps){var ht=A*Jl(ne),ut=A*qo(ne),Fe=I*Jl(Y),ze=I*qo(Y),gt;if(j<Qc)if(gt=xA(Ge,Le,Fe,ze,ht,ut,Me,$e)){var Zt=Ge-gt[0],an=Le-gt[1],yn=ht-gt[0],sn=ut-gt[1],Dt=1/qo(mA((Zt*yn+an*sn)/(Pu(Zt*Zt+an*an)*Pu(yn*yn+sn*sn)))/2),$t=Pu(gt[0]*gt[0]+gt[1]*gt[1]);ee=gp(fe,(I-$t)/(Dt-1)),ge=gp(fe,(A-$t)/(Dt+1))}else ee=ge=0}se>Ps?ge>Ps?(pe=lf(Fe,ze,Ge,Le,A,ge,W),ye=lf(ht,ut,Me,$e,A,ge,W),o.moveTo(pe.cx+pe.x01,pe.cy+pe.y01),ge<fe?o.arc(pe.cx,pe.cy,ge,Ya(pe.y01,pe.x01),Ya(ye.y01,ye.x01),!W):(o.arc(pe.cx,pe.cy,ge,Ya(pe.y01,pe.x01),Ya(pe.y11,pe.x11),!W),o.arc(0,0,A,Ya(pe.cy+pe.y11,pe.cx+pe.x11),Ya(ye.cy+ye.y11,ye.cx+ye.x11),!W),o.arc(ye.cx,ye.cy,ge,Ya(ye.y11,ye.x11),Ya(ye.y01,ye.x01),!W))):(o.moveTo(Ge,Le),o.arc(0,0,A,K,ne,!W)):o.moveTo(Ge,Le),!(I>Ps)||!(Q>Ps)?o.lineTo(Me,$e):ee>Ps?(pe=lf(Me,$e,ht,ut,I,-ee,W),ye=lf(Ge,Le,Fe,ze,I,-ee,W),o.lineTo(pe.cx+pe.x01,pe.cy+pe.y01),ee<fe?o.arc(pe.cx,pe.cy,ee,Ya(pe.y01,pe.x01),Ya(ye.y01,ye.x01),!W):(o.arc(pe.cx,pe.cy,ee,Ya(pe.y01,pe.x01),Ya(pe.y11,pe.x11),!W),o.arc(0,0,I,Ya(pe.cy+pe.y11,pe.cx+pe.x11),Ya(ye.cy+ye.y11,ye.cx+ye.x11),W),o.arc(ye.cx,ye.cy,ee,Ya(ye.y11,ye.x11),Ya(ye.y01,ye.x01),!W))):o.arc(0,0,I,re,Y,W)}if(o.closePath(),E)return o=null,E+""||null}return v.centroid=function(){var E=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,S=(+u.apply(this,arguments)+ +f.apply(this,arguments))/2-Qc/2;return[Jl(S)*E,qo(S)*E]},v.innerRadius=function(E){return arguments.length?(t=typeof E=="function"?E:Zi(+E),v):t},v.outerRadius=function(E){return arguments.length?(e=typeof E=="function"?E:Zi(+E),v):e},v.cornerRadius=function(E){return arguments.length?(i=typeof E=="function"?E:Zi(+E),v):i},v.padRadius=function(E){return arguments.length?(s=E==null?null:typeof E=="function"?E:Zi(+E),v):s},v.startAngle=function(E){return arguments.length?(u=typeof E=="function"?E:Zi(+E),v):u},v.endAngle=function(E){return arguments.length?(f=typeof E=="function"?E:Zi(+E),v):f},v.padAngle=function(E){return arguments.length?(d=typeof E=="function"?E:Zi(+E),v):d},v.context=function(E){return arguments.length?(o=E??null,v):o},v}function Qb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function e2(t){this._context=t}e2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function wA(t){return new e2(t)}function kA(t){return t[0]}function EA(t){return t[1]}function SA(t,e){var i=Zi(!0),s=null,u=wA,f=null,d=Jb(o);t=typeof t=="function"?t:t===void 0?kA:Zi(t),e=typeof e=="function"?e:e===void 0?EA:Zi(e);function o(_){var v,E=(_=Qb(_)).length,S,I=!1,A;for(s==null&&(f=u(A=d())),v=0;v<=E;++v)!(v<E&&i(S=_[v],v,_))===I&&((I=!I)?f.lineStart():f.lineEnd()),I&&f.point(+t(S,v,_),+e(S,v,_));if(A)return f=null,A+""||null}return o.x=function(_){return arguments.length?(t=typeof _=="function"?_:Zi(+_),o):t},o.y=function(_){return arguments.length?(e=typeof _=="function"?_:Zi(+_),o):e},o.defined=function(_){return arguments.length?(i=typeof _=="function"?_:Zi(!!_),o):i},o.curve=function(_){return arguments.length?(u=_,s!=null&&(f=u(s)),o):u},o.context=function(_){return arguments.length?(_==null?s=f=null:f=u(s=_),o):s},o}function IA(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function TA(t){return t}function t2(){var t=TA,e=IA,i=null,s=Zi(0),u=Zi(bf),f=Zi(0);function d(o){var _,v=(o=Qb(o)).length,E,S,I=0,A=new Array(v),N=new Array(v),V=+s.apply(this,arguments),j=Math.min(bf,Math.max(-bf,u.apply(this,arguments)-V)),W,K=Math.min(Math.abs(j)/v,f.apply(this,arguments)),ne=K*(j<0?-1:1),Y;for(_=0;_<v;++_)(Y=N[A[_]=_]=+t(o[_],_,o))>0&&(I+=Y);for(e!=null?A.sort(function(re,Q){return e(N[re],N[Q])}):i!=null&&A.sort(function(re,Q){return i(o[re],o[Q])}),_=0,S=I?(j-v*ne)/I:0;_<v;++_,V=W)E=A[_],Y=N[E],W=V+(Y>0?Y*S:0)+ne,N[E]={data:o[E],index:_,value:Y,startAngle:V,endAngle:W,padAngle:K};return N}return d.value=function(o){return arguments.length?(t=typeof o=="function"?o:Zi(+o),d):t},d.sortValues=function(o){return arguments.length?(e=o,i=null,d):e},d.sort=function(o){return arguments.length?(i=o,e=null,d):i},d.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:Zi(+o),d):s},d.endAngle=function(o){return arguments.length?(u=typeof o=="function"?o:Zi(+o),d):u},d.padAngle=function(o){return arguments.length?(f=typeof o=="function"?o:Zi(+o),d):f},d}function $c(t,e,i){this.k=t,this.x=e,this.y=i}$c.prototype={constructor:$c,scale:function(t){return t===1?this:new $c(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new $c(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$c.prototype;var _p={dragStart:!0},yp={delay:0,distance:3},X1=(t,e,i)=>Math.min(Math.max(t,e),i),vp=t=>typeof t=="string",AA=([t,e],i,s)=>{const u=(f,d)=>d===0?0:Math.ceil(f/d)*d;return[u(i,t),u(s,e)]},Y1=(t,e)=>t.some(i=>e.some(s=>i.contains(s)));function bp(t,e){if(t===void 0)return;if(vm(t))return t.getBoundingClientRect();if(typeof t=="object"){const{top:s=0,left:u=0,right:f=0,bottom:d=0}=t;return{top:s,right:window.innerWidth-f,bottom:window.innerHeight-d,left:u}}if(t==="parent")return e.parentNode.getBoundingClientRect();const i=document.querySelector(t);if(i===null)throw new Error("The selector provided for bound doesn't exists in the document.");return i.getBoundingClientRect()}var uf=(t,e,i)=>t.style.setProperty(e,i),vm=t=>t instanceof HTMLElement,n2=function(t,e={}){let i,s,{bounds:u,axis:f="both",gpuAcceleration:d=!0,legacyTranslate:o=!1,transform:_,applyUserSelectHack:v=!0,disabled:E=!1,ignoreMultitouch:S=!1,recomputeBounds:I=_p,grid:A,threshold:N=yp,position:V,cancel:j,handle:W,defaultClass:K="neodrag",defaultClassDragging:ne="neodrag-dragging",defaultClassDragged:Y="neodrag-dragged",defaultPosition:re={x:0,y:0},onDragStart:Q,onDrag:se,onDragEnd:oe}=e,Te=!1,fe=!1,ee=0,ge=!1,pe=!1,ye=0,de=0,Ne=0,Ge=0,Le=0,Me=0,{x:$e,y:ht}=V?{x:(V==null?void 0:V.x)??0,y:(V==null?void 0:V.y)??0}:re;xt($e,ht);let ut,Fe,ze,gt,Zt,an="",yn=!!V;I={..._p,...I},N={...yp,...N??{}};let sn=new Set;function Dt(dt){Te&&!fe&&pe&&ge&&Zt&&(fe=!0,function(be){wt("neodrag:start",Q,be)}(dt),ct.add(ne),v&&(an=$t.userSelect,$t.userSelect="none"))}const $t=document.body.style,ct=t.classList;function xt(dt=ye,be=de){if(!_){if(o){let Ut=`${+dt}px, ${+be}px`;return uf(t,"transform",d?`translate3d(${Ut}, 0)`:`translate(${Ut})`)}return uf(t,"translate",`${+dt}px ${+be}px`)}const Et=_({offsetX:dt,offsetY:be,rootNode:t});vp(Et)&&uf(t,"transform",Et)}function wt(dt,be,Et){const Ut=function(_t){return{offsetX:ye,offsetY:de,rootNode:t,currentNode:Zt,event:_t}}(Et);t.dispatchEvent(new CustomEvent(dt,{detail:Ut})),be==null||be(Ut)}const Wt=addEventListener,Qt=new AbortController,Ht={signal:Qt.signal,capture:!1};function kt(){let dt=t.offsetWidth/Fe.width;return isNaN(dt)&&(dt=1),dt}return uf(t,"touch-action","none"),Wt("pointerdown",dt=>{if(E||dt.button===2)return;if(sn.add(dt.pointerId),S&&sn.size>1)return dt.preventDefault();if(I.dragStart&&(ut=bp(u,t)),vp(W)&&vp(j)&&W===j)throw new Error("`handle` selector can't be same as `cancel` selector");if(ct.add(K),ze=function(zt,gn){if(!zt)return[gn];if(vm(zt))return[zt];if(Array.isArray(zt))return zt;const Mn=gn.querySelectorAll(zt);if(Mn===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(Mn.values())}(W,t),gt=function(zt,gn){if(!zt)return[];if(vm(zt))return[zt];if(Array.isArray(zt))return zt;const Mn=gn.querySelectorAll(zt);if(Mn===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(Mn.values())}(j,t),i=/(both|x)/.test(f),s=/(both|y)/.test(f),Y1(gt,ze))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const be=dt.composedPath()[0];if(!ze.some(zt=>{var gn;return zt.contains(be)||((gn=zt.shadowRoot)==null?void 0:gn.contains(be))})||Y1(gt,[be]))return;Zt=ze.length===1?t:ze.find(zt=>zt.contains(be)),Te=!0,ee=Date.now(),N.delay||(ge=!0),Fe=t.getBoundingClientRect();const{clientX:Et,clientY:Ut}=dt,_t=kt();i&&(Ne=Et-$e/_t),s&&(Ge=Ut-ht/_t),ut&&(Le=Et-Fe.left,Me=Ut-Fe.top)},Ht),Wt("pointermove",dt=>{if(!Te||S&&sn.size>1)return;if(!fe){if(ge||Date.now()-ee>=N.delay&&(ge=!0,Dt(dt)),!pe){const _t=dt.clientX-Ne,zt=dt.clientY-Ge;Math.sqrt(_t**2+zt**2)>=N.distance&&(pe=!0,Dt(dt))}if(!fe)return}I.drag&&(ut=bp(u,t)),dt.preventDefault(),Fe=t.getBoundingClientRect();let be=dt.clientX,Et=dt.clientY;const Ut=kt();if(ut){const _t={left:ut.left+Le,top:ut.top+Me,right:ut.right+Le-Fe.width,bottom:ut.bottom+Me-Fe.height};be=X1(be,_t.left,_t.right),Et=X1(Et,_t.top,_t.bottom)}if(Array.isArray(A)){let[_t,zt]=A;if(isNaN(+_t)||_t<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+zt)||zt<0)throw new Error("2nd argument of `grid` must be a valid positive number");let gn=be-Ne,Mn=Et-Ge;[gn,Mn]=AA([_t/Ut,zt/Ut],gn,Mn),be=Ne+gn,Et=Ge+Mn}i&&(ye=Math.round((be-Ne)*Ut)),s&&(de=Math.round((Et-Ge)*Ut)),$e=ye,ht=de,wt("neodrag",se,dt),xt()},Ht),Wt("pointerup",dt=>{sn.delete(dt.pointerId),Te&&(fe&&(Wt("click",be=>be.stopPropagation(),{once:!0,signal:Qt.signal,capture:!0}),I.dragEnd&&(ut=bp(u,t)),ct.remove(ne),ct.add(Y),v&&($t.userSelect=an),wt("neodrag:end",oe,dt),i&&(Ne=ye),s&&(Ge=de)),Te=!1,fe=!1,ge=!1,pe=!1)},Ht),{destroy:()=>Qt.abort(),update:dt=>{var Et,Ut;f=dt.axis||"both",E=dt.disabled??!1,S=dt.ignoreMultitouch??!1,W=dt.handle,u=dt.bounds,I=dt.recomputeBounds??_p,j=dt.cancel,v=dt.applyUserSelectHack??!0,A=dt.grid,d=dt.gpuAcceleration??!0,o=dt.legacyTranslate??!0,_=dt.transform,N={...yp,...dt.threshold??{}};const be=ct.contains(Y);ct.remove(K,Y),K=dt.defaultClass??"neodrag",ne=dt.defaultClassDragging??"neodrag-dragging",Y=dt.defaultClassDragged??"neodrag-dragged",ct.add(K),be&&ct.add(Y),yn&&($e=ye=((Et=dt.position)==null?void 0:Et.x)??ye,ht=de=((Ut=dt.position)==null?void 0:Ut.y)??de,xt())}}};function J1(t,e,i){const s=t.slice();return s[18]=e[i].name,s[19]=e[i].val,s[20]=e,s[21]=i,s}function Q1(t){let e,i,s="x",u,f,d,o,_,v,E,S="+",I,A,N=[],V=new Map,j,W,K,ne,Y=xr(t[0]);const re=Q=>Q[21];for(let Q=0;Q<Y.length;Q+=1){let se=J1(t,Y,Q),oe=re(se);V.set(oe,N[Q]=ey(oe,se))}return{c(){e=Z("div"),i=Z("button"),i.textContent=s,u=we(),f=Z("div"),d=Z("input"),o=we(),_=Z("input"),v=we(),E=Z("button"),E.textContent=S,I=we(),A=Z("ul");for(let Q=0;Q<N.length;Q+=1)N[Q].c();this.h()},l(Q){e=G(Q,"DIV",{class:!0});var se=J(e);i=G(se,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-491tuc"&&(i.textContent=s),u=xe(se),f=G(se,"DIV",{class:!0});var oe=J(f);d=G(oe,"INPUT",{class:!0,contenteditable:!0}),o=xe(oe),_=G(oe,"INPUT",{class:!0,contenteditable:!0}),v=xe(oe),E=G(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(E)!=="svelte-1508l7m"&&(E.textContent=S),oe.forEach(R),I=xe(se),A=G(se,"UL",{class:!0});var Te=J(A);for(let fe=0;fe<N.length;fe+=1)N[fe].l(Te);Te.forEach(R),se.forEach(R),this.h()},h(){z(i,"class","close"),z(d,"class","dataName"),z(d,"contenteditable","true"),z(_,"class","dataValue"),z(_,"contenteditable","true"),z(E,"class","addButton"),z(f,"class","addDataBox"),z(A,"class","donutTarget legend"),z(e,"class","legendWrapper")},m(Q,se){Oe(Q,e,se),P(e,i),P(e,u),P(e,f),P(f,d),Gt(d,t[2].name),P(f,o),P(f,_),Gt(_,t[2].val),P(f,v),P(f,E),P(e,I),P(e,A);for(let oe=0;oe<N.length;oe+=1)N[oe]&&N[oe].m(A,null);W=!0,K||(ne=[bt(i,"click",t[7]),bt(d,"input",t[8]),bt(_,"input",t[9]),bt(E,"click",t[5]),Ho(n2.call(null,e))],K=!0)},p(Q,se){se&4&&d.value!==Q[2].name&&Gt(d,Q[2].name),se&4&&_.value!==Q[2].val&&Gt(_,Q[2].val),se&17&&(Y=xr(Q[0]),N=yw(N,se,re,1,Q,Y,V,A,vw,ey,null,J1))},i(Q){W||(Q&&vi(()=>{W&&(j||(j=Dr(e,jr,{},!0)),j.run(1))}),W=!0)},o(Q){Q&&(j||(j=Dr(e,jr,{},!1)),j.run(0)),W=!1},d(Q){Q&&R(e);for(let se=0;se<N.length;se+=1)N[se].d();Q&&j&&j.end(),K=!1,Or(ne)}}}function ey(t,e){let i,s,u,f,d,o,_="x",v,E,S;function I(){e[10].call(s,e[21])}function A(){e[11].call(f,e[21])}function N(){return e[12](e[21])}return{key:t,first:null,c(){i=Z("li"),s=Z("input"),u=we(),f=Z("input"),d=we(),o=Z("button"),o.textContent=_,v=we(),this.h()},l(V){i=G(V,"LI",{});var j=J(i);s=G(j,"INPUT",{contenteditable:!0}),u=xe(j),f=G(j,"INPUT",{contenteditable:!0}),d=xe(j),o=G(j,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(o)!=="svelte-xy3e7"&&(o.textContent=_),v=xe(j),j.forEach(R),this.h()},h(){z(s,"contenteditable","true"),z(f,"contenteditable","true"),z(o,"class","removeButton"),this.first=i},m(V,j){Oe(V,i,j),P(i,s),Gt(s,e[0][e[21]].name),P(i,u),P(i,f),Gt(f,e[0][e[21]].val),P(i,d),P(i,o),P(i,v),E||(S=[bt(s,"input",I),bt(f,"input",A),bt(o,"click",N)],E=!0)},p(V,j){e=V,j&1&&s.value!==e[0][e[21]].name&&Gt(s,e[0][e[21]].name),j&1&&f.value!==e[0][e[21]].val&&Gt(f,e[0][e[21]].val)},d(V){V&&R(i),E=!1,Or(S)}}}function CA(t){let e,i,s="",u,f,d,o,_,v,E,S,I=t[3]&&Q1(t);return{c(){e=Z("link"),i=Z("script"),i.innerHTML=s,f=we(),d=Z("div"),o=Z("div"),_=Z("div"),v=we(),I&&I.c(),this.h()},l(A){const N=qu("svelte-15xdofe",document.head);e=G(N,"LINK",{rel:!0,href:!0}),i=G(N,"SCRIPT",{src:!0,charset:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-snoie7"&&(i.innerHTML=s),N.forEach(R),f=xe(A),d=G(A,"DIV",{class:!0});var V=J(d);o=G(V,"DIV",{class:!0,"aria-hidden":!0});var j=J(o);_=G(j,"DIV",{class:!0,id:!0}),J(_).forEach(R),j.forEach(R),v=xe(V),I&&I.l(V),V.forEach(R),this.h()},h(){z(e,"rel","stylesheet"),z(e,"href","/css/donutMultiple.scss"),Rl(i.src,u="http://d3js.org/d3.v6.min.js")||z(i,"src",u),z(i,"charset","utf-8"),z(_,"class","donutTarget"),z(_,"id",t[1]),z(o,"class","donutWrapper"),z(o,"aria-hidden",""),z(d,"class","bigWrapper")},m(A,N){P(document.head,e),P(document.head,i),Oe(A,f,N),Oe(A,d,N),P(d,o),P(o,_),P(d,v),I&&I.m(d,null),E||(S=bt(o,"click",t[6]),E=!0)},p(A,[N]){N&2&&z(_,"id",A[1]),A[3]?I?(I.p(A,N),N&8&&Ve(I,1)):(I=Q1(A),I.c(),Ve(I,1),I.m(d,null)):I&&(lr(),Xe(I,1,1,()=>{I=null}),ur())},i(A){Ve(I)},o(A){Xe(I)},d(A){A&&(R(f),R(d)),R(e),R(i),I&&I.d(),E=!1,S()}}}function PA(t,e,i){let{id:s=""}=e,{data:u=[]}=e,f={name:"newData",val:56},d;ys(()=>{d=Pa("#"+s),E()}),Tm(()=>{E()});function o(ne){i(0,u=u.filter((Y,re)=>re!==ne))}function _(){const ne=f.val,Y=f.name;i(0,u=[...u,{name:Y,val:ne}])}let v=0;function E(){d.selectAll("*").remove(),v+=1;let ne=600,Y=230,re=0,Q=0,se="val",oe="name",Te={top:10,right:0,bottom:10,left:0},fe=["rgb(4,76,68)","rgb(4,245,148)","rgb(113,198,191)","rgb(89,144,150)","rgb(44,169,156)","rgb(19,155,148)","rgb(4,103,106)","rgb(6,233,173)","rgb(149,251,15)"];Jm(["rgb(4,76,68)","rgb(4,245,148)","rgb(113,198,191)","rgb(89,144,150)","rgb(44,169,156)","rgb(19,155,148)","rgb(4,103,106)","rgb(6,233,173)","rgb(149,251,15)"]);var ee=Math.min(ne,Y)/2,ge=t2().value(function($e){return $e[se]}).sort(null),pe=Wf().outerRadius(ee*.65).innerRadius(ee*.4).cornerRadius(re).padAngle(Q),ye=Wf().outerRadius(ee*.9).innerRadius(ee*.9),de=d.append("svg").attr("width",ne+Te.left+Te.right).attr("height",Y+Te.top+Te.bottom).append("g").attr("transform","translate("+ne/2+","+Y/2+")");de.append("g").attr("class","slices"),de.append("g").attr("class","labelName"),de.append("g").attr("class","lines"),de.select(".slices").selectAll("path").data(ge(u)).enter().append("path").attr("d",pe).each(function($e,ht){Pa(this).attr("fill",fe[ht%fe.length])}),de.select(".labelName").selectAll("text").data(ge(u)).enter().append("text").attr("dy",".35em").html(Me).attr("transform",Le).style("text-anchor",function($e){return Ne($e)<Math.PI?"start":"end"}),de.select(".lines").selectAll("polyline").data(ge(u)).enter().append("polyline").attr("stroke-width",2).attr("fill","none").attr("stroke",fe[v]).attr("points",Ge).each(function($e,ht){Pa(this).attr("stroke",fe[ht%fe.length])}),Zp(".labelName text, .slices path");function Ne($e){return $e.startAngle+($e.endAngle-$e.startAngle)/2}function Ge($e){var ht=ye.centroid($e);return ht[0]=ee*.95*(Ne($e)<Math.PI?1:-1),[pe.centroid($e),ye.centroid($e),ht]}function Le($e){var ht=ye.centroid($e);return ht[0]=ee*.95*(Ne($e)<Math.PI?1:-1),"translate("+ht+")"}function Me($e){return $e.data[oe]+": <tspan>"+$e.data[se]+"%</tspan>"}}let S=!1;const I=()=>{i(3,S=!S)},A=()=>{i(3,S=!S)};function N(){f.name=this.value,i(2,f)}function V(){f.val=this.value,i(2,f)}function j(ne){u[ne].name=this.value,i(0,u)}function W(ne){u[ne].val=this.value,i(0,u)}const K=ne=>o(ne);return t.$$set=ne=>{"id"in ne&&i(1,s=ne.id),"data"in ne&&i(0,u=ne.data)},[u,s,f,S,o,_,I,A,N,V,j,W,K]}class ty extends Pr{constructor(e){super(),Mr(this,e,PA,CA,Cr,{id:1,data:0})}}function MA(t){let e,i,s,u,f,d;return{c(){e=ot("svg"),i=we(),s=Z("div"),u=Z("input"),this.h()},l(o){e=st(o,"svg",{id:!0,width:!0,height:!0,class:!0}),J(e).forEach(R),i=xe(o),s=G(o,"DIV",{class:!0});var _=J(s);u=G(_,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),_.forEach(R),this.h()},h(){z(e,"id","uniqueSvgId"),z(e,"width","700"),z(e,"height","340"),z(e,"class","svelte-2dfg74"),z(u,"id","num"),z(u,"type","number"),z(u,"min","1"),z(u,"max","20"),z(u,"step","1"),z(u,"class","svelte-2dfg74"),z(s,"class","options svelte-2dfg74")},m(o,_){Oe(o,e,_),Oe(o,i,_),Oe(o,s,_),P(s,u),Gt(u,t[1].params.page03.numOfQ),f||(d=[bt(u,"input",t[3]),bt(u,"change",t[4])],f=!0)},p(o,_){_&2&&Ii(u.value)!==o[1].params.page03.numOfQ&&Gt(u,o[1].params.page03.numOfQ)},i:nr,o:nr,d(o){o&&(R(e),R(i),R(s)),f=!1,Or(d)}}}function zA(t){let e,i;return e=new fo({}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p:nr,i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function DA(t){let e,i,s,u;const f=[zA,MA],d=[];function o(_,v){return _[0]==!1?0:_[0]==!0?1:-1}return~(e=o(t))&&(i=d[e]=f[e](t)),{c(){i&&i.c(),s=vn()},l(_){i&&i.l(_),s=vn()},m(_,v){~e&&d[e].m(_,v),Oe(_,s,v),u=!0},p(_,[v]){let E=e;e=o(_),e===E?~e&&d[e].p(_,v):(i&&(lr(),Xe(d[E],1,1,()=>{d[E]=null}),ur()),~e?(i=d[e],i?i.p(_,v):(i=d[e]=f[e](_),i.c()),Ve(i,1),i.m(s.parentNode,s)):i=null)},i(_){u||(Ve(i),u=!0)},o(_){Xe(i),u=!1},d(_){_&&R(s),~e&&d[e].d(_)}}}function LA(t,e,i){let s;Ur(t,Xt,W=>i(1,s=W));let u={top:10,right:0,bottom:50,left:60},f=800-u.left-u.right,d=510-u.top-u.bottom,o=!1,_=[],v,E=[],S=W=>{let K=s.params.M2_PRICE;function ne(Me,$e){return Math.floor(Math.round(Me/$e)*$e)}var Y=Pa("#uniqueSvgId");if(Y.empty())return!1;u={top:20,right:20,bottom:30,left:50},f=+Y.attr("width")-u.left-u.right,d=+Y.attr("height")-u.top-u.bottom;var re=Xb().range([0,f]).padding(.1),Q=Yb().rangeRound([d,0]).nice();Q(K);var se=A4(Q).tickFormat(Me=>`${Me} zł.`).ticks(10),oe=T4(re),Te=SA().x(function(Me){return re(Me.timeLabel)+re.bandwidth()/2}).y(function(Me){return Q(Me.value)}),fe=W.map(function(Me){return Me.timeLabel});Y.selectAll("*").remove();var ee=Y.append("g").attr("transform","translate("+u.left+","+u.top+")");re.domain(fe);let ge=s.params.M2_PRICE,pe=W.slice();if(!pe.some(function(Me){return Me.timeLabel==="actual"})){let Me={timeLabel:"actual",value:ge};pe.push(Me)}let de=v4(pe,function(Me){return Me.timeLabel!=="actual"?Me.value:null});ge>de&&(de=ge),Q.domain([0,de]),ee.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+d+")").call(oe),ee.append("g").attr("class","axis axis--y").call(se),ee.append("path").datum(W).attr("class","line").attr("fill","none").attr("stroke","var(--brand-green)").attr("stroke-width",3).attr("d",Te),ee.selectAll(".dot").data(W).enter().append("circle").attr("class",["dot_wk"]).attr("id",(Me,$e)=>"dot_wk_"+$e).attr("r",5).attr("cx",function(Me){return re(Me.timeLabel)+re.bandwidth()/2}).attr("cy",function(Me){return Q(Me.value)}).style("fill","white").style("stroke-width",2).style("stroke","var(--brand-green)").style("cursor","pointer").call(Wp().on("drag",Ge)),ee.selectAll(".dot").data(W).enter().append("text").attr("class","dot-label").attr("id",(Me,$e)=>"dot-label_"+$e).attr("x",function(Me){return re(Me.timeLabel)+re.bandwidth()/2}).attr("y",function(Me,$e){Pa("#dot_wk_"+$e);const ht=Q(Me.value)<60;return ht?(console.log(ht),Q(Me.value)+45):Q(Me.value)-30}).text(function(Me){const $e=parseFloat(Me.value);return isNaN($e)?Me.value:$e.toFixed(2)}).style("text-anchor","middle").style("font-size","12px").classed("opisText",!0);let Ne=parseFloat(Pa(".dot_wk:last-of-type").attr("cx"))+19.5;Y.append("line").classed("dashed-line",!0).attr("x1",70).attr("y1",Q(K)+20).attr("y2",Q(K)+20).attr("x2",f-14).style("stroke","#0399a6").style("stroke-dasharray","8,5"),ee.append("circle").attr("class","dot_wk_current").attr("cx",Ne-20).attr("cy",Q(K)).attr("r",5).style("fill","#0399a6").style("stroke-width",2).style("stroke","#0399a6").raise(),ee.append("text").attr("x",Ne-10).attr("y",Q(K)).text("TO MIESZKANIE").style("fill","#0399a6").style("font-size","9px"),ee.append("text").attr("x",Ne-10).attr("y",Q(K)+20).text(K).style("fill","#0399a6").style("font-size","10px");function Ge(Me){if(Me.dy){let $e=document.getElementById("uniqueSvgId"),ht=$e.createSVGPoint();ht.x=Me.x,ht.y=Me.y;let ut=$e.getScreenCTM(),Fe=ht.matrixTransform(ut.inverse()),ze=Q.invert(Fe.y);ze>=0&&(Me.subject.value=ne(ze,50),Le(Me.subject),S(W))}}function Le(Me){var $e=W.findIndex(function(ht){return ht===Me});$e!==-1&&(W[$e].value=Me.value,Ar(Xt,s.params.page03.wykresData=W,s))}return!0};const I=W=>["I","II","III","IV"][W-1]||W.toString();async function A(){s.params&&s.params.M2_PRICE>0&&s.params.page03.numOfQ&&(s.params.page03.wykresData[1]?(_=s.params.page03.wykresData,i(0,o=!0)):(i(0,o=!0),N(s.params.page03.numOfQ)))}function N(W){E=[];for(let K=0;K<W;K++){let ne=Pp().subtract(K*3,"month"),Y=Math.floor(ne.month()/3)+1,re=ne.year();v=I(Y);let Q=`${v} kw. ${re}`;E.push({timeLabel:Q,value:5500})}E=E.reverse(),_&&_.forEach(K=>{const ne=E.findIndex(Y=>Y.timeLabel===K.timeLabel);ne!==-1&&(E[ne].value=parseFloat(K.value).toFixed(2))}),_=E,S(_)}ys(async()=>{A()});function V(){s.params.page03.numOfQ=Ii(this.value),Xt.set(s)}const j=()=>N(s.params.page03.numOfQ);return t.$$.update=()=>{t.$$.dirty&3&&s&&s.params&&o==!1&&A()},[o,s,N,V,j]}class RA extends Pr{constructor(e){super(),Mr(this,e,LA,DA,Cr,{})}}function ny(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function ry(t){let e,i,s,u,f="8",d,o,_=t[0].adres+"",v,E,S=t[0].params.price+"",I,A,N,V,j,W,K,ne,Y,re,Q,se,oe,Te="9",fe,ee,ge=t[0].adres+"",pe,ye,de,Ne,Ge,Le,Me,$e="10",ht,ut,Fe=t[0].adres+"",ze,gt,Zt,an,yn,sn,Dt,$t,ct="3",xt;const wt=[OA,BA],Wt=[];function Qt(Ht,kt){return!Ht[0].params.M2_price&&Ht[0].params.M2_PRICE==0?0:1}return N=Qt(t),V=Wt[N]=wt[N](t),Ne=new ty({props:{data:t[0].params.page03.data1,id:"id1"}}),sn=new ty({props:{data:t[0].params.page03.data2,id:"id2"}}),{c(){e=Z("div"),i=Z("div"),s=Z("h2"),u=Z("span"),u.textContent=f,d=Mt(` Wykaz średnich cen sprzedaży nieruchomości w
					odniesieniu do miasta
					`),o=Z("span"),v=Mt(_),E=Mt(" - "),I=Mt(S),A=we(),V.c(),j=we(),W=Z("div"),K=we(),ne=Z("div"),Y=we(),re=Z("br"),Q=we(),se=Z("h2"),oe=Z("span"),oe.textContent=Te,fe=Mt(`
				Prezentacja cen sprzedaży nieruchomości w mieście
				`),ee=Z("span"),pe=Mt(ge),ye=we(),de=Z("div"),Ct(Ne.$$.fragment),Ge=we(),Le=Z("h2"),Me=Z("span"),Me.textContent=$e,ht=Mt(`
				Zestawienie sprzedawanych mieszkań w mieście
				`),ut=Z("span"),ze=Mt(Fe),gt=Z("br"),Zt=Mt(`z podziałem na
				powierzchnie`),an=we(),yn=Z("div"),Ct(sn.$$.fragment),Dt=we(),$t=Z("div"),$t.textContent=ct,this.h()},l(Ht){e=G(Ht,"DIV",{class:!0});var kt=J(e);i=G(kt,"DIV",{class:!0});var dt=J(i);s=G(dt,"H2",{class:!0});var be=J(s);u=G(be,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(u)!=="svelte-1utsf6q"&&(u.textContent=f),d=Pt(be,` Wykaz średnich cen sprzedaży nieruchomości w
					odniesieniu do miasta
					`),o=G(be,"SPAN",{style:!0});var Et=J(o);v=Pt(Et,_),E=Pt(Et," - "),I=Pt(Et,S),Et.forEach(R),be.forEach(R),dt.forEach(R),A=xe(kt),V.l(kt),j=xe(kt),W=G(kt,"DIV",{}),J(W).forEach(R),K=xe(kt),ne=G(kt,"DIV",{class:!0}),J(ne).forEach(R),Y=xe(kt),re=G(kt,"BR",{}),Q=xe(kt),se=G(kt,"H2",{class:!0});var Ut=J(se);oe=G(Ut,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(oe)!=="svelte-yo6vjx"&&(oe.textContent=Te),fe=Pt(Ut,`
				Prezentacja cen sprzedaży nieruchomości w mieście
				`),ee=G(Ut,"SPAN",{style:!0});var _t=J(ee);pe=Pt(_t,ge),_t.forEach(R),Ut.forEach(R),ye=xe(kt),de=G(kt,"DIV",{class:!0});var zt=J(de);At(Ne.$$.fragment,zt),zt.forEach(R),Ge=xe(kt),Le=G(kt,"H2",{class:!0});var gn=J(Le);Me=G(gn,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(Me)!=="svelte-1i149h9"&&(Me.textContent=$e),ht=Pt(gn,`
				Zestawienie sprzedawanych mieszkań w mieście
				`),ut=G(gn,"SPAN",{style:!0});var Mn=J(ut);ze=Pt(Mn,Fe),Mn.forEach(R),gt=G(gn,"BR",{}),Zt=Pt(gn,`z podziałem na
				powierzchnie`),gn.forEach(R),an=xe(kt),yn=G(kt,"DIV",{class:!0});var Hn=J(yn);At(sn.$$.fragment,Hn),Hn.forEach(R),Dt=xe(kt),$t=G(kt,"DIV",{class:!0,"data-svelte-h":!0}),Vt($t)!=="svelte-5zxgt4"&&($t.textContent=ct),kt.forEach(R),this.h()},h(){z(u,"class","number_type noselect"),Hi(o,"color","var(--brand-green)"),Hi(o,"font-size","1.2em"),z(s,"class","title_medium noselect"),z(i,"class","grid_content noselect full"),z(ne,"class","grid_content noselect centered full"),z(oe,"class","number_type noselect"),Hi(ee,"color","var(--brand-green)"),z(se,"class","title_medium noselect"),z(de,"class","grid_content noselect centered full"),z(Me,"class","number_type noselect"),Hi(ut,"color","var(--brand-green)"),z(Le,"class","title_medium noselect"),z(yn,"class","grid_content noselect centered full"),z($t,"class","pageNumber svelte-167dqpw"),z(e,"class","page_content")},m(Ht,kt){Oe(Ht,e,kt),P(e,i),P(i,s),P(s,u),P(s,d),P(s,o),P(o,v),P(o,E),P(o,I),P(e,A),Wt[N].m(e,null),P(e,j),P(e,W),P(e,K),P(e,ne),P(e,Y),P(e,re),P(e,Q),P(e,se),P(se,oe),P(se,fe),P(se,ee),P(ee,pe),P(e,ye),P(e,de),Tt(Ne,de,null),P(e,Ge),P(e,Le),P(Le,Me),P(Le,ht),P(Le,ut),P(ut,ze),P(Le,gt),P(Le,Zt),P(e,an),P(e,yn),Tt(sn,yn,null),P(e,Dt),P(e,$t),xt=!0},p(Ht,kt){(!xt||kt&1)&&_!==(_=Ht[0].adres+"")&&Zn(v,_),(!xt||kt&1)&&S!==(S=Ht[0].params.price+"")&&Zn(I,S);let dt=N;N=Qt(Ht),N!==dt&&(lr(),Xe(Wt[dt],1,1,()=>{Wt[dt]=null}),ur(),V=Wt[N],V||(V=Wt[N]=wt[N](Ht),V.c()),Ve(V,1),V.m(e,j)),(!xt||kt&1)&&ge!==(ge=Ht[0].adres+"")&&Zn(pe,ge);const be={};kt&1&&(be.data=Ht[0].params.page03.data1),Ne.$set(be),(!xt||kt&1)&&Fe!==(Fe=Ht[0].adres+"")&&Zn(ze,Fe);const Et={};kt&1&&(Et.data=Ht[0].params.page03.data2),sn.$set(Et)},i(Ht){xt||(Ve(V),Ve(Ne.$$.fragment,Ht),Ve(sn.$$.fragment,Ht),xt=!0)},o(Ht){Xe(V),Xe(Ne.$$.fragment,Ht),Xe(sn.$$.fragment,Ht),xt=!1},d(Ht){Ht&&R(e),Wt[N].d(),It(Ne),It(sn)}}}function BA(t){let e,i;return e=new RA({}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function OA(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function NA(t){let e,i,s,u,f,d,o;i=new Mo({});let _=!t[0].params&&ny(),v=t[0].adres&&ry(t);return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),_&&_.c(),u=we(),v&&v.c(),f=we(),d=Z("link"),this.h()},l(E){e=G(E,"DIV",{class:!0});var S=J(e);At(i.$$.fragment,S),s=xe(S),_&&_.l(S),u=xe(S),v&&v.l(S),S.forEach(R),f=xe(E);const I=qu("svelte-fhg3d3",document.head);d=G(I,"LINK",{rel:!0,href:!0}),I.forEach(R),this.h()},h(){z(e,"class","content-block section page_03"),z(d,"rel","stylesheet"),z(d,"href","/css/donut.scss")},m(E,S){Oe(E,e,S),Tt(i,e,null),P(e,s),_&&_.m(e,null),P(e,u),v&&v.m(e,null),Oe(E,f,S),P(document.head,d),o=!0},p(E,[S]){E[0].params?_&&(lr(),Xe(_,1,1,()=>{_=null}),ur()):_?S&1&&Ve(_,1):(_=ny(),_.c(),Ve(_,1),_.m(e,u)),E[0].adres?v?(v.p(E,S),S&1&&Ve(v,1)):(v=ry(E),v.c(),Ve(v,1),v.m(e,null)):v&&(lr(),Xe(v,1,1,()=>{v=null}),ur())},i(E){o||(Ve(i.$$.fragment,E),Ve(_),Ve(v),o=!0)},o(E){Xe(i.$$.fragment,E),Xe(_),Xe(v),o=!1},d(E){E&&(R(e),R(f)),It(i),_&&_.d(),v&&v.d(),R(d)}}}function FA(t,e,i){let s;return Ur(t,Xt,u=>i(0,s=u)),[s]}class VA extends Pr{constructor(e){super(),Mr(this,e,FA,NA,Cr,{})}}function iy(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe;return{c(){e=ot("g"),i=ot("g"),s=ot("path"),u=ot("g"),f=ot("path"),d=ot("g"),o=ot("path"),_=ot("g"),v=ot("path"),E=ot("g"),S=ot("path"),I=ot("g"),A=ot("g"),N=ot("path"),V=ot("g"),j=ot("path"),W=ot("g"),K=ot("path"),ne=ot("g"),Y=ot("path"),re=ot("g"),Q=ot("path"),se=ot("text"),oe=Mt(t[3]),this.h()},l(Te){e=st(Te,"g",{class:!0});var fe=J(e);i=st(fe,"g",{});var ee=J(i);s=st(ee,"path",{fill:!0,d:!0}),J(s).forEach(R),ee.forEach(R),u=st(fe,"g",{});var ge=J(u);f=st(ge,"path",{fill:!0,d:!0}),J(f).forEach(R),ge.forEach(R),d=st(fe,"g",{});var pe=J(d);o=st(pe,"path",{fill:!0,d:!0}),J(o).forEach(R),pe.forEach(R),_=st(fe,"g",{});var ye=J(_);v=st(ye,"path",{fill:!0,d:!0}),J(v).forEach(R),ye.forEach(R),E=st(fe,"g",{});var de=J(E);S=st(de,"path",{fill:!0,d:!0}),J(S).forEach(R),de.forEach(R),I=st(fe,"g",{});var Ne=J(I);A=st(Ne,"g",{});var Ge=J(A);N=st(Ge,"path",{fill:!0,d:!0}),J(N).forEach(R),Ge.forEach(R),V=st(Ne,"g",{});var Le=J(V);j=st(Le,"path",{fill:!0,d:!0}),J(j).forEach(R),Le.forEach(R),W=st(Ne,"g",{});var Me=J(W);K=st(Me,"path",{fill:!0,d:!0}),J(K).forEach(R),Me.forEach(R),ne=st(Ne,"g",{});var $e=J(ne);Y=st($e,"path",{fill:!0,d:!0}),J(Y).forEach(R),$e.forEach(R),re=st(Ne,"g",{});var ht=J(re);Q=st(ht,"path",{fill:!0,d:!0}),J(Q).forEach(R),ht.forEach(R),se=st(Ne,"text",{transform:!0,fill:!0,"text-anchor":!0,"font-family":!0,"font-size":!0});var ut=J(se);oe=Pt(ut,t[3]),ut.forEach(R),Ne.forEach(R),fe.forEach(R),this.h()},h(){z(s,"fill","#084A96"),z(s,"d",`M98.7,36.2v-1.7c0-0.6-0.5-1.2-1.2-1.2H86.2c-0.2,0-0.3,0.1-0.3,0.3v2.6c0,0.2,0.1,0.3,0.3,0.3h12.1
				C98.5,36.6,98.7,36.4,98.7,36.2 M88.7,35.9h-2.2V34h2.2V35.9z M92.8,35.9h-3.5V34h3.5V35.9z M98,35.9h-4.5V34h4
				c0.3,0,0.5,0.2,0.5,0.5V35.9z`),z(f,"fill","#084A96"),z(f,"d",`M101.7,35.5l-1.1-0.9c-0.1-1.6-1.4-2.9-3-2.9H84.4c-0.2,0-0.3,0.1-0.3,0.3v8.6c0,0.2,0.1,0.3,0.3,0.3h1.6
				c0.2,0.8,0.9,1.4,1.7,1.4c0.8,0,1.5-0.6,1.7-1.4h3.6c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-3.6c-0.2-0.8-0.9-1.4-1.7-1.4
				c-0.8,0-1.5,0.6-1.7,1.4h-1.2v-2.1h3.8c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-3.8v-5.1h12.8c1.3,0,2.4,1.1,2.4,2.4
				c0,0.1,0,0.2,0.1,0.3l1.1,0.9v1.6h-9.4c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h9.4v2.1h-2.8c-0.2-0.8-0.9-1.4-1.7-1.4
				c-0.8,0-1.5,0.6-1.7,1.4h-0.8c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3H95c0.2,0.8,0.9,1.4,1.7,1.4c0.8,0,1.5-0.6,1.7-1.4
				h3.1c0.2,0,0.3-0.1,0.3-0.3v-4.8C101.8,35.7,101.7,35.6,101.7,35.5 M86.6,40.6c0-0.6,0.5-1.1,1.1-1.1c0.6,0,1.1,0.5,1.1,1.1
				c0,0.6-0.5,1.1-1.1,1.1C87,41.6,86.6,41.2,86.6,40.6C86.6,40.6,86.6,40.6,86.6,40.6z M96.7,41.6c-0.6,0-1.1-0.5-1.1-1.1
				c0-0.6,0.5-1.1,1.1-1.1c0.6,0,1.1,0.5,1.1,1.1C97.7,41.2,97.2,41.6,96.7,41.6z`),z(o,"fill","#084A96"),z(o,"d",`M89.7,37.5c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h0.9c0.2,0,0.3-0.1,0.3-0.3
				c0-0.2-0.1-0.3-0.3-0.3H89.7z`),z(v,"fill","#084A96"),z(v,"d",`M87.6,40.9c0.1,0,0.2,0,0.2-0.1c0.1-0.1,0.1-0.1,0.1-0.2c0-0.1,0-0.2-0.1-0.2c-0.1-0.1-0.1-0.1-0.2-0.1
				c-0.1,0-0.2,0-0.2,0.1c-0.1,0.1-0.1,0.1-0.1,0.2c0,0.1,0,0.2,0.1,0.2C87.5,40.9,87.5,40.9,87.6,40.9`),z(S,"fill","#084A96"),z(S,"d",`M96.7,40.2c-0.1,0-0.2,0-0.2,0.1c-0.1,0.1-0.1,0.1-0.1,0.2c0,0.1,0,0.2,0.1,0.2c0.1,0.1,0.1,0.1,0.2,0.1
				c0.1,0,0.2,0,0.2-0.1c0.1-0.1,0.1-0.1,0.1-0.2c0-0.1,0-0.2-0.1-0.2C96.8,40.3,96.7,40.2,96.7,40.2`),z(N,"fill","#FFFFFF"),z(N,"d",`M95.6,47.6l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.7,1,2.6,2.7,2.6,4.5h0v11.1c0,2.1-1.3,3.9-3.1,4.8
					l-4.4,2.5l0,0l-4.8,2.8c-1.7,1-3.7,0.9-5.3,0L85.5,76c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6c-1.7-1-2.6-2.7-2.6-4.5h0V57.6
					c0-2.1,1.3-3.9,3.1-4.8l4.4-2.5l0,0l4.8-2.8C92,46.5,94,46.6,95.6,47.6z`),z(j,"fill","#00336E"),z(j,"d",`M92.9,79.8c-1,0-1.9-0.3-2.8-0.8l-4.8-2.7c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6c-1.6-0.9-2.6-2.6-2.7-4.5h0
					l0-0.3V57.6c0-2.2,1.3-4.1,3.2-5l9.2-5.3c1.7-1,3.9-1,5.6,0l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.6,0.9,2.6,2.6,2.7,4.5h0
					l0,0.3v11.1c0,2.2-1.3,4.1-3.2,5L95.7,79C94.8,79.5,93.9,79.8,92.9,79.8z M78.3,68.4l0,0.3c0,1.8,0.9,3.4,2.5,4.3l4.5,2.6
					c0.1,0.1,0.2,0.1,0.3,0.2l4.8,2.7c1.5,0.9,3.5,0.9,5,0l9.2-5.3c1.8-0.8,2.9-2.6,2.9-4.5l0-11.1c0-1.8-0.9-3.4-2.5-4.3l-4.5-2.6
					c-0.1-0.1-0.2-0.1-0.3-0.2l-4.8-2.7c-1.5-0.9-3.5-0.9-5,0l-9.2,5.3c-1.8,0.8-2.9,2.6-2.9,4.5V68.4z`),z(K,"fill","#00336E"),z(K,"d",`M90.2,69.5c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8
					c-0.2-0.2-0.4-0.3-0.7-0.3c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.4-0.3,0.7h-0.4c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.5
					c0.2-0.1,0.4-0.2,0.7-0.2c0.3,0,0.5,0.1,0.7,0.2c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2
					C90.3,69.5,90.2,69.5,90.2,69.5 M87.7,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.1,0.1-0.2
					c0-0.1,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1c0,0.1,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C87.9,69.5,87.8,69.5,87.7,69.5z
					 M92.6,69.5c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8c-0.2-0.2-0.4-0.3-0.7-0.3
					c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.5-0.3,0.8h-0.5c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.6c0.2-0.1,0.5-0.2,0.8-0.2
					c0.3,0,0.5,0.1,0.7,0.2c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2C92.7,69.5,92.6,69.5,92.6,69.5z`),z(Y,"fill","#00336E"),z(Y,"d",`M94.4,64.9c-0.1,0-0.2,0-0.3-0.1C94,64.7,94,64.7,94,64.5c0-0.1,0-0.2,0.1-0.3c0.1-0.1,0.2-0.1,0.3-0.1
					c0.1,0,0.2,0,0.3,0.1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1,0,0.2-0.1,0.3C94.6,64.9,94.5,64.9,94.4,64.9 M94.4,69.5
					c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1
					c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.2-0.1,0.2C94.5,69.5,94.4,69.5,94.4,69.5z`),z(Q,"fill","#00336E"),z(Q,"d",`M96.2,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1
					c0.1,0,0.1,0,0.2,0.1c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C96.4,69.5,96.3,69.5,96.2,69.5 M99.2,69.5
					c-0.1,0-0.1,0-0.2-0.1c-0.1-0.1-0.1-0.1-0.1-0.2v-1.8c0-0.3-0.1-0.5-0.2-0.7c-0.1-0.2-0.3-0.3-0.4-0.4c-0.2-0.1-0.4-0.1-0.6-0.1
					c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.3,0.2-0.4,0.4c-0.1,0.2-0.2,0.3-0.2,0.5h-0.4c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.6-0.6
					c0.2-0.1,0.5-0.2,0.8-0.2c0.3,0,0.6,0.1,0.9,0.2c0.3,0.1,0.5,0.3,0.6,0.6s0.2,0.6,0.2,1v1.8c0,0.1,0,0.1-0.1,0.2
					C99.3,69.5,99.3,69.5,99.2,69.5z`),z(se,"transform","matrix(1 0 0 1 92.5 63)"),z(se,"fill","#00336E"),z(se,"text-anchor","middle"),z(se,"font-family","var(--comfortea)"),z(se,"font-size","12px"),z(e,"class","bus")},m(Te,fe){Oe(Te,e,fe),P(e,i),P(i,s),P(e,u),P(u,f),P(e,d),P(d,o),P(e,_),P(_,v),P(e,E),P(E,S),P(e,I),P(I,A),P(A,N),P(I,V),P(V,j),P(I,W),P(W,K),P(I,ne),P(ne,Y),P(I,re),P(re,Q),P(I,se),P(se,oe)},p(Te,fe){fe&8&&Zn(oe,Te[3])},d(Te){Te&&R(e)}}}function ay(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q;return{c(){e=ot("g"),i=ot("g"),s=ot("path"),u=ot("g"),f=ot("path"),d=ot("g"),o=ot("path"),_=ot("g"),v=ot("path"),E=ot("g"),S=ot("g"),I=ot("path"),A=ot("g"),N=ot("path"),V=ot("g"),j=ot("path"),W=ot("g"),K=ot("path"),ne=ot("g"),Y=ot("path"),re=ot("text"),Q=Mt(t[2]),this.h()},l(se){e=st(se,"g",{class:!0});var oe=J(e);i=st(oe,"g",{});var Te=J(i);s=st(Te,"path",{fill:!0,d:!0}),J(s).forEach(R),Te.forEach(R),u=st(oe,"g",{});var fe=J(u);f=st(fe,"path",{fill:!0,d:!0}),J(f).forEach(R),fe.forEach(R),d=st(oe,"g",{});var ee=J(d);o=st(ee,"path",{fill:!0,d:!0}),J(o).forEach(R),ee.forEach(R),_=st(oe,"g",{});var ge=J(_);v=st(ge,"path",{fill:!0,d:!0}),J(v).forEach(R),ge.forEach(R),E=st(oe,"g",{});var pe=J(E);S=st(pe,"g",{});var ye=J(S);I=st(ye,"path",{fill:!0,d:!0}),J(I).forEach(R),ye.forEach(R),A=st(pe,"g",{});var de=J(A);N=st(de,"path",{fill:!0,d:!0}),J(N).forEach(R),de.forEach(R),V=st(pe,"g",{});var Ne=J(V);j=st(Ne,"path",{fill:!0,d:!0}),J(j).forEach(R),Ne.forEach(R),W=st(pe,"g",{});var Ge=J(W);K=st(Ge,"path",{fill:!0,d:!0}),J(K).forEach(R),Ge.forEach(R),ne=st(pe,"g",{});var Le=J(ne);Y=st(Le,"path",{fill:!0,d:!0}),J(Y).forEach(R),Le.forEach(R),pe.forEach(R),re=st(oe,"text",{transform:!0,fill:!0,"text-anchor":!0,"font-family":!0,"font-size":!0});var Me=J(re);Q=Pt(Me,t[2]),Me.forEach(R),oe.forEach(R),this.h()},h(){z(s,"fill","#0399A6"),z(s,"d",`M130.5,41.7c0.6,0,1.1-0.5,1.1-1.1c0-0.6-0.5-1.1-1.1-1.1s-1.1,0.5-1.1,1.1
				C129.4,41.2,129.9,41.7,130.5,41.7 M130.5,40.2c0.2,0,0.4,0.2,0.4,0.4c0,0.2-0.2,0.4-0.4,0.4c-0.2,0-0.4-0.2-0.4-0.4
				C130.1,40.4,130.3,40.2,130.5,40.2z`),z(f,"fill","#0399A6"),z(f,"d",`M139.8,39.6c-0.6,0-1.1,0.5-1.1,1.1c0,0.6,0.5,1.1,1.1,1.1s1.1-0.5,1.1-1.1
				C140.9,40,140.4,39.6,139.8,39.6 M139.8,41.1c-0.2,0-0.4-0.2-0.4-0.4c0-0.2,0.2-0.4,0.4-0.4c0.2,0,0.4,0.2,0.4,0.4
				C140.2,40.9,140.1,41.1,139.8,41.1z`),z(o,"fill","#0399A6"),z(o,"d",`M143.8,36.2c-0.4-0.7-1.1-1-2-1h-2.5c-0.4-0.9-2.3-4.6-4.8-4.6h-7.7c-0.2,0-0.3,0.1-0.3,0.3v7.3
				c0,1.9,0,2.6,1.2,2.7c0.1,1.4,1.3,2.5,2.8,2.5c1.4,0,2.6-1.1,2.8-2.5h1.3c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-1.3
				c-0.2-1.4-1.4-2.5-2.8-2.5c-1.4,0-2.6,1.1-2.8,2.4c-0.5-0.1-0.5-0.3-0.5-2.1v-1.1h4.5c0.2,0,0.3-0.1,0.3-0.3
				c0-0.2-0.1-0.3-0.3-0.3h-4.5v-0.7h14.6c0.7,0,1.1,0.2,1.4,0.7h-8.8c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h9
				c0.1,0.3,0.1,0.6,0.1,1.1c0,1.3,0,1.9-1,2c-0.2-1.4-1.4-2.4-2.8-2.4c-1.4,0-2.6,1.1-2.8,2.5h-1.4c-0.2,0-0.3,0.1-0.3,0.3
				c0,0.2,0.1,0.3,0.3,0.3h1.4c0.2,1.4,1.4,2.5,2.8,2.5c1.5,0,2.7-1.1,2.8-2.6c1.6-0.2,1.6-1.5,1.6-2.7
				C144.2,37.3,144.1,36.7,143.8,36.2 M130.5,38.5c1.2,0,2.1,1,2.1,2.1c0,1.2-1,2.1-2.1,2.1c-1.2,0-2.1-1-2.1-2.1
				C128.3,39.5,129.3,38.5,130.5,38.5z M132.1,35.1h-4.9v-3.9h4.9V35.1z M132.7,35.1v-3.9h1.8c1.8,0,3.5,2.8,4,3.9H132.7z
				 M139.8,42.8c-1.2,0-2.1-1-2.1-2.1c0-1.2,1-2.1,2.1-2.1c1.2,0,2.1,1,2.1,2.1C142,41.8,141,42.8,139.8,42.8z`),z(v,"fill","#0399A6"),z(v,"d",`M132.8,36.5c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h0.6c0.2,0,0.3-0.1,0.3-0.3
				c0-0.2-0.1-0.3-0.3-0.3H132.8z`),z(I,"fill","#FFFFFF"),z(I,"d",`M138,47.6l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.7,1,2.6,2.7,2.6,4.5h0v11.1c0,2.1-1.3,3.9-3.1,4.8
					l-4.4,2.5l0,0l-4.8,2.8c-1.7,1-3.7,0.9-5.3,0l-4.8-2.7c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6c-1.7-1-2.6-2.7-2.6-4.5h0V57.6
					c0-2.1,1.3-3.9,3.1-4.8l4.4-2.5l0,0l4.8-2.8C134.4,46.5,136.5,46.6,138,47.6z`),z(N,"fill","#0399A6"),z(N,"d",`M135.4,79.8c-1,0-1.9-0.3-2.8-0.8l-4.8-2.7c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6c-1.6-0.9-2.6-2.6-2.7-4.5
					h0l0-0.3V57.6c0-2.2,1.3-4.1,3.2-5l9.2-5.3c1.7-1,3.9-1,5.6,0l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.6,0.9,2.6,2.6,2.7,4.5
					h0l0,0.3v11.1c0,2.2-1.3,4.1-3.2,5l-9.2,5.3C137.3,79.5,136.3,79.8,135.4,79.8z M120.8,68.4l0,0.3c0,1.8,0.9,3.4,2.5,4.3l4.5,2.6
					c0.1,0.1,0.2,0.1,0.3,0.2l4.8,2.7c1.5,0.9,3.5,0.9,5,0l9.2-5.3c1.8-0.8,2.9-2.6,2.9-4.5l0-11.1c0-1.8-0.9-3.4-2.5-4.3l-4.5-2.6
					c-0.1-0.1-0.2-0.1-0.3-0.2l-4.8-2.7c-1.5-0.9-3.5-0.9-5,0l-9.2,5.3c-1.8,0.8-2.9,2.6-2.9,4.5V68.4z`),z(j,"fill","#0399A6"),z(j,"d",`M132.6,69.5c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8
					c-0.2-0.2-0.4-0.3-0.7-0.3c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.4-0.3,0.7h-0.4c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.5
					c0.2-0.1,0.4-0.2,0.7-0.2c0.3,0,0.5,0.1,0.7,0.2c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2
					C132.7,69.5,132.7,69.5,132.6,69.5 M130.2,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.1,0.1-0.2
					s0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1s0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C130.3,69.5,130.3,69.5,130.2,69.5z M135,69.5
					c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8c-0.2-0.2-0.4-0.3-0.7-0.3c-0.3,0-0.5,0.1-0.7,0.3
					c-0.2,0.2-0.3,0.5-0.3,0.8h-0.5c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.6c0.2-0.1,0.5-0.2,0.8-0.2c0.3,0,0.5,0.1,0.7,0.2
					c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2C135.2,69.5,135.1,69.5,135,69.5z`),z(K,"fill","#0399A6"),z(K,"d",`M136.8,64.9c-0.1,0-0.2,0-0.3-0.1c-0.1-0.1-0.1-0.2-0.1-0.3c0-0.1,0-0.2,0.1-0.3c0.1-0.1,0.2-0.1,0.3-0.1
					c0.1,0,0.2,0,0.3,0.1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1,0,0.2-0.1,0.3C137,64.9,136.9,64.9,136.8,64.9 M136.8,69.5
					c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1
					c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.2-0.1,0.2C137,69.5,136.9,69.5,136.8,69.5z`),z(Y,"fill","#0399A6"),z(Y,"d",`M138.7,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1
					c0.1,0,0.1,0,0.2,0.1c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C138.8,69.5,138.8,69.5,138.7,69.5 M141.7,69.5
					c-0.1,0-0.1,0-0.2-0.1c-0.1-0.1-0.1-0.1-0.1-0.2v-1.8c0-0.3-0.1-0.5-0.2-0.7c-0.1-0.2-0.3-0.3-0.4-0.4c-0.2-0.1-0.4-0.1-0.6-0.1
					c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.3,0.2-0.4,0.4c-0.1,0.2-0.2,0.3-0.2,0.5h-0.4c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.6-0.6
					c0.2-0.1,0.5-0.2,0.8-0.2c0.3,0,0.6,0.1,0.9,0.2c0.3,0.1,0.5,0.3,0.6,0.6c0.1,0.3,0.2,0.6,0.2,1v1.8c0,0.1,0,0.1-0.1,0.2
					C141.8,69.5,141.7,69.5,141.7,69.5z`),z(re,"transform","matrix(1 0 0 1 135.5 63)"),z(re,"fill","#0399A6"),z(re,"text-anchor","middle"),z(re,"font-family","var(--comfortea)"),z(re,"font-size","13px"),z(e,"class","car")},m(se,oe){Oe(se,e,oe),P(e,i),P(i,s),P(e,u),P(u,f),P(e,d),P(d,o),P(e,_),P(_,v),P(e,E),P(E,S),P(S,I),P(E,A),P(A,N),P(E,V),P(V,j),P(E,W),P(W,K),P(E,ne),P(ne,Y),P(e,re),P(re,Q)},p(se,oe){oe&4&&Zn(Q,se[2])},d(se){se&&R(e)}}}function sy(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge,pe,ye;return{c(){e=ot("g"),i=ot("g"),s=ot("path"),f=ot("g"),d=ot("path"),o=ot("g"),_=ot("path"),v=ot("g"),E=ot("path"),S=ot("g"),I=ot("path"),A=ot("g"),N=ot("path"),V=ot("g"),j=ot("path"),W=ot("g"),K=ot("g"),ne=ot("path"),Y=ot("g"),re=ot("path"),Q=ot("g"),se=ot("path"),oe=ot("g"),Te=ot("path"),fe=ot("g"),ee=ot("path"),ge=ot("text"),pe=Mt(t[4]),this.h()},l(de){e=st(de,"g",{class:!0});var Ne=J(e);i=st(Ne,"g",{});var Ge=J(i);s=st(Ge,"path",{fill:!0,d:!0}),J(s).forEach(R),Ge.forEach(R),f=st(Ne,"g",{});var Le=J(f);d=st(Le,"path",{fill:!0,d:!0}),J(d).forEach(R),Le.forEach(R),o=st(Ne,"g",{});var Me=J(o);_=st(Me,"path",{fill:!0,d:!0}),J(_).forEach(R),Me.forEach(R),v=st(Ne,"g",{});var $e=J(v);E=st($e,"path",{fill:!0,d:!0}),J(E).forEach(R),$e.forEach(R),S=st(Ne,"g",{});var ht=J(S);I=st(ht,"path",{fill:!0,d:!0}),J(I).forEach(R),ht.forEach(R),A=st(Ne,"g",{});var ut=J(A);N=st(ut,"path",{fill:!0,d:!0}),J(N).forEach(R),ut.forEach(R),V=st(Ne,"g",{});var Fe=J(V);j=st(Fe,"path",{fill:!0,d:!0}),J(j).forEach(R),Fe.forEach(R),W=st(Ne,"g",{});var ze=J(W);K=st(ze,"g",{});var gt=J(K);ne=st(gt,"path",{fill:!0,d:!0}),J(ne).forEach(R),gt.forEach(R),Y=st(ze,"g",{});var Zt=J(Y);re=st(Zt,"path",{fill:!0,d:!0}),J(re).forEach(R),Zt.forEach(R),Q=st(ze,"g",{});var an=J(Q);se=st(an,"path",{fill:!0,d:!0}),J(se).forEach(R),an.forEach(R),oe=st(ze,"g",{});var yn=J(oe);Te=st(yn,"path",{fill:!0,d:!0}),J(Te).forEach(R),yn.forEach(R),fe=st(ze,"g",{});var sn=J(fe);ee=st(sn,"path",{fill:!0,d:!0}),J(ee).forEach(R),sn.forEach(R),ge=st(ze,"text",{transform:!0,fill:!0,"text-anchor":!0,"font-family":!0,"font-size":!0});var Dt=J(ge);pe=Pt(Dt,t[4]),Dt.forEach(R),ze.forEach(R),Ne.forEach(R),this.h()},h(){z(s,"fill","#2181b3"),z(s,"d",`M172.1,42.7c1.7,0,3.1-1.4,3.1-3.1c0-0.1,0-0.2,0-0.3l0.6-0.1c0.2,0.4,0.6,0.6,1,0.6
				c0.6,0,1.1-0.5,1.1-1.1c0-0.1,0-0.2,0-0.3l3.6-2.2l0.4,0.8c-0.9,0.6-1.5,1.5-1.5,2.6c0,1.7,1.4,3.1,3.1,3.1c1.7,0,3.1-1.4,3.1-3.1
				c0-1.7-1.4-3.1-3.1-3.1c-0.4,0-0.7,0.1-1.1,0.2l-1.2-2.5l2.2-2.2c0.1-0.1,0.1-0.2,0.1-0.4c-0.1-0.1-0.2-0.2-0.3-0.2h-2.1
				c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h1.3l-1.7,1.7h-1.8c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.2,0.3,0.3,0.3h1.7l0.6,1.2
				l-3.7,2.3c-0.2-0.2-0.5-0.3-0.8-0.3c0,0,0,0,0,0l-1.1-3.1h1.2c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-1.5l-0.2-0.6h0.4
				c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.2-0.3-0.3-0.3h-1.8c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.1,0.3,0.3,0.3h0.7l0.3,0.8l-1.5,2.8
				c-0.4-0.2-0.8-0.2-1.2-0.2c-1.7,0-3.1,1.4-3.1,3.1C168.9,41.3,170.3,42.7,172.1,42.7 M183.3,39.7c0.1,0.1,0.2,0.2,0.3,0.2
				c0,0,0.1,0,0.1,0c0.2-0.1,0.2-0.3,0.2-0.4l-1.1-2.2c0.2-0.1,0.5-0.1,0.8-0.1c1.4,0,2.5,1.1,2.5,2.5c0,1.4-1.1,2.5-2.5,2.5
				c-1.4,0-2.5-1.1-2.5-2.5c0-0.8,0.4-1.6,1.1-2L183.3,39.7z M176.8,38.1c0.3,0,0.5,0.2,0.5,0.5c0,0.3-0.2,0.5-0.5,0.5
				c-0.3,0-0.5-0.2-0.5-0.5C176.3,38.3,176.5,38.1,176.8,38.1z M175.1,34.7l1,3c-0.3,0.2-0.4,0.5-0.5,0.8l-0.6,0.1
				c-0.2-0.7-0.6-1.2-1.2-1.6L175.1,34.7z M173.5,37.6c0.4,0.3,0.7,0.7,0.9,1.2l-1.7,0.3L173.5,37.6z M172.1,37.1
				c0.3,0,0.6,0.1,0.9,0.2l-1.2,2.1c-0.1,0.1-0.1,0.3,0,0.4c0.1,0.1,0.2,0.1,0.3,0.1c0,0,0,0,0.1,0l2.4-0.5c0,0.1,0,0.1,0,0.2
				c0,1.4-1.1,2.5-2.5,2.5c-1.4,0-2.5-1.1-2.5-2.5C169.6,38.2,170.7,37.1,172.1,37.1z`),z(d,"fill","#2181b3"),z(d,"d",`M172.1,41.1c0.3,0,0.5-0.1,0.7-0.2c0.2-0.1,0.2-0.3,0.1-0.5c-0.1-0.2-0.3-0.2-0.5-0.1
				c-0.1,0.1-0.3,0.1-0.4,0.1c-0.4,0-0.8-0.3-0.9-0.8c0-0.2-0.2-0.3-0.4-0.3c-0.2,0-0.3,0.2-0.3,0.4
				C170.6,40.6,171.3,41.1,172.1,41.1`),z(_,"fill","#2181b3"),z(_,"d",`M170.8,39.2c0.1,0,0.1,0,0.2,0c0.1,0,0.2-0.1,0.3-0.2c0,0,0,0,0,0c0.1-0.2,0.1-0.4-0.1-0.5
				c-0.2-0.1-0.4-0.1-0.5,0.1c0,0,0,0.1,0,0.1C170.6,38.9,170.7,39.1,170.8,39.2`),z(E,"fill","#2181b3"),z(E,"d",`M184.1,41c0,0,0.1,0,0.1,0c0.7-0.3,1.1-1.1,0.9-1.8c-0.1-0.3-0.2-0.5-0.4-0.7c-0.1-0.1-0.3-0.2-0.5,0
				c-0.1,0.1-0.2,0.3,0,0.5c0.1,0.1,0.2,0.2,0.2,0.4c0.1,0.4-0.1,0.9-0.5,1.1c-0.2,0.1-0.2,0.3-0.2,0.4C183.8,41,183.9,41,184.1,41`),z(I,"fill","#2181b3"),z(I,"d",`M183,41C183,41,183,41.1,183,41c0.1,0,0.2,0,0.2,0c0.1,0,0.3-0.1,0.3-0.2c0.1-0.2,0-0.4-0.2-0.4
				c0,0,0,0-0.1,0c-0.2-0.1-0.4,0-0.4,0.2C182.7,40.8,182.8,41,183,41`),z(N,"fill","#2181b3"),z(N,"d",`M177.8,34.3h0.2c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-0.2c-0.2,0-0.3,0.1-0.3,0.3
				C177.5,34.2,177.6,34.3,177.8,34.3`),z(j,"fill","#2181b3"),z(j,"d",`M180.1,32h0.1c0.2,0,0.3-0.1,0.3-0.3c0-0.2-0.1-0.3-0.3-0.3h-0.1c-0.2,0-0.3,0.1-0.3,0.3
				C179.8,31.8,179.9,32,180.1,32`),z(ne,"fill","#FFFFFF"),z(ne,"d",`M180.5,47.6l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.7,1,2.6,2.7,2.6,4.5h0v11.1
					c0,2.1-1.3,3.9-3.1,4.8l-4.4,2.5l0,0l-4.8,2.8c-1.7,1-3.7,0.9-5.3,0l-4.8-2.7c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6
					c-1.7-1-2.6-2.7-2.6-4.5h0V57.6c0-2.1,1.3-3.9,3.1-4.8l4.4-2.5l0,0l4.8-2.8C176.9,46.5,178.9,46.6,180.5,47.6z`),z(re,"fill","#2181b3"),z(re,"d",`M177.8,79.8c-1,0-1.9-0.3-2.8-0.8l-4.8-2.7c-0.1-0.1-0.2-0.1-0.3-0.2l-4.5-2.6c-1.6-0.9-2.6-2.6-2.7-4.5
					h0l0-0.3V57.6c0-2.2,1.3-4.1,3.2-5l9.2-5.3c1.7-1,3.9-1,5.6,0l4.8,2.7c0.1,0.1,0.2,0.1,0.3,0.2l4.5,2.6c1.6,0.9,2.6,2.6,2.7,4.5
					h0l0,0.3v11.1c0,2.1-1.3,4.1-3.2,5l-9.2,5.3C179.7,79.5,178.8,79.8,177.8,79.8z M163.3,68.4l0,0.3c0,1.8,0.9,3.4,2.5,4.3l4.5,2.6
					c0.1,0.1,0.2,0.1,0.3,0.2l4.8,2.7c1.5,0.9,3.5,0.9,5,0l9.2-5.3c1.8-0.8,2.9-2.6,2.9-4.5l0-11.1c0-1.8-0.9-3.4-2.5-4.3l-4.5-2.6
					c-0.1-0.1-0.2-0.1-0.3-0.2l-4.8-2.7c-1.5-0.9-3.5-0.9-5,0l-9.2,5.3c-1.8,0.8-2.9,2.6-2.9,4.5V68.4z`),z(se,"fill","#2181b3"),z(se,"d",`M175.1,69.5c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8
					c-0.2-0.2-0.4-0.3-0.7-0.3c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.4-0.3,0.7h-0.4c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.5
					c0.2-0.1,0.5-0.2,0.7-0.2c0.3,0,0.5,0.1,0.7,0.2c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2
					C175.2,69.5,175.1,69.5,175.1,69.5 M172.6,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.1,0.1-0.2
					c0-0.1,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1c0,0.1,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C172.8,69.5,172.7,69.5,172.6,69.5z
					 M177.5,69.5c-0.1,0-0.1,0-0.2-0.1c-0.1,0-0.1-0.1-0.1-0.2v-2c0-0.3-0.1-0.6-0.3-0.8c-0.2-0.2-0.4-0.3-0.7-0.3
					c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.5-0.3,0.8h-0.5c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.5-0.6c0.2-0.1,0.5-0.2,0.8-0.2
					c0.3,0,0.5,0.1,0.7,0.2c0.2,0.1,0.4,0.3,0.5,0.6c0.1,0.2,0.2,0.5,0.2,0.8v2c0,0.1,0,0.1-0.1,0.2
					C177.6,69.5,177.5,69.5,177.5,69.5z`),z(Te,"fill","#2181b3"),z(Te,"d",`M179.3,64.9c-0.1,0-0.2,0-0.3-0.1c-0.1-0.1-0.1-0.2-0.1-0.3c0-0.1,0-0.2,0.1-0.3c0.1-0.1,0.2-0.1,0.3-0.1
					c0.1,0,0.2,0,0.3,0.1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1,0,0.2-0.1,0.3C179.5,64.9,179.4,64.9,179.3,64.9 M179.3,69.5
					c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2,0.1
					c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.2-0.1,0.2C179.4,69.5,179.4,69.5,179.3,69.5z`),z(ee,"fill","#2181b3"),z(ee,"d",`M181.2,69.5c-0.1,0-0.1,0-0.2-0.1c0,0-0.1-0.1-0.1-0.2v-3.3c0-0.1,0-0.2,0.1-0.2c0,0,0.1-0.1,0.2-0.1
					c0.1,0,0.1,0,0.2,0.1c0,0,0.1,0.1,0.1,0.2v3.3c0,0.1,0,0.1-0.1,0.2C181.3,69.5,181.2,69.5,181.2,69.5 M184.1,69.5
					c-0.1,0-0.1,0-0.2-0.1c-0.1-0.1-0.1-0.1-0.1-0.2v-1.8c0-0.3-0.1-0.5-0.2-0.7c-0.1-0.2-0.3-0.3-0.4-0.4c-0.2-0.1-0.4-0.1-0.6-0.1
					c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.3,0.2-0.4,0.4c-0.1,0.2-0.2,0.3-0.2,0.5H181c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.3-0.4,0.6-0.6
					c0.2-0.1,0.5-0.2,0.8-0.2c0.3,0,0.6,0.1,0.9,0.2c0.3,0.1,0.5,0.3,0.6,0.6s0.2,0.6,0.2,1v1.8c0,0.1,0,0.1-0.1,0.2
					C184.2,69.5,184.2,69.5,184.1,69.5z`),z(ge,"transform","matrix(1 0 0 1 177.5 63)"),z(ge,"fill","#2181b3"),z(ge,"text-anchor","middle"),z(ge,"font-family","var(--comfortea)"),z(ge,"font-size","13px"),z(e,"class","bike")},m(de,Ne){Oe(de,e,Ne),P(e,i),P(i,s),P(e,f),P(f,d),P(e,o),P(o,_),P(e,v),P(v,E),P(e,S),P(S,I),P(e,A),P(A,N),P(e,V),P(V,j),P(e,W),P(W,K),P(K,ne),P(W,Y),P(Y,re),P(W,Q),P(Q,se),P(W,oe),P(oe,Te),P(W,fe),P(fe,ee),P(W,ge),P(ge,pe),ye=!0},p(de,Ne){(!ye||Ne&16)&&Zn(pe,de[4])},i(de){ye||(de&&vi(()=>{ye&&(u||(u=Dr(s,R0,{duration:1500,easing:L0},!0)),u.run(1))}),ye=!0)},o(de){de&&(u||(u=Dr(s,R0,{duration:1500,easing:L0},!1)),u.run(0)),ye=!1},d(de){de&&R(e),de&&u&&u.end()}}}function $A(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N=t[3]&&iy(t),V=t[2]&&ay(t),j=t[4]&&sy(t);return{c(){e=we(),i=Z("div"),s=ot("svg"),u=ot("g"),f=ot("polygon"),N&&N.c(),d=vn(),V&&V.c(),o=vn(),j&&j.c(),_=ot("g"),v=ot("path"),E=ot("text"),S=Mt(t[0]),I=ot("text"),A=Mt(t[1]),this.h()},l(W){e=xe(W),i=G(W,"DIV",{class:!0});var K=J(i);s=st(K,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,style:!0,"xml:space":!0});var ne=J(s);u=st(ne,"g",{});var Y=J(u);f=st(Y,"polygon",{fill:!0,points:!0}),J(f).forEach(R),Y.forEach(R),N&&N.l(ne),d=vn(),V&&V.l(ne),o=vn(),j&&j.l(ne),_=st(ne,"g",{});var re=J(_);v=st(re,"path",{fill:!0,stroke:!0,"stroke-width":!0,class:!0,d:!0}),J(v).forEach(R),re.forEach(R),E=st(ne,"text",{transform:!0,fill:!0,"font-family":!0,"font-size":!0});var Q=J(E);S=Pt(Q,t[0]),Q.forEach(R),I=st(ne,"text",{transform:!0,fill:!0,"font-family":!0,"font-size":!0});var se=J(I);A=Pt(se,t[1]),se.forEach(R),ne.forEach(R),K.forEach(R),this.h()},h(){z(f,"fill","#2181b3"),z(f,"points","46.2,63.1 -20,63.1 -20,28.3 -19.2,28.3 -19.2,62.3 46.2,62.3 "),z(v,"fill",t[5]),z(v,"stroke","white"),z(v,"stroke-width","0.6px"),z(v,"class","cls-8"),z(v,"d",`M-3.1,0c-4.4,0-8,3.6-8,8s8,14.7,8,14.7s8-10.3,8-14.7C4.8,3.6,1.3,0-3.1,0 M-3.1,11.9C-5.3,11.9-7,10.1-7,8
		c0-2.2,1.8-3.9,3.9-3.9C-1,4,0.8,5.8,0.8,8C0.8,10.1-1,11.9-3.1,11.9z`),z(E,"transform","matrix(1 0 0 1 -11.6097 35.1343)"),z(E,"fill","#2181b3"),z(E,"font-family","var(--comfortea)"),z(E,"font-size","9.0051px"),z(I,"transform","matrix(1 0 0 1 -11.2855 54.0779)"),z(I,"fill","#00336E"),z(I,"font-family","var(--comfortea)"),z(I,"font-size","9.0051px"),z(s,"version","1.1"),z(s,"id","Warstwa_1"),z(s,"xmlns","http://www.w3.org/2000/svg"),z(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),z(s,"x","120px"),z(s,"y","0px"),z(s,"width","220px"),z(s,"height","90px"),z(s,"viewBox","-20 0 213 79.8"),Hi(s,"enable-background","new 0 0 220 90"),z(s,"xml:space","preserve"),z(i,"class","svg-itema")},m(W,K){Oe(W,e,K),Oe(W,i,K),P(i,s),P(s,u),P(u,f),N&&N.m(s,null),P(s,d),V&&V.m(s,null),P(s,o),j&&j.m(s,null),P(s,_),P(_,v),P(s,E),P(E,S),P(s,I),P(I,A)},p(W,[K]){W[3]?N?N.p(W,K):(N=iy(W),N.c(),N.m(s,d)):N&&(N.d(1),N=null),W[2]?V?V.p(W,K):(V=ay(W),V.c(),V.m(s,o)):V&&(V.d(1),V=null),W[4]?j?(j.p(W,K),K&16&&Ve(j,1)):(j=sy(W),j.c(),Ve(j,1),j.m(s,_)):j&&(lr(),Xe(j,1,1,()=>{j=null}),ur()),K&32&&z(v,"fill",W[5]),K&1&&Zn(S,W[0]),K&2&&Zn(A,W[1])},i(W){Ve(j)},o(W){Xe(j)},d(W){W&&(R(e),R(i)),N&&N.d(),V&&V.d(),j&&j.d()}}}function UA(t,e,i){let{poiName:s="Galeria Reszowska"}=e,{poiCity:u="Rzeszów"}=e,{poiDistanceCar:f,poiDistanceBus:d,poiDistanceBike:o}=e,{color:_="#2181b3"}=e;return console.log("color",_),t.$$set=v=>{"poiName"in v&&i(0,s=v.poiName),"poiCity"in v&&i(1,u=v.poiCity),"poiDistanceCar"in v&&i(2,f=v.poiDistanceCar),"poiDistanceBus"in v&&i(3,d=v.poiDistanceBus),"poiDistanceBike"in v&&i(4,o=v.poiDistanceBike),"color"in v&&i(5,_=v.color)},[s,u,f,d,o,_]}class jA extends Pr{constructor(e){super(),Mr(this,e,UA,$A,Cr,{poiName:0,poiCity:1,poiDistanceCar:2,poiDistanceBus:3,poiDistanceBike:4,color:5})}}function oy(t,e,i){const s=t.slice();return s[12]=e[i],s}function qA(t){let e,i="Wybierz lokalizacje na stronie pierwszej",s,u;return{c(){e=Z("a"),e.textContent=i,this.h()},l(f){e=G(f,"A",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-13l3v7s"&&(e.textContent=i),this.h()},h(){z(e,"class","anachorTop text-center hover:bg-sky-700 hover:text-white transition-all p-5 rounded-lg")},m(f,d){Oe(f,e,d),s||(u=Ho(r5.call(null,e,"page_01")),s=!0)},p:nr,i:nr,o:nr,d(f){f&&R(e),s=!1,u()}}}function GA(t){let e,i,s=xr(t[1]),u=[];for(let d=0;d<s.length;d+=1)u[d]=ly(oy(t,s,d));const f=d=>Xe(u[d],1,1,()=>{u[d]=null});return{c(){for(let d=0;d<u.length;d+=1)u[d].c();e=vn()},l(d){for(let o=0;o<u.length;o+=1)u[o].l(d);e=vn()},m(d,o){for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(d,o);Oe(d,e,o),i=!0},p(d,o){if(o&2){s=xr(d[1]);let _;for(_=0;_<s.length;_+=1){const v=oy(d,s,_);u[_]?(u[_].p(v,o),Ve(u[_],1)):(u[_]=ly(v),u[_].c(),Ve(u[_],1),u[_].m(e.parentNode,e))}for(lr(),_=s.length;_<u.length;_+=1)f(_);ur()}},i(d){if(!i){for(let o=0;o<s.length;o+=1)Ve(u[o]);i=!0}},o(d){u=u.filter(Boolean);for(let o=0;o<u.length;o+=1)Xe(u[o]);i=!1},d(d){d&&R(e),Ca(u,d)}}}function ly(t){let e,i;return e=new jA({props:{poiName:t[12].name,poiCity:t[12].city,poiDistanceBus:t[12].time_bus,poiDistanceCar:t[12].time_car,poiDistanceBike:t[12].time_bike,color:t[12].color}}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u&2&&(f.poiName=s[12].name),u&2&&(f.poiCity=s[12].city),u&2&&(f.poiDistanceBus=s[12].time_bus),u&2&&(f.poiDistanceCar=s[12].time_car),u&2&&(f.poiDistanceBike=s[12].time_bike),u&2&&(f.color=s[12].color),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function ZA(t){let e,i,s,u,f=`<div class="grid_content noselect full_width"><h2 class="title_medium noselect"><span class="number_type noselect">11</span> Wskaźniki czasu dojazdu</h2> <p class="opis_">Powyższa mapka i grafiki wskazują orientacyjne czasy dojazdów do określonych punktów
				docelowych.</p></div> <div class="grid_content full_width mapa"><div id="mapa"></div></div>`,d,o,_,v,E,S,I,A="4",N;i=new Mo({});const V=[GA,qA],j=[];function W(K,ne){return K[0]&&K[0].params&&K[0].params.POI&&K[1].length>1?0:1}return v=W(t),E=j[v]=V[v](t),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),u=Z("div"),u.innerHTML=f,d=we(),o=Z("div"),_=Z("div"),E.c(),S=we(),I=Z("div"),I.textContent=A,this.h()},l(K){e=G(K,"DIV",{class:!0});var ne=J(e);At(i.$$.fragment,ne),s=xe(ne),u=G(ne,"DIV",{class:!0,"data-svelte-h":!0}),Vt(u)!=="svelte-48uwu5"&&(u.innerHTML=f),d=xe(ne),o=G(ne,"DIV",{class:!0});var Y=J(o);_=G(Y,"DIV",{class:!0});var re=J(_);E.l(re),re.forEach(R),Y.forEach(R),S=xe(ne),I=G(ne,"DIV",{class:!0,"data-svelte-h":!0}),Vt(I)!=="svelte-qbmqgr"&&(I.textContent=A),ne.forEach(R),this.h()},h(){z(u,"class","page_content _1"),z(_,"class","grid_content noselect POIelement"),z(o,"class","page_content _2"),z(I,"class","pageNumber svelte-1a1zqgd"),z(e,"class","content-block section page_04")},m(K,ne){Oe(K,e,ne),Tt(i,e,null),P(e,s),P(e,u),P(e,d),P(e,o),P(o,_),j[v].m(_,null),P(e,S),P(e,I),N=!0},p(K,[ne]){let Y=v;v=W(K),v===Y?j[v].p(K,ne):(lr(),Xe(j[Y],1,1,()=>{j[Y]=null}),ur(),E=j[v],E?E.p(K,ne):(E=j[v]=V[v](K),E.c()),Ve(E,1),E.m(_,null))},i(K){N||(Ve(i.$$.fragment,K),Ve(E),N=!0)},o(K){Xe(i.$$.fragment,K),Xe(E),N=!1},d(K){K&&R(e),It(i),j[v].d()}}}function HA(t,e,i){let s,u;Ur(t,Xt,A=>i(0,s=A)),Ur(t,qc,A=>i(4,u=A)),Ao.apiKey=Cp;let f,d={cls0:"#75ffb0",cls1:"#03263D",cls2:"#29c2c9",cls3:"#334d4f",cls4:"#2181b3",cls5:"#056b45",cls6:"#21cc8c",cls7:"#0099b5",cls8:"#00336e",cls9:"#078c5f",cls10:"#03263D",cls11:"#86EAE2",cls12:"#004B49",cls13:"#5EE9C9",cls14:"#4DBDA1",cls15:"#53CDAC",cls16:"#00947A",cls17:"#122C28",cls18:"#209B94",cls19:"#1E8082",cls20:"#88B6B1",cls21:"#4CB7B4",cls22:"#16796B",cls23:"#78DBC0",cls24:"#63A69A",cls25:"#2B7871",cls26:"#4AABA8"},o=!1,_;async function v(){_=new Af({container:"mapa",style:Wv.BASIC,center:[s.params.lon+1,s.params.lat+1],zoom:13}),i(3,o=!0)}let E={},S={};async function I(A){E=[],i(1,S=[]);let N=0;if(A&&typeof A=="object")for(let[V,j]of Object.entries(A)){let W=d["cls"+N],K={color:W,name:j.name,city:j.city.shortText,time_car:j.by_car.time_text,time_bus:j.by_bus.time_text,time_bike:j.by_bike.time_text};S.push(K);let ne=[j.lon,j.lat];const Y='<svg id="Warstwa_1" class="drop" data-name="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.95 22.66"><defs><style></style></defs><path class="" fill="'+W+'" stroke=white stroke-width="0.6px" d="m7.98,0C3.57,0,0,3.57,0,7.97s7.98,14.69,7.98,14.69c0,0,7.97-10.28,7.97-14.69S12.39,0,7.98,0m0,11.9c-2.17,0-3.92-1.75-3.92-3.92s1.75-3.93,3.92-3.93,3.92,1.76,3.92,3.93-1.76,3.92-3.92,3.92Z"/></svg>',re=new pf({element:document.createElement("div")}).setLngLat(ne).addTo(_);re.getElement().innerHTML=Y,re.getElement().style.width="24px",re.getElement().style.height="20px",E.push(re),N++}return _.fitBounds(s.params.fitBounds,{padding:80}),!0}return ys(()=>{}),t.$$.update=()=>{if(t.$$.dirty&29&&(s&&s.params&&o==!1&&v(),s&&s.params&&o==!0&&u==!0)){i(2,f=s.params.POI);let A=[];for(let N in f)f[N].lat!=0&&A.push(f[N]);A.length>0&&I(A)}},[s,S,f,o,u]}class WA extends Pr{constructor(e){super(),Mr(this,e,HA,ZA,Cr,{})}}function uy(t,e,i){const s=t.slice();return s[37]=e[i],s[39]=i,s}function cy(t){let e,i,s,u,f=(t[6]==="label"||t[7]==="label")&&hy(t);return{c(){e=Z("span"),f&&f.c(),this.h()},l(d){e=G(d,"SPAN",{class:!0,style:!0});var o=J(e);f&&f.l(o),o.forEach(R),this.h()},h(){z(e,"class","pip first"),z(e,"style",i=t[14]+": 0%;"),On(e,"selected",t[18](t[0])),On(e,"in-range",t[17](t[0]))},m(d,o){Oe(d,e,o),f&&f.m(e,null),s||(u=[bt(e,"pointerdown",t[30]),bt(e,"pointerup",t[31])],s=!0)},p(d,o){d[6]==="label"||d[7]==="label"?f?f.p(d,o):(f=hy(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),o[0]&16384&&i!==(i=d[14]+": 0%;")&&z(e,"style",i),o[0]&262145&&On(e,"selected",d[18](d[0])),o[0]&131073&&On(e,"in-range",d[17](d[0]))},d(d){d&&R(e),f&&f.d(),s=!1,Or(u)}}}function hy(t){let e,i,s,u=t[12](t[16](t[0]),0,0)+"",f,d=t[10]&&fy(t),o=t[11]&&dy(t);return{c(){e=Z("span"),d&&d.c(),i=vn(),s=new Dl(!1),f=vn(),o&&o.c(),this.h()},l(_){e=G(_,"SPAN",{class:!0});var v=J(e);d&&d.l(v),i=vn(),s=zl(v,!1),f=vn(),o&&o.l(v),v.forEach(R),this.h()},h(){s.a=f,z(e,"class","pipVal")},m(_,v){Oe(_,e,v),d&&d.m(e,null),P(e,i),s.m(u,e),P(e,f),o&&o.m(e,null)},p(_,v){_[10]?d?d.p(_,v):(d=fy(_),d.c(),d.m(e,i)):d&&(d.d(1),d=null),v[0]&69633&&u!==(u=_[12](_[16](_[0]),0,0)+"")&&s.p(u),_[11]?o?o.p(_,v):(o=dy(_),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(_){_&&R(e),d&&d.d(),o&&o.d()}}}function fy(t){let e,i;return{c(){e=Z("span"),i=Mt(t[10]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[10]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-prefix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&1024&&Zn(i,s[10])},d(s){s&&R(e)}}}function dy(t){let e,i;return{c(){e=Z("span"),i=Mt(t[11]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[11]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-suffix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&2048&&Zn(i,s[11])},d(s){s&&R(e)}}}function py(t){let e,i=xr(Array(t[20]+1)),s=[];for(let u=0;u<i.length;u+=1)s[u]=vy(uy(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f[0]&8314435){i=xr(Array(u[20]+1));let d;for(d=0;d<i.length;d+=1){const o=uy(u,i,d);s[d]?s[d].p(o,f):(s[d]=vy(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function my(t){let e,i,s,u,f,d=(t[6]==="label"||t[9]==="label")&&gy(t);function o(..._){return t[33](t[39],..._)}return{c(){e=Z("span"),d&&d.c(),i=we(),this.h()},l(_){e=G(_,"SPAN",{class:!0,style:!0});var v=J(e);d&&d.l(v),i=xe(v),v.forEach(R),this.h()},h(){z(e,"class","pip"),z(e,"style",s=t[14]+": "+t[15](t[19](t[39]))+"%;"),On(e,"selected",t[18](t[19](t[39]))),On(e,"in-range",t[17](t[19](t[39])))},m(_,v){Oe(_,e,v),d&&d.m(e,null),P(e,i),u||(f=[bt(e,"pointerdown",t[32]),bt(e,"pointerup",o)],u=!0)},p(_,v){t=_,t[6]==="label"||t[9]==="label"?d?d.p(t,v):(d=gy(t),d.c(),d.m(e,i)):d&&(d.d(1),d=null),v[0]&573440&&s!==(s=t[14]+": "+t[15](t[19](t[39]))+"%;")&&z(e,"style",s),v[0]&786432&&On(e,"selected",t[18](t[19](t[39]))),v[0]&655360&&On(e,"in-range",t[17](t[19](t[39])))},d(_){_&&R(e),d&&d.d(),u=!1,Or(f)}}}function gy(t){let e,i,s,u=t[12](t[19](t[39]),t[39],t[15](t[19](t[39])))+"",f,d=t[10]&&_y(t),o=t[11]&&yy(t);return{c(){e=Z("span"),d&&d.c(),i=vn(),s=new Dl(!1),f=vn(),o&&o.c(),this.h()},l(_){e=G(_,"SPAN",{class:!0});var v=J(e);d&&d.l(v),i=vn(),s=zl(v,!1),f=vn(),o&&o.l(v),v.forEach(R),this.h()},h(){s.a=f,z(e,"class","pipVal")},m(_,v){Oe(_,e,v),d&&d.m(e,null),P(e,i),s.m(u,e),P(e,f),o&&o.m(e,null)},p(_,v){_[10]?d?d.p(_,v):(d=_y(_),d.c(),d.m(e,i)):d&&(d.d(1),d=null),v[0]&561152&&u!==(u=_[12](_[19](_[39]),_[39],_[15](_[19](_[39])))+"")&&s.p(u),_[11]?o?o.p(_,v):(o=yy(_),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(_){_&&R(e),d&&d.d(),o&&o.d()}}}function _y(t){let e,i;return{c(){e=Z("span"),i=Mt(t[10]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[10]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-prefix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&1024&&Zn(i,s[10])},d(s){s&&R(e)}}}function yy(t){let e,i;return{c(){e=Z("span"),i=Mt(t[11]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[11]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-suffix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&2048&&Zn(i,s[11])},d(s){s&&R(e)}}}function vy(t){let e=t[19](t[39])!==t[0]&&t[19](t[39])!==t[1],i,s=e&&my(t);return{c(){s&&s.c(),i=vn()},l(u){s&&s.l(u),i=vn()},m(u,f){s&&s.m(u,f),Oe(u,i,f)},p(u,f){f[0]&524291&&(e=u[19](u[39])!==u[0]&&u[19](u[39])!==u[1]),e?s?s.p(u,f):(s=my(u),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(u){u&&R(i),s&&s.d(u)}}}function by(t){let e,i,s,u,f=(t[6]==="label"||t[8]==="label")&&xy(t);return{c(){e=Z("span"),f&&f.c(),this.h()},l(d){e=G(d,"SPAN",{class:!0,style:!0});var o=J(e);f&&f.l(o),o.forEach(R),this.h()},h(){z(e,"class","pip last"),z(e,"style",i=t[14]+": 100%;"),On(e,"selected",t[18](t[1])),On(e,"in-range",t[17](t[1]))},m(d,o){Oe(d,e,o),f&&f.m(e,null),s||(u=[bt(e,"pointerdown",t[34]),bt(e,"pointerup",t[35])],s=!0)},p(d,o){d[6]==="label"||d[8]==="label"?f?f.p(d,o):(f=xy(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),o[0]&16384&&i!==(i=d[14]+": 100%;")&&z(e,"style",i),o[0]&262146&&On(e,"selected",d[18](d[1])),o[0]&131074&&On(e,"in-range",d[17](d[1]))},d(d){d&&R(e),f&&f.d(),s=!1,Or(u)}}}function xy(t){let e,i,s,u=t[12](t[16](t[1]),t[20],100)+"",f,d=t[10]&&wy(t),o=t[11]&&ky(t);return{c(){e=Z("span"),d&&d.c(),i=vn(),s=new Dl(!1),f=vn(),o&&o.c(),this.h()},l(_){e=G(_,"SPAN",{class:!0});var v=J(e);d&&d.l(v),i=vn(),s=zl(v,!1),f=vn(),o&&o.l(v),v.forEach(R),this.h()},h(){s.a=f,z(e,"class","pipVal")},m(_,v){Oe(_,e,v),d&&d.m(e,null),P(e,i),s.m(u,e),P(e,f),o&&o.m(e,null)},p(_,v){_[10]?d?d.p(_,v):(d=wy(_),d.c(),d.m(e,i)):d&&(d.d(1),d=null),v[0]&1118210&&u!==(u=_[12](_[16](_[1]),_[20],100)+"")&&s.p(u),_[11]?o?o.p(_,v):(o=ky(_),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(_){_&&R(e),d&&d.d(),o&&o.d()}}}function wy(t){let e,i;return{c(){e=Z("span"),i=Mt(t[10]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[10]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-prefix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&1024&&Zn(i,s[10])},d(s){s&&R(e)}}}function ky(t){let e,i;return{c(){e=Z("span"),i=Mt(t[11]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[11]),u.forEach(R),this.h()},h(){z(e,"class","pipVal-suffix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&2048&&Zn(i,s[11])},d(s){s&&R(e)}}}function KA(t){let e,i,s,u=(t[6]&&t[7]!==!1||t[7])&&cy(t),f=(t[6]&&t[9]!==!1||t[9])&&py(t),d=(t[6]&&t[8]!==!1||t[8])&&by(t);return{c(){e=Z("div"),u&&u.c(),i=we(),f&&f.c(),s=we(),d&&d.c(),this.h()},l(o){e=G(o,"DIV",{class:!0});var _=J(e);u&&u.l(_),i=xe(_),f&&f.l(_),s=xe(_),d&&d.l(_),_.forEach(R),this.h()},h(){z(e,"class","rangePips"),On(e,"disabled",t[5]),On(e,"hoverable",t[4]),On(e,"vertical",t[2]),On(e,"reversed",t[3]),On(e,"focus",t[13])},m(o,_){Oe(o,e,_),u&&u.m(e,null),P(e,i),f&&f.m(e,null),P(e,s),d&&d.m(e,null)},p(o,_){o[6]&&o[7]!==!1||o[7]?u?u.p(o,_):(u=cy(o),u.c(),u.m(e,i)):u&&(u.d(1),u=null),o[6]&&o[9]!==!1||o[9]?f?f.p(o,_):(f=py(o),f.c(),f.m(e,s)):f&&(f.d(1),f=null),o[6]&&o[8]!==!1||o[8]?d?d.p(o,_):(d=by(o),d.c(),d.m(e,null)):d&&(d.d(1),d=null),_[0]&32&&On(e,"disabled",o[5]),_[0]&16&&On(e,"hoverable",o[4]),_[0]&4&&On(e,"vertical",o[2]),_[0]&8&&On(e,"reversed",o[3]),_[0]&8192&&On(e,"focus",o[13])},i:nr,o:nr,d(o){o&&R(e),u&&u.d(),f&&f.d(),d&&d.d()}}}function XA(t,e,i){let s,u,f,d,o,{range:_=!1}=e,{min:v=0}=e,{max:E=100}=e,{step:S=1}=e,{values:I=[(E+v)/2]}=e,{vertical:A=!1}=e,{reversed:N=!1}=e,{hoverable:V=!0}=e,{disabled:j=!1}=e,{pipstep:W=void 0}=e,{all:K=!0}=e,{first:ne=void 0}=e,{last:Y=void 0}=e,{rest:re=void 0}=e,{prefix:Q=""}=e,{suffix:se=""}=e,{formatter:oe=(ze,gt,Zt)=>ze}=e,{focus:Te=void 0}=e,{orientationStart:fe=void 0}=e,{percentOf:ee=void 0}=e,{moveHandle:ge=void 0}=e,{fixFloat:pe=void 0}=e,{normalisedClient:ye=void 0}=e,de;function Ne(ze){ze=ye(ze),de={x:ze.clientX,y:ze.clientY}}function Ge(ze,gt){if(gt=ye(gt),!j){const Zt=Math.sqrt(Math.pow(de.x-gt.clientX,2)+Math.pow(de.y-gt.clientY,2));de&&Zt<=5&&ge(void 0,ze)}}const Le=ze=>{Ne(ze)},Me=ze=>{Ge(v,ze)},$e=ze=>{Ne(ze)},ht=(ze,gt)=>{Ge(f(ze),gt)},ut=ze=>{Ne(ze)},Fe=ze=>{Ge(E,ze)};return t.$$set=ze=>{"range"in ze&&i(23,_=ze.range),"min"in ze&&i(0,v=ze.min),"max"in ze&&i(1,E=ze.max),"step"in ze&&i(24,S=ze.step),"values"in ze&&i(25,I=ze.values),"vertical"in ze&&i(2,A=ze.vertical),"reversed"in ze&&i(3,N=ze.reversed),"hoverable"in ze&&i(4,V=ze.hoverable),"disabled"in ze&&i(5,j=ze.disabled),"pipstep"in ze&&i(26,W=ze.pipstep),"all"in ze&&i(6,K=ze.all),"first"in ze&&i(7,ne=ze.first),"last"in ze&&i(8,Y=ze.last),"rest"in ze&&i(9,re=ze.rest),"prefix"in ze&&i(10,Q=ze.prefix),"suffix"in ze&&i(11,se=ze.suffix),"formatter"in ze&&i(12,oe=ze.formatter),"focus"in ze&&i(13,Te=ze.focus),"orientationStart"in ze&&i(14,fe=ze.orientationStart),"percentOf"in ze&&i(15,ee=ze.percentOf),"moveHandle"in ze&&i(27,ge=ze.moveHandle),"fixFloat"in ze&&i(16,pe=ze.fixFloat),"normalisedClient"in ze&&i(28,ye=ze.normalisedClient)},t.$$.update=()=>{t.$$.dirty[0]&83886087&&i(29,s=W||((E-v)/S>=(A?50:100)?(E-v)/(A?10:20):1)),t.$$.dirty[0]&553648131&&i(20,u=parseInt((E-v)/(S*s),10)),t.$$.dirty[0]&553713665&&i(19,f=function(ze){return pe(v+ze*S*s)}),t.$$.dirty[0]&33619968&&i(18,d=function(ze){return I.some(gt=>pe(gt)===pe(ze))}),t.$$.dirty[0]&41943040&&i(17,o=function(ze){if(_==="min")return I[0]>ze;if(_==="max")return I[0]<ze;if(_)return I[0]<ze&&I[1]>ze})},[v,E,A,N,V,j,K,ne,Y,re,Q,se,oe,Te,fe,ee,pe,o,d,f,u,Ne,Ge,_,S,I,W,ge,ye,s,Le,Me,$e,ht,ut,Fe]}class YA extends Pr{constructor(e){super(),Mr(this,e,XA,KA,Cr,{range:23,min:0,max:1,step:24,values:25,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:26,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:27,fixFloat:16,normalisedClient:28},null,[-1,-1])}}function Ey(t,e,i){const s=t.slice();return s[65]=e[i],s[67]=i,s}function Sy(t){let e,i,s,u=t[21](t[65],t[67],t[24](t[65]))+"",f,d=t[18]&&Iy(t),o=t[19]&&Ty(t);return{c(){e=Z("span"),d&&d.c(),i=vn(),s=new Dl(!1),f=vn(),o&&o.c(),this.h()},l(_){e=G(_,"SPAN",{class:!0});var v=J(e);d&&d.l(v),i=vn(),s=zl(v,!1),f=vn(),o&&o.l(v),v.forEach(R),this.h()},h(){s.a=f,z(e,"class","rangeFloat")},m(_,v){Oe(_,e,v),d&&d.m(e,null),P(e,i),s.m(u,e),P(e,f),o&&o.m(e,null)},p(_,v){_[18]?d?d.p(_,v):(d=Iy(_),d.c(),d.m(e,i)):d&&(d.d(1),d=null),v[0]&18874369&&u!==(u=_[21](_[65],_[67],_[24](_[65]))+"")&&s.p(u),_[19]?o?o.p(_,v):(o=Ty(_),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(_){_&&R(e),d&&d.d(),o&&o.d()}}}function Iy(t){let e,i;return{c(){e=Z("span"),i=Mt(t[18]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[18]),u.forEach(R),this.h()},h(){z(e,"class","rangeFloat-prefix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&262144&&Zn(i,s[18])},d(s){s&&R(e)}}}function Ty(t){let e,i;return{c(){e=Z("span"),i=Mt(t[19]),this.h()},l(s){e=G(s,"SPAN",{class:!0});var u=J(e);i=Pt(u,t[19]),u.forEach(R),this.h()},h(){z(e,"class","rangeFloat-suffix")},m(s,u){Oe(s,e,u),P(e,i)},p(s,u){u[0]&524288&&Zn(i,s[19])},d(s){s&&R(e)}}}function Ay(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N=t[7]&&Sy(t);return{c(){e=Z("span"),i=Z("span"),s=we(),N&&N.c(),this.h()},l(V){e=G(V,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var j=J(e);i=G(j,"SPAN",{class:!0}),J(i).forEach(R),s=xe(j),N&&N.l(j),j.forEach(R),this.h()},h(){z(i,"class","rangeNub"),z(e,"role","slider"),z(e,"class","rangeHandle"),z(e,"data-handle",t[67]),z(e,"style",u=t[29]+": "+t[30][t[67]]+"%; z-index: "+(t[27]===t[67]?3:2)+";"),z(e,"aria-label",f=t[22][t[67]]),z(e,"aria-valuemin",d=t[2]===!0&&t[67]===1?t[0][0]:t[3]),z(e,"aria-valuemax",o=t[2]===!0&&t[67]===0?t[0][1]:t[4]),z(e,"aria-valuenow",_=t[65]),z(e,"aria-valuetext",v=""+(t[18]+zy(t[21](t[65],t[67],t[24](t[65])))+t[19])),z(e,"aria-orientation",E=t[6]?"vertical":"horizontal"),z(e,"aria-disabled",t[10]),z(e,"disabled",t[10]),z(e,"tabindex",S=t[10]?-1:0),On(e,"active",t[25]&&t[27]===t[67]),On(e,"press",t[26]&&t[27]===t[67])},m(V,j){Oe(V,e,j),P(e,i),P(e,s),N&&N.m(e,null),I||(A=[bt(e,"blur",t[35]),bt(e,"focus",t[36]),bt(e,"keydown",t[37])],I=!0)},p(V,j){V[7]?N?N.p(V,j):(N=Sy(V),N.c(),N.m(e,null)):N&&(N.d(1),N=null),j[0]&1744830464&&u!==(u=V[29]+": "+V[30][V[67]]+"%; z-index: "+(V[27]===V[67]?3:2)+";")&&z(e,"style",u),j[0]&4194304&&f!==(f=V[22][V[67]])&&z(e,"aria-label",f),j[0]&13&&d!==(d=V[2]===!0&&V[67]===1?V[0][0]:V[3])&&z(e,"aria-valuemin",d),j[0]&21&&o!==(o=V[2]===!0&&V[67]===0?V[0][1]:V[4])&&z(e,"aria-valuemax",o),j[0]&1&&_!==(_=V[65])&&z(e,"aria-valuenow",_),j[0]&19660801&&v!==(v=""+(V[18]+zy(V[21](V[65],V[67],V[24](V[65])))+V[19]))&&z(e,"aria-valuetext",v),j[0]&64&&E!==(E=V[6]?"vertical":"horizontal")&&z(e,"aria-orientation",E),j[0]&1024&&z(e,"aria-disabled",V[10]),j[0]&1024&&z(e,"disabled",V[10]),j[0]&1024&&S!==(S=V[10]?-1:0)&&z(e,"tabindex",S),j[0]&167772160&&On(e,"active",V[25]&&V[27]===V[67]),j[0]&201326592&&On(e,"press",V[26]&&V[27]===V[67])},d(V){V&&R(e),N&&N.d(),I=!1,Or(A)}}}function Cy(t){let e,i;return{c(){e=Z("span"),this.h()},l(s){e=G(s,"SPAN",{class:!0,style:!0}),J(e).forEach(R),this.h()},h(){z(e,"class","rangeBar"),z(e,"style",i=t[29]+": "+t[33](t[30])+"%; "+t[28]+": "+t[34](t[30])+"%;")},m(s,u){Oe(s,e,u)},p(s,u){u[0]&1879048192&&i!==(i=s[29]+": "+s[33](s[30])+"%; "+s[28]+": "+s[34](s[30])+"%;")&&z(e,"style",i)},d(s){s&&R(e)}}}function Py(t){let e,i;return e=new YA({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[29],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[25],percentOf:t[24],moveHandle:t[32],fixFloat:t[31],normalisedClient:xf}}),{c(){Ct(e.$$.fragment)},l(s){At(e.$$.fragment,s)},m(s,u){Tt(e,s,u),i=!0},p(s,u){const f={};u[0]&1&&(f.values=s[0]),u[0]&8&&(f.min=s[3]),u[0]&16&&(f.max=s[4]),u[0]&32&&(f.step=s[5]),u[0]&4&&(f.range=s[2]),u[0]&64&&(f.vertical=s[6]),u[0]&256&&(f.reversed=s[8]),u[0]&536870912&&(f.orientationStart=s[29]),u[0]&512&&(f.hoverable=s[9]),u[0]&1024&&(f.disabled=s[10]),u[0]&8192&&(f.all=s[13]),u[0]&16384&&(f.first=s[14]),u[0]&32768&&(f.last=s[15]),u[0]&65536&&(f.rest=s[16]),u[0]&4096&&(f.pipstep=s[12]),u[0]&262144&&(f.prefix=s[18]),u[0]&524288&&(f.suffix=s[19]),u[0]&1048576&&(f.formatter=s[20]),u[0]&33554432&&(f.focus=s[25]),u[0]&16777216&&(f.percentOf=s[24]),e.$set(f)},i(s){i||(Ve(e.$$.fragment,s),i=!0)},o(s){Xe(e.$$.fragment,s),i=!1},d(s){It(e,s)}}}function JA(t){let e,i,s,u,f,d,o=xr(t[0]),_=[];for(let S=0;S<o.length;S+=1)_[S]=Ay(Ey(t,o,S));let v=t[2]&&Cy(t),E=t[11]&&Py(t);return{c(){e=Z("div");for(let S=0;S<_.length;S+=1)_[S].c();i=we(),v&&v.c(),s=we(),E&&E.c(),this.h()},l(S){e=G(S,"DIV",{id:!0,role:!0,class:!0});var I=J(e);for(let A=0;A<_.length;A+=1)_[A].l(I);i=xe(I),v&&v.l(I),s=xe(I),E&&E.l(I),I.forEach(R),this.h()},h(){z(e,"id",t[17]),z(e,"role","none"),z(e,"class","rangeSlider"),On(e,"range",t[2]),On(e,"disabled",t[10]),On(e,"hoverable",t[9]),On(e,"vertical",t[6]),On(e,"reversed",t[8]),On(e,"focus",t[25]),On(e,"min",t[2]==="min"),On(e,"max",t[2]==="max"),On(e,"pips",t[11]),On(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(S,I){Oe(S,e,I);for(let A=0;A<_.length;A+=1)_[A]&&_[A].m(e,null);P(e,i),v&&v.m(e,null),P(e,s),E&&E.m(e,null),t[51](e),u=!0,f||(d=[bt(window,"mousedown",t[40]),bt(window,"touchstart",t[40]),bt(window,"mousemove",t[41]),bt(window,"touchmove",t[41]),bt(window,"mouseup",t[42]),bt(window,"touchend",t[43]),bt(window,"keydown",t[44]),bt(e,"mousedown",t[38]),bt(e,"mouseup",t[39]),bt(e,"touchstart",jc(t[38])),bt(e,"touchend",jc(t[39]))],f=!0)},p(S,I){if(I[0]&1869350109|I[1]&112){o=xr(S[0]);let A;for(A=0;A<o.length;A+=1){const N=Ey(S,o,A);_[A]?_[A].p(N,I):(_[A]=Ay(N),_[A].c(),_[A].m(e,i))}for(;A<_.length;A+=1)_[A].d(1);_.length=o.length}S[2]?v?v.p(S,I):(v=Cy(S),v.c(),v.m(e,s)):v&&(v.d(1),v=null),S[11]?E?(E.p(S,I),I[0]&2048&&Ve(E,1)):(E=Py(S),E.c(),Ve(E,1),E.m(e,null)):E&&(lr(),Xe(E,1,1,()=>{E=null}),ur()),(!u||I[0]&131072)&&z(e,"id",S[17]),(!u||I[0]&4)&&On(e,"range",S[2]),(!u||I[0]&1024)&&On(e,"disabled",S[10]),(!u||I[0]&512)&&On(e,"hoverable",S[9]),(!u||I[0]&64)&&On(e,"vertical",S[6]),(!u||I[0]&256)&&On(e,"reversed",S[8]),(!u||I[0]&33554432)&&On(e,"focus",S[25]),(!u||I[0]&4)&&On(e,"min",S[2]==="min"),(!u||I[0]&4)&&On(e,"max",S[2]==="max"),(!u||I[0]&2048)&&On(e,"pips",S[11]),(!u||I[0]&122880)&&On(e,"pip-labels",S[13]==="label"||S[14]==="label"||S[15]==="label"||S[16]==="label")},i(S){u||(Ve(E),u=!0)},o(S){Xe(E),u=!1},d(S){S&&R(e),Ca(_,S),v&&v.d(),E&&E.d(),t[51](null),f=!1,Or(d)}}}function My(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function xf(t){return t.type.includes("touch")?t.touches[0]||t.changedTouches[0]:t}function zy(t){return`${t}`.replace(/<[^>]*>/g,"")}function QA(t,e,i){let s,u,f,d,o,_,v=nr,E=()=>(v(),v=tw(Dt,He=>i(30,_=He)),Dt);t.$$.on_destroy.push(()=>v());let{slider:S=void 0}=e,{range:I=!1}=e,{pushy:A=!1}=e,{min:N=0}=e,{max:V=100}=e,{step:j=1}=e,{values:W=[(V+N)/2]}=e,{vertical:K=!1}=e,{float:ne=!1}=e,{reversed:Y=!1}=e,{hoverable:re=!0}=e,{disabled:Q=!1}=e,{pips:se=!1}=e,{pipstep:oe=void 0}=e,{all:Te=void 0}=e,{first:fe=void 0}=e,{last:ee=void 0}=e,{rest:ge=void 0}=e,{id:pe=void 0}=e,{prefix:ye=""}=e,{suffix:de=""}=e,{formatter:Ne=(He,pt,dn)=>He}=e,{handleFormatter:Ge=Ne}=e,{ariaLabels:Le=[]}=e,{precision:Me=2}=e,{springValues:$e={stiffness:.15,damping:.4}}=e;const ht=Jf();let ut=0,Fe=!1,ze=!1,gt=!1,Zt=!1,an=W.length-1,yn,sn,Dt;const $t=He=>parseFloat((+He).toFixed(Me));function ct(He){const pt=S.querySelectorAll(".handle"),dn=Array.prototype.includes.call(pt,He),lt=Array.prototype.some.call(pt,en=>en.contains(He));return dn||lt}function xt(He){return I==="min"||I==="max"?He.slice(0,1):I?He.slice(0,2):He}function wt(){return S.getBoundingClientRect()}function Wt(He){const pt=wt();let dn=0,lt=0,en=0;K?(dn=He.clientY-pt.top,lt=dn/pt.height*100,lt=Y?lt:100-lt):(dn=He.clientX-pt.left,lt=dn/pt.width*100,lt=Y?100-lt:lt),en=(V-N)/100*lt+N;let tn;return I===!0&&W[0]===W[1]?en>W[1]?1:0:(tn=W.indexOf([...W].sort((wr,mr)=>Math.abs(en-wr)-Math.abs(en-mr))[0]),tn)}function Qt(He){const pt=wt();let dn=0,lt=0,en=0;K?(dn=He.clientY-pt.top,lt=dn/pt.height*100,lt=Y?lt:100-lt):(dn=He.clientX-pt.left,lt=dn/pt.width*100,lt=Y?100-lt:lt),en=(V-N)/100*lt+N,Ht(an,en)}function Ht(He,pt){return pt=f(pt),typeof He>"u"&&(He=an),I&&(He===0&&pt>W[1]?A?i(0,W[1]=pt,W):pt=W[1]:He===1&&pt<W[0]&&(A?i(0,W[0]=pt,W):pt=W[0])),W[He]!==pt&&i(0,W[He]=pt,W),sn!==pt&&(vt(),sn=pt),pt}function kt(He){return I==="min"?0:He[0]}function dt(He){return I==="max"?0:I==="min"?100-He[0]:100-He[1]}function be(He){Zt&&(i(25,Fe=!1),ze=!1,i(26,gt=!1))}function Et(He){Q||(i(27,an=My(He.target)),i(25,Fe=!0))}function Ut(He){if(!Q){const pt=My(He.target);let dn=He.ctrlKey||He.metaKey||He.shiftKey?j*10:j,lt=!1;switch(He.key){case"PageDown":dn*=10;case"ArrowRight":case"ArrowUp":Ht(pt,W[pt]+dn),lt=!0;break;case"PageUp":dn*=10;case"ArrowLeft":case"ArrowDown":Ht(pt,W[pt]-dn),lt=!0;break;case"Home":Ht(pt,N),lt=!0;break;case"End":Ht(pt,V),lt=!0;break}lt&&(He.preventDefault(),He.stopPropagation())}}function _t(He){if(!Q){const pt=He.target,dn=xf(He);i(25,Fe=!0),ze=!0,i(26,gt=!0),i(27,an=Wt(dn)),yn=sn=f(W[an]),Yn(),He.type==="touchstart"&&!pt.matches(".pipVal")&&Qt(dn)}}function zt(He){He.type==="touchend"&&rr(),i(26,gt=!1)}function gn(He){Zt=!1,Fe&&He.target!==S&&!S.contains(He.target)&&i(25,Fe=!1)}function Mn(He){Q||ze&&Qt(xf(He))}function Hn(He){if(!Q){const pt=He.target;ze&&((pt===S||S.contains(pt))&&(i(25,Fe=!0),!ct(pt)&&!pt.matches(".pipVal")&&Qt(xf(He))),rr())}ze=!1,i(26,gt=!1)}function Kn(He){ze=!1,i(26,gt=!1)}function br(He){Q||(He.target===S||S.contains(He.target))&&(Zt=!0)}function Yn(){!Q&&ht("start",{activeHandle:an,value:yn,values:W.map(He=>f(He))})}function rr(){!Q&&ht("stop",{activeHandle:an,startValue:yn,value:W[an],values:W.map(He=>f(He))})}function vt(){!Q&&ht("change",{activeHandle:an,startValue:yn,previousValue:typeof sn>"u"?yn:sn,value:W[an],values:W.map(He=>f(He))})}function Vn(He){Cn[He?"unshift":"push"](()=>{S=He,i(1,S)})}return t.$$set=He=>{"slider"in He&&i(1,S=He.slider),"range"in He&&i(2,I=He.range),"pushy"in He&&i(45,A=He.pushy),"min"in He&&i(3,N=He.min),"max"in He&&i(4,V=He.max),"step"in He&&i(5,j=He.step),"values"in He&&i(0,W=He.values),"vertical"in He&&i(6,K=He.vertical),"float"in He&&i(7,ne=He.float),"reversed"in He&&i(8,Y=He.reversed),"hoverable"in He&&i(9,re=He.hoverable),"disabled"in He&&i(10,Q=He.disabled),"pips"in He&&i(11,se=He.pips),"pipstep"in He&&i(12,oe=He.pipstep),"all"in He&&i(13,Te=He.all),"first"in He&&i(14,fe=He.first),"last"in He&&i(15,ee=He.last),"rest"in He&&i(16,ge=He.rest),"id"in He&&i(17,pe=He.id),"prefix"in He&&i(18,ye=He.prefix),"suffix"in He&&i(19,de=He.suffix),"formatter"in He&&i(20,Ne=He.formatter),"handleFormatter"in He&&i(21,Ge=He.handleFormatter),"ariaLabels"in He&&i(22,Le=He.ariaLabels),"precision"in He&&i(46,Me=He.precision),"springValues"in He&&i(47,$e=He.springValues)},t.$$.update=()=>{if(t.$$.dirty[0]&24&&i(50,u=function(He){return He<=N?N:He>=V?V:He}),t.$$.dirty[0]&56|t.$$.dirty[1]&524288&&i(49,f=function(He){if(He<=N)return $t(N);if(He>=V)return $t(V);He=$t(He);let pt=(He-N)%j,dn=He-pt;return Math.abs(pt)*2>=j&&(dn+=pt>0?j:-j),dn=u(dn),$t(dn)}),t.$$.dirty[0]&24&&i(24,s=function(He){let pt=(He-N)/(V-N)*100;return isNaN(pt)||pt<=0?0:pt>=100?100:$t(pt)}),t.$$.dirty[0]&29360153|t.$$.dirty[1]&458752){Array.isArray(W)||(i(0,W=[(V+N)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)"));const He=xt(W.map(pt=>f(pt)));(W.length!==He.length||!W.every((pt,dn)=>$t(pt)===He[dn]))&&i(0,W=He),ut!==W.length?E(i(23,Dt=Dw(W.map(pt=>s(pt)),$e))):Dt.set(W.map(pt=>s(pt))),i(48,ut=W.length),W.length>1&&!Array.isArray(Le)&&console.warn("'ariaLabels' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")}t.$$.dirty[0]&320&&i(29,d=K?Y?"top":"bottom":Y?"right":"left"),t.$$.dirty[0]&320&&i(28,o=K?Y?"bottom":"top":Y?"left":"right")},[W,S,I,N,V,j,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Dt,s,Fe,gt,an,o,d,_,$t,Ht,kt,dt,be,Et,Ut,_t,zt,gn,Mn,Hn,Kn,br,A,Me,$e,ut,f,u,Vn]}class Qm extends Pr{constructor(e){super(),Mr(this,e,QA,JA,Cr,{slider:1,range:2,pushy:45,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,ariaLabels:22,precision:46,springValues:47},null,[-1,-1,-1])}}function Dy(t,e,i){const s=t.slice();return s[2]=e[i][0],s[3]=e[i][1],s}function Ly(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function Ry(t){let e,i=xr(Object.entries(t[0].params.POI).filter(Ny)),s=[];for(let u=0;u<i.length;u+=1)s[u]=Oy(Dy(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f&1){i=xr(Object.entries(u[0].params.POI).filter(Ny));let d;for(d=0;d<i.length;d+=1){const o=Dy(u,i,d);s[d]?s[d].p(o,f):(s[d]=Oy(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function By(t){let e,i,s,u,f,d,o,_,v=t[3].displayName+"",E,S,I,A,N,V,j,W=t[3].name+"",K,ne,Y,re=t[3].by_bike.distance.toFixed(0)+"",Q,se,oe;return{c(){e=Z("div"),i=Z("div"),s=Z("img"),d=we(),o=Z("div"),_=Z("p"),E=Mt(v),S=we(),I=Z("hr"),A=we(),N=Z("br"),V=we(),j=Z("p"),K=Mt(W),ne=we(),Y=Z("p"),Q=Mt(re),se=Mt(" m"),oe=we(),this.h()},l(Te){e=G(Te,"DIV",{class:!0});var fe=J(e);i=G(fe,"DIV",{class:!0});var ee=J(i);s=G(ee,"IMG",{src:!0,alt:!0}),ee.forEach(R),d=xe(fe),o=G(fe,"DIV",{class:!0});var ge=J(o);_=G(ge,"P",{class:!0});var pe=J(_);E=Pt(pe,v),pe.forEach(R),S=xe(ge),I=G(ge,"HR",{class:!0}),A=xe(ge),N=G(ge,"BR",{}),V=xe(ge),j=G(ge,"P",{class:!0});var ye=J(j);K=Pt(ye,W),ye.forEach(R),ne=xe(ge),Y=G(ge,"P",{class:!0});var de=J(Y);Q=Pt(de,re),se=Pt(de," m"),de.forEach(R),ge.forEach(R),oe=xe(fe),fe.forEach(R),this.h()},h(){Rl(s.src,u="/images/POI/"+t[3].icon)||z(s,"src",u),z(s,"alt",f=t[3].name),z(i,"class","image_"),z(_,"class","name"),z(I,"class","hr_green"),z(j,"class","name2"),z(Y,"class","dist font-extrabold"),z(o,"class","POI_opis"),z(e,"class","grid_content")},m(Te,fe){Oe(Te,e,fe),P(e,i),P(i,s),P(e,d),P(e,o),P(o,_),P(_,E),P(o,S),P(o,I),P(o,A),P(o,N),P(o,V),P(o,j),P(j,K),P(o,ne),P(o,Y),P(Y,Q),P(Y,se),P(e,oe)},p(Te,fe){fe&1&&!Rl(s.src,u="/images/POI/"+Te[3].icon)&&z(s,"src",u),fe&1&&f!==(f=Te[3].name)&&z(s,"alt",f),fe&1&&v!==(v=Te[3].displayName+"")&&Zn(E,v),fe&1&&W!==(W=Te[3].name+"")&&Zn(K,W),fe&1&&re!==(re=Te[3].by_bike.distance.toFixed(0)+"")&&Zn(Q,re)},d(Te){Te&&R(e)}}}function Oy(t){let e,i=t[3].by_bike.distance<=2e3&&t[3].by_bike.distance>1&&By(t);return{c(){i&&i.c(),e=vn()},l(s){i&&i.l(s),e=vn()},m(s,u){i&&i.m(s,u),Oe(s,e,u)},p(s,u){s[3].by_bike.distance<=2e3&&s[3].by_bike.distance>1?i?i.p(s,u):(i=By(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(s){s&&R(e),i&&i.d(s)}}}function eC(t){var $e;let e,i,s,u,f,d,o,_=`<div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">12</span> Ocena atrakcyjności otoczenia</h2> <p class="tabText">Na poniszej grafice przedstawiono kluczowe miejsca uytku publicznego w pobliu danej
						lokalizacji. Wykaz dostarcza informację o dzielące je od nieruchomości odległości.
						Poniej wskaźnika atrakcyjności okolicy widać współczynnik POI.</p></div>`,v,E,S,I,A='<div><img src="/images/iconstar.svg" class="star" alt="ocena lokalizacji"/></div> <div><hr class="hr-green"/> <p class="textobok">Wskaźnik odznaczający<br/>poziom atrakcyjności<br/>okolicy</p></div>',N,V,j,W,K,ne=`<p>Powyższy współczynnik to wynik zestawienia i analizy strategicznych punktów użyteczności
					publicznej w danym obszarze. Każde takie miejsce zostało zweryfikowane pod względem
					stopnia Istotności i pożyteczności w codziennym życiu. Analiza ta obejmuje obszar w
					obrębie do 2 km od nieruchomosci, co oznacza, ze im wyższy wskaźnik, tym znaczenie punktów
					usytuowanych w okolicy jest większe.</p>`,Y,re,Q,se,oe,Te,fe='<div class="full-width"><h2 class="title_medium noselect">Kluczowe punkty POI</h2></div>',ee,ge,pe,ye,de,Ne="5",Ge;i=new Mo({});let Le=!t[0].params&&Ly();j=new Qm({props:{range:"min",values:[5],max:"5",pips:!0,all:"label"}});let Me=(($e=t[0].params)==null?void 0:$e.POI)&&t[1]==!0&&Ry(t);return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),Le&&Le.c(),u=we(),f=Z("div"),d=Z("div"),o=Z("div"),o.innerHTML=_,v=we(),E=Z("div"),S=Z("div"),I=Z("div"),I.innerHTML=A,N=we(),V=Z("div"),Ct(j.$$.fragment),W=we(),K=Z("div"),K.innerHTML=ne,Y=we(),re=Z("br"),Q=Z("br"),se=Z("br"),oe=we(),Te=Z("div"),Te.innerHTML=fe,ee=we(),ge=Z("div"),pe=Z("div"),Me&&Me.c(),ye=we(),de=Z("div"),de.textContent=Ne,this.h()},l(ht){e=G(ht,"DIV",{class:!0});var ut=J(e);At(i.$$.fragment,ut),s=xe(ut),Le&&Le.l(ut),u=xe(ut),f=G(ut,"DIV",{class:!0});var Fe=J(f);d=G(Fe,"DIV",{class:!0});var ze=J(d);o=G(ze,"DIV",{class:!0,"data-svelte-h":!0}),Vt(o)!=="svelte-1yik2er"&&(o.innerHTML=_),v=xe(ze),E=G(ze,"DIV",{class:!0});var gt=J(E);S=G(gt,"DIV",{class:!0});var Zt=J(S);I=G(Zt,"DIV",{class:!0,"data-svelte-h":!0}),Vt(I)!=="svelte-1ub16tj"&&(I.innerHTML=A),N=xe(Zt),V=G(Zt,"DIV",{class:!0});var an=J(V);At(j.$$.fragment,an),an.forEach(R),Zt.forEach(R),gt.forEach(R),W=xe(ze),K=G(ze,"DIV",{class:!0,"data-svelte-h":!0}),Vt(K)!=="svelte-h7od8r"&&(K.innerHTML=ne),Y=xe(ze),re=G(ze,"BR",{}),Q=G(ze,"BR",{}),se=G(ze,"BR",{}),oe=xe(ze),Te=G(ze,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Te)!=="svelte-1td51u2"&&(Te.innerHTML=fe),ee=xe(ze),ge=G(ze,"DIV",{class:!0});var yn=J(ge);pe=G(yn,"DIV",{class:!0});var sn=J(pe);Me&&Me.l(sn),sn.forEach(R),yn.forEach(R),ze.forEach(R),ye=xe(Fe),de=G(Fe,"DIV",{class:!0,"data-svelte-h":!0}),Vt(de)!=="svelte-8y6s64"&&(de.textContent=Ne),Fe.forEach(R),ut.forEach(R),this.h()},h(){z(o,"class","grid_content noselect mb-20"),z(I,"class","grid_content noselect"),z(V,"class","grid_content noselect"),z(S,"class","full-width grid_content"),z(E,"class","grid_content noselect"),z(K,"class","full-width grid_content background-blur"),z(Te,"class","grid_content noselect mb-20"),z(pe,"class","POI"),z(ge,"class","full-width grid_content"),z(d,"class","containerFlex noselect"),z(de,"class","pageNumber right"),z(f,"class","page_content"),z(e,"class","content-block section page_05")},m(ht,ut){Oe(ht,e,ut),Tt(i,e,null),P(e,s),Le&&Le.m(e,null),P(e,u),P(e,f),P(f,d),P(d,o),P(d,v),P(d,E),P(E,S),P(S,I),P(S,N),P(S,V),Tt(j,V,null),P(d,W),P(d,K),P(d,Y),P(d,re),P(d,Q),P(d,se),P(d,oe),P(d,Te),P(d,ee),P(d,ge),P(ge,pe),Me&&Me.m(pe,null),P(f,ye),P(f,de),Ge=!0},p(ht,[ut]){var Fe;ht[0].params?Le&&(lr(),Xe(Le,1,1,()=>{Le=null}),ur()):Le?ut&1&&Ve(Le,1):(Le=Ly(),Le.c(),Ve(Le,1),Le.m(e,u)),(Fe=ht[0].params)!=null&&Fe.POI&&ht[1]==!0?Me?Me.p(ht,ut):(Me=Ry(ht),Me.c(),Me.m(pe,null)):Me&&(Me.d(1),Me=null)},i(ht){Ge||(Ve(i.$$.fragment,ht),Ve(Le),Ve(j.$$.fragment,ht),Ge=!0)},o(ht){Xe(i.$$.fragment,ht),Xe(Le),Xe(j.$$.fragment,ht),Ge=!1},d(ht){ht&&R(e),It(i),Le&&Le.d(),It(j),Me&&Me.d()}}}const Ny=([t,e])=>[];function tC(t,e,i){let s,u;return Ur(t,Xt,f=>i(0,s=f)),Ur(t,qc,f=>i(1,u=f)),ys(async()=>{}),[s,u]}class nC extends Pr{constructor(e){super(),Mr(this,e,tC,eC,Cr,{})}}var Kf={exports:{}};/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */Kf.exports;(function(t,e){(function(){var i=[],s={},u=40,f=/\w*$/,d=/^\s*function[ \n\r\t]+\w/,o=/\bthis\b/,_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],v="[object Arguments]",E="[object Array]",S="[object Boolean]",I="[object Date]",A="[object Error]",N="[object Function]",V="[object Number]",j="[object Object]",W="[object RegExp]",K="[object String]",ne={};ne[N]=!1,ne[v]=ne[E]=ne[S]=ne[I]=ne[V]=ne[j]=ne[W]=ne[K]=!0;var Y={configurable:!1,enumerable:!1,value:null,writable:!1},re={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Q={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},se=Q[typeof window]&&window||this,oe=Q.object&&e&&!e.nodeType&&e,Te=Q.object&&t&&!t.nodeType&&t,fe=Te&&Te.exports===oe&&oe,ee=Q[typeof cf]&&cf;ee&&(ee.global===ee||ee.window===ee)&&(se=ee);function ge(){return i.pop()||[]}function pe(te){return typeof te.toString!="function"&&typeof(te+"")=="string"}function ye(te){te.length=0,i.length<u&&i.push(te)}function de(te,ue,_e){ue||(ue=0),typeof _e>"u"&&(_e=te?te.length:0);for(var qe=-1,Je=_e-ue||0,Qe=Array(Je<0?0:Je);++qe<Je;)Qe[qe]=te[ue+qe];return Qe}var Ne=[],Ge=Error.prototype,Le=Object.prototype,Me=String.prototype,$e=Le.toString,ht=RegExp("^"+String($e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ut=Function.prototype.toString,Fe=gn(Fe=Object.getPrototypeOf)&&Fe,ze=Le.hasOwnProperty,gt=Ne.push,Zt=Le.propertyIsEnumerable,an=Ne.unshift,yn=function(){try{var te={},ue=gn(ue=Object.defineProperty)&&ue,_e=ue(te,te,te)&&ue}catch{}return _e}(),sn=gn(sn=Object.create)&&sn,Dt=gn(Dt=Array.isArray)&&Dt,$t=gn($t=Object.keys)&&$t,ct={};ct[E]=Array,ct[S]=Boolean,ct[I]=Date,ct[N]=Function,ct[j]=Object,ct[V]=Number,ct[W]=RegExp,ct[K]=String;var xt={};xt[E]=xt[I]=xt[V]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},xt[S]=xt[K]={constructor:!0,toString:!0,valueOf:!0},xt[A]=xt[N]=xt[W]={constructor:!0,toString:!0},xt[j]={constructor:!0},function(){for(var te=_.length;te--;){var ue=_[te];for(var _e in xt)ze.call(xt,_e)&&!ze.call(xt[_e],ue)&&(xt[_e][ue]=!1)}}();function wt(){}var Wt=wt.support={};(function(){var te=function(){this.x=1},ue={0:1,length:1},_e=[];te.prototype={valueOf:1,y:1};for(var qe in new te)_e.push(qe);for(qe in arguments);Wt.argsClass=$e.call(arguments)==v,Wt.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),Wt.enumErrorProps=Zt.call(Ge,"message")||Zt.call(Ge,"name"),Wt.enumPrototypes=Zt.call(te,"prototype"),Wt.funcDecomp=!gn(se.WinRTError)&&o.test(function(){return this}),Wt.funcNames=typeof Function.name=="string",Wt.nonEnumArgs=qe!=0,Wt.nonEnumShadows=!/valueOf/.test(_e),Wt.ownLast=_e[0]!="x",Wt.spliceObjects=(Ne.splice.call(ue,0,1),!1),Wt.unindexedChars="x"+Object("x")[0]!="xx";try{Wt.nodeClass=!($e.call(document)==j&&!({toString:0}+""))}catch{Wt.nodeClass=!0}})(1);var Qt=function(te){var ue="var index, iterable = "+te.firstArg+", result = "+te.init+`;
if (!iterable) return result;
`+te.top+";";te.array?(ue+=`
var length = iterable.length; index = -1;
if (`+te.array+") {  ",Wt.unindexedChars&&(ue+=`
  if (isString(iterable)) {
    iterable = iterable.split('')
  }  `),ue+=`
  while (++index < length) {
    `+te.loop+`;
  }
}
else {  `):Wt.nonEnumArgs&&(ue+=`
  var length = iterable.length; index = -1;
  if (length && isArguments(iterable)) {
    while (++index < length) {
      index += '';
      `+te.loop+`;
    }
  } else {  `),Wt.enumPrototypes&&(ue+=`
  var skipProto = typeof iterable == 'function';
  `),Wt.enumErrorProps&&(ue+=`
  var skipErrorProps = iterable === errorProto || iterable instanceof Error;
  `);var _e=[];if(Wt.enumPrototypes&&_e.push('!(skipProto && index == "prototype")'),Wt.enumErrorProps&&_e.push('!(skipErrorProps && (index == "message" || index == "name"))'),te.useHas&&te.keys)ue+=`
  var ownIndex = -1,
      ownProps = objectTypes[typeof iterable] && keys(iterable),
      length = ownProps ? ownProps.length : 0;

  while (++ownIndex < length) {
    index = ownProps[ownIndex];
`,_e.length&&(ue+="    if ("+_e.join(" && ")+`) {
  `),ue+=te.loop+";    ",_e.length&&(ue+=`
    }`),ue+=`
  }  `;else if(ue+=`
  for (index in iterable) {
`,te.useHas&&_e.push("hasOwnProperty.call(iterable, index)"),_e.length&&(ue+="    if ("+_e.join(" && ")+`) {
  `),ue+=te.loop+";    ",_e.length&&(ue+=`
    }`),ue+=`
  }    `,Wt.nonEnumShadows){for(ue+=`

  if (iterable !== objectProto) {
    var ctor = iterable.constructor,
        isProto = iterable === (ctor && ctor.prototype),
        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),
        nonEnum = nonEnumProps[className];
      `,k=0;k<7;k++)ue+=`
    index = '`+te.shadowedProps[k]+`';
    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))`,te.useHas||(ue+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),ue+=`) {
      `+te.loop+`;
    }      `;ue+=`
  }    `}return(te.array||Wt.nonEnumArgs)&&(ue+=`
}`),ue+=te.bottom+`;
return result`,ue};function Ht(te){var ue=te[0],_e=te[2],qe=te[4];function Je(){if(_e){var Qe=de(_e);gt.apply(Qe,arguments)}if(this instanceof Je){var Nt=dt(ue.prototype),Jt=ue.apply(Nt,Qe||arguments);return on(Jt)?Jt:Nt}return ue.apply(qe,Qe||arguments)}return Mn(Je,te),Je}function kt(te,ue,_e,qe,Je){if(_e){var Qe=_e(te);if(typeof Qe<"u")return Qe}var Nt=on(te);if(Nt){var Jt=$e.call(te);if(!ne[Jt]||!Wt.nodeClass&&pe(te))return te;var Lt=ct[Jt];switch(Jt){case S:case I:return new Lt(+te);case V:case K:return new Lt(te);case W:return Qe=Lt(te.source,f.exec(te)),Qe.lastIndex=te.lastIndex,Qe}}else return te;var qt=br(te);if(ue){var cn=!qe;qe||(qe=ge()),Je||(Je=ge());for(var ln=qe.length;ln--;)if(qe[ln]==te)return Je[ln];Qe=qt?Lt(te.length):{}}else Qe=qt?de(te):dn({},te);return qt&&(ze.call(te,"index")&&(Qe.index=te.index),ze.call(te,"input")&&(Qe.input=te.input)),ue&&(qe.push(te),Je.push(Qe),(qt?pt:tn)(te,function(In,Ln){Qe[Ln]=kt(In,ue,_e,qe,Je)}),cn&&(ye(qe),ye(Je))),Qe}function dt(te,ue){return on(te)?sn(te):{}}sn||(dt=function(){function te(){}return function(ue){if(on(ue)){te.prototype=ue;var _e=new te;te.prototype=null}return _e||se.Object()}}());function be(te,ue,_e){if(typeof te!="function")return Ce;if(typeof ue>"u"||!("prototype"in te))return te;var qe=te.__bindData__;if(typeof qe>"u"&&(Wt.funcNames&&(qe=!te.name),qe=qe||!Wt.funcDecomp,!qe)){var Je=ut.call(te);Wt.funcNames||(qe=!d.test(Je)),qe||(qe=o.test(Je),Mn(te,qe))}if(qe===!1||qe!==!0&&qe[1]&1)return te;switch(_e){case 1:return function(Qe){return te.call(ue,Qe)};case 2:return function(Qe,Nt){return te.call(ue,Qe,Nt)};case 3:return function(Qe,Nt,Jt){return te.call(ue,Qe,Nt,Jt)};case 4:return function(Qe,Nt,Jt,Lt){return te.call(ue,Qe,Nt,Jt,Lt)}}return Ae(te,ue)}function Et(te){var ue=te[0],_e=te[1],qe=te[2],Je=te[3],Qe=te[4],Nt=te[5],Jt=_e&1,Lt=_e&2,qt=_e&4,cn=_e&8,ln=ue;function In(){var Ln=Jt?Qe:this;if(qe){var Tn=de(qe);gt.apply(Tn,arguments)}if((Je||qt)&&(Tn||(Tn=de(arguments)),Je&&gt.apply(Tn,Je),qt&&Tn.length<Nt))return _e|=16,Et([ue,cn?_e:_e&-4,Tn,null,Qe,Nt]);if(Tn||(Tn=arguments),Lt&&(ue=Ln[ln]),this instanceof In){Ln=dt(ue.prototype);var hr=ue.apply(Ln,Tn);return on(hr)?hr:Ln}return ue.apply(Ln,Tn)}return Mn(In,te),In}function Ut(te,ue,_e,qe,Je){(br(ue)?ae:tn)(ue,function(Qe,Nt){var Jt,Lt,qt=Qe,cn=te[Nt];if(Qe&&((Lt=br(Qe))||Xn(Qe))){for(var ln=qe.length;ln--;)if(Jt=qe[ln]==Qe){cn=Je[ln];break}if(!Jt){var In;_e&&(qt=_e(cn,Qe),(In=typeof qt<"u")&&(cn=qt)),In||(cn=Lt?br(cn)?cn:[]:Xn(cn)?cn:{}),qe.push(Qe),Je.push(cn),In||Ut(cn,Qe,_e,qe,Je)}}else _e&&(qt=_e(cn,Qe),typeof qt>"u"&&(qt=Qe)),typeof qt<"u"&&(cn=qt);te[Nt]=cn})}function _t(te,ue,_e,qe,Je,Qe){var Nt=ue&1,Jt=ue&2,Lt=ue&4,qt=ue&16,cn=ue&32;if(!Jt&&!mr(te))throw new TypeError;qt&&!_e.length&&(ue&=-17,qt=_e=!1),cn&&!qe.length&&(ue&=-33,cn=qe=!1);var ln=te&&te.__bindData__;if(ln&&ln!==!0)return ln=de(ln),ln[2]&&(ln[2]=de(ln[2])),ln[3]&&(ln[3]=de(ln[3])),Nt&&!(ln[1]&1)&&(ln[4]=Je),!Nt&&ln[1]&1&&(ue|=8),Lt&&!(ln[1]&4)&&(ln[5]=Qe),qt&&gt.apply(ln[2]||(ln[2]=[]),_e),cn&&an.apply(ln[3]||(ln[3]=[]),qe),ln[1]|=ue,_t.apply(null,ln);var In=ue==1||ue===17?Ht:Et;return In([te,ue,_e,qe,Je,Qe])}function zt(){re.shadowedProps=_,re.array=re.bottom=re.loop=re.top="",re.init="iterable",re.useHas=!0;for(var te,ue=0;te=arguments[ue];ue++)for(var _e in te)re[_e]=te[_e];var qe=re.args;re.firstArg=/^[^,]+/.exec(qe)[0];var Je=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+qe+`) {
`+Qt(re)+`
}`);return Je(be,A,Ge,ze,s,Kn,br,ke,re.keys,Le,Q,xt,K,Me,$e)}function gn(te){return typeof te=="function"&&ht.test(te)}var Mn=yn?function(te,ue){Y.value=ue,yn(te,"__bindData__",Y)}:je;function Hn(te){var ue,_e;return!(te&&$e.call(te)==j)||(ue=te.constructor,mr(ue)&&!(ue instanceof ue))||!Wt.argsClass&&Kn(te)||!Wt.nodeClass&&pe(te)?!1:Wt.ownLast?(en(te,function(qe,Je,Qe){return _e=ze.call(Qe,Je),!1}),_e!==!1):(en(te,function(qe,Je){_e=Je}),typeof _e>"u"||ze.call(te,_e))}function Kn(te){return te&&typeof te=="object"&&typeof te.length=="number"&&$e.call(te)==v||!1}Wt.argsClass||(Kn=function(te){return te&&typeof te=="object"&&typeof te.length=="number"&&ze.call(te,"callee")&&!Zt.call(te,"callee")||!1});var br=Dt||function(te){return te&&typeof te=="object"&&typeof te.length=="number"&&$e.call(te)==E||!1},Yn=zt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),rr=$t?function(te){return on(te)?Wt.enumPrototypes&&typeof te=="function"||Wt.nonEnumArgs&&te.length&&Kn(te)?Yn(te):$t(te):[]}:Yn,vt={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:rr,loop:"if (callback(iterable[index], index, collection) === false) return result"},Vn={args:"object, source, guard",top:`var args = arguments,
    argsIndex = 0,
    argsLength = typeof guard == 'number' ? 2 : args.length;
while (++argsIndex < argsLength) {
  iterable = args[argsIndex];
  if (iterable && objectTypes[typeof iterable]) {`,keys:rr,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:`  }
}`},He={top:`if (!objectTypes[typeof iterable]) return result;
`+vt.top,array:!1},pt=zt(vt),dn=zt(Vn,{top:Vn.top.replace(";",`;
if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {
  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);
} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {
  callback = args[--argsLength];
}`),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});function lt(te,ue,_e,qe){return typeof ue!="boolean"&&ue!=null&&(qe=_e,_e=ue,ue=!1),kt(te,ue,typeof _e=="function"&&be(_e,qe,1))}var en=zt(vt,He,{useHas:!1}),tn=zt(vt,He);function wr(te){var ue=!0;if(!te)return ue;var _e=$e.call(te),qe=te.length;return _e==E||_e==K||(Wt.argsClass?_e==v:Kn(te))||_e==j&&typeof qe=="number"&&mr(te.splice)?!qe:(tn(te,function(){return ue=!1}),ue)}function mr(te){return typeof te=="function"}mr(/x/)&&(mr=function(te){return typeof te=="function"&&$e.call(te)==N});function on(te){return!!(te&&Q[typeof te])}var Xn=Fe?function(te){if(!(te&&$e.call(te)==j)||!Wt.argsClass&&Kn(te))return!1;var ue=te.valueOf,_e=gn(ue)&&(_e=Fe(ue))&&Fe(_e);return _e?te==_e||Fe(te)==_e:Hn(te)}:Hn;function ke(te){return typeof te=="string"||te&&typeof te=="object"&&$e.call(te)==K||!1}function X(te){var ue=arguments,_e=2;if(!on(te))return te;if(typeof ue[2]!="number"&&(_e=ue.length),_e>3&&typeof ue[_e-2]=="function")var qe=be(ue[--_e-1],ue[_e--],2);else _e>2&&typeof ue[_e-1]=="function"&&(qe=ue[--_e]);for(var Je=de(arguments,1,_e),Qe=-1,Nt=ge(),Jt=ge();++Qe<_e;)Ut(te,Je[Qe],qe,Nt,Jt);return ye(Nt),ye(Jt),te}function ae(te,ue,_e){if(ue&&typeof _e>"u"&&br(te))for(var qe=-1,Je=te.length;++qe<Je&&ue(te[qe],qe,te)!==!1;);else pt(te,ue,_e);return te}function me(te){for(var ue=-1,_e=te?te.length:0,qe=[];++ue<_e;){var Je=te[ue];Je&&qe.push(Je)}return qe}function Ae(te,ue){return arguments.length>2?_t(te,17,de(arguments,2),null,ue):_t(te,1,null,null,ue)}function Ce(te){return te}function je(){}wt.assign=dn,wt.bind=Ae,wt.compact=me,wt.forEach=ae,wt.forIn=en,wt.forOwn=tn,wt.keys=rr,wt.merge=X,wt.each=ae,wt.extend=dn,wt.clone=lt,wt.identity=Ce,wt.isArguments=Kn,wt.isArray=br,wt.isEmpty=wr,wt.isFunction=mr,wt.isObject=on,wt.isPlainObject=Xn,wt.isString=ke,wt.noop=je,wt.VERSION="2.4.1",oe&&Te&&fe&&((Te.exports=wt)._=wt)}).call(cf)})(Kf,Kf.exports);var rC=Kf.exports,eg={},sd={};sd.RADIUS=6378137;sd.FLATTENING=1/298.257223563;sd.POLAR_RADIUS=63567523142e-4;var Fy=sd;eg.geometry=iC;eg.ring=bm;function iC(t){if(t.type==="Polygon")return Vy(t.coordinates);if(t.type==="MultiPolygon"){for(var e=0,i=0;i<t.coordinates.length;i++)e+=Vy(t.coordinates[i]);return e}else return null}function Vy(t){var e=0;if(t&&t.length>0){e+=Math.abs(bm(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(bm(t[i]))}return e}function bm(t){var e=0;if(t.length>2){for(var i,s,u=0;u<t.length-1;u++)i=t[u],s=t[u+1],e+=xp(s[0]-i[0])*(2+Math.sin(xp(i[1]))+Math.sin(xp(s[1])));e=e*Fy.RADIUS*Fy.RADIUS/2}return e}function xp(t){return t*Math.PI/180}var aC=eg,sC=xm;function xm(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(r2(xm,e)),t;case"Feature":return t.geometry=xm(t.geometry,e),t;case"Polygon":case"MultiPolygon":return oC(t,e);default:return t}}function r2(t,e){return function(i){return t(i,e)}}function oC(t,e){return t.type==="Polygon"?t.coordinates=$y(t.coordinates,e):t.type==="MultiPolygon"&&(t.coordinates=t.coordinates.map(r2($y,e))),t}function $y(t,e){e=!!e,t[0]=Uy(t[0],!e);for(var i=1;i<t.length;i++)t[i]=Uy(t[i],e);return t}function Uy(t,e){return lC(t)===e?t:t.reverse()}function lC(t){return aC.ring(t)>=0}const uC=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var cC=uC,vr=rC,hC=sC,wf={};cC.forEach(function(t){if(t.polygon==="all")wf[t.key]=!0;else{var e=t.polygon==="whitelist"?"included_values":"excluded_values",i={};t.values.forEach(function(s){i[s]=!0}),wf[t.key]={},wf[t.key][e]=i}});var Xf={};Xf=function(t,e){e=vr.merge({verbose:!1,flatProperties:!1,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:wf},e);var i;return typeof XMLDocument<"u"&&t instanceof XMLDocument||typeof XMLDocument>"u"&&t.childNodes?i=u(t):i=s(t),i;function s(o){var _=new Array,v=new Array,E=new Array;function S(Y){var re=vr.clone(Y);re.lat=Y.center.lat,re.lon=Y.center.lon,re.__is_center_placeholder=!0,_.push(re)}function I(Y){var re=vr.clone(Y);re.nodes=[];function Q(se,oe,Te){var fe={type:"node",id:"_"+re.type+"/"+re.id+"bounds"+Te,lat:se,lon:oe};re.nodes.push(fe.id),_.push(fe)}Q(re.bounds.minlat,re.bounds.minlon,1),Q(re.bounds.maxlat,re.bounds.minlon,2),Q(re.bounds.maxlat,re.bounds.maxlon,3),Q(re.bounds.minlat,re.bounds.maxlon,4),re.nodes.push(re.nodes[0]),re.__is_bounds_placeholder=!0,v.push(re)}function A(Y){function re(Q,se,oe){var Te={type:"node",id:oe,lat:Q,lon:se,__is_uninteresting:!0};_.push(Te)}vr.isArray(Y.nodes)||(Y.nodes=Y.geometry.map(function(Q){return Q!==null?"_anonymous@"+Q.lat+"/"+Q.lon:"_anonymous@unknown_location"})),Y.geometry.forEach(function(Q,se){Q&&re(Q.lat,Q.lon,Y.nodes[se])})}function N(Y){function re(se,oe,Te){var fe={type:"node",id:Te,lat:se,lon:oe};_.push(fe)}function Q(se,oe){if(v.some(function(ee){return ee.type=="way"&&ee.id==oe}))return;var Te={type:"way",id:oe,nodes:[]};function fe(ee,ge){var pe={type:"node",id:"_anonymous@"+ee+"/"+ge,lat:ee,lon:ge,__is_uninteresting:!0};Te.nodes.push(pe.id),_.push(pe)}se.forEach(function(ee){ee?fe(ee.lat,ee.lon):Te.nodes.push(void 0)}),v.push(Te)}Y.members.forEach(function(se,oe){se.type=="node"?se.lat&&re(se.lat,se.lon,se.ref):se.type=="way"&&se.geometry&&(se.ref="_fullGeom"+se.ref,Q(se.geometry,se.ref))})}for(var V=0;V<o.elements.length;V++)switch(o.elements[V].type){case"node":var j=o.elements[V];_.push(j);break;case"way":var W=vr.clone(o.elements[V]);W.nodes=vr.clone(W.nodes),v.push(W),W.center&&S(W),W.geometry?A(W):W.bounds&&I(W);break;case"relation":var K=vr.clone(o.elements[V]);K.members=vr.clone(K.members),E.push(K);var ne=K.members&&K.members.some(function(Y){return Y.type=="node"&&Y.lat||Y.type=="way"&&Y.geometry&&Y.geometry.length>0});K.center&&S(K),ne?N(K):K.bounds&&I(K);break}return f(_,v,E)}function u(o){var _=new Array,v=new Array,E=new Array;function S(K,ne,Y){K.hasAttribute(Y)&&(ne[Y]=K.getAttribute(Y))}function I(K,ne){var Y=vr.clone(K);S(ne,Y,"lat"),S(ne,Y,"lon"),Y.__is_center_placeholder=!0,_.push(Y)}function A(K,ne){var Y=vr.clone(K);Y.nodes=[];function re(Q,se,oe){var Te={type:"node",id:"_"+Y.type+"/"+Y.id+"bounds"+oe,lat:Q,lon:se};Y.nodes.push(Te.id),_.push(Te)}re(ne.getAttribute("minlat"),ne.getAttribute("minlon"),1),re(ne.getAttribute("maxlat"),ne.getAttribute("minlon"),2),re(ne.getAttribute("maxlat"),ne.getAttribute("maxlon"),3),re(ne.getAttribute("minlat"),ne.getAttribute("maxlon"),4),Y.nodes.push(Y.nodes[0]),Y.__is_bounds_placeholder=!0,v.push(Y)}function N(K,ne){function Y(re,Q,se){var oe={type:"node",id:se,lat:re,lon:Q,__is_uninteresting:!0};return _.push(oe),oe.id}vr.isArray(K.nodes)||(K.nodes=[],vr.each(ne,function(re,Q){K.nodes.push("_anonymous@"+re.getAttribute("lat")+"/"+re.getAttribute("lon"))})),vr.each(ne,function(re,Q){re.getAttribute("lat")&&Y(re.getAttribute("lat"),re.getAttribute("lon"),K.nodes[Q])})}function V(K,ne){function Y(Q,se,oe){var Te={type:"node",id:oe,lat:Q,lon:se};_.push(Te)}function re(Q,se){if(v.some(function(fe){return fe.type=="way"&&fe.id==se}))return;var oe={type:"way",id:se,nodes:[]};function Te(fe,ee){var ge={type:"node",id:"_anonymous@"+fe+"/"+ee,lat:fe,lon:ee,__is_uninteresting:!0};oe.nodes.push(ge.id),_.push(ge)}vr.each(Q,function(fe){fe.getAttribute("lat")?Te(fe.getAttribute("lat"),fe.getAttribute("lon")):oe.nodes.push(void 0)}),v.push(oe)}vr.each(ne,function(Q,se){K.members[se].type=="node"?Q.getAttribute("lat")&&Y(Q.getAttribute("lat"),Q.getAttribute("lon"),K.members[se].ref):K.members[se].type=="way"&&Q.getElementsByTagName("nd").length>0&&(K.members[se].ref="_fullGeom"+K.members[se].ref,re(Q.getElementsByTagName("nd"),K.members[se].ref))})}vr.each(o.getElementsByTagName("node"),function(K,ne){var Y={};vr.each(K.getElementsByTagName("tag"),function(Q){Y[Q.getAttribute("k")]=Q.getAttribute("v")});var re={type:"node"};S(K,re,"id"),S(K,re,"lat"),S(K,re,"lon"),S(K,re,"version"),S(K,re,"timestamp"),S(K,re,"changeset"),S(K,re,"uid"),S(K,re,"user"),vr.isEmpty(Y)||(re.tags=Y),_.push(re)});var j,W;return vr.each(o.getElementsByTagName("way"),function(K,ne){var Y={},re=[];vr.each(K.getElementsByTagName("tag"),function(oe){Y[oe.getAttribute("k")]=oe.getAttribute("v")});var Q=!1;vr.each(K.getElementsByTagName("nd"),function(oe,Te){var fe;(fe=oe.getAttribute("ref"))&&(re[Te]=fe),!Q&&oe.getAttribute("lat")&&(Q=!0)});var se={type:"way"};S(K,se,"id"),S(K,se,"version"),S(K,se,"timestamp"),S(K,se,"changeset"),S(K,se,"uid"),S(K,se,"user"),re.length>0&&(se.nodes=re),vr.isEmpty(Y)||(se.tags=Y),(j=K.getElementsByTagName("center")[0])&&I(se,j),Q?N(se,K.getElementsByTagName("nd")):(W=K.getElementsByTagName("bounds")[0])&&A(se,W),v.push(se)}),vr.each(o.getElementsByTagName("relation"),function(K,ne){var Y={},re=[];vr.each(K.getElementsByTagName("tag"),function(oe){Y[oe.getAttribute("k")]=oe.getAttribute("v")});var Q=!1;vr.each(K.getElementsByTagName("member"),function(oe,Te){re[Te]={},S(oe,re[Te],"ref"),S(oe,re[Te],"role"),S(oe,re[Te],"type"),(!Q&&re[Te].type=="node"&&oe.getAttribute("lat")||re[Te].type=="way"&&oe.getElementsByTagName("nd").length>0)&&(Q=!0)});var se={type:"relation"};S(K,se,"id"),S(K,se,"version"),S(K,se,"timestamp"),S(K,se,"changeset"),S(K,se,"uid"),S(K,se,"user"),re.length>0&&(se.members=re),vr.isEmpty(Y)||(se.tags=Y),(j=K.getElementsByTagName("center")[0])&&I(se,j),Q?V(se,K.getElementsByTagName("member")):(W=K.getElementsByTagName("bounds")[0])&&A(se,W),E.push(se)}),f(_,v,E)}function f(o,_,v){function E(Ge,Le){if(typeof Le!="object"&&(Le={}),typeof e.uninterestingTags=="function")return!e.uninterestingTags(Ge,Le);for(var Me in Ge)if(e.uninterestingTags[Me]!==!0&&!(Le[Me]===!0||Le[Me]===Ge[Me]))return!0;return!1}function S(Ge){var Le={timestamp:Ge.timestamp,version:Ge.version,changeset:Ge.changeset,user:Ge.user,uid:Ge.uid};for(var Me in Le)Le[Me]===void 0&&delete Le[Me];return Le}for(var I=new Object,A=0;A<o.length;A++){if(o[A].lat===void 0){e.verbose&&console.warn("Node",o[A].type+"/"+o[A].id,"ignored because it has no coordinates");continue}I[o[A].id]=o[A]}for(var N=new Object,A=0;A<o.length;A++)typeof o[A].tags<"u"&&E(o[A].tags)&&(N[o[A].id]=!0);for(var A=0;A<v.length;A++){if(!vr.isArray(v[A].members)){e.verbose&&console.warn("Relation",v[A].type+"/"+v[A].id,"ignored because it has no members");continue}for(var V=0;V<v[A].members.length;V++)v[A].members[V].type=="node"&&(N[v[A].members[V].ref]=!0)}for(var j=new Object,W=new Object,A=0;A<_.length;A++){if(!vr.isArray(_[A].nodes)){e.verbose&&console.warn("Way",_[A].type+"/"+_[A].id,"ignored because it has no nodes");continue}j[_[A].id]=_[A];for(var V=0;V<_[A].nodes.length;V++)W[_[A].nodes[V]]=!0,_[A].nodes[V]=I[_[A].nodes[V]]}for(var K=new Array,A=0;A<o.length;A++)(!W[o[A].id]||N[o[A].id])&&!o[A].__is_uninteresting&&K.push(o[A]);for(var ne=new Array,A=0;A<v.length;A++){if(!vr.isArray(v[A].members)){e.verbose&&console.warn("Relation",v[A].type+"/"+v[A].id,"ignored because it has no members");continue}ne[v[A].id]=v[A]}for(var Y={node:{},way:{},relation:{}},A=0;A<v.length;A++){if(!vr.isArray(v[A].members)){e.verbose&&console.warn("Relation",v[A].type+"/"+v[A].id,"ignored because it has no members");continue}for(var V=0;V<v[A].members.length;V++){var re=v[A].members[V].type,Q=v[A].members[V].ref;if(typeof Q!="number"&&(Q=Q.replace("_fullGeom","")),!Y[re]){e.verbose&&console.warn("Relation",v[A].type+"/"+v[A].id,"member",re+"/"+Q,"ignored because it has an invalid type");continue}typeof Y[re][Q]>"u"&&(Y[re][Q]=[]),Y[re][Q].push({role:v[A].members[V].role,rel:v[A].id,reltags:v[A].tags})}}var se,oe={features:new Array};for(A=0;A<K.length;A++){if(typeof K[A].lon>"u"||typeof K[A].lat>"u"){e.verbose&&console.warn("POI",K[A].type+"/"+K[A].id,"ignored because it lacks coordinates");continue}var Te={type:"Feature",id:K[A].type+"/"+K[A].id,properties:{type:K[A].type,id:K[A].id,tags:K[A].tags||{},relations:Y.node[K[A].id]||[],meta:S(K[A])},geometry:{type:"Point",coordinates:[+K[A].lon,+K[A].lat]}};K[A].__is_center_placeholder&&(Te.properties.geometry="center"),oe.features.push(Te)}for(var fe={features:new Array},ee={features:new Array},A=0;A<v.length;A++)if(typeof v[A].tags<"u"&&(v[A].tags.type=="multipolygon"||v[A].tags.type=="boundary")){let Me=function($e,ht){var ut=!1,Fe=pe?"way":"relation",ze=typeof $e.id=="number"?$e.id:+$e.id.replace("_fullGeom",""),gt;gt=ht.members.filter(function(Qt){return Qt.type==="way"}),gt=gt.map(function(Qt){var Ht=j[Qt.ref];if(Ht===void 0){e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"tainted by a missing way",Qt.type+"/"+Qt.ref),ut=!0;return}return{id:Qt.ref,role:Qt.role||"outer",way:Ht,nodes:Ht.nodes.filter(function(kt){return kt!==void 0?!0:(ut=!0,e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"tainted by a way",Qt.type+"/"+Qt.ref,"with a missing node"),!1)})}}),gt=vr.compact(gt);var Zt,an;function yn(Qt){for(var Ht=function(Mn){return Mn[0]},kt=function(Mn){return Mn[Mn.length-1]},dt=[],be,Et,Ut,_t,zt,gn;Qt.length;)for(be=Qt.pop().nodes.slice(),dt.push(be);Qt.length&&Ht(be)!==kt(be);){for(Et=Ht(be),Ut=kt(be),_t=0;_t<Qt.length;_t++)if(gn=Qt[_t].nodes,Ut===Ht(gn)){zt=be.push,gn=gn.slice(1);break}else if(Ut===kt(gn)){zt=be.push,gn=gn.slice(0,-1).reverse();break}else if(Et==kt(gn)){zt=be.unshift,gn=gn.slice(0,-1);break}else if(Et==Ht(gn)){zt=be.unshift,gn=gn.slice(1).reverse();break}else gn=zt=null;if(!gn){e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"contains unclosed ring geometry");break}Qt.splice(_t,1),zt.apply(be,gn)}return dt}Zt=yn(gt.filter(function(Qt){return Qt.role==="outer"})),an=yn(gt.filter(function(Qt){return Qt.role==="inner"}));var sn;function Dt(Qt){var Ht=function(Ut,_t){for(var zt=0;zt<_t.length;zt++)if(dt(_t[zt],Ut))return!0;return!1},kt=function(Ut){return Ut.map(function(_t){return[+_t.lat,+_t.lon]})},dt=function(Ut,_t){for(var zt=Ut[0],gn=Ut[1],Mn=!1,Hn=0,Kn=_t.length-1;Hn<_t.length;Kn=Hn++){var br=_t[Hn][0],Yn=_t[Hn][1],rr=_t[Kn][0],vt=_t[Kn][1],Vn=Yn>gn!=vt>gn&&zt<(rr-br)*(gn-Yn)/(vt-Yn)+br;Vn&&(Mn=!Mn)}return Mn},be,Et;for(Qt=kt(Qt),be=0;be<Zt.length;be++)if(Et=kt(Zt[be]),Ht(Et,Qt))return be}sn=Zt.map(function(Qt){return[Qt]});for(var $t=0;$t<an.length;$t++){var ct=Dt(an[$t]);ct!==void 0?sn[ct].push(an[$t]):e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"contains an inner ring with no containing outer")}var xt=[];if(xt=vr.compact(sn.map(function(Qt){var Ht=vr.compact(Qt.map(function(kt){if(kt.length<4){e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"contains a ring with less than four nodes");return}return vr.compact(kt.map(function(dt){return[+dt.lon,+dt.lat]}))}));if(Ht.length==0){e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"contains an empty ring cluster");return}return Ht})),xt.length==0)return e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"contains no coordinates"),!1;var wt="MultiPolygon";xt.length===1&&(wt="Polygon",xt=xt[0]);var Wt={type:"Feature",id:$e.type+"/"+ze,properties:{type:$e.type,id:ze,tags:$e.tags||{},relations:Y[$e.type][$e.id]||[],meta:S($e)},geometry:{type:wt,coordinates:xt}};return ut&&(e.verbose&&console.warn("Multipolygon",Fe+"/"+ze,"is tainted"),Wt.properties.tainted=!0),Wt};if(!vr.isArray(v[A].members)){e.verbose&&console.warn("Multipolygon",v[A].type+"/"+v[A].id,"ignored because it has no members");continue}for(var ge=0,V=0;V<v[A].members.length;V++)v[A].members[V].role=="outer"?ge++:e.verbose&&v[A].members[V].role!="inner"&&console.warn("Multipolygon",v[A].type+"/"+v[A].id,"member",v[A].members[V].type+"/"+v[A].members[V].ref,'ignored because it has an invalid role: "'+v[A].members[V].role+'"');if(v[A].members.forEach(function($e){j[$e.ref]&&($e.role==="outer"&&!E(j[$e.ref].tags,v[A].tags)&&(j[$e.ref].is_multipolygon_outline=!0),$e.role==="inner"&&!E(j[$e.ref].tags)&&(j[$e.ref].is_multipolygon_outline=!0))}),ge==0){e.verbose&&console.warn("Multipolygon relation",v[A].type+"/"+v[A].id,"ignored because it has no outer ways");continue}var pe=!1;ge==1&&!E(v[A].tags,{type:!0})&&(pe=!0);var Te=null;if(!pe)Te=Me(v[A],v[A]);else{var ye=v[A].members.filter(function($e){return $e.role==="outer"})[0];if(ye=j[ye.ref],ye===void 0){e.verbose&&console.warn("Multipolygon relation",v[A].type+"/"+v[A].id,"ignored because outer way",ye.type+"/"+ye.ref,"is missing");continue}ye.is_multipolygon_outline=!0,Te=Me(ye,v[A])}if(Te===!1){e.verbose&&console.warn("Multipolygon relation",v[A].type+"/"+v[A].id,"ignored because it has invalid geometry");continue}ee.features.push(Te)}for(var A=0;A<_.length;A++){if(!vr.isArray(_[A].nodes)){e.verbose&&console.warn("Way",_[A].type+"/"+_[A].id,"ignored because it has no nodes");continue}if(!_[A].is_multipolygon_outline){typeof _[A].id!="number"&&(_[A].id=+_[A].id.replace("_fullGeom","")),_[A].tainted=!1,_[A].hidden=!1;var de=new Array;for(V=0;V<_[A].nodes.length;V++)typeof _[A].nodes[V]=="object"?de.push([+_[A].nodes[V].lon,+_[A].nodes[V].lat]):(e.verbose&&console.warn("Way",_[A].type+"/"+_[A].id,"is tainted by an invalid node"),_[A].tainted=!0);if(de.length<=1){e.verbose&&console.warn("Way",_[A].type+"/"+_[A].id,"ignored because it contains too few nodes");continue}var Ne="LineString";typeof _[A].nodes[0]<"u"&&_[A].nodes[0]===_[A].nodes[_[A].nodes.length-1]&&(typeof _[A].tags<"u"&&d(_[A].tags)||_[A].__is_bounds_placeholder)&&(Ne="Polygon",de=[de]);var Te={type:"Feature",id:_[A].type+"/"+_[A].id,properties:{type:_[A].type,id:_[A].id,tags:_[A].tags||{},relations:Y.way[_[A].id]||[],meta:S(_[A])},geometry:{type:Ne,coordinates:de}};_[A].tainted&&(e.verbose&&console.warn("Way",_[A].type+"/"+_[A].id,"is tainted"),Te.properties.tainted=!0),_[A].__is_bounds_placeholder&&(Te.properties.geometry="bounds"),Ne=="LineString"?fe.features.push(Te):ee.features.push(Te)}}return se={type:"FeatureCollection",features:[]},se.features=se.features.concat(ee.features),se.features=se.features.concat(fe.features),se.features=se.features.concat(oe.features),e.flatProperties&&se.features.forEach(function(Ge){Ge.properties=vr.merge(Ge.properties.meta,Ge.properties.tags,{id:Ge.properties.type+"/"+Ge.properties.id})}),se=hC(se,!0),se}function d(o){var _=e.polygonFeatures;if(typeof _=="function")return _(o);if(o.area==="no")return!1;for(var v in o){var E=o[v],S=_[v];if(!(typeof S>"u")&&E!=="no"&&(S===!0||S.included_values&&S.included_values[E]===!0||S.excluded_values&&S.excluded_values[E]!==!0))return!0}return!1}};Xf.toGeojson=Xf;var fC=Xf;const dC=Qf(fC);var pC=kf;function kf(t,e){var i=t&&t.type,s;if(i==="FeatureCollection")for(s=0;s<t.features.length;s++)kf(t.features[s],e);else if(i==="GeometryCollection")for(s=0;s<t.geometries.length;s++)kf(t.geometries[s],e);else if(i==="Feature")kf(t.geometry,e);else if(i==="Polygon")jy(t.coordinates,e);else if(i==="MultiPolygon")for(s=0;s<t.coordinates.length;s++)jy(t.coordinates[s],e);return t}function jy(t,e){if(t.length!==0){qy(t[0],e);for(var i=1;i<t.length;i++)qy(t[i],!e)}}function qy(t,e){for(var i=0,s=0,u=0,f=t.length,d=f-1;u<f;d=u++){var o=(t[u][0]-t[d][0])*(t[d][1]+t[u][1]),_=i+o;s+=Math.abs(i)>=Math.abs(o)?i-_+o:o-_+i,i=_}i+s>=0!=!!e&&t.reverse()}const mC=Qf(pC),{document:Gy}=td;function gC(t){let e,i,s,u,f="Opcje",d,o,_='<div id="polygonMAP"></div>',v,E,S,I="x",A,N,V="Miasto:",j,W,K,ne,Y="Skalowanie",re,Q,se,oe,Te="Pobierz grafike miasta",fe,ee,ge;return{c(){e=Z("link"),i=we(),s=Z("main"),u=Z("button"),u.textContent=f,d=we(),o=Z("div"),o.innerHTML=_,v=we(),E=Z("div"),S=Z("button"),S.textContent=I,A=we(),N=Z("label"),N.textContent=V,j=we(),W=Z("input"),K=we(),ne=Z("label"),ne.textContent=Y,re=we(),Q=Z("input"),se=we(),oe=Z("button"),oe.textContent=Te,this.h()},l(pe){const ye=qu("svelte-gp4945",Gy.head);e=G(ye,"LINK",{rel:!0,href:!0}),ye.forEach(R),i=xe(pe),s=G(pe,"MAIN",{});var de=J(s);u=G(de,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(u)!=="svelte-1q5f0fy"&&(u.textContent=f),d=xe(de),o=G(de,"DIV",{class:!0,"data-svelte-h":!0}),Vt(o)!=="svelte-1enbpb"&&(o.innerHTML=_),v=xe(de),E=G(de,"DIV",{class:!0,id:!0});var Ne=J(E);S=G(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(S)!=="svelte-1s4bl73"&&(S.textContent=I),A=xe(Ne),N=G(Ne,"LABEL",{for:!0,"data-svelte-h":!0}),Vt(N)!=="svelte-lkd1fc"&&(N.textContent=V),j=xe(Ne),W=G(Ne,"INPUT",{type:!0}),K=xe(Ne),ne=G(Ne,"LABEL",{for:!0,"data-svelte-h":!0}),Vt(ne)!=="svelte-i4ir1h"&&(ne.textContent=Y),re=xe(Ne),Q=G(Ne,"INPUT",{type:!0,step:!0}),se=xe(Ne),oe=G(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(oe)!=="svelte-3p656l"&&(oe.textContent=Te),Ne.forEach(R),de.forEach(R),this.h()},h(){z(e,"rel","stylesheet"),z(e,"href","/css/mapaDots.css"),z(u,"class","options noPrint"),z(o,"class","map-wrap"),z(S,"class","close"),z(N,"for","city"),z(W,"type","text"),z(ne,"for","city"),z(Q,"type","number"),z(Q,"step","0.01"),z(oe,"class","getLoc"),z(E,"class",fe="settings-menu "+t[1]+" svelte-1q0npgw"),z(E,"id","settings-menu")},m(pe,ye){P(Gy.head,e),Oe(pe,i,ye),Oe(pe,s,ye),P(s,u),P(s,d),P(s,o),P(s,v),P(s,E),P(E,S),P(E,A),P(E,N),P(E,j),P(E,W),Gt(W,t[0]),P(E,K),P(E,ne),P(E,re),P(E,Q),Gt(Q,t[2].params.page06.scalefactor),P(E,se),P(E,oe),ee||(ge=[bt(u,"click",t[4]),bt(S,"click",t[5]),bt(W,"input",t[6]),bt(Q,"input",t[7]),bt(oe,"click",t[3])],ee=!0)},p(pe,[ye]){ye&1&&W.value!==pe[0]&&Gt(W,pe[0]),ye&4&&Ii(Q.value)!==pe[2].params.page06.scalefactor&&Gt(Q,pe[2].params.page06.scalefactor),ye&2&&fe!==(fe="settings-menu "+pe[1]+" svelte-1q0npgw")&&z(E,"class",fe)},i:nr,o:nr,d(pe){pe&&(R(i),R(s)),R(e),ee=!1,Or(ge)}}}let wp=10,Zy=300,Hy=400;function _C(t,e,i){let s;Ur(t,Xt,Q=>i(2,s=Q));let u,f,d,o=!1,_=!1,v,E="Rzeszów",S=-10/3;const I=async()=>{if(!_)try{_=!0;const Q=await A(E)}catch(Q){console.error(Q)}finally{_=!1}},A=async Q=>{const se=`
		[out:json];
		(
		  relation["admin_level"="8"]["boundary"="administrative"]["name"="${Q}"];
		);
		out geom;
	  `,Te=`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(se)}`;try{d=await(await fetch(Te)).json(),d=dC(d),d.features&&d.features.length>0?(v=d,W()):console.error("City boundary not found in OSM.")}catch(fe){console.error("Error fetching city boundary:",fe)}};ys(()=>{if(s&&s.params&&s.params.lat)if(f=50.0374531,u=22.0047174,s.params.imagePage6){let se=JSON.parse(s.params.imagePage6).svg;document.querySelector(".svgMap").innerHTML=se}else I()});let N,V;function j(){let Q={svg:document.querySelector(".svgMap").outerHTML};Q=JSON.stringify(Q),Ar(Xt,s.params.page06.imageSVG=Q,s)}function W(){const Q=mC(v,!0);let se=uS("svg").attr("width","790").attr("height","457").style("border","none").classed("svgMap",!0),oe=v.features[1].geometry.coordinates;const Te=nA().center(oe).fitSize([Zy,Hy],Q.features[0]);Te.scale(Te.scale()*s.params.page06.scalefactor);const fe=qT().projection(Te);function ee(){return Wp().on("start",function($e){N=$e.x,V=$e.y}).on("drag",function($e){const ht=$e.x-N,ut=$e.y-V;let Fe=+Me.attr("x")+ht,ze=+Me.attr("y")+ut;Me.attr("x",Fe).attr("y",ze),N=$e.x,V=$e.y}).on("end",function(){j()})}function ge(){return Wp().on("start",function($e){N=$e.x,V=$e.y}).on("drag",function($e){const ht=$e.x-N,ut=$e.y-V;let Fe=Ne.attr("transform"),ze=Fe?+Fe.split(",")[0].replace("translate(",""):0,gt=Fe?+Fe.split(",")[1].replace(")",""):0,Zt=ze+ht,an=gt+ut;Ne.attr("transform",`translate(${Zt},${an})`),N=$e.x,V=$e.y}).on("end",function(){j()})}document.querySelectorAll("#polygonMAP svg").forEach($e=>{$e.remove()}),document.querySelector("#polygonMAP").appendChild(se.node()),bw([u,f]);let pe=Te([u,f]);var ye=jp(0,Zy,wp),de=jp(0,Hy,wp);let Ne=se.append("g").classed("circlesGroup",!0);Ne.append("path").attr("fill","white").attr("stroke","red").datum(Q.features[0]).attr("opacity","0.05").attr("d",fe),de.forEach(($e,ht)=>{ye.forEach(ut=>{const Fe=Te.invert([ut,$e]);Ew(Fe,Q.features[0])&&Ne.append("circle").attr("cx",ut+(ht%2===0?0:S)+2).attr("cy",$e).attr("r",wp/2.8).style("fill","rgba(72, 165, 227, 1.000)")})}),Ne.call(ge());const Ge=(ye[ye.length-1]+ye[0])/2,Le=(de[de.length-1]+de[0])/2;pe[0]=Ge,pe[1]=Le;const Me=se.append("image").attr("xlink:href","images/iconLocation.png").attr("x",pe[0]).attr("y",pe[1]).attr("width","70").classed("pointCoord",!0).call(ee());Pa(".pointCoord").raise()}const K=()=>{i(1,o=!0)},ne=()=>{i(1,o=!1)};function Y(){E=this.value,i(0,E)}function re(){s.params.page06.scalefactor=Ii(this.value),Xt.set(s)}return t.$$.update=()=>{t.$$.dirty&1&&i(0,E=E.charAt(0).toUpperCase()+E.slice(1))},[E,o,s,I,K,ne,Y,re]}class yC extends Pr{constructor(e){super(),Mr(this,e,_C,gC,Cr,{})}}function vC(t){let e,i,s,u,f,d;return{c(){e=ot("svg"),i=ot("defs"),s=ot("path"),u=ot("text"),f=ot("tspan"),d=Mt(t[0]),this.h()},l(o){e=st(o,"svg",{viewBox:!0,class:!0});var _=J(e);i=st(_,"defs",{});var v=J(i);v.forEach(R),s=st(_,"path",{class:!0,d:!0}),J(s).forEach(R),u=st(_,"text",{class:!0,transform:!0});var E=J(u);f=st(E,"tspan",{"text-anchor":!0,class:!0,x:!0,y:!0});var S=J(f);d=Pt(S,t[0]),S.forEach(R),E.forEach(R),_.forEach(R),this.h()},h(){z(s,"class","cls-1 svelte-1usl05k"),z(s,"d","m15.17.91l4.04,2.33c.08.05.15.09.23.14l3.84,2.22c1.42.82,2.22,2.31,2.22,3.84h.02v9.44c0,1.79-1.06,3.34-2.6,4.04l-3.72,2.15h0s-4.09,2.37-4.09,2.37c-1.44.83-3.15.77-4.49-.03l-4.04-2.33c-.08-.04-.15-.09-.23-.14l-3.84-2.22c-1.42-.82-2.22-2.31-2.22-3.84h-.02v-9.44c0-1.79,1.06-3.34,2.6-4.04l3.72-2.15h0S10.68.88,10.68.88c1.44-.83,3.15-.77,4.49.03Z"),z(f,"text-anchor","middle"),z(f,"class","tsSpann svelte-1usl05k"),z(f,"x","17"),z(f,"y","24.5"),z(u,"class","cls-2 svelte-1usl05k"),z(u,"transform","translate(9 20)"),z(e,"viewBox","0 0 29 33"),z(e,"class","svelte-1usl05k")},m(o,_){Oe(o,e,_),P(e,i),P(e,s),P(e,u),P(u,f),P(f,d)},p(o,[_]){_&1&&Zn(d,o[0])},i:nr,o:nr,d(o){o&&R(e)}}}function bC(t,e,i){let{value:s=33}=e;return t.$$set=u=>{"value"in u&&i(0,s=u.value)},[s]}class xC extends Pr{constructor(e){super(),Mr(this,e,bC,vC,Cr,{value:0})}}function Wy(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function Ky(t){let e,i,s,u=`<div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">13</span> Poziom bezpieczeństwa okolicy</h2> <p class="tabText">Poniżej oznaczono wynik analizy odnoszący się do występowania potencjalnych zagrożeń,
						biorąc pod uwagę czynnik ludzki - statystyki popełnianych w danym obszarze przestępstw.
						Im wyższy wskaźnik, tym skalę rodzaj i liczbę przewinień zanotowanych w okolicy uznaję
						się za mało lub nieistotne w odniesieniu do ogólnego bezpieczeństwa. Przy tworzeniu
						analizy wzięto pod uwagę uchybienia skupione wokół kilku kategorii, w tym wandalizm,
						kradzieże, napady, pobicia. Przedstawiony poniżej rezultat ma charakter lokalny, co
						oznacza, ze zakres wartości tyczy się danego miasta.</p></div>`,f,d,o,_,v='<div><img src="/images/shield.svg" class="star" alt="ocena bezpieczeństwa lokalizacji"/></div> <div><hr class="hr-green"/> <p class="textobok">Wskaźnik odznaczający<br/>poziom bezpieczeństwa <br/>otoczenia</p></div>',E,S,I,A,N,V=`<p>Przy wyliczeniu powyższej wartości wzięto pod uwagę liczbę akcji o charakterze
					przestępczym, które miały miejsce w obrębie 1,5 km od nieruchomości. Z tego względu ogólny
					poziom bezpieczeństwa dla wybranej dzielnicy może de facto obiegać od zobrazowanego wyżej
					wskaźnika.</p>`,j,W,K,ne,Y,re,Q,se,oe,Te,fe,ee="Stopień poziomu bezpieczeństwa",ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht=t[0].params.page06.poziomBEZPIECZENSTWA+"",ut,Fe,ze,gt,Zt,an,yn="6",sn;return I=new Qm({props:{range:"min",values:[t[0].params.page06.poziomBEZPIECZENSTWA],max:"5",pips:!0,all:"label"}}),I.$on("stop",t[1]),ne=new yC({}),pe=new xC({props:{value:t[0].params.page06.poziomBEZPIECZENSTWA}}),{c(){e=Z("div"),i=Z("div"),s=Z("div"),s.innerHTML=u,f=we(),d=Z("div"),o=Z("div"),_=Z("div"),_.innerHTML=v,E=we(),S=Z("div"),Ct(I.$$.fragment),A=we(),N=Z("div"),N.innerHTML=V,j=we(),W=Z("div"),K=Z("div"),Ct(ne.$$.fragment),Y=we(),re=Z("div"),Q=Z("br"),se=Z("br"),oe=Z("br"),Te=we(),fe=Z("p"),fe.textContent=ee,ge=we(),Ct(pe.$$.fragment),ye=we(),de=Z("hr"),Ne=we(),Ge=Z("h2"),Le=Mt("Wskazana mapka aglomeracji miejskiej "),Me=Z("br"),$e=Mt(`
						obrazuje `),ut=Mt(ht),Fe=Mt(" poziom bezpieczeństwa dla"),ze=Z("br"),gt=Mt(" wybranej dzielnicy."),Zt=we(),an=Z("div"),an.textContent=yn,this.h()},l(Dt){e=G(Dt,"DIV",{class:!0});var $t=J(e);i=G($t,"DIV",{class:!0});var ct=J(i);s=G(ct,"DIV",{class:!0,"data-svelte-h":!0}),Vt(s)!=="svelte-r5hu5f"&&(s.innerHTML=u),f=xe(ct),d=G(ct,"DIV",{class:!0});var xt=J(d);o=G(xt,"DIV",{class:!0});var wt=J(o);_=G(wt,"DIV",{class:!0,"data-svelte-h":!0}),Vt(_)!=="svelte-dqg2qk"&&(_.innerHTML=v),E=xe(wt),S=G(wt,"DIV",{class:!0});var Wt=J(S);At(I.$$.fragment,Wt),Wt.forEach(R),wt.forEach(R),xt.forEach(R),A=xe(ct),N=G(ct,"DIV",{class:!0,"data-svelte-h":!0}),Vt(N)!=="svelte-1qtgzc2"&&(N.innerHTML=V),j=xe(ct),W=G(ct,"DIV",{class:!0});var Qt=J(W);K=G(Qt,"DIV",{class:!0});var Ht=J(K);At(ne.$$.fragment,Ht),Ht.forEach(R),Y=xe(Qt),re=G(Qt,"DIV",{class:!0});var kt=J(re);Q=G(kt,"BR",{}),se=G(kt,"BR",{}),oe=G(kt,"BR",{}),Te=xe(kt),fe=G(kt,"P",{"data-svelte-h":!0}),Vt(fe)!=="svelte-89rwgf"&&(fe.textContent=ee),ge=xe(kt),At(pe.$$.fragment,kt),ye=xe(kt),de=G(kt,"HR",{class:!0}),Ne=xe(kt),Ge=G(kt,"H2",{});var dt=J(Ge);Le=Pt(dt,"Wskazana mapka aglomeracji miejskiej "),Me=G(dt,"BR",{}),$e=Pt(dt,`
						obrazuje `),ut=Pt(dt,ht),Fe=Pt(dt," poziom bezpieczeństwa dla"),ze=G(dt,"BR",{}),gt=Pt(dt," wybranej dzielnicy."),dt.forEach(R),kt.forEach(R),Qt.forEach(R),ct.forEach(R),Zt=xe($t),an=G($t,"DIV",{class:!0,"data-svelte-h":!0}),Vt(an)!=="svelte-pb5esb"&&(an.textContent=yn),$t.forEach(R),this.h()},h(){z(s,"class","grid_content noselect mb-20"),z(_,"class","grid_content noselect"),z(S,"class","grid_content noselect"),z(o,"class","full-width grid_content"),z(d,"class","grid_content noselect"),z(N,"class","full-width grid_content background-blur"),z(K,"class","POI_map"),z(de,"class","green"),z(re,"class","POI_opis"),z(W,"class","grid_content POI_conteiner"),z(i,"class","containerFlex noselect"),z(an,"class","pageNumber right"),z(e,"class","page_content")},m(Dt,$t){Oe(Dt,e,$t),P(e,i),P(i,s),P(i,f),P(i,d),P(d,o),P(o,_),P(o,E),P(o,S),Tt(I,S,null),P(i,A),P(i,N),P(i,j),P(i,W),P(W,K),Tt(ne,K,null),P(W,Y),P(W,re),P(re,Q),P(re,se),P(re,oe),P(re,Te),P(re,fe),P(re,ge),Tt(pe,re,null),P(re,ye),P(re,de),P(re,Ne),P(re,Ge),P(Ge,Le),P(Ge,Me),P(Ge,$e),P(Ge,ut),P(Ge,Fe),P(Ge,ze),P(Ge,gt),P(e,Zt),P(e,an),sn=!0},p(Dt,$t){const ct={};$t&1&&(ct.values=[Dt[0].params.page06.poziomBEZPIECZENSTWA]),I.$set(ct);const xt={};$t&1&&(xt.value=Dt[0].params.page06.poziomBEZPIECZENSTWA),pe.$set(xt),(!sn||$t&1)&&ht!==(ht=Dt[0].params.page06.poziomBEZPIECZENSTWA+"")&&Zn(ut,ht)},i(Dt){sn||(Ve(I.$$.fragment,Dt),Ve(ne.$$.fragment,Dt),Ve(pe.$$.fragment,Dt),sn=!0)},o(Dt){Xe(I.$$.fragment,Dt),Xe(ne.$$.fragment,Dt),Xe(pe.$$.fragment,Dt),sn=!1},d(Dt){Dt&&R(e),It(I),It(ne),It(pe)}}}function wC(t){let e,i,s,u,f;i=new Mo({});let d=!t[0].params&&Wy(),o=t[0].adres&&Ky(t);return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),d&&d.c(),u=we(),o&&o.c(),this.h()},l(_){e=G(_,"DIV",{class:!0});var v=J(e);At(i.$$.fragment,v),s=xe(v),d&&d.l(v),u=xe(v),o&&o.l(v),v.forEach(R),this.h()},h(){z(e,"class","content-block section page_05 page_06")},m(_,v){Oe(_,e,v),Tt(i,e,null),P(e,s),d&&d.m(e,null),P(e,u),o&&o.m(e,null),f=!0},p(_,[v]){_[0].params?d&&(lr(),Xe(d,1,1,()=>{d=null}),ur()):d?v&1&&Ve(d,1):(d=Wy(),d.c(),Ve(d,1),d.m(e,u)),_[0].adres?o?(o.p(_,v),v&1&&Ve(o,1)):(o=Ky(_),o.c(),Ve(o,1),o.m(e,null)):o&&(lr(),Xe(o,1,1,()=>{o=null}),ur())},i(_){f||(Ve(i.$$.fragment,_),Ve(d),Ve(o),f=!0)},o(_){Xe(i.$$.fragment,_),Xe(d),Xe(o),f=!1},d(_){_&&R(e),It(i),d&&d.d(),o&&o.d()}}}function kC(t,e,i){let s;return Ur(t,Xt,f=>i(0,s=f)),[s,f=>{Ar(Xt,s.params.page06.poziomBEZPIECZENSTWA=f.detail.value,s)}]}class EC extends Pr{constructor(e){super(),Mr(this,e,kC,wC,Cr,{})}}function SC(t){let e,i;return{c(){e=ot("svg"),i=ot("path"),this.h()},l(s){e=st(s,"svg",{width:!0,xmlns:!0,viewBox:!0});var u=J(e);i=st(u,"path",{d:!0}),J(i).forEach(R),u.forEach(R),this.h()},h(){z(i,"d","M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l9.4-9.4V224H109.3l9.4-9.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4H224V402.7l-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-9.4 9.4V288H402.7l-9.4 9.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4H288V109.3l9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-64-64z"),z(e,"width",t[0]),z(e,"xmlns","http://www.w3.org/2000/svg"),z(e,"viewBox","0 0 512 512")},m(s,u){Oe(s,e,u),P(e,i)},p(s,[u]){u&1&&z(e,"width",s[0])},i:nr,o:nr,d(s){s&&R(e)}}}function IC(t,e,i){let{propSize:s=12}=e;return t.$$set=u=>{"propSize"in u&&i(0,s=u.propSize)},[s]}class TC extends Pr{constructor(e){super(),Mr(this,e,IC,SC,Cr,{propSize:0})}}function AC(t){let e,i,s,u,f;const d=t[7].default,o=wm(d,t,t[6],null);return{c(){e=Z("span"),o&&o.c(),this.h()},l(_){e=G(_,"SPAN",{role:!0,class:!0,draggable:!0});var v=J(e);o&&o.l(v),v.forEach(R),this.h()},h(){z(e,"role","list"),z(e,"class",i=t[4].class||""),z(e,"draggable","true")},m(_,v){Oe(_,e,v),o&&o.m(e,null),s=!0,u||(f=[bt(e,"dragstart",t[8]),bt(e,"drop",jc(t[9])),bt(e,"dragover",jc(CC)),bt(e,"dragenter",jc(t[10]))],u=!0)},p(_,[v]){o&&o.p&&(!s||v&64)&&km(o,d,_,_[6],s?Sm(d,_[6],v,null):Em(_[6]),null),(!s||v&16&&i!==(i=_[4].class||""))&&z(e,"class",i)},i(_){s||(Ve(o,_),s=!0)},o(_){Xe(o,_),s=!1},d(_){_&&R(e),o&&o.d(_),u=!1,Or(f)}}}const CC=()=>!1;function PC(t,e,i){const s=["propItemNumber","propData","propHoveredItemNumber"];let u=Nu(e,s),{$$slots:f={},$$scope:d}=e,{propItemNumber:o}=e,{propData:_}=e,{propHoveredItemNumber:v=5e-6}=e;const E=function(V,j){if(V.dataTransfer===null)return;V.dataTransfer.dropEffect="move";const W=parseInt(V.dataTransfer.getData("text/plain")),K=_;W<j?(K.splice(j+1,0,K[W]),K.splice(W,1)):(K.splice(j,0,K[W]),K.splice(W+1,1)),i(5,_=K),i(0,v=5e-6)},S=function(V,j){if(V.dataTransfer===null)return;V.dataTransfer.effectAllowed="move",V.dataTransfer.dropEffect="move";const W=j;V.dataTransfer.setData("text/plain",W.toString())},I=V=>S(V,o),A=V=>E(V,o),N=()=>i(0,v=o);return t.$$set=V=>{e=Xo(Xo({},e),Ef(V)),i(4,u=Nu(e,s)),"propItemNumber"in V&&i(1,o=V.propItemNumber),"propData"in V&&i(5,_=V.propData),"propHoveredItemNumber"in V&&i(0,v=V.propHoveredItemNumber),"$$scope"in V&&i(6,d=V.$$scope)},[v,o,E,S,u,_,d,f,I,A,N]}class MC extends Pr{constructor(e){super(),Mr(this,e,PC,AC,Cr,{propItemNumber:1,propData:5,propHoveredItemNumber:0})}}function Xy(t,e,i){const s=t.slice();return s[15]=e[i],s[17]=i,s}function Yy(t){let e,i=xr(t[0]),s=[];for(let u=0;u<i.length;u+=1)s[u]=Jy(Xy(t,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=vn()},l(u){for(let f=0;f<s.length;f+=1)s[f].l(u);e=vn()},m(u,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(u,f);Oe(u,e,f)},p(u,f){if(f&25){i=xr(u[0]);let d;for(d=0;d<i.length;d+=1){const o=Xy(u,i,d);s[d]?s[d].p(o,f):(s[d]=Jy(o),s[d].c(),s[d].m(e.parentNode,e))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(u){u&&R(e),Ca(s,u)}}}function Jy(t){let e,i,s,u,f,d="X",o,_,v;function E(){return t[9](t[15])}function S(){return t[10](t[15])}return{c(){e=Z("div"),i=Z("img"),u=we(),f=Z("button"),f.textContent=d,o=we(),this.h()},l(I){e=G(I,"DIV",{class:!0});var A=J(e);i=G(A,"IMG",{src:!0,alt:!0,class:!0}),u=xe(A),f=G(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(f)!=="svelte-1rk0w2u"&&(f.textContent=d),o=xe(A),A.forEach(R),this.h()},h(){Rl(i.src,s=t[15].src)||z(i,"src",s),z(i,"alt",""),z(i,"class","svelte-14smxz3"),z(f,"class","remove_cross svelte-14smxz3"),z(e,"class","image_block svelte-14smxz3")},m(I,A){Oe(I,e,A),P(e,i),P(e,u),P(e,f),P(e,o),_||(v=[bt(i,"click",E),bt(f,"click",S)],_=!0)},p(I,A){t=I,A&1&&!Rl(i.src,s=t[15].src)&&z(i,"src",s)},d(I){I&&R(e),_=!1,Or(v)}}}function zC(t){let e,i,s,u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 200 250" style="enable-background:new 0 0 200 200;" xml:space="preserve" class="svelte-14smxz3"><g class="svelte-14smxz3"><path d="M121.2,43.8c-23.5-9-51.2-1.7-67.3,17.7c-16.1,19.5-18.4,47.1-5.8,68.8c10.9,18.5,31,29.7,52.1,29.7   c3.4,0,6.8-0.3,10.2-0.9c28.1-4.8,49-29.7,49.6-59.1C159.5,74.7,144.3,52.6,121.2,43.8z M148.9,100c-0.4,20.8-12.9,38.8-31.8,45.8   c-19.3,7.2-41.2,1.4-54.6-14.4c-16-18.9-12.7-41.1-4.3-55.6c9.1-15.6,24.9-24.8,41.8-24.8c2.8,0,5.7,0.3,8.6,0.8   C131.5,56.1,148.4,76.3,148.9,100z" class="svelte-14smxz3"></path><path d="M129.7,94h-25V69c0-3.6-2.8-5.4-5.6-5.4c-2.8,0-5.6,1.9-5.6,5.4v25h-25c-3.6,0-5.4,2.8-5.4,5.6c0,2.8,1.9,5.6,5.4,5.6h25   v25c0,3.6,2.8,5.4,5.6,5.4c2.8,0,5.6-1.9,5.6-5.4v-25h25c3.6,0,5.4-2.8,5.4-5.6C135.1,96.8,133.3,94,129.7,94z" class="svelte-14smxz3"></path></g></svg>',f,d,o,_,v=t[0]&&t[0][0]&&Yy(t);return{c(){e=Z("input"),i=we(),s=Z("button"),s.innerHTML=u,f=we(),d=Z("div"),v&&v.c(),this.h()},l(E){e=G(E,"INPUT",{style:!0,class:!0,type:!0}),i=xe(E),s=G(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(s)!=="svelte-h8t3cf"&&(s.innerHTML=u),f=xe(E),d=G(E,"DIV",{class:!0});var S=J(d);v&&v.l(S),S.forEach(R),this.h()},h(){Hi(e,"display","none"),z(e,"class","inputInput"),z(e,"type","file"),e.multiple=!0,z(s,"class","add svelte-14smxz3"),z(d,"class","flexList svelte-14smxz3")},m(E,S){Oe(E,e,S),t[8](e),Oe(E,i,S),Oe(E,s,S),Oe(E,f,S),Oe(E,d,S),v&&v.m(d,null),o||(_=[bt(e,"change",t[5]),bt(s,"click",t[2])],o=!0)},p(E,[S]){E[0]&&E[0][0]?v?v.p(E,S):(v=Yy(E),v.c(),v.m(d,null)):v&&(v.d(1),v=null)},i:nr,o:nr,d(E){E&&(R(e),R(i),R(s),R(f),R(d)),t[8](null),v&&v.d(),o=!1,Or(_)}}}let kp="https://app.homerate.pl/public/uploads";function DC(t,e,i){let s=[],u;function f(){u.click()}let{fileClicked:d}=e,o="";async function _(V){i(7,o=V.src)}async function v(V){try{const j=await fetch(kp+"/remove.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:V})});if(j.ok){const W=await j.json();W.status==="success"?console.log("Plik został usunięty."):console.error("Failed to delete file:",W.message)}else throw new Error("Network response was not ok")}catch(j){console.error("There was a problem with the fetch operation:",j)}S()}async function E(){const V=new FormData,j=u.files;for(let W=0;W<j.length;W++){const K=j[W];V.append("uploadfile[]",K)}try{const W=await fetch(kp+"/data.php",{method:"POST",body:V});if(W.ok)(await W.json()).status=="success"&&S();else throw new Error("Network response was not ok")}catch(W){console.error("There was a problem with the fetch operation:",W)}}async function S(){const j=await(await fetch(kp+"/database.php")).json();j.status=="success"&&i(0,s=j.data)}S();function I(V){Cn[V?"unshift":"push"](()=>{u=V,i(1,u)})}const A=V=>_(V),N=V=>v(V.file_id);return t.$$set=V=>{"fileClicked"in V&&i(6,d=V.fileClicked)},t.$$.update=()=>{t.$$.dirty&192&&d(o)},[s,u,f,_,v,E,d,o,I,A,N]}class LC extends Pr{constructor(e){super(),Mr(this,e,DC,zC,Cr,{fileClicked:6})}}const{document:Ep}=td;function Qy(t,e,i){const s=t.slice();return s[28]=e[i].name,s[29]=e[i].val,s[30]=e[i].image,s[31]=e,s[32]=i,s}function ev(t){let e,i,s="x",u,f,d,o,_,v,E,S,I,A,N,V,j="+",W,K,ne,Y,re,Q,se=xr(t[0]),oe=[];for(let ee=0;ee<se.length;ee+=1)oe[ee]=tv(Qy(t,se,ee));const Te=ee=>Xe(oe[ee],1,1,()=>{oe[ee]=null});let fe=t[2]&&nv(t);return{c(){e=Z("div"),i=Z("button"),i.textContent=s,u=we(),f=Z("div"),d=ot("svg"),o=ot("g"),_=ot("path"),v=ot("path"),E=we(),S=Z("input"),I=we(),A=Z("input"),N=we(),V=Z("button"),V.textContent=j,W=we();for(let ee=0;ee<oe.length;ee+=1)oe[ee].c();K=we(),fe&&fe.c(),this.h()},l(ee){e=G(ee,"DIV",{class:!0});var ge=J(e);i=G(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-491tuc"&&(i.textContent=s),u=xe(ge),f=G(ge,"DIV",{class:!0});var pe=J(f);d=st(pe,"svg",{xmlns:!0,class:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0});var ye=J(d);o=st(ye,"g",{});var de=J(o);_=st(de,"path",{fill:!0,d:!0,class:!0}),J(_).forEach(R),v=st(de,"path",{fill:!0,d:!0,class:!0}),J(v).forEach(R),de.forEach(R),ye.forEach(R),E=xe(pe),S=G(pe,"INPUT",{class:!0,contenteditable:!0}),I=xe(pe),A=G(pe,"INPUT",{class:!0,contenteditable:!0}),N=xe(pe),V=G(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(V)!=="svelte-1508l7m"&&(V.textContent=j),pe.forEach(R),W=xe(ge);for(let Ne=0;Ne<oe.length;Ne+=1)oe[Ne].l(ge);K=xe(ge),fe&&fe.l(ge),ge.forEach(R),this.h()},h(){z(i,"class","close"),z(_,"fill","rgba(0,0,0,0.2)"),z(_,"d","M121.2,43.8c-23.5-9-51.2-1.7-67.3,17.7c-16.1,19.5-18.4,47.1-5.8,68.8c10.9,18.5,31,29.7,52.1,29.7   c3.4,0,6.8-0.3,10.2-0.9c28.1-4.8,49-29.7,49.6-59.1C159.5,74.7,144.3,52.6,121.2,43.8z M148.9,100c-0.4,20.8-12.9,38.8-31.8,45.8   c-19.3,7.2-41.2,1.4-54.6-14.4c-16-18.9-12.7-41.1-4.3-55.6c9.1-15.6,24.9-24.8,41.8-24.8c2.8,0,5.7,0.3,8.6,0.8   C131.5,56.1,148.4,76.3,148.9,100z"),z(_,"class","svelte-1geoao4"),z(v,"fill","rgba(255,250,250,0.4)"),z(v,"d","M129.7,94h-25V69c0-3.6-2.8-5.4-5.6-5.4c-2.8,0-5.6,1.9-5.6,5.4v25h-25c-3.6,0-5.4,2.8-5.4,5.6c0,2.8,1.9,5.6,5.4,5.6h25   v25c0,3.6,2.8,5.4,5.6,5.4c2.8,0,5.6-1.9,5.6-5.4v-25h25c3.6,0,5.4-2.8,5.4-5.6C135.1,96.8,133.3,94,129.7,94z"),z(v,"class","svelte-1geoao4"),z(d,"xmlns","http://www.w3.org/2000/svg"),z(d,"class","mini svelte-1geoao4"),z(d,"xmlns:xlink","http://www.w3.org/1999/xlink"),z(d,"version","1.1"),z(d,"x","0px"),z(d,"y","0px"),z(d,"viewBox","0 0 200 250"),Hi(d,"enable-background","new 0 0 200 200"),z(d,"xml:space","preserve"),z(S,"class","dataName"),z(S,"contenteditable","true"),z(A,"class","dataValue"),z(A,"contenteditable","true"),z(V,"class","addButton svelte-1geoao4"),z(f,"class","addDataBoxs"),z(e,"class","legendWrapper")},m(ee,ge){Oe(ee,e,ge),P(e,i),P(e,u),P(e,f),P(f,d),P(d,o),P(o,_),P(o,v),P(f,E),P(f,S),Gt(S,t[3].name),P(f,I),P(f,A),Gt(A,t[3].val),P(f,N),P(f,V),P(e,W);for(let pe=0;pe<oe.length;pe+=1)oe[pe]&&oe[pe].m(e,null);P(e,K),fe&&fe.m(e,null),Y=!0,re||(Q=[bt(i,"click",t[11]),bt(d,"click",t[12]),bt(S,"input",t[13]),bt(A,"input",t[14]),bt(V,"click",t[9]),Ho(n2.call(null,e,{handle:".addDataBoxs"}))],re=!0)},p(ee,ge){if(ge[0]&8&&S.value!==ee[3].name&&Gt(S,ee[3].name),ge[0]&8&&A.value!==ee[3].val&&Gt(A,ee[3].val),ge[0]&353){se=xr(ee[0]);let pe;for(pe=0;pe<se.length;pe+=1){const ye=Qy(ee,se,pe);oe[pe]?(oe[pe].p(ye,ge),Ve(oe[pe],1)):(oe[pe]=tv(ye),oe[pe].c(),Ve(oe[pe],1),oe[pe].m(e,K))}for(lr(),pe=se.length;pe<oe.length;pe+=1)Te(pe);ur()}ee[2]?fe?(fe.p(ee,ge),ge[0]&4&&Ve(fe,1)):(fe=nv(ee),fe.c(),Ve(fe,1),fe.m(e,null)):fe&&(lr(),Xe(fe,1,1,()=>{fe=null}),ur())},i(ee){if(!Y){for(let ge=0;ge<se.length;ge+=1)Ve(oe[ge]);Ve(fe),ee&&vi(()=>{Y&&(ne||(ne=Dr(e,jr,{},!0)),ne.run(1))}),Y=!0}},o(ee){oe=oe.filter(Boolean);for(let ge=0;ge<oe.length;ge+=1)Xe(oe[ge]);Xe(fe),ee&&(ne||(ne=Dr(e,jr,{},!1)),ne.run(0)),Y=!1},d(ee){ee&&R(e),Ca(oe,ee),fe&&fe.d(),ee&&ne&&ne.end(),re=!1,Or(Q)}}}function RC(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N="x",V,j,W;i=new TC({props:{propSize:22}});function K(){t[15].call(v,t[32])}function ne(){t[16].call(S,t[32])}function Y(){return t[17](t[32])}return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),u=ot("svg"),f=ot("g"),d=ot("path"),o=ot("path"),_=we(),v=Z("input"),E=we(),S=Z("input"),I=we(),A=Z("button"),A.textContent=N,this.h()},l(re){e=G(re,"DIV",{class:!0});var Q=J(e);At(i.$$.fragment,Q),s=xe(Q),u=st(Q,"svg",{dataval:!0,xmlns:!0,class:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0});var se=J(u);f=st(se,"g",{});var oe=J(f);d=st(oe,"path",{fill:!0,d:!0,class:!0}),J(d).forEach(R),o=st(oe,"path",{fill:!0,d:!0,class:!0}),J(o).forEach(R),oe.forEach(R),se.forEach(R),_=xe(Q),v=G(Q,"INPUT",{class:!0,contenteditable:!0}),E=xe(Q),S=G(Q,"INPUT",{class:!0,contenteditable:!0}),I=xe(Q),A=G(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Vt(A)!=="svelte-12izwp9"&&(A.textContent=N),Q.forEach(R),this.h()},h(){z(d,"fill","rgba(0,0,0,0.2)"),z(d,"d","M121.2,43.8c-23.5-9-51.2-1.7-67.3,17.7c-16.1,19.5-18.4,47.1-5.8,68.8c10.9,18.5,31,29.7,52.1,29.7   c3.4,0,6.8-0.3,10.2-0.9c28.1-4.8,49-29.7,49.6-59.1C159.5,74.7,144.3,52.6,121.2,43.8z M148.9,100c-0.4,20.8-12.9,38.8-31.8,45.8   c-19.3,7.2-41.2,1.4-54.6-14.4c-16-18.9-12.7-41.1-4.3-55.6c9.1-15.6,24.9-24.8,41.8-24.8c2.8,0,5.7,0.3,8.6,0.8   C131.5,56.1,148.4,76.3,148.9,100z"),z(d,"class","svelte-1geoao4"),z(o,"fill","rgba(255,250,250,0.4)"),z(o,"d","M129.7,94h-25V69c0-3.6-2.8-5.4-5.6-5.4c-2.8,0-5.6,1.9-5.6,5.4v25h-25c-3.6,0-5.4,2.8-5.4,5.6c0,2.8,1.9,5.6,5.4,5.6h25   v25c0,3.6,2.8,5.4,5.6,5.4c2.8,0,5.6-1.9,5.6-5.4v-25h25c3.6,0,5.4-2.8,5.4-5.6C135.1,96.8,133.3,94,129.7,94z"),z(o,"class","svelte-1geoao4"),z(u,"dataval",t[32]),z(u,"xmlns","http://www.w3.org/2000/svg"),z(u,"class","mini svelte-1geoao4"),z(u,"xmlns:xlink","http://www.w3.org/1999/xlink"),z(u,"version","1.1"),z(u,"x","0px"),z(u,"y","0px"),z(u,"viewBox","0 0 200 250"),Hi(u,"enable-background","new 0 0 200 200"),z(u,"xml:space","preserve"),z(v,"class","name"),z(v,"contenteditable","true"),z(S,"class","val"),z(S,"contenteditable","true"),z(A,"class","removeButton"),z(e,"class","svelte-1geoao4"),On(e,"classHovered",t[5]===t[32])},m(re,Q){Oe(re,e,Q),Tt(i,e,null),P(e,s),P(e,u),P(u,f),P(f,d),P(f,o),P(e,_),P(e,v),Gt(v,t[0][t[32]].name),P(e,E),P(e,S),Gt(S,t[0][t[32]].val),P(e,I),P(e,A),V=!0,j||(W=[bt(u,"click",t[6]),bt(v,"input",K),bt(S,"input",ne),bt(A,"click",Y)],j=!0)},p(re,Q){t=re,Q[0]&1&&v.value!==t[0][t[32]].name&&Gt(v,t[0][t[32]].name),Q[0]&1&&S.value!==t[0][t[32]].val&&Gt(S,t[0][t[32]].val),(!V||Q[0]&32)&&On(e,"classHovered",t[5]===t[32])},i(re){V||(Ve(i.$$.fragment,re),V=!0)},o(re){Xe(i.$$.fragment,re),V=!1},d(re){re&&R(e),It(i),j=!1,Or(W)}}}function tv(t){let e,i,s,u,f;function d(v){t[18](v)}function o(v){t[19](v)}let _={propItemNumber:t[32],$$slots:{default:[RC]},$$scope:{ctx:t}};return t[0]!==void 0&&(_.propData=t[0]),t[5]!==void 0&&(_.propHoveredItemNumber=t[5]),i=new MC({props:_}),Cn.push(()=>tr(i,"propData",d)),Cn.push(()=>tr(i,"propHoveredItemNumber",o)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(v){e=G(v,"DIV",{});var E=J(e);At(i.$$.fragment,E),E.forEach(R)},m(v,E){Oe(v,e,E),Tt(i,e,null),f=!0},p(v,E){const S={};E[0]&33|E[1]&4&&(S.$$scope={dirty:E,ctx:v}),!s&&E[0]&1&&(s=!0,S.propData=v[0],er(()=>s=!1)),!u&&E[0]&32&&(u=!0,S.propHoveredItemNumber=v[5],er(()=>u=!1)),i.$set(S)},i(v){f||(Ve(i.$$.fragment,v),f=!0)},o(v){Xe(i.$$.fragment,v),f=!1},d(v){v&&R(e),It(i)}}}function nv(t){let e,i,s,u;return i=new LC({props:{fileClicked:t[20]}}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(f){e=G(f,"DIV",{class:!0});var d=J(e);At(i.$$.fragment,d),d.forEach(R),this.h()},h(){z(e,"class","filelist svelte-1geoao4")},m(f,d){Oe(f,e,d),Tt(i,e,null),u=!0},p:nr,i(f){u||(Ve(i.$$.fragment,f),f&&vi(()=>{u&&(s||(s=Dr(e,jr,{},!0)),s.run(1))}),u=!0)},o(f){Xe(i.$$.fragment,f),f&&(s||(s=Dr(e,jr,{},!1)),s.run(0)),u=!1},d(f){f&&R(e),It(i),f&&s&&s.end()}}}function BC(t){let e,i,s="",u,f,d,o,_,v,E,S,I,A=t[4]&&ev(t);return{c(){e=Z("link"),i=Z("script"),i.innerHTML=s,f=we(),d=Z("div"),o=Z("div"),_=Z("div"),v=we(),A&&A.c(),this.h()},l(N){const V=qu("svelte-xxmvv",Ep.head);e=G(V,"LINK",{rel:!0,href:!0}),i=G(V,"SCRIPT",{src:!0,charset:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-1ujepqs"&&(i.innerHTML=s),V.forEach(R),f=xe(N),d=G(N,"DIV",{class:!0});var j=J(d);o=G(j,"DIV",{class:!0,"aria-hidden":!0});var W=J(o);_=G(W,"DIV",{class:!0,id:!0}),J(_).forEach(R),W.forEach(R),v=xe(j),A&&A.l(j),j.forEach(R),this.h()},h(){z(e,"rel","stylesheet"),z(e,"href","/css/donutMultiplePage7.scss"),Rl(i.src,u="https://d3js.org/d3.v6.min.js")||z(i,"src",u),z(i,"charset","utf-8"),z(_,"class","donutTarget"),z(_,"id",t[1]),z(o,"class","donutWrapper"),z(o,"aria-hidden",""),z(d,"class","bigWrapperpage7")},m(N,V){P(Ep.head,e),P(Ep.head,i),Oe(N,f,V),Oe(N,d,V),P(d,o),P(o,_),P(d,v),A&&A.m(d,null),E=!0,S||(I=bt(o,"click",t[10]),S=!0)},p(N,V){(!E||V[0]&2)&&z(_,"id",N[1]),N[4]?A?(A.p(N,V),V[0]&16&&Ve(A,1)):(A=ev(N),A.c(),Ve(A,1),A.m(d,null)):A&&(lr(),Xe(A,1,1,()=>{A=null}),ur())},i(N){E||(Ve(A),E=!0)},o(N){Xe(A),E=!1},d(N){N&&(R(f),R(d)),R(e),R(i),A&&A.d(),S=!1,I()}}}let rv=0;function OC(t,e,i){let s=!1;function u(ee){i(2,s=!0),document.querySelectorAll("img.mini").forEach(ge=>{ge.classList.remove("active")}),ee.srcElement.classList.add("active")}async function f(ee){let ge=document.querySelector("img.mini.active");if(ge){ge.src=ee;let pe=ge.getAttribute("dataVal");i(0,o[pe].image=ee,o)}}let{id:d=""}=e,{data:o}=e,_={id:rv,image:"image",name:"newData",val:56},v;ys(()=>{v=Pa("#"+d),A()}),Tm(()=>{A()});function E(ee){i(0,o=o.filter((ge,pe)=>pe!==ee))}function S(){const ee=_.val,ge=_.name,pe=_.image,ye=rv+1+Math.floor(Math.random()*100)+1;i(0,o=[...o,{name:ge,val:ee,image:pe,id:ye}])}let I=0;function A(){v.selectAll("*").remove(),I+=1;let ee=800,ge=400,pe=5,ye=0,de="val",Ne="name",Ge={top:10,right:0,bottom:10,left:0},Le=["rgb(4,76,68)","rgb(4,245,148)","rgb(113,198,191)","rgb(89,144,150)","rgb(44,169,156)","rgb(19,155,148)","rgb(4,103,106)","rgb(6,233,173)","rgb(149,251,15)"];var Me=Math.min(ee,ge)/2,$e=t2().value(function(Dt){return Dt[de]}).sort(null),ht=Wf().outerRadius(Me*.65).innerRadius(Me*0).cornerRadius(pe).padAngle(ye),ut=Wf().outerRadius(Me*.9).innerRadius(Me*.9),Fe=v.append("svg").classed("wykresSVG",!0).attr("width",ee+Ge.left+Ge.right).attr("height",ge+Ge.top+Ge.bottom).append("g").attr("transform","translate("+ee/2+","+ge/2+")");Fe.append("g").attr("class","slices"),Fe.append("g").attr("class","labelName"),Fe.append("g").attr("class","lines"),Fe.select(".slices").selectAll("path").data($e(o)).enter().append("path").attr("d",ht).each(function(Dt,$t){Pa(this).attr("fill",Le[$t%Le.length]).attr("stroke","white").attr("stroke-width","5").attr("stroke-linejoin","round").attr("stroke-linecap","round").classed("slice_patch patch_"+$t,!0)});var ze=Fe.select(".labelName").selectAll("text").data($e(o)).enter().append("g");function gt(){var $t=Zp(".slice_patch").node().getBBox(),ct=$t.x+$t.width/2;return $t.y+$t.height/2,ct}ze.append("text").attr("dx","-2px").attr("dy",function(Dt,$t){let ct=this.getBoundingClientRect();console.log(ct);let xt=gt();return console.log(xt,$t),ze.filter(function(wt,Wt){return Wt===$t}),-10}).classed("mojaKlasa",!0).html(sn).attr("transform",yn).style("text-anchor",function(Dt){return Zt(Dt)<Math.PI?"start":"end"}).style("font-size","12px"),ze.each(function(Dt){var $t=Pa(this),ct=Pa(this).select("text"),xt=ct.attr("transform");ct.attr("dx");var Wt=xt.replace("translate(","").replace(")","").split(","),Qt=parseFloat(Wt[0]),Ht=parseFloat(Wt[1]);let kt=gt();var dt=$t.data()[0].data,be=$t.append("svg:image").attr("href",dt.image).attr("width",35).attr("height",35).classed("imageFlaf",!0);kt<Qt?(be.attr("x","190px"),be.attr("y",Ht-22,5)):(be.attr("x","-235px"),be.attr("y",Ht-22.5))}),Fe.select(".lines").selectAll("polyline").data($e(o)).enter().append("polyline").attr("stroke-width",2).attr("fill","none").attr("stroke",Le[I]).attr("points",an).each(function(Dt,$t){Pa(this).attr("stroke",Le[$t%Le.length])}),Zp(".labelName text, .slices path");function Zt(Dt){return Dt.startAngle+(Dt.endAngle-Dt.startAngle)/2}function an(Dt){var $t=ut.centroid(Dt);return $t[0]=Me*.95*(Zt(Dt)<Math.PI?1:-1),[ht.centroid(Dt),ut.centroid(Dt),$t]}function yn(Dt){var $t=ut.centroid(Dt);$t[1]=$t[1];let ct=gt();return $t[0]>ct?$t[0]=Me*.95*(Zt(Dt)<Math.PI?1:-1)+40:$t[0]=Me*.95*(Zt(Dt)<Math.PI?1:-1)-45,"translate("+$t+")"}function sn(Dt){return Dt.data[Ne]+": <tspan>"+Dt.data[de]+"%</tspan>"}}let N=!1,V=0;const j=()=>{i(4,N=!N)},W=()=>{i(4,N=!N)},K=ee=>u(ee);function ne(){_.name=this.value,i(3,_)}function Y(){_.val=this.value,i(3,_)}function re(ee){o[ee].name=this.value,i(0,o)}function Q(ee){o[ee].val=this.value,i(0,o)}const se=ee=>E(ee);function oe(ee){o=ee,i(0,o)}function Te(ee){V=ee,i(5,V)}const fe=ee=>{f(ee)};return t.$$set=ee=>{"id"in ee&&i(1,d=ee.id),"data"in ee&&i(0,o=ee.data)},[o,d,s,_,N,V,u,f,E,S,j,W,K,ne,Y,re,Q,se,oe,Te,fe]}class NC extends Pr{constructor(e){super(),Mr(this,e,OC,BC,Cr,{id:1,data:0},null,[-1,-1])}}function iv(t){let e,i,s;return{c(){e=Z("div"),this.h()},l(u){e=G(u,"DIV",{role:!0,tabindex:!0,class:!0}),J(e).forEach(R),this.h()},h(){z(e,"role","button"),z(e,"tabindex","2"),z(e,"class","svg-option-button svelte-pvpisa")},m(u,f){Oe(u,e,f),i||(s=[bt(e,"keydown",UC),bt(e,"click",t[11])],i=!0)},p:nr,d(u){u&&R(e),i=!1,Or(s)}}}function FC(t){let e=Math.floor(ml-t[4])+"",i,s;return{c(){i=Mt(e),s=Mt("%")},l(u){i=Pt(u,e),s=Pt(u,"%")},m(u,f){Oe(u,i,f),Oe(u,s,f)},p(u,f){f&16&&e!==(e=Math.floor(ml-u[4])+"")&&Zn(i,e)},d(u){u&&(R(i),R(s))}}}function VC(t){let e=(ml-t[4]).toFixed(1)+"",i,s;return{c(){i=Mt(e),s=Mt("%")},l(u){i=Pt(u,e),s=Pt(u,"%")},m(u,f){Oe(u,i,f),Oe(u,s,f)},p(u,f){f&16&&e!==(e=(ml-u[4]).toFixed(1)+"")&&Zn(i,e)},d(u){u&&(R(i),R(s))}}}function $C(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe=t[3]==!0&&iv(t);function Te(ge,pe){return ge[0]%1!==0?VC:FC}let fe=Te(t),ee=fe(t);return{c(){oe&&oe.c(),e=we(),i=Z("div"),s=ot("svg"),u=ot("defs"),f=ot("style"),d=Mt(`.cls-1 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(1.123);
					outline-color: var(--brand-blue);
				}
				.cls-2 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(0.85);
					outline-color: var(--brand-blue);
				}
			`),o=ot("path"),v=ot("g"),E=ot("use"),S=ot("use"),A=ot("g"),N=ot("text"),ee.c(),j=ot("path"),W=ot("path"),K=we(),ne=Z("div"),Y=Z("input"),this.h()},l(ge){oe&&oe.l(ge),e=xe(ge),i=G(ge,"DIV",{class:!0});var pe=J(i);s=st(pe,"svg",{viewBox:!0,class:!0});var ye=J(s);u=st(ye,"defs",{});var de=J(u);f=st(de,"style",{});var Ne=J(f);d=Pt(Ne,`.cls-1 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(1.123);
					outline-color: var(--brand-blue);
				}
				.cls-2 {
					outline: solid;
					border-radius: 57px;
					fill: none;
					outline-width: 0.5px;
					transform: scale(0.85);
					outline-color: var(--brand-blue);
				}
			`),Ne.forEach(R),o=st(de,"path",{pathLength:!0,fill:!0,"stroke-width":!0,id:!0,d:!0}),J(o).forEach(R),de.forEach(R),v=st(ye,"g",{mask:!0});var Ge=J(v);E=st(Ge,"use",{href:!0,stroke:!0}),J(E).forEach(R),S=st(Ge,"use",{href:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0}),J(S).forEach(R),Ge.forEach(R),A=st(ye,"g",{"text-anchor":!0,"dominant-baseline":!0,"font-size":!0,"font-weight":!0,fill:!0,"outline-color":!0,"stroke-width":!0});var Le=J(A);N=st(Le,"text",{});var Me=J(N);ee.l(Me),Me.forEach(R),Le.forEach(R),j=st(ye,"path",{class:!0,d:!0}),J(j).forEach(R),W=st(ye,"path",{class:!0,d:!0}),J(W).forEach(R),ye.forEach(R),K=xe(pe),ne=G(pe,"DIV",{class:!0});var $e=J(ne);Y=G($e,"INPUT",{type:!0,class:!0,min:!0,max:!0}),$e.forEach(R),pe.forEach(R),this.h()},h(){z(o,"pathLength",ml),z(o,"fill","none"),z(o,"stroke-width","14"),z(o,"id","donut-path-"+t[6]),z(o,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(E,"href","#donut-path-"+t[6]),z(E,"stroke","hsl(0, 0%, 100%)"),z(S,"href","#donut-path-"+t[6]),z(S,"stroke","currentColor"),z(S,"stroke-width","40"),z(S,"stroke-dasharray",ml),z(S,"stroke-dashoffset",t[4]),z(v,"mask","url(#donut-mask-"+t[6]+")"),z(A,"text-anchor","middle"),z(A,"dominant-baseline","central"),z(A,"font-size","25"),z(A,"font-weight","700"),z(A,"fill","currentColor"),z(A,"outline-color","var(--brand-blue)"),z(A,"stroke-width","3"),z(j,"class","cls-1"),z(j,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(W,"class","cls-2"),z(W,"d","M 0 -50 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100"),z(s,"viewBox","-70 -70 140 140"),z(s,"class","svelte-pvpisa"),Hi(s,"color",t[2]),z(Y,"type","number"),z(Y,"class","option_number svelte-pvpisa"),z(Y,"min","1"),z(Y,"max","100"),z(ne,"class","optionsDonut svelte-pvpisa"),On(ne,"active",t[1]),z(i,"class","svg-item")},m(ge,pe){oe&&oe.m(ge,pe),Oe(ge,e,pe),Oe(ge,i,pe),P(i,s),P(s,u),P(u,f),P(f,d),P(u,o),P(s,v),P(v,E),P(v,S),P(s,A),P(A,N),ee.m(N,null),P(s,j),P(s,W),P(i,K),P(i,ne),P(ne,Y),Gt(Y,t[0]),re=!0,Q||(se=[bt(Y,"input",t[12]),bt(Y,"change",function(){Uc(t[5](t[0]))&&t[5](t[0]).apply(this,arguments)})],Q=!0)},p(ge,[pe]){t=ge,t[3]==!0?oe?oe.p(t,pe):(oe=iv(t),oe.c(),oe.m(e.parentNode,e)):oe&&(oe.d(1),oe=null),(!re||pe&16)&&z(S,"stroke-dashoffset",t[4]),fe===(fe=Te(t))&&ee?ee.p(t,pe):(ee.d(1),ee=fe(t),ee&&(ee.c(),ee.m(N,null))),pe&4&&Hi(s,"color",t[2]),pe&1&&Ii(Y.value)!==t[0]&&Gt(Y,t[0]),(!re||pe&2)&&On(ne,"active",t[1])},i(ge){re||(_&&_.end(1),I&&I.end(1),V&&V.end(1),re=!0)},o(ge){ge&&(_=Mu(o,jr,{duration:200})),ge&&(I=Mu(v,jr,{duration:400})),ge&&(V=Mu(N,au,{duration:200})),re=!1},d(ge){ge&&(R(e),R(i)),oe&&oe.d(ge),ge&&_&&_.end(),ge&&I&&I.end(),ee.d(),ge&&V&&V.end(),Q=!1,Or(se)}}}const ml=100,UC=()=>{};function jC(t,e,i){let s,u,f;const d=Jf();let{value:o=5.7}=e,{average:_=83}=e,{color:v="rgb(72, 165, 227)"}=e;function E(ne){S&&(i(0,o=ne),d("valueChange",o))}let{editable:S=!1,active:I=!1}=e;const A=Math.random().toString().slice(-5),N=Tf(ml,{duration:400});Ur(t,N,ne=>i(4,f=ne));const V=Tf(-10,{duration:200}),j=async(ne,Y)=>{await N.set(ne),V.set(Y)},W=()=>{i(1,I=!I)};function K(){o=Ii(this.value),i(0,o)}return t.$$set=ne=>{"value"in ne&&i(0,o=ne.value),"average"in ne&&i(8,_=ne.average),"color"in ne&&i(2,v=ne.color),"editable"in ne&&i(3,S=ne.editable),"active"in ne&&i(1,I=ne.active)},t.$$.update=()=>{t.$$.dirty&1&&i(10,s=ml-o),t.$$.dirty&256&&i(9,u=360*_/ml),t.$$.dirty&1536&&j(s,u)},[o,I,v,S,f,E,A,N,_,u,s,W,K]}class av extends Pr{constructor(e){super(),Mr(this,e,jC,$C,Cr,{value:0,average:8,color:2,editable:3,active:1})}}function sv(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function ov(t){let e,i,s,u,f,d='<span class="number_type noselect">14</span> Rozkład preferencji wyborczych w okolicy',o,_,v=t[0].params.page07.text14+"",E,S,I,A=`<div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">15</span>Rozkład głosów w ostatniej turze wyborów w
							danej okolicy:</h2></div>`,N,V,j,W,K,ne,Y,re,Q=`<div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">16</span>Bilans uzyskanej frekwencji w odniesieniu
							do ostatnich wyborów parlamentarnych</h2></div>`,se,oe,Te,fe="7",ee;function ge(de){t[1](de)}let pe={id:"page7donut"};t[0].params.page07.wykresData!==void 0&&(pe.data=t[0].params.page07.wykresData),K=new NC({props:pe}),Cn.push(()=>tr(K,"data",ge));let ye=t[0].params&&lv(t);return{c(){e=Z("div"),i=Z("div"),s=Z("div"),u=Z("div"),f=Z("h2"),f.innerHTML=d,o=we(),_=Z("p"),E=Mt(v),S=we(),I=Z("div"),I.innerHTML=A,N=we(),V=Z("div"),j=Z("div"),W=Z("div"),Ct(K.$$.fragment),Y=we(),re=Z("div"),re.innerHTML=Q,se=we(),ye&&ye.c(),oe=we(),Te=Z("div"),Te.textContent=fe,this.h()},l(de){e=G(de,"DIV",{class:!0});var Ne=J(e);i=G(Ne,"DIV",{class:!0});var Ge=J(i);s=G(Ge,"DIV",{class:!0});var Le=J(s);u=G(Le,"DIV",{class:!0});var Me=J(u);f=G(Me,"H2",{class:!0,"data-svelte-h":!0}),Vt(f)!=="svelte-1ccqt1s"&&(f.innerHTML=d),o=xe(Me),_=G(Me,"P",{class:!0,contenteditable:!0});var $e=J(_);E=Pt($e,v),$e.forEach(R),Me.forEach(R),Le.forEach(R),S=xe(Ge),I=G(Ge,"DIV",{class:!0,"data-svelte-h":!0}),Vt(I)!=="svelte-1ubuqsy"&&(I.innerHTML=A),N=xe(Ge),V=G(Ge,"DIV",{class:!0});var ht=J(V);j=G(ht,"DIV",{class:!0});var ut=J(j);W=G(ut,"DIV",{class:!0});var Fe=J(W);At(K.$$.fragment,Fe),Fe.forEach(R),ut.forEach(R),ht.forEach(R),Y=xe(Ge),re=G(Ge,"DIV",{class:!0,"data-svelte-h":!0}),Vt(re)!=="svelte-9c4y6l"&&(re.innerHTML=Q),se=xe(Ge),ye&&ye.l(Ge),Ge.forEach(R),oe=xe(Ne),Te=G(Ne,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Te)!=="svelte-lejaui"&&(Te.textContent=fe),Ne.forEach(R),this.h()},h(){z(f,"class","title_medium noselect"),z(_,"class","tabText"),z(_,"contenteditable",""),z(u,"class","full-width"),z(s,"class","grid_content noselect mb-20"),z(I,"class","grid_content noselect mb-20"),z(W,"class","wykres"),z(j,"class","full-width"),z(V,"class","grid_content noselect mb-20"),z(re,"class","grid_content noselect mb-20"),z(i,"class","containerFlex noselect"),z(Te,"class","pageNumber right svelte-8rnh5f"),z(e,"class","page_content")},m(de,Ne){Oe(de,e,Ne),P(e,i),P(i,s),P(s,u),P(u,f),P(u,o),P(u,_),P(_,E),P(i,S),P(i,I),P(i,N),P(i,V),P(V,j),P(j,W),Tt(K,W,null),P(i,Y),P(i,re),P(i,se),ye&&ye.m(i,null),P(e,oe),P(e,Te),ee=!0},p(de,Ne){(!ee||Ne&1)&&v!==(v=de[0].params.page07.text14+"")&&gl(E,v);const Ge={};!ne&&Ne&1&&(ne=!0,Ge.data=de[0].params.page07.wykresData,er(()=>ne=!1)),K.$set(Ge),de[0].params?ye?(ye.p(de,Ne),Ne&1&&Ve(ye,1)):(ye=lv(de),ye.c(),Ve(ye,1),ye.m(i,null)):ye&&(lr(),Xe(ye,1,1,()=>{ye=null}),ur())},i(de){ee||(Ve(K.$$.fragment,de),Ve(ye),ee=!0)},o(de){Xe(K.$$.fragment,de),Xe(ye),ee=!1},d(de){de&&R(e),It(K),ye&&ye.d()}}}function lv(t){let e,i,s,u,f,d,o;function _(I){t[2](I)}let v={editable:!0};t[0].params.page07.donut1!==void 0&&(v.value=t[0].params.page07.donut1),i=new av({props:v}),Cn.push(()=>tr(i,"value",_)),i.$on("valueChange",t[3]);function E(I){t[4](I)}let S={editable:!0};return t[0].params.page07.donut2!==void 0&&(S.value=t[0].params.page07.donut2),f=new av({props:S}),Cn.push(()=>tr(f,"value",E)),f.$on("valueChange",t[5]),{c(){e=Z("div"),Ct(i.$$.fragment),u=we(),Ct(f.$$.fragment),this.h()},l(I){e=G(I,"DIV",{class:!0});var A=J(e);At(i.$$.fragment,A),u=xe(A),At(f.$$.fragment,A),A.forEach(R),this.h()},h(){z(e,"class","donuts svelte-8rnh5f")},m(I,A){Oe(I,e,A),Tt(i,e,null),P(e,u),Tt(f,e,null),o=!0},p(I,A){const N={};!s&&A&1&&(s=!0,N.value=I[0].params.page07.donut1,er(()=>s=!1)),i.$set(N);const V={};!d&&A&1&&(d=!0,V.value=I[0].params.page07.donut2,er(()=>d=!1)),f.$set(V)},i(I){o||(Ve(i.$$.fragment,I),Ve(f.$$.fragment,I),o=!0)},o(I){Xe(i.$$.fragment,I),Xe(f.$$.fragment,I),o=!1},d(I){I&&R(e),It(i),It(f)}}}function qC(t){let e,i,s,u,f;i=new Mo({});let d=!t[0].params&&sv(),o=t[0].params&&t[0].params.page07&&t[0].params.page07.text14&&ov(t);return{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),d&&d.c(),u=we(),o&&o.c(),this.h()},l(_){e=G(_,"DIV",{class:!0});var v=J(e);At(i.$$.fragment,v),s=xe(v),d&&d.l(v),u=xe(v),o&&o.l(v),v.forEach(R),this.h()},h(){z(e,"class","content-block section page_07")},m(_,v){Oe(_,e,v),Tt(i,e,null),P(e,s),d&&d.m(e,null),P(e,u),o&&o.m(e,null),f=!0},p(_,[v]){_[0].params?d&&(lr(),Xe(d,1,1,()=>{d=null}),ur()):d?v&1&&Ve(d,1):(d=sv(),d.c(),Ve(d,1),d.m(e,u)),_[0].params&&_[0].params.page07&&_[0].params.page07.text14?o?(o.p(_,v),v&1&&Ve(o,1)):(o=ov(_),o.c(),Ve(o,1),o.m(e,null)):o&&(lr(),Xe(o,1,1,()=>{o=null}),ur())},i(_){f||(Ve(i.$$.fragment,_),Ve(d),Ve(o),f=!0)},o(_){Xe(i.$$.fragment,_),Xe(d),Xe(o),f=!1},d(_){_&&R(e),It(i),d&&d.d(),o&&o.d()}}}function GC(t,e,i){let s;Ur(t,Xt,v=>i(0,s=v)),ys(async()=>{});function u(v){t.$$.not_equal(s.params.page07.wykresData,v)&&(s.params.page07.wykresData=v,Xt.set(s))}function f(v){t.$$.not_equal(s.params.page07.donut1,v)&&(s.params.page07.donut1=v,Xt.set(s))}const d=v=>console.log(v.detail);function o(v){t.$$.not_equal(s.params.page07.donut2,v)&&(s.params.page07.donut2=v,Xt.set(s))}return[s,u,f,d,o,v=>console.log(v.detail)]}class ZC extends Pr{constructor(e){super(),Mr(this,e,GC,qC,Cr,{})}}function HC(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j;return{c(){e=Z("div"),i=Z("div"),s=Mt(t[1]),u=we(),f=Z("input"),d=we(),o=Z("div"),_=Z("h4"),v=Z("span"),this.h()},l(W){e=G(W,"DIV",{class:!0});var K=J(e);i=G(K,"DIV",{class:!0});var ne=J(i);s=Pt(ne,t[1]),ne.forEach(R),u=xe(K),f=G(K,"INPUT",{type:!0,style:!0,class:!0}),d=xe(K),o=G(K,"DIV",{id:!0,class:!0});var Y=J(o);_=G(Y,"H4",{style:!0,class:!0});var re=J(_);v=G(re,"SPAN",{style:!0}),J(v).forEach(R),re.forEach(R),Y.forEach(R),K.forEach(R),this.h()},h(){z(i,"class","value svelte-1uxdrpr"),z(f,"type","range"),Hi(f,"backgrount-color",'"'+t[3][t[0]]+'"',1),z(f,"class","svelte-1uxdrpr"),z(v,"style","width: "+uv+"px; height: "+uv+"px; border-radius: "+WC+"px;}"),z(_,"style",t[2]),z(_,"class","svelte-1uxdrpr"),z(o,"id","h4-container"),z(o,"class","svelte-1uxdrpr"),z(e,"class",I="range_element color"+t[0]+" svelte-1uxdrpr")},m(W,K){Oe(W,e,K),P(e,i),P(i,s),P(e,u),P(e,f),Gt(f,t[1]),P(e,d),P(e,o),P(o,_),P(_,v),N=!0,V||(j=[bt(f,"change",t[6]),bt(f,"input",t[6]),bt(f,"change",t[4])],V=!0)},p(W,[K]){(!N||K&2)&&Zn(s,W[1]),(!N||K&1)&&Hi(f,"backgrount-color",'"'+W[3][W[0]]+'"',1),K&2&&Gt(f,W[1]),(!N||K&4)&&z(_,"style",W[2]),(!N||K&1&&I!==(I="range_element color"+W[0]+" svelte-1uxdrpr"))&&z(e,"class",I)},i(W){N||(W&&vi(()=>{N&&(E||(E=Dr(_,Ip,{},!0)),E.run(1))}),W&&vi(()=>{N&&(S||(S=Dr(o,au,{},!0)),S.run(1))}),W&&vi(()=>{N&&(A||(A=Dr(e,jr,{},!0)),A.run(1))}),N=!0)},o(W){W&&(E||(E=Dr(_,Ip,{},!1)),E.run(0)),W&&(S||(S=Dr(o,au,{},!1)),S.run(0)),W&&(A||(A=Dr(e,jr,{},!1)),A.run(0)),N=!1},d(W){W&&R(e),W&&E&&E.end(),W&&S&&S.end(),W&&A&&A.end(),V=!1,Or(j)}}}let uv=10,WC=50;function KC(t,e,i){let s=["rgba(14, 207, 93, 1.000)","rgba(121, 253, 171, 1.000)"],{color:u}=e,{value:f=30}=e,d=f,o={transform:"translateX(-50%) scale(1)",left:"0%"};function _(E){i(1,d=E.target.value),i(2,o={...o,transform:`translateX(-50%) scale(${1+d/100})`,left:`${d}%`})}ys(()=>{}),Tm(()=>{});function v(){d=Ii(this.value),i(1,d)}return t.$$set=E=>{"color"in E&&i(0,u=E.color),"value"in E&&i(5,f=E.value)},[u,d,o,s,_,f,v]}class yi extends Pr{constructor(e){super(),Mr(this,e,KC,HC,Cr,{color:0,value:5})}}function cv(t){let e,i,s,u="Styczeń",f,d,o,_,v,E,S,I,A,N,V,j="Luty",W,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge="Marzec",pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut,Fe,ze="Kwiecień",gt,Zt,an,yn,sn,Dt,$t,ct,xt,wt,Wt,Qt="Maj",Ht,kt,dt,be,Et,Ut,_t,zt,gn,Mn,Hn,Kn="Czerwiec",br,Yn,rr,vt,Vn,He,pt,dn,lt,en,tn,wr="Lipiec",mr,on,Xn,ke,X,ae,me,Ae,Ce,je,te,ue="Sierpień",_e,qe,Je,Qe,Nt,Jt,Lt,qt,cn,ln,In,Ln="Wrzesień",Tn,hr,Rn,kr,ar,Fr,bi,qr,Jr,hi,$n,Ma="Październik",fi,Un,Bn,fr,Bt,Pn,St,Qi,dr,Fn,ni,Er="Listopad",Ai,Gr,xi,Ci,Qa,Xr,wi,ma,Xi,Di,ea,vs="Grudzień",Ds,ga,ta,za,po,Da,sa,oa,Hs;function Do(et){t[8](et)}let _a={color:"0"};t[2].params.page08.PMcurrent.x1_10!==void 0&&(_a.value=t[2].params.page08.PMcurrent.x1_10),o=new yi({props:_a}),Cn.push(()=>tr(o,"value",Do));function es(et){t[9](et)}let ts={color:"1"};t[2].params.page08.PMcurrent.x1_25!==void 0&&(ts.value=t[2].params.page08.PMcurrent.x1_25),S=new yi({props:ts}),Cn.push(()=>tr(S,"value",es));function Ws(et){t[10](et)}let ri={color:"0"};t[2].params.page08.PMcurrent.x2_10!==void 0&&(ri.value=t[2].params.page08.PMcurrent.x2_10),ne=new yi({props:ri}),Cn.push(()=>tr(ne,"value",Ws));function bs(et){t[11](et)}let xs={color:"1"};t[2].params.page08.PMcurrent.x2_25!==void 0&&(xs.value=t[2].params.page08.PMcurrent.x2_25),se=new yi({props:xs}),Cn.push(()=>tr(se,"value",bs));function Li(et){t[12](et)}let Ls={color:"0"};t[2].params.page08.PMcurrent.x3_10!==void 0&&(Ls.value=t[2].params.page08.PMcurrent.x3_10),de=new yi({props:Ls}),Cn.push(()=>tr(de,"value",Li));function Rs(et){t[13](et)}let Lr={color:"1"};t[2].params.page08.PMcurrent.x3_25!==void 0&&(Lr.value=t[2].params.page08.PMcurrent.x3_25),Me=new yi({props:Lr}),Cn.push(()=>tr(Me,"value",Rs));function Jn(et){t[14](et)}let mo={color:"0"};t[2].params.page08.PMcurrent.x4_10!==void 0&&(mo.value=t[2].params.page08.PMcurrent.x4_10),an=new yi({props:mo}),Cn.push(()=>tr(an,"value",Jn));function Ri(et){t[15](et)}let ii={color:"1"};t[2].params.page08.PMcurrent.x4_25!==void 0&&(ii.value=t[2].params.page08.PMcurrent.x4_25),$t=new yi({props:ii}),Cn.push(()=>tr($t,"value",Ri));function ai(et){t[16](et)}let La={color:"0"};t[2].params.page08.PMcurrent.x5_10!==void 0&&(La.value=t[2].params.page08.PMcurrent.x5_10),dt=new yi({props:La}),Cn.push(()=>tr(dt,"value",ai));function Qr(et){t[17](et)}let ns={color:"1"};t[2].params.page08.PMcurrent.x5_25!==void 0&&(ns.value=t[2].params.page08.PMcurrent.x5_25),_t=new yi({props:ns}),Cn.push(()=>tr(_t,"value",Qr));function si(et){t[18](et)}let Ra={color:"0"};t[2].params.page08.PMcurrent.x6_10!==void 0&&(Ra.value=t[2].params.page08.PMcurrent.x6_10),rr=new yi({props:Ra}),Cn.push(()=>tr(rr,"value",si));function oi(et){t[19](et)}let rs={color:"1"};t[2].params.page08.PMcurrent.x6_25!==void 0&&(rs.value=t[2].params.page08.PMcurrent.x6_25),pt=new yi({props:rs}),Cn.push(()=>tr(pt,"value",oi));function ei(et){t[20](et)}let Jo={color:"0"};t[2].params.page08.PMcurrent.x7_10!==void 0&&(Jo.value=t[2].params.page08.PMcurrent.x7_10),Xn=new yi({props:Jo}),Cn.push(()=>tr(Xn,"value",ei));function yl(et){t[21](et)}let is={color:"1"};t[2].params.page08.PMcurrent.x7_25!==void 0&&(is.value=t[2].params.page08.PMcurrent.x7_25),me=new yi({props:is}),Cn.push(()=>tr(me,"value",yl));function Ks(et){t[22](et)}let di={color:"0"};t[2].params.page08.PMcurrent.x8_10!==void 0&&(di.value=t[2].params.page08.PMcurrent.x8_10),Je=new yi({props:di}),Cn.push(()=>tr(Je,"value",Ks));function Ol(et){t[23](et)}let vl={color:"1"};t[2].params.page08.PMcurrent.x8_25!==void 0&&(vl.value=t[2].params.page08.PMcurrent.x8_25),Lt=new yi({props:vl}),Cn.push(()=>tr(Lt,"value",Ol));function Qo(et){t[24](et)}let Bs={color:"0"};t[2].params.page08.PMcurrent.x9_10!==void 0&&(Bs.value=t[2].params.page08.PMcurrent.x9_10),Rn=new yi({props:Bs}),Cn.push(()=>tr(Rn,"value",Qo));function li(et){t[25](et)}let rt={color:"1"};t[2].params.page08.PMcurrent.x9_25!==void 0&&(rt.value=t[2].params.page08.PMcurrent.x9_25),bi=new yi({props:rt}),Cn.push(()=>tr(bi,"value",li));function kn(et){t[26](et)}let Gn={color:"0"};t[2].params.page08.PMcurrent.x10_10!==void 0&&(Gn.value=t[2].params.page08.PMcurrent.x10_10),Bn=new yi({props:Gn}),Cn.push(()=>tr(Bn,"value",kn));function pi(et){t[27](et)}let ya={color:"1"};t[2].params.page08.PMcurrent.x10_25!==void 0&&(ya.value=t[2].params.page08.PMcurrent.x10_25),St=new yi({props:ya}),Cn.push(()=>tr(St,"value",pi));function _r(et){t[28](et)}let Ft={color:"0"};t[2].params.page08.PMcurrent.x11_10!==void 0&&(Ft.value=t[2].params.page08.PMcurrent.x11_10),xi=new yi({props:Ft}),Cn.push(()=>tr(xi,"value",_r));function Sr(et){t[29](et)}let go={color:"1"};t[2].params.page08.PMcurrent.x11_25!==void 0&&(go.value=t[2].params.page08.PMcurrent.x11_25),wi=new yi({props:go}),Cn.push(()=>tr(wi,"value",Sr));function Ba(et){t[30](et)}let Oa={color:"0"};t[2].params.page08.PMcurrent.x12_10!==void 0&&(Oa.value=t[2].params.page08.PMcurrent.x12_10),ta=new yi({props:Oa}),Cn.push(()=>tr(ta,"value",Ba));function el(et){t[31](et)}let _o={color:"1"};return t[2].params.page08.PMcurrent.x12_25!==void 0&&(_o.value=t[2].params.page08.PMcurrent.x12_25),sa=new yi({props:_o}),Cn.push(()=>tr(sa,"value",el)),{c(){e=Z("div"),i=Z("div"),s=Z("div"),s.textContent=u,f=we(),d=Z("div"),Ct(o.$$.fragment),v=we(),E=Z("div"),Ct(S.$$.fragment),A=we(),N=Z("div"),V=Z("div"),V.textContent=j,W=we(),K=Z("div"),Ct(ne.$$.fragment),re=we(),Q=Z("div"),Ct(se.$$.fragment),Te=we(),fe=Z("div"),ee=Z("div"),ee.textContent=ge,pe=we(),ye=Z("div"),Ct(de.$$.fragment),Ge=we(),Le=Z("div"),Ct(Me.$$.fragment),ht=we(),ut=Z("div"),Fe=Z("div"),Fe.textContent=ze,gt=we(),Zt=Z("div"),Ct(an.$$.fragment),sn=we(),Dt=Z("div"),Ct($t.$$.fragment),xt=we(),wt=Z("div"),Wt=Z("div"),Wt.textContent=Qt,Ht=we(),kt=Z("div"),Ct(dt.$$.fragment),Et=we(),Ut=Z("div"),Ct(_t.$$.fragment),gn=we(),Mn=Z("div"),Hn=Z("div"),Hn.textContent=Kn,br=we(),Yn=Z("div"),Ct(rr.$$.fragment),Vn=we(),He=Z("div"),Ct(pt.$$.fragment),lt=we(),en=Z("div"),tn=Z("div"),tn.textContent=wr,mr=we(),on=Z("div"),Ct(Xn.$$.fragment),X=we(),ae=Z("div"),Ct(me.$$.fragment),Ce=we(),je=Z("div"),te=Z("div"),te.textContent=ue,_e=we(),qe=Z("div"),Ct(Je.$$.fragment),Nt=we(),Jt=Z("div"),Ct(Lt.$$.fragment),cn=we(),ln=Z("div"),In=Z("div"),In.textContent=Ln,Tn=we(),hr=Z("div"),Ct(Rn.$$.fragment),ar=we(),Fr=Z("div"),Ct(bi.$$.fragment),Jr=we(),hi=Z("div"),$n=Z("div"),$n.textContent=Ma,fi=we(),Un=Z("div"),Ct(Bn.$$.fragment),Bt=we(),Pn=Z("div"),Ct(St.$$.fragment),dr=we(),Fn=Z("div"),ni=Z("div"),ni.textContent=Er,Ai=we(),Gr=Z("div"),Ct(xi.$$.fragment),Qa=we(),Xr=Z("div"),Ct(wi.$$.fragment),Xi=we(),Di=Z("div"),ea=Z("div"),ea.textContent=vs,Ds=we(),ga=Z("div"),Ct(ta.$$.fragment),po=we(),Da=Z("div"),Ct(sa.$$.fragment),this.h()},l(et){e=G(et,"DIV",{class:!0});var pn=J(e);i=G(pn,"DIV",{class:!0});var Na=J(i);s=G(Na,"DIV",{class:!0,"data-svelte-h":!0}),Vt(s)!=="svelte-1wo46xp"&&(s.textContent=u),f=xe(Na),d=G(Na,"DIV",{class:!0});var jn=J(d);At(o.$$.fragment,jn),jn.forEach(R),v=xe(Na),E=G(Na,"DIV",{class:!0});var la=J(E);At(S.$$.fragment,la),la.forEach(R),Na.forEach(R),A=xe(pn),N=G(pn,"DIV",{class:!0});var gr=J(N);V=G(gr,"DIV",{class:!0,"data-svelte-h":!0}),Vt(V)!=="svelte-3zo95x"&&(V.textContent=j),W=xe(gr),K=G(gr,"DIV",{class:!0});var yr=J(K);At(ne.$$.fragment,yr),yr.forEach(R),re=xe(gr),Q=G(gr,"DIV",{class:!0});var Fa=J(Q);At(se.$$.fragment,Fa),Fa.forEach(R),gr.forEach(R),Te=xe(pn),fe=G(pn,"DIV",{class:!0});var va=J(fe);ee=G(va,"DIV",{class:!0,"data-svelte-h":!0}),Vt(ee)!=="svelte-1ljj5j"&&(ee.textContent=ge),pe=xe(va),ye=G(va,"DIV",{class:!0});var Va=J(ye);At(de.$$.fragment,Va),Va.forEach(R),Ge=xe(va),Le=G(va,"DIV",{class:!0});var as=J(Le);At(Me.$$.fragment,as),as.forEach(R),va.forEach(R),ht=xe(pn),ut=G(pn,"DIV",{class:!0});var na=J(ut);Fe=G(na,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Fe)!=="svelte-1w8r9c"&&(Fe.textContent=ze),gt=xe(na),Zt=G(na,"DIV",{class:!0});var $a=J(Zt);At(an.$$.fragment,$a),$a.forEach(R),sn=xe(na),Dt=G(na,"DIV",{class:!0});var ba=J(Dt);At($t.$$.fragment,ba),ba.forEach(R),na.forEach(R),xt=xe(pn),wt=G(pn,"DIV",{class:!0});var ua=J(wt);Wt=G(ua,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Wt)!=="svelte-13e45kf"&&(Wt.textContent=Qt),Ht=xe(ua),kt=G(ua,"DIV",{class:!0});var Ua=J(kt);At(dt.$$.fragment,Ua),Ua.forEach(R),Et=xe(ua),Ut=G(ua,"DIV",{class:!0});var ca=J(Ut);At(_t.$$.fragment,ca),ca.forEach(R),ua.forEach(R),gn=xe(pn),Mn=G(pn,"DIV",{class:!0});var Bi=J(Mn);Hn=G(Bi,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Hn)!=="svelte-wi6f5b"&&(Hn.textContent=Kn),br=xe(Bi),Yn=G(Bi,"DIV",{class:!0});var ws=J(Yn);At(rr.$$.fragment,ws),ws.forEach(R),Vn=xe(Bi),He=G(Bi,"DIV",{class:!0});var ks=J(He);At(pt.$$.fragment,ks),ks.forEach(R),Bi.forEach(R),lt=xe(pn),en=G(pn,"DIV",{class:!0});var ja=J(en);tn=G(ja,"DIV",{class:!0,"data-svelte-h":!0}),Vt(tn)!=="svelte-1tg2l8h"&&(tn.textContent=wr),mr=xe(ja),on=G(ja,"DIV",{class:!0});var ss=J(on);At(Xn.$$.fragment,ss),ss.forEach(R),X=xe(ja),ae=G(ja,"DIV",{class:!0});var Oi=J(ae);At(me.$$.fragment,Oi),Oi.forEach(R),ja.forEach(R),Ce=xe(pn),je=G(pn,"DIV",{class:!0});var Yi=J(je);te=G(Yi,"DIV",{class:!0,"data-svelte-h":!0}),Vt(te)!=="svelte-1qnn2w"&&(te.textContent=ue),_e=xe(Yi),qe=G(Yi,"DIV",{class:!0});var Es=J(qe);At(Je.$$.fragment,Es),Es.forEach(R),Nt=xe(Yi),Jt=G(Yi,"DIV",{class:!0});var os=J(Jt);At(Lt.$$.fragment,os),os.forEach(R),Yi.forEach(R),cn=xe(pn),ln=G(pn,"DIV",{class:!0});var Pi=J(ln);In=G(Pi,"DIV",{class:!0,"data-svelte-h":!0}),Vt(In)!=="svelte-190ttvo"&&(In.textContent=Ln),Tn=xe(Pi),hr=G(Pi,"DIV",{class:!0});var Xs=J(hr);At(Rn.$$.fragment,Xs),Xs.forEach(R),ar=xe(Pi),Fr=G(Pi,"DIV",{class:!0});var Ys=J(Fr);At(bi.$$.fragment,Ys),Ys.forEach(R),Pi.forEach(R),Jr=xe(pn),hi=G(pn,"DIV",{class:!0});var ls=J(hi);$n=G(ls,"DIV",{class:!0,"data-svelte-h":!0}),Vt($n)!=="svelte-fzgnfq"&&($n.textContent=Ma),fi=xe(ls),Un=G(ls,"DIV",{class:!0});var Rr=J(Un);At(Bn.$$.fragment,Rr),Rr.forEach(R),Bt=xe(ls),Pn=G(ls,"DIV",{class:!0});var us=J(Pn);At(St.$$.fragment,us),us.forEach(R),ls.forEach(R),dr=xe(pn),Fn=G(pn,"DIV",{class:!0});var qn=J(Fn);ni=G(qn,"DIV",{class:!0,"data-svelte-h":!0}),Vt(ni)!=="svelte-1cgl81v"&&(ni.textContent=Er),Ai=xe(qn),Gr=G(qn,"DIV",{class:!0});var yo=J(Gr);At(xi.$$.fragment,yo),yo.forEach(R),Qa=xe(qn),Xr=G(qn,"DIV",{class:!0});var Lo=J(Xr);At(wi.$$.fragment,Lo),Lo.forEach(R),qn.forEach(R),Xi=xe(pn),Di=G(pn,"DIV",{class:!0});var Os=J(Di);ea=G(Os,"DIV",{class:!0,"data-svelte-h":!0}),Vt(ea)!=="svelte-5n6v2x"&&(ea.textContent=vs),Ds=xe(Os),ga=G(Os,"DIV",{class:!0});var Js=J(ga);At(ta.$$.fragment,Js),Js.forEach(R),po=xe(Os),Da=G(Os,"DIV",{class:!0});var Ro=J(Da);At(sa.$$.fragment,Ro),Ro.forEach(R),Os.forEach(R),pn.forEach(R),this.h()},h(){z(s,"class","item-0"),z(d,"class","item-1"),z(E,"class","item-2"),z(i,"class","angry-grid"),z(V,"class","item-0"),z(K,"class","item-1"),z(Q,"class","item-2"),z(N,"class","angry-grid"),z(ee,"class","item-0"),z(ye,"class","item-1"),z(Le,"class","item-2"),z(fe,"class","angry-grid"),z(Fe,"class","item-0"),z(Zt,"class","item-1"),z(Dt,"class","item-2"),z(ut,"class","angry-grid"),z(Wt,"class","item-0"),z(kt,"class","item-1"),z(Ut,"class","item-2"),z(wt,"class","angry-grid"),z(Hn,"class","item-0"),z(Yn,"class","item-1"),z(He,"class","item-2"),z(Mn,"class","angry-grid"),z(tn,"class","item-0"),z(on,"class","item-1"),z(ae,"class","item-2"),z(en,"class","angry-grid"),z(te,"class","item-0"),z(qe,"class","item-1"),z(Jt,"class","item-2"),z(je,"class","angry-grid"),z(In,"class","item-0"),z(hr,"class","item-1"),z(Fr,"class","item-2"),z(ln,"class","angry-grid"),z($n,"class","item-0"),z(Un,"class","item-1"),z(Pn,"class","item-2"),z(hi,"class","angry-grid"),z(ni,"class","item-0"),z(Gr,"class","item-1"),z(Xr,"class","item-2"),z(Fn,"class","angry-grid"),z(ea,"class","item-0"),z(ga,"class","item-1"),z(Da,"class","item-2"),z(Di,"class","angry-grid"),z(e,"class","cont_left")},m(et,pn){Oe(et,e,pn),P(e,i),P(i,s),P(i,f),P(i,d),Tt(o,d,null),P(i,v),P(i,E),Tt(S,E,null),P(e,A),P(e,N),P(N,V),P(N,W),P(N,K),Tt(ne,K,null),P(N,re),P(N,Q),Tt(se,Q,null),P(e,Te),P(e,fe),P(fe,ee),P(fe,pe),P(fe,ye),Tt(de,ye,null),P(fe,Ge),P(fe,Le),Tt(Me,Le,null),P(e,ht),P(e,ut),P(ut,Fe),P(ut,gt),P(ut,Zt),Tt(an,Zt,null),P(ut,sn),P(ut,Dt),Tt($t,Dt,null),P(e,xt),P(e,wt),P(wt,Wt),P(wt,Ht),P(wt,kt),Tt(dt,kt,null),P(wt,Et),P(wt,Ut),Tt(_t,Ut,null),P(e,gn),P(e,Mn),P(Mn,Hn),P(Mn,br),P(Mn,Yn),Tt(rr,Yn,null),P(Mn,Vn),P(Mn,He),Tt(pt,He,null),P(e,lt),P(e,en),P(en,tn),P(en,mr),P(en,on),Tt(Xn,on,null),P(en,X),P(en,ae),Tt(me,ae,null),P(e,Ce),P(e,je),P(je,te),P(je,_e),P(je,qe),Tt(Je,qe,null),P(je,Nt),P(je,Jt),Tt(Lt,Jt,null),P(e,cn),P(e,ln),P(ln,In),P(ln,Tn),P(ln,hr),Tt(Rn,hr,null),P(ln,ar),P(ln,Fr),Tt(bi,Fr,null),P(e,Jr),P(e,hi),P(hi,$n),P(hi,fi),P(hi,Un),Tt(Bn,Un,null),P(hi,Bt),P(hi,Pn),Tt(St,Pn,null),P(e,dr),P(e,Fn),P(Fn,ni),P(Fn,Ai),P(Fn,Gr),Tt(xi,Gr,null),P(Fn,Qa),P(Fn,Xr),Tt(wi,Xr,null),P(e,Xi),P(e,Di),P(Di,ea),P(Di,Ds),P(Di,ga),Tt(ta,ga,null),P(Di,po),P(Di,Da),Tt(sa,Da,null),Hs=!0},p(et,pn){const Na={};!_&&pn[0]&4&&(_=!0,Na.value=et[2].params.page08.PMcurrent.x1_10,er(()=>_=!1)),o.$set(Na);const jn={};!I&&pn[0]&4&&(I=!0,jn.value=et[2].params.page08.PMcurrent.x1_25,er(()=>I=!1)),S.$set(jn);const la={};!Y&&pn[0]&4&&(Y=!0,la.value=et[2].params.page08.PMcurrent.x2_10,er(()=>Y=!1)),ne.$set(la);const gr={};!oe&&pn[0]&4&&(oe=!0,gr.value=et[2].params.page08.PMcurrent.x2_25,er(()=>oe=!1)),se.$set(gr);const yr={};!Ne&&pn[0]&4&&(Ne=!0,yr.value=et[2].params.page08.PMcurrent.x3_10,er(()=>Ne=!1)),de.$set(yr);const Fa={};!$e&&pn[0]&4&&($e=!0,Fa.value=et[2].params.page08.PMcurrent.x3_25,er(()=>$e=!1)),Me.$set(Fa);const va={};!yn&&pn[0]&4&&(yn=!0,va.value=et[2].params.page08.PMcurrent.x4_10,er(()=>yn=!1)),an.$set(va);const Va={};!ct&&pn[0]&4&&(ct=!0,Va.value=et[2].params.page08.PMcurrent.x4_25,er(()=>ct=!1)),$t.$set(Va);const as={};!be&&pn[0]&4&&(be=!0,as.value=et[2].params.page08.PMcurrent.x5_10,er(()=>be=!1)),dt.$set(as);const na={};!zt&&pn[0]&4&&(zt=!0,na.value=et[2].params.page08.PMcurrent.x5_25,er(()=>zt=!1)),_t.$set(na);const $a={};!vt&&pn[0]&4&&(vt=!0,$a.value=et[2].params.page08.PMcurrent.x6_10,er(()=>vt=!1)),rr.$set($a);const ba={};!dn&&pn[0]&4&&(dn=!0,ba.value=et[2].params.page08.PMcurrent.x6_25,er(()=>dn=!1)),pt.$set(ba);const ua={};!ke&&pn[0]&4&&(ke=!0,ua.value=et[2].params.page08.PMcurrent.x7_10,er(()=>ke=!1)),Xn.$set(ua);const Ua={};!Ae&&pn[0]&4&&(Ae=!0,Ua.value=et[2].params.page08.PMcurrent.x7_25,er(()=>Ae=!1)),me.$set(Ua);const ca={};!Qe&&pn[0]&4&&(Qe=!0,ca.value=et[2].params.page08.PMcurrent.x8_10,er(()=>Qe=!1)),Je.$set(ca);const Bi={};!qt&&pn[0]&4&&(qt=!0,Bi.value=et[2].params.page08.PMcurrent.x8_25,er(()=>qt=!1)),Lt.$set(Bi);const ws={};!kr&&pn[0]&4&&(kr=!0,ws.value=et[2].params.page08.PMcurrent.x9_10,er(()=>kr=!1)),Rn.$set(ws);const ks={};!qr&&pn[0]&4&&(qr=!0,ks.value=et[2].params.page08.PMcurrent.x9_25,er(()=>qr=!1)),bi.$set(ks);const ja={};!fr&&pn[0]&4&&(fr=!0,ja.value=et[2].params.page08.PMcurrent.x10_10,er(()=>fr=!1)),Bn.$set(ja);const ss={};!Qi&&pn[0]&4&&(Qi=!0,ss.value=et[2].params.page08.PMcurrent.x10_25,er(()=>Qi=!1)),St.$set(ss);const Oi={};!Ci&&pn[0]&4&&(Ci=!0,Oi.value=et[2].params.page08.PMcurrent.x11_10,er(()=>Ci=!1)),xi.$set(Oi);const Yi={};!ma&&pn[0]&4&&(ma=!0,Yi.value=et[2].params.page08.PMcurrent.x11_25,er(()=>ma=!1)),wi.$set(Yi);const Es={};!za&&pn[0]&4&&(za=!0,Es.value=et[2].params.page08.PMcurrent.x12_10,er(()=>za=!1)),ta.$set(Es);const os={};!oa&&pn[0]&4&&(oa=!0,os.value=et[2].params.page08.PMcurrent.x12_25,er(()=>oa=!1)),sa.$set(os)},i(et){Hs||(Ve(o.$$.fragment,et),Ve(S.$$.fragment,et),Ve(ne.$$.fragment,et),Ve(se.$$.fragment,et),Ve(de.$$.fragment,et),Ve(Me.$$.fragment,et),Ve(an.$$.fragment,et),Ve($t.$$.fragment,et),Ve(dt.$$.fragment,et),Ve(_t.$$.fragment,et),Ve(rr.$$.fragment,et),Ve(pt.$$.fragment,et),Ve(Xn.$$.fragment,et),Ve(me.$$.fragment,et),Ve(Je.$$.fragment,et),Ve(Lt.$$.fragment,et),Ve(Rn.$$.fragment,et),Ve(bi.$$.fragment,et),Ve(Bn.$$.fragment,et),Ve(St.$$.fragment,et),Ve(xi.$$.fragment,et),Ve(wi.$$.fragment,et),Ve(ta.$$.fragment,et),Ve(sa.$$.fragment,et),Hs=!0)},o(et){Xe(o.$$.fragment,et),Xe(S.$$.fragment,et),Xe(ne.$$.fragment,et),Xe(se.$$.fragment,et),Xe(de.$$.fragment,et),Xe(Me.$$.fragment,et),Xe(an.$$.fragment,et),Xe($t.$$.fragment,et),Xe(dt.$$.fragment,et),Xe(_t.$$.fragment,et),Xe(rr.$$.fragment,et),Xe(pt.$$.fragment,et),Xe(Xn.$$.fragment,et),Xe(me.$$.fragment,et),Xe(Je.$$.fragment,et),Xe(Lt.$$.fragment,et),Xe(Rn.$$.fragment,et),Xe(bi.$$.fragment,et),Xe(Bn.$$.fragment,et),Xe(St.$$.fragment,et),Xe(xi.$$.fragment,et),Xe(wi.$$.fragment,et),Xe(ta.$$.fragment,et),Xe(sa.$$.fragment,et),Hs=!1},d(et){et&&R(e),It(o),It(S),It(ne),It(se),It(de),It(Me),It(an),It($t),It(dt),It(_t),It(rr),It(pt),It(Xn),It(me),It(Je),It(Lt),It(Rn),It(bi),It(Bn),It(St),It(xi),It(wi),It(ta),It(sa)}}}function XC(t){let e,i,s,u,f,d,o,_,v=`<ul class="shadowBox svelte-e6m856"><li><span class="svelte-e6m856"><svg class="_45 svelte-e6m856" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 1.05"><defs><style>.xls-1 {
									fill: #2181b3;
									stroke-width: 0px;
								}
							</style></defs><rect class="xls-1" width="15.8" height="4"></rect></svg> </span>Norma PM10
				<span class="text svelte-e6m856">mieszanina występujących<br/>w powietrzu cząstek<br/>o średnicy nie mniejszej niz 10
					mikrometrów</span></li> <li><span class="svelte-e6m856"><svg class="_45 svelte-e6m856" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 1.05"><defs><style>.xls-2 {
									fill: #75ffb0;
									stroke-width: 0px;
								}
							</style></defs><rect class="xls-2" width="15.8" height="4"></rect></svg> </span>Norma PM2.5
				<span class="text svelte-e6m856">aerozol atmosferyczny o średnicy niewykraczającej poza 2.5 mikrona</span></li> <li><span class="svelte-e6m856"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.35 7.35" class="svelte-e6m856"><defs><style>.xls-3 {
									fill: #2181b3;
									stroke-width: 0px;
								}
							</style></defs><rect class="xls-3" x="0" y="0" width="15.03" height="7" rx="4.08" ry="4.08"></rect></svg> </span>PM10</li> <li><span class="svelte-e6m856"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.35 7.35" class="svelte-e6m856"><defs><style>.xls-4 {
									fill: #75ffb0;
									stroke-width: 0px;
								}
							</style></defs><rect class="xls-4" x="0" y="0" width="15.03" height="7" rx="4.08" ry="4.08"></rect></svg> </span><span class="svelte-e6m856">PM2.5</span> <span class="text svelte-e6m856">Im większe stężenie tych dwóch związków<br/>w powietrzu, tym jego jakość się zmniejsza,<br/>a współczynnik szkodliwości dla zdrowia jednostki rośnie</span></li></ul>`,E,S,I,A=t[2].params&&t[2].params.page08&&cv(t);return{c(){e=Z("div"),i=Z("div"),s=we(),u=Z("div"),f=we(),d=Z("div"),A&&A.c(),o=we(),_=Z("div"),_.innerHTML=v,this.h()},l(N){e=G(N,"DIV",{class:!0});var V=J(e);i=G(V,"DIV",{class:!0,style:!0}),J(i).forEach(R),s=xe(V),u=G(V,"DIV",{class:!0,style:!0}),J(u).forEach(R),V.forEach(R),f=xe(N),d=G(N,"DIV",{class:!0});var j=J(d);A&&A.l(j),o=xe(j),_=G(j,"DIV",{class:!0,"data-svelte-h":!0}),Vt(_)!=="svelte-1m7zjl7"&&(_.innerHTML=v),j.forEach(R),this.h()},h(){z(i,"class","draggable pm10 svelte-e6m856"),Hi(i,"left",t[5](t[0])+"%"),Hi(i,"background-color",t[3][1]),z(u,"class","draggable pm25 svelte-e6m856"),Hi(u,"left",t[5](t[1])+"%"),Hi(u,"background-color",t[3][0]),z(e,"class","line svelte-e6m856"),z(_,"class","content_right"),z(d,"class","container")},m(N,V){Oe(N,e,V),P(e,i),P(e,s),P(e,u),Oe(N,f,V),Oe(N,d,V),A&&A.m(d,null),P(d,o),P(d,_),E=!0,S||(I=[bt(i,"mousedown",t[6]),bt(u,"mousedown",t[7])],S=!0)},p(N,V){(!E||V[0]&1)&&Hi(i,"left",N[5](N[0])+"%"),(!E||V[0]&2)&&Hi(u,"left",N[5](N[1])+"%"),N[2].params&&N[2].params.page08?A?(A.p(N,V),V[0]&4&&Ve(A,1)):(A=cv(N),A.c(),Ve(A,1),A.m(d,o)):A&&(lr(),Xe(A,1,1,()=>{A=null}),ur())},i(N){E||(Ve(A),E=!0)},o(N){Xe(A),E=!1},d(N){N&&(R(e),R(f),R(d)),A&&A.d(),S=!1,Or(I)}}}function YC(t,e,i){let s;Ur(t,Xt,Fe=>i(2,s=Fe));let u=null,f=["rgba(14, 207, 93, 1.000)","rgba(121, 253, 171, 1.000)"],{positionPM10:d=s.params.page08.positionPM10}=e,{positionPM25:o=s.params.page08.positionPM25}=e,_;const v=(Fe,ze)=>{u=ze,_=Fe.clientX,document.addEventListener("mousemove",E),document.addEventListener("mouseup",S)},E=Fe=>{const ze=Fe.clientX-_;let gt;u==="PM10"?(gt=d+ze/5,i(0,d=Math.max(1,Math.min(100,gt)))):u==="PM25"&&(gt=o+ze/5,i(1,o=Math.max(1,Math.min(100,gt)))),_=Fe.clientX},S=()=>{u==="PM10"?Ar(Xt,s.params.page08.positionPM10=d,s):u==="PM25"&&Ar(Xt,s.params.page08.positionPM25=o,s),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",S),u=null},I=Fe=>(Fe-1)/99*100;ys(()=>{i(0,d=I(d)),i(1,o=I(o))});const A=Fe=>v(Fe,"PM10"),N=Fe=>v(Fe,"PM25");function V(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x1_10,Fe)&&(s.params.page08.PMcurrent.x1_10=Fe,Xt.set(s))}function j(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x1_25,Fe)&&(s.params.page08.PMcurrent.x1_25=Fe,Xt.set(s))}function W(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x2_10,Fe)&&(s.params.page08.PMcurrent.x2_10=Fe,Xt.set(s))}function K(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x2_25,Fe)&&(s.params.page08.PMcurrent.x2_25=Fe,Xt.set(s))}function ne(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x3_10,Fe)&&(s.params.page08.PMcurrent.x3_10=Fe,Xt.set(s))}function Y(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x3_25,Fe)&&(s.params.page08.PMcurrent.x3_25=Fe,Xt.set(s))}function re(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x4_10,Fe)&&(s.params.page08.PMcurrent.x4_10=Fe,Xt.set(s))}function Q(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x4_25,Fe)&&(s.params.page08.PMcurrent.x4_25=Fe,Xt.set(s))}function se(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x5_10,Fe)&&(s.params.page08.PMcurrent.x5_10=Fe,Xt.set(s))}function oe(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x5_25,Fe)&&(s.params.page08.PMcurrent.x5_25=Fe,Xt.set(s))}function Te(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x6_10,Fe)&&(s.params.page08.PMcurrent.x6_10=Fe,Xt.set(s))}function fe(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x6_25,Fe)&&(s.params.page08.PMcurrent.x6_25=Fe,Xt.set(s))}function ee(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x7_10,Fe)&&(s.params.page08.PMcurrent.x7_10=Fe,Xt.set(s))}function ge(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x7_25,Fe)&&(s.params.page08.PMcurrent.x7_25=Fe,Xt.set(s))}function pe(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x8_10,Fe)&&(s.params.page08.PMcurrent.x8_10=Fe,Xt.set(s))}function ye(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x8_25,Fe)&&(s.params.page08.PMcurrent.x8_25=Fe,Xt.set(s))}function de(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x9_10,Fe)&&(s.params.page08.PMcurrent.x9_10=Fe,Xt.set(s))}function Ne(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x9_25,Fe)&&(s.params.page08.PMcurrent.x9_25=Fe,Xt.set(s))}function Ge(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x10_10,Fe)&&(s.params.page08.PMcurrent.x10_10=Fe,Xt.set(s))}function Le(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x10_25,Fe)&&(s.params.page08.PMcurrent.x10_25=Fe,Xt.set(s))}function Me(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x11_10,Fe)&&(s.params.page08.PMcurrent.x11_10=Fe,Xt.set(s))}function $e(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x11_25,Fe)&&(s.params.page08.PMcurrent.x11_25=Fe,Xt.set(s))}function ht(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x12_10,Fe)&&(s.params.page08.PMcurrent.x12_10=Fe,Xt.set(s))}function ut(Fe){t.$$.not_equal(s.params.page08.PMcurrent.x12_25,Fe)&&(s.params.page08.PMcurrent.x12_25=Fe,Xt.set(s))}return t.$$set=Fe=>{"positionPM10"in Fe&&i(0,d=Fe.positionPM10),"positionPM25"in Fe&&i(1,o=Fe.positionPM25)},[d,o,s,f,v,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut]}class JC extends Pr{constructor(e){super(),Mr(this,e,YC,XC,Cr,{positionPM10:0,positionPM25:1},null,[-1,-1])}}function QC(t){let e,i,s,u,f,d='<span class="number_type noselect">17</span> Ocena zanieczyszczenia powietrza',o,_,v=`Stopień czystości powietrza to parametr istotny dla zdrowia. mający również wpływ na
						atrakcyjność okolicy,<br/>w której znajduje się nieruchomość. Stąd, o ile
						występowaniu tzw. smogu towarzysza określone warunki atmosferyczne, take jak mgła lub
						brak wiatru, sama koncentracja zanieczyszczeń w danym obszarze stanowi punkt wyjściowy
						przy określaniu poziomu klarowności dostępnego w tym regionie powietrza.<br/><br/>Załączone poniżej informacje ukazują skale jakości powietrza w omawianej lokalizacji
						wskaźnik ten jest systematycznie badany i uaktualniany oraz dotyczy aglomeracji, gdzie
						zanieczyszczenie powietrza jest uznawane za problem. mowa tu m.in. o Krakowie.
						Warszawie lub Katowicach`,E,S,I="Średni miesięczny poziom stężenia pyłów dla najbliższego punktu pomiarowego [µg/m³]:",A,N,V,j,W='<div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect disabled_number svelte-o4qec9"></span>Ocena jakosci powietrza</h2></div>',K,ne,Y,re="8",Q;N=new JC({});let se=t[0].params&&hv(t);return{c(){e=Z("div"),i=Z("div"),s=Z("div"),u=Z("div"),f=Z("h2"),f.innerHTML=d,o=we(),_=Z("p"),_.innerHTML=v,E=we(),S=Z("h3"),S.textContent=I,A=we(),Ct(N.$$.fragment),V=we(),j=Z("div"),j.innerHTML=W,K=we(),se&&se.c(),ne=we(),Y=Z("div"),Y.textContent=re,this.h()},l(oe){e=G(oe,"DIV",{class:!0});var Te=J(e);i=G(Te,"DIV",{class:!0});var fe=J(i);s=G(fe,"DIV",{class:!0});var ee=J(s);u=G(ee,"DIV",{class:!0});var ge=J(u);f=G(ge,"H2",{class:!0,"data-svelte-h":!0}),Vt(f)!=="svelte-8kyfi5"&&(f.innerHTML=d),o=xe(ge),_=G(ge,"P",{class:!0,"data-svelte-h":!0}),Vt(_)!=="svelte-1lcoov6"&&(_.innerHTML=v),E=xe(ge),S=G(ge,"H3",{"data-svelte-h":!0}),Vt(S)!=="svelte-vc6gpn"&&(S.textContent=I),A=xe(ge),At(N.$$.fragment,ge),ge.forEach(R),ee.forEach(R),V=xe(fe),j=G(fe,"DIV",{class:!0,"data-svelte-h":!0}),Vt(j)!=="svelte-7s9c50"&&(j.innerHTML=W),K=xe(fe),se&&se.l(fe),fe.forEach(R),ne=xe(Te),Y=G(Te,"DIV",{class:!0,"data-svelte-h":!0}),Vt(Y)!=="svelte-lav97t"&&(Y.textContent=re),Te.forEach(R),this.h()},h(){z(f,"class","title_medium noselect"),z(_,"class","tabText"),z(u,"class","full-width"),z(s,"class","grid_content noselect mb-20"),z(j,"class","grid_content noselect mb-20 ocena svelte-o4qec9"),z(i,"class","containerFlex noselect"),z(Y,"class","pageNumber right svelte-o4qec9"),z(e,"class","page_content")},m(oe,Te){Oe(oe,e,Te),P(e,i),P(i,s),P(s,u),P(u,f),P(u,o),P(u,_),P(u,E),P(u,S),P(u,A),Tt(N,u,null),P(i,V),P(i,j),P(i,K),se&&se.m(i,null),P(e,ne),P(e,Y),Q=!0},p(oe,Te){oe[0].params?se?(se.p(oe,Te),Te&1&&Ve(se,1)):(se=hv(oe),se.c(),Ve(se,1),se.m(i,null)):se&&(lr(),Xe(se,1,1,()=>{se=null}),ur())},i(oe){Q||(Ve(N.$$.fragment,oe),Ve(se),Q=!0)},o(oe){Xe(N.$$.fragment,oe),Xe(se),Q=!1},d(oe){oe&&R(e),It(N),se&&se.d()}}}function eP(t){let e,i,s;return i=new fo({}),{c(){e=Z("div"),Ct(i.$$.fragment),this.h()},l(u){e=G(u,"DIV",{class:!0});var f=J(e);At(i.$$.fragment,f),f.forEach(R),this.h()},h(){z(e,"class","center")},m(u,f){Oe(u,e,f),Tt(i,e,null),s=!0},p:nr,i(u){s||(Ve(i.$$.fragment,u),s=!0)},o(u){Xe(i.$$.fragment,u),s=!1},d(u){u&&R(e),It(i)}}}function hv(t){let e,i,s='<img src="/images/solniczka.svg" style="width:110px;"/>',u,f,d="<br/> <hr/> <p>Wskaźnik oznaczający poziom zanieczyszczenia powietrza</p>",o,_,v,E,S,I;return v=new Qm({props:{range:"min",values:[t[0].params.page08.poziomBEZPIECZENSTWA],max:"5",pips:!0,all:"label"}}),v.$on("stop",t[1]),{c(){e=Z("div"),i=Z("div"),i.innerHTML=s,u=we(),f=Z("div"),f.innerHTML=d,o=we(),_=Z("div"),Ct(v.$$.fragment),E=we(),S=Z("div"),this.h()},l(A){e=G(A,"DIV",{class:!0});var N=J(e);i=G(N,"DIV",{class:!0,"data-svelte-h":!0}),Vt(i)!=="svelte-1c0as33"&&(i.innerHTML=s),u=xe(N),f=G(N,"DIV",{class:!0,"data-svelte-h":!0}),Vt(f)!=="svelte-4e3as8"&&(f.innerHTML=d),o=xe(N),_=G(N,"DIV",{class:!0});var V=J(_);At(v.$$.fragment,V),E=xe(V),S=G(V,"DIV",{}),J(S).forEach(R),V.forEach(R),N.forEach(R),this.h()},h(){z(i,"class","image svelte-o4qec9"),z(f,"class","text"),z(_,"class","rangeSlider_ svelte-o4qec9"),z(e,"class","flex")},m(A,N){Oe(A,e,N),P(e,i),P(e,u),P(e,f),P(e,o),P(e,_),Tt(v,_,null),P(_,E),P(_,S),I=!0},p(A,N){const V={};N&1&&(V.values=[A[0].params.page08.poziomBEZPIECZENSTWA]),v.$set(V)},i(A){I||(Ve(v.$$.fragment,A),I=!0)},o(A){Xe(v.$$.fragment,A),I=!1},d(A){A&&R(e),It(v)}}}function tP(t){let e,i,s,u,f,d;i=new Mo({});const o=[eP,QC],_=[];function v(E,S){return E[0].params?1:0}return u=v(t),f=_[u]=o[u](t),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),f.c(),this.h()},l(E){e=G(E,"DIV",{class:!0});var S=J(e);At(i.$$.fragment,S),s=xe(S),f.l(S),S.forEach(R),this.h()},h(){z(e,"class","content-block section page_08")},m(E,S){Oe(E,e,S),Tt(i,e,null),P(e,s),_[u].m(e,null),d=!0},p(E,[S]){let I=u;u=v(E),u===I?_[u].p(E,S):(lr(),Xe(_[I],1,1,()=>{_[I]=null}),ur(),f=_[u],f?f.p(E,S):(f=_[u]=o[u](E),f.c()),Ve(f,1),f.m(e,null))},i(E){d||(Ve(i.$$.fragment,E),Ve(f),d=!0)},o(E){Xe(i.$$.fragment,E),Xe(f),d=!1},d(E){E&&R(e),It(i),_[u].d()}}}function nP(t,e,i){let s;return Ur(t,Xt,f=>i(0,s=f)),[s,f=>{Ar(Xt,s.params.page08.poziomBEZPIECZENSTWA=f.detail.value,s)}]}class rP extends Pr{constructor(e){super(),Mr(this,e,nP,tP,Cr,{})}}function iP(t){let e,i,s,u,f=`<div class="containerFlex noselect"><div class="grid_content noselect mb-20"><div class="full-width"><h1 contenteditable="">Objaśnienie poszczególnych ujęć odnoszących się do raportu</h1> <h2 class="title_medium noselect"><span class="number_type noselect">2</span> Charakterystyka lokum</h2> <p class="tabText" contenteditable="">Dane zamieszczone w tej sekcji stanowią informacje pozyskane od użytkownika i wskazuje,
						jakie czynniki posłużyły do wyceny. Mowa tu więc o tych parametrach, które uwzględnia
						osoba na stronie internetowej przy wypełnianiu formularza służącego do oszacowania
						wartości nieruchomosci. Marka Home Rate nie może, w związku z powyższym. odpowiadać za
						ewentualne nieścisłości, jeśli tokowe znalazły się w wygenerowanej specyfice mieszkania</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">3</span> Wycena posiadłości</h2> <p class="tabText" contenteditable="">Sekcja ta stanowi informacje o przewidywanej wartości standardowej nieruchomości względem dostarczonych danych. Wyceny dokonuje się na podstawie niezliczonej liczby zrealizowanych w wybranym mieście transakcji oraz w oparciu<br/>o adekwatne bazy danych (no. RciWN, prowadzonej przez starostwa). Należy mieć jednak na względzie, ze kluczowym aspektem mającym wpływ na cenę nieruchomosci jest zawsze lokalizacja.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">8</span>Wykaz transakcii referencynych</h2> <p class="tabText" contenteditable="">W treści raportu uwzględniono 10 przykładów przeprowadzonych transakcji sprzedaży nieruchomosci w danej okolicy. Mają one charakter poglądowy, a samą wycenę przeprowadza się, biorąc pod uwagę dane z transakcji sprzedaży dostępnych w publicznych źródłach, w tym z aktów notarialnych i wycen rzeczoznawców oraz w oparciu<br/>
						o charakterystykę mieszkania.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">9</span> Prezentacja cen sprzedazy nieruchomości oraz
						ich powierzchnie</h2> <p class="tabText" contenteditable="">Bilanse te zawierają  ceny sprzedawanych w danej lokalizacji lokali oraz ich powierzchnię. Wykres ten obrazuje, jakiego typu posiadłości są sprzedawane najcześciej (np. kawalerki) oraz jaka była cena transakcji. Wskazano również grupę do której przynależy wyceniana nieruchomość. Wszelkie dane z tej sekcji opierają się na statystykach sprzedaży mieszkań<br/>w skali całego miasta.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">11</span>Wskazniki czasu dojazdu</h2> <p class="tabText" contenteditable="">Mając na względzie wycenę nieruchomości, należy wziąć pod uwagę, w jaki sposób lokal jest skomunikowany z innymi kluczowymi punktami, takimi jak szkoła, urzędy, sklepy, czy przychodnie. Analiza wlicza również do oceny dane dotyczące sąsiadujących dzielnic/ulic, nieprzypisane bezpośrednio do wybranej lokalizacji. Parametr ten pozwala także ustalić ewentualną opłacalność najmu krótko- i długoterminowego.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">12</span>Ocena atrakcyjności otoczenia</h2> <p class="tabText" contenteditable="">Sekcja ta oznacza typowe odległości do najbliższego punktu danego rodzaju, np. przystanku autobusowego, szkoły, szpitala. Analiza ta bazuje na informacjach zaczerpniętych z Open Street Map i wszelkich danych odnoszących się do miejsc użyteczności publicznej. Wskazywanie znaczenia ma tu charakter opiniodawczy i jest rezultatem subiektywnej kalkulacji względem tego, co do danej lokalizacji stanowi punkt krytyczny dla korzystającej z tych zasobów społeczności.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect"><span class="number_type noselect">13</span>Poziom bezpieczeństwa okolicy</h2> <p class="tabText" contenteditable="">Wszelkie analizy dotyczące tej sekcji bazują na zestawieniach odznaczających liczbę popełnionych w tym obszarze przestępstw, a które to dane można pozyskać ze źródeł publicznych. Bilans może również zawierać informacje<br/>o wykroczeniach nieprzypisanych bezpośrednio do specyficznego miejsca, a samej ulicy. W danym ujęciu za punkt odniesienia przyjmuje się centralnie usytuowaną część. Nadawanie określonym aspektom znaczenia ma charakter opiniodawczy i bazuje na subiektywnych szacunkach odnośnie do tego, którym z kategorii zdarzeń należy przypisać bardziej istotny, krytyczny wymiar.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect no bold" contenteditable=""><span class="number_type noselect">*</span></h2> <p class="tabText" contenteditable="">Przedstawiona aianliza określa szacunkową, rynkową wartość posiadłości i została zrealizowana w oparciu o bazę rzeczywistych transakcji przeprowadzonych na lokalnym rynku oraz informacje pochodzące z aktów notarialnych, wycen rzeczoznawców, skonsolidowanych danych o faktycznych cenach sprzedaży mieszkań na rynku nieruchomości. Przygotowane przez Home Rate narzędzie do szacowania wartości lokalu pozwala na dostarczenie komplementarnego dokumentu zawierającego bilans informacji o walorach, korzyściach i wyróżnikach posiadanej nieruchomosci z zakresu poziomu bezpieczeństwa, rentowności najmu użyteczności publicznej czy wiedzy, jak wypada omawiana posiadłość<br/>w porównaniu z innymi w wybranym regionie, w odniesieniu do już przeprowadzonych transakcji sprzedaży.</p></div></div> <div class="grid_content noselect mb-20"><div class="full-width"><h2 class="title_medium noselect no bold"><span class="number_type noselect">*</span></h2> <p class="tabText" contenteditable="">Zaprezentowany raport nie stanowi aparatu szacunkowego ani opinii o wartości posiadłości w myśl. Ustawy<br/>o gospodarce nieruchomościami. Analiza ta dostarcza możliwie, jak najbardziej zbliżona do faktycznego stanu rzeczy, informacje o wartości mieszkania w formie rekomendacji, biorąc pod uwagę założenie, ze transakcja zostanie przeprowadzona przy typowych warunkach rynkowych wobec standardowej nieruchomości. Kalkulacja ta nie ma jednak charakteru wyceny rzeczoznawcy majątkowego oraz nie uwzględnia dodatkowych kosztów powiązanych z zakupem<br/>i obowiazujących podatków.</p></div></div></div>`,d;return i=new Mo({}),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),u=Z("div"),u.innerHTML=f,this.h()},l(o){e=G(o,"DIV",{class:!0});var _=J(e);At(i.$$.fragment,_),s=xe(_),u=G(_,"DIV",{class:!0,"data-svelte-h":!0}),Vt(u)!=="svelte-jzyxg0"&&(u.innerHTML=f),_.forEach(R),this.h()},h(){z(u,"class","page_content"),z(e,"class","content-block section page_09")},m(o,_){Oe(o,e,_),Tt(i,e,null),P(e,s),P(e,u),d=!0},p:nr,i(o){d||(Ve(i.$$.fragment,o),d=!0)},o(o){Xe(i.$$.fragment,o),d=!1},d(o){o&&R(e),It(i)}}}class aP extends Pr{constructor(e){super(),Mr(this,e,null,iP,Cr,{})}}function sP(t){let e,i,s,u,f,d=`<div class="logotype svelte-1r4u99m"><img width="400" src="/images/logoPropValue.png"/></div> <div class="pageNumber right svelte-1r4u99m"><p contenteditable="" class="svelte-1r4u99m">Nazwa (Imię Nazwisko)<br/> ul. Nazwa ulicy 1 <br/>00-000 Miasto <br/>(+48) 999 888 777<br/>
				biuro@nazwa-strony.pl<br/> nazwo-strony.pl</p></div>`,o;return s=new Mo({}),{c(){e=Z("div"),i=Z("div"),Ct(s.$$.fragment),u=we(),f=Z("div"),f.innerHTML=d,this.h()},l(_){e=G(_,"DIV",{class:!0});var v=J(e);i=G(v,"DIV",{class:!0});var E=J(i);At(s.$$.fragment,E),E.forEach(R),u=xe(v),f=G(v,"DIV",{class:!0,"data-svelte-h":!0}),Vt(f)!=="svelte-1swyt96"&&(f.innerHTML=d),v.forEach(R),this.h()},h(){z(i,"class","header svelte-1r4u99m"),z(f,"class","page_content svelte-1r4u99m"),z(e,"class","content-block section page_10 svelte-1r4u99m")},m(_,v){Oe(_,e,v),P(e,i),Tt(s,i,null),P(e,u),P(e,f),o=!0},p:nr,i(_){o||(Ve(s.$$.fragment,_),o=!0)},o(_){Xe(s.$$.fragment,_),o=!1},d(_){_&&R(e),It(s)}}}class oP extends Pr{constructor(e){super(),Mr(this,e,null,sP,Cr,{})}}function lP(t){let e,i='<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none" class="svelte-v8h10h"><script xmlns=""><\/script><path d="M13.2686 14.2686L15 16M12.0627 6.06274L11.9373 5.93726C11.5914 5.59135 11.4184 5.4184 11.2166 5.29472C11.0376 5.18506 10.8425 5.10425 10.6385 5.05526C10.4083 5 10.1637 5 9.67452 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V15.8C3 16.9201 3 17.4802 3.21799 17.908C3.40973 18.2843 3.71569 18.5903 4.09202 18.782C4.51984 19 5.07989 19 6.2 19H17.8C18.9201 19 19.4802 19 19.908 18.782C20.2843 18.5903 20.5903 18.2843 20.782 17.908C21 17.4802 21 16.9201 21 15.8V10.2C21 9.0799 21 8.51984 20.782 8.09202C20.5903 7.71569 20.2843 7.40973 19.908 7.21799C19.4802 7 18.9201 7 17.8 7H14.3255C13.8363 7 13.5917 7 13.3615 6.94474C13.1575 6.89575 12.9624 6.81494 12.7834 6.70528C12.5816 6.5816 12.4086 6.40865 12.0627 6.06274ZM14 12.5C14 13.8807 12.8807 15 11.5 15C10.1193 15 9 13.8807 9 12.5C9 11.1193 10.1193 10 11.5 10C12.8807 10 14 11.1193 14 12.5Z" stroke="#fbfbfb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><script xmlns=""><\/script></svg>',s;return{c(){e=Z("span"),e.innerHTML=i,s=Mt(`
			Lista`),this.h()},l(u){e=G(u,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-1vpklua"&&(e.innerHTML=i),s=Pt(u,`
			Lista`),this.h()},h(){z(e,"class","icon svelte-v8h10h")},m(u,f){Oe(u,e,f),Oe(u,s,f)},p:nr,d(u){u&&(R(e),R(s))}}}function uP(t){let e,i='<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none" class="svelte-v8h10h"><path d="M9 11L11 13L15 9M19 10.2C19 14.1764 15.5 17.4 12 21C8.5 17.4 5 14.1764 5 10.2C5 6.22355 8.13401 3 12 3C15.866 3 19 6.22355 19 10.2Z" stroke="#fbfbfb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',s;return{c(){e=Z("span"),e.innerHTML=i,s=Mt(`

			Zapisz`),this.h()},l(u){e=G(u,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-ci9krx"&&(e.innerHTML=i),s=Pt(u,`

			Zapisz`),this.h()},h(){z(e,"class","icon svelte-v8h10h")},m(u,f){Oe(u,e,f),Oe(u,s,f)},p:nr,d(u){u&&(R(e),R(s))}}}function cP(t){let e,i='<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none" class="svelte-v8h10h"><path d="M12 13V7M15 10.0008L9 10M19 10.2C19 14.1764 15.5 17.4 12 21C8.5 17.4 5 14.1764 5 10.2C5 6.22355 8.13401 3 12 3C15.866 3 19 6.22355 19 10.2Z" stroke="#fbfbfb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',s;return{c(){e=Z("span"),e.innerHTML=i,s=Mt(" Nowy"),this.h()},l(u){e=G(u,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-122wgfx"&&(e.innerHTML=i),s=Pt(u," Nowy"),this.h()},h(){z(e,"class","icon svelte-v8h10h")},m(u,f){Oe(u,e,f),Oe(u,s,f)},p:nr,d(u){u&&(R(e),R(s))}}}function hP(t){let e,i='<svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none" class="svelte-v8h10h"><path d="M7 18H6.2C5.0799 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V10.2C3 9.0799 3 8.51984 3.21799 8.09202C3.40973 7.71569 3.71569 7.40973 4.09202 7.21799C4.51984 7 5.0799 7 6.2 7H7M17 18H17.8C18.9201 18 19.4802 18 19.908 17.782C20.2843 17.5903 20.5903 17.2843 20.782 16.908C21 16.4802 21 15.9201 21 14.8V10.2C21 9.07989 21 8.51984 20.782 8.09202C20.5903 7.71569 20.2843 7.40973 19.908 7.21799C19.4802 7 18.9201 7 17.8 7H17M7 11H7.01M17 7V5.4V4.6C17 4.03995 17 3.75992 16.891 3.54601C16.7951 3.35785 16.6422 3.20487 16.454 3.10899C16.2401 3 15.9601 3 15.4 3H8.6C8.03995 3 7.75992 3 7.54601 3.10899C7.35785 3.20487 7.20487 3.35785 7.10899 3.54601C7 3.75992 7 4.03995 7 4.6V5.4V7M17 7H7M8.6 21H15.4C15.9601 21 16.2401 21 16.454 20.891C16.6422 20.7951 16.7951 20.6422 16.891 20.454C17 20.2401 17 19.9601 17 19.4V16.6C17 16.0399 17 15.7599 16.891 15.546C16.7951 15.3578 16.6422 15.2049 16.454 15.109C16.2401 15 15.9601 15 15.4 15H8.6C8.03995 15 7.75992 15 7.54601 15.109C7.35785 15.2049 7.20487 15.3578 7.10899 15.546C7 15.7599 7 16.0399 7 16.6V19.4C7 19.9601 7 20.2401 7.10899 20.454C7.20487 20.6422 7.35785 20.7951 7.54601 20.891C7.75992 21 8.03995 21 8.6 21Z" stroke="#fbfbfb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',s;return{c(){e=Z("span"),e.innerHTML=i,s=Mt(`

			Drukuj`),this.h()},l(u){e=G(u,"SPAN",{class:!0,"data-svelte-h":!0}),Vt(e)!=="svelte-u20sue"&&(e.innerHTML=i),s=Pt(u,`

			Drukuj`),this.h()},h(){z(e,"class","icon svelte-v8h10h")},m(u,f){Oe(u,e,f),Oe(u,s,f)},p:nr,d(u){u&&(R(e),R(s))}}}function fP(t){let e,i,s,u,f,d,o,_,v,E,S;return i=new Ja({props:{$$slots:{default:[lP]},$$scope:{ctx:t}}}),i.$on("click",t[20]),u=new Ja({props:{$$slots:{default:[uP]},$$scope:{ctx:t}}}),u.$on("click",t[21]),d=new Ja({props:{$$slots:{default:[cP]},$$scope:{ctx:t}}}),d.$on("click",t[22]),_=new Ja({props:{$$slots:{default:[hP]},$$scope:{ctx:t}}}),_.$on("click",t[23]),E=new xw({props:{class:"mb-4 dark:text-white"}}),E.$on("click",t[24]),{c(){e=Z("div"),Ct(i.$$.fragment),s=we(),Ct(u.$$.fragment),f=we(),Ct(d.$$.fragment),o=we(),Ct(_.$$.fragment),v=we(),Ct(E.$$.fragment),this.h()},l(I){e=G(I,"DIV",{class:!0});var A=J(e);At(i.$$.fragment,A),s=xe(A),At(u.$$.fragment,A),f=xe(A),At(d.$$.fragment,A),o=xe(A),At(_.$$.fragment,A),v=xe(A),At(E.$$.fragment,A),A.forEach(R),this.h()},h(){z(e,"class","flex items-center")},m(I,A){Oe(I,e,A),Tt(i,e,null),P(e,s),Tt(u,e,null),P(e,f),Tt(d,e,null),P(e,o),Tt(_,e,null),P(e,v),Tt(E,e,null),S=!0},p(I,A){const N={};A[1]&64&&(N.$$scope={dirty:A,ctx:I}),i.$set(N);const V={};A[1]&64&&(V.$$scope={dirty:A,ctx:I}),u.$set(V);const j={};A[1]&64&&(j.$$scope={dirty:A,ctx:I}),d.$set(j);const W={};A[1]&64&&(W.$$scope={dirty:A,ctx:I}),_.$set(W)},i(I){S||(Ve(i.$$.fragment,I),Ve(u.$$.fragment,I),Ve(d.$$.fragment,I),Ve(_.$$.fragment,I),Ve(E.$$.fragment,I),S=!0)},o(I){Xe(i.$$.fragment,I),Xe(u.$$.fragment,I),Xe(d.$$.fragment,I),Xe(_.$$.fragment,I),Xe(E.$$.fragment,I),S=!1},d(I){I&&R(e),It(i),It(u),It(d),It(_),It(E)}}}function fv(t){let e,i,s,u,f;function d(_){t[27](_)}let o={title:"Czy na pewno zapisać lokaloizację?",autoclose:!0,$$slots:{footer:[gP],default:[dP]},$$scope:{ctx:t}};return t[0]!==void 0&&(o.open=t[0]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[0]&64|v[1]&64&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&1&&(s=!0,E.open=_[0],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function dP(t){let e,i=t[6].adres+"",s;return{c(){e=Z("p"),s=Mt(i),this.h()},l(u){e=G(u,"P",{class:!0});var f=J(e);s=Pt(f,i),f.forEach(R),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400")},m(u,f){Oe(u,e,f),P(e,s)},p(u,f){f[0]&64&&i!==(i=u[6].adres+"")&&Zn(s,i)},d(u){u&&R(e)}}}function pP(t){let e;return{c(){e=Mt("Zapisz dokument")},l(i){e=Pt(i,"Zapisz dokument")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function mP(t){let e;return{c(){e=Mt("Anuluj")},l(i){e=Pt(i,"Anuluj")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function gP(t){let e,i,s,u;return e=new Ja({props:{$$slots:{default:[pP]},$$scope:{ctx:t}}}),e.$on("click",t[26]),s=new Ja({props:{color:"alternative",$$slots:{default:[mP]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment),i=we(),Ct(s.$$.fragment)},l(f){At(e.$$.fragment,f),i=xe(f),At(s.$$.fragment,f)},m(f,d){Tt(e,f,d),Oe(f,i,d),Tt(s,f,d),u=!0},p(f,d){const o={};d[1]&64&&(o.$$scope={dirty:d,ctx:f}),e.$set(o);const _={};d[1]&64&&(_.$$scope={dirty:d,ctx:f}),s.$set(_)},i(f){u||(Ve(e.$$.fragment,f),Ve(s.$$.fragment,f),u=!0)},o(f){Xe(e.$$.fragment,f),Xe(s.$$.fragment,f),u=!1},d(f){f&&R(i),It(e,f),It(s,f)}}}function dv(t){let e,i,s,u,f;function d(_){t[30](_)}let o={title:"Czy na pewno chcesz wyjść bez zapisania danych?",autoclose:!0,$$slots:{footer:[xP],default:[_P]},$$scope:{ctx:t}};return t[1]!==void 0&&(o.open=t[1]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[0]&65|v[1]&64&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&2&&(s=!0,E.open=_[1],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function _P(t){let e,i=t[6].adres+"",s;return{c(){e=Z("p"),s=Mt(i),this.h()},l(u){e=G(u,"P",{class:!0});var f=J(e);s=Pt(f,i),f.forEach(R),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400")},m(u,f){Oe(u,e,f),P(e,s)},p(u,f){f[0]&64&&i!==(i=u[6].adres+"")&&Zn(s,i)},d(u){u&&R(e)}}}function yP(t){let e;return{c(){e=Mt("Wyjdź")},l(i){e=Pt(i,"Wyjdź")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function vP(t){let e;return{c(){e=Mt("Zapisz")},l(i){e=Pt(i,"Zapisz")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function bP(t){let e;return{c(){e=Mt("Anuluj")},l(i){e=Pt(i,"Anuluj")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function xP(t){let e,i,s,u,f,d;return e=new Ja({props:{$$slots:{default:[yP]},$$scope:{ctx:t}}}),e.$on("click",t[28]),s=new Ja({props:{$$slots:{default:[vP]},$$scope:{ctx:t}}}),s.$on("click",t[29]),f=new Ja({props:{color:"alternative",$$slots:{default:[bP]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment),i=we(),Ct(s.$$.fragment),u=we(),Ct(f.$$.fragment)},l(o){At(e.$$.fragment,o),i=xe(o),At(s.$$.fragment,o),u=xe(o),At(f.$$.fragment,o)},m(o,_){Tt(e,o,_),Oe(o,i,_),Tt(s,o,_),Oe(o,u,_),Tt(f,o,_),d=!0},p(o,_){const v={};_[1]&64&&(v.$$scope={dirty:_,ctx:o}),e.$set(v);const E={};_[1]&64&&(E.$$scope={dirty:_,ctx:o}),s.$set(E);const S={};_[1]&64&&(S.$$scope={dirty:_,ctx:o}),f.$set(S)},i(o){d||(Ve(e.$$.fragment,o),Ve(s.$$.fragment,o),Ve(f.$$.fragment,o),d=!0)},o(o){Xe(e.$$.fragment,o),Xe(s.$$.fragment,o),Xe(f.$$.fragment,o),d=!1},d(o){o&&(R(i),R(u)),It(e,o),It(s,o),It(f,o)}}}function pv(t){let e,i,s,u,f;function d(_){t[33](_)}let o={title:"Czy na pewno chcesz wyjść bez zapisania aktualnych danych?",autoclose:!0,$$slots:{footer:[IP],default:[wP]},$$scope:{ctx:t}};return t[1]!==void 0&&(o.open=t[1]),i=new Bl({props:o}),Cn.push(()=>tr(i,"open",d)),{c(){e=Z("div"),Ct(i.$$.fragment)},l(_){e=G(_,"DIV",{});var v=J(e);At(i.$$.fragment,v),v.forEach(R)},m(_,v){Oe(_,e,v),Tt(i,e,null),f=!0},p(_,v){const E={};v[0]&65|v[1]&64&&(E.$$scope={dirty:v,ctx:_}),!s&&v[0]&2&&(s=!0,E.open=_[1],er(()=>s=!1)),i.$set(E)},i(_){f||(Ve(i.$$.fragment,_),_&&vi(()=>{f&&(u||(u=Dr(e,jr,{delay:100,duration:150},!0)),u.run(1))}),f=!0)},o(_){Xe(i.$$.fragment,_),_&&(u||(u=Dr(e,jr,{delay:100,duration:150},!1)),u.run(0)),f=!1},d(_){_&&R(e),It(i),_&&u&&u.end()}}}function wP(t){let e,i=t[6].adres+"",s;return{c(){e=Z("p"),s=Mt(i),this.h()},l(u){e=G(u,"P",{class:!0});var f=J(e);s=Pt(f,i),f.forEach(R),this.h()},h(){z(e,"class","text-base leading-relaxed text-gray-500 dark:text-gray-400")},m(u,f){Oe(u,e,f),P(e,s)},p(u,f){f[0]&64&&i!==(i=u[6].adres+"")&&Zn(s,i)},d(u){u&&R(e)}}}function kP(t){let e;return{c(){e=Mt("Wyjdź")},l(i){e=Pt(i,"Wyjdź")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function EP(t){let e;return{c(){e=Mt("Nowy")},l(i){e=Pt(i,"Nowy")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function SP(t){let e;return{c(){e=Mt("Anuluj")},l(i){e=Pt(i,"Anuluj")},m(i,s){Oe(i,e,s)},d(i){i&&R(e)}}}function IP(t){let e,i,s,u,f,d;return e=new Ja({props:{$$slots:{default:[kP]},$$scope:{ctx:t}}}),e.$on("click",t[31]),s=new Ja({props:{$$slots:{default:[EP]},$$scope:{ctx:t}}}),s.$on("click",t[32]),f=new Ja({props:{color:"alternative",$$slots:{default:[SP]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment),i=we(),Ct(s.$$.fragment),u=we(),Ct(f.$$.fragment)},l(o){At(e.$$.fragment,o),i=xe(o),At(s.$$.fragment,o),u=xe(o),At(f.$$.fragment,o)},m(o,_){Tt(e,o,_),Oe(o,i,_),Tt(s,o,_),Oe(o,u,_),Tt(f,o,_),d=!0},p(o,_){const v={};_[1]&64&&(v.$$scope={dirty:_,ctx:o}),e.$set(v);const E={};_[1]&64&&(E.$$scope={dirty:_,ctx:o}),s.$set(E);const S={};_[1]&64&&(S.$$scope={dirty:_,ctx:o}),f.$set(S)},i(o){d||(Ve(e.$$.fragment,o),Ve(s.$$.fragment,o),Ve(f.$$.fragment,o),d=!0)},o(o){Xe(e.$$.fragment,o),Xe(s.$$.fragment,o),Xe(f.$$.fragment,o),d=!1},d(o){o&&(R(i),R(u)),It(e,o),It(s,o),It(f,o)}}}function TP(t){let e,i,s,u,f,d,o,_,v,E,S,I,A,N,V,j,W,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut,Fe,ze,gt,Zt,an,yn,sn,Dt,$t,ct,xt,wt,Wt,Qt,Ht,kt,dt,be,Et,Ut,_t,zt,gn,Mn,Hn,Kn,br,Yn,rr,vt,Vn,He,pt,dn,lt,en,tn,wr,mr,on,Xn,ke,X,ae,me,Ae,Ce,je,te,ue,_e,qe,Je,Qe,Nt,Jt,Lt,qt,cn,ln,In,Ln,Tn,hr,Rn,kr,ar,Fr,bi,qr,Jr,hi,$n;f=new Bw({}),_=new qw({}),S=new Tk({}),N=new a4({}),W=new VA({}),Y=new WA({}),se=new nC({}),fe=new EC({}),pe=new ZC({}),Ne=new rP({}),Me=new aP({}),ut=new oP({});function Ma(Bt){t[25](Bt)}let fi={placement:"top",width:"w-full",transitionType:"fly",transitionParams:t[7],id:"sidebar",$$slots:{default:[fP]},$$scope:{ctx:t}};t[4]!==void 0&&(fi.hidden=t[4]),ar=new zw({props:fi}),Cn.push(()=>tr(ar,"hidden",Ma));let Un=t[0]&&fv(t),Bn=t[1]&&dv(t),fr=t[2]&&pv(t);return{c(){e=Z("link"),i=we(),s=Z("div"),u=Z("div"),Ct(f.$$.fragment),d=we(),o=Z("div"),Ct(_.$$.fragment),v=we(),E=Z("div"),Ct(S.$$.fragment),I=we(),A=Z("div"),Ct(N.$$.fragment),V=we(),j=Z("div"),Ct(W.$$.fragment),K=we(),ne=Z("div"),Ct(Y.$$.fragment),re=we(),Q=Z("div"),Ct(se.$$.fragment),oe=we(),Te=Z("div"),Ct(fe.$$.fragment),ee=we(),ge=Z("div"),Ct(pe.$$.fragment),ye=we(),de=Z("div"),Ct(Ne.$$.fragment),Ge=we(),Le=Z("div"),Ct(Me.$$.fragment),$e=we(),ht=Z("div"),Ct(ut.$$.fragment),Fe=we(),ze=Z("br"),gt=we(),Zt=Z("br"),an=we(),yn=Z("br"),sn=we(),Dt=Z("br"),$t=we(),ct=Z("br"),xt=we(),wt=Z("br"),Wt=we(),Qt=Z("br"),Ht=we(),kt=Z("br"),dt=we(),be=Z("br"),Et=we(),Ut=Z("br"),_t=we(),zt=Z("br"),gn=we(),Mn=Z("br"),Hn=we(),Kn=Z("br"),br=we(),Yn=Z("br"),rr=we(),vt=Z("br"),Vn=we(),He=Z("br"),pt=we(),dn=Z("br"),lt=we(),en=Z("br"),tn=we(),wr=Z("br"),mr=we(),on=Z("br"),Xn=we(),ke=Z("br"),X=we(),ae=Z("br"),me=we(),Ae=Z("br"),Ce=we(),je=Z("br"),te=we(),ue=Z("br"),_e=we(),qe=Z("br"),Je=we(),Qe=Z("br"),Nt=we(),Jt=Z("br"),Lt=we(),qt=Z("br"),cn=we(),ln=Z("br"),In=we(),Ln=Z("br"),Tn=we(),hr=Z("div"),kr=we(),Ct(ar.$$.fragment),bi=we(),Un&&Un.c(),qr=we(),Bn&&Bn.c(),Jr=we(),fr&&fr.c(),hi=vn(),this.h()},l(Bt){const Pn=qu("svelte-r9ghfj",document.head);e=G(Pn,"LINK",{rel:!0,href:!0}),Pn.forEach(R),i=xe(Bt),s=G(Bt,"DIV",{});var St=J(s);u=G(St,"DIV",{class:!0});var Qi=J(u);At(f.$$.fragment,Qi),Qi.forEach(R),d=xe(St),o=G(St,"DIV",{class:!0});var dr=J(o);At(_.$$.fragment,dr),dr.forEach(R),v=xe(St),E=G(St,"DIV",{class:!0});var Fn=J(E);At(S.$$.fragment,Fn),Fn.forEach(R),I=xe(St),A=G(St,"DIV",{class:!0});var ni=J(A);At(N.$$.fragment,ni),ni.forEach(R),V=xe(St),j=G(St,"DIV",{class:!0});var Er=J(j);At(W.$$.fragment,Er),Er.forEach(R),K=xe(St),ne=G(St,"DIV",{class:!0});var Ai=J(ne);At(Y.$$.fragment,Ai),Ai.forEach(R),re=xe(St),Q=G(St,"DIV",{class:!0});var Gr=J(Q);At(se.$$.fragment,Gr),Gr.forEach(R),oe=xe(St),Te=G(St,"DIV",{class:!0});var xi=J(Te);At(fe.$$.fragment,xi),xi.forEach(R),ee=xe(St),ge=G(St,"DIV",{class:!0});var Ci=J(ge);At(pe.$$.fragment,Ci),Ci.forEach(R),ye=xe(St),de=G(St,"DIV",{class:!0});var Qa=J(de);At(Ne.$$.fragment,Qa),Qa.forEach(R),Ge=xe(St),Le=G(St,"DIV",{class:!0});var Xr=J(Le);At(Me.$$.fragment,Xr),Xr.forEach(R),$e=xe(St),ht=G(St,"DIV",{class:!0});var wi=J(ht);At(ut.$$.fragment,wi),wi.forEach(R),Fe=xe(St),ze=G(St,"BR",{}),gt=xe(St),Zt=G(St,"BR",{}),an=xe(St),yn=G(St,"BR",{}),sn=xe(St),Dt=G(St,"BR",{}),$t=xe(St),ct=G(St,"BR",{}),xt=xe(St),wt=G(St,"BR",{}),Wt=xe(St),Qt=G(St,"BR",{}),Ht=xe(St),kt=G(St,"BR",{}),dt=xe(St),be=G(St,"BR",{}),Et=xe(St),Ut=G(St,"BR",{}),_t=xe(St),zt=G(St,"BR",{}),gn=xe(St),Mn=G(St,"BR",{}),Hn=xe(St),Kn=G(St,"BR",{}),br=xe(St),Yn=G(St,"BR",{}),rr=xe(St),vt=G(St,"BR",{}),Vn=xe(St),He=G(St,"BR",{}),pt=xe(St),dn=G(St,"BR",{}),lt=xe(St),en=G(St,"BR",{}),tn=xe(St),wr=G(St,"BR",{}),mr=xe(St),on=G(St,"BR",{}),Xn=xe(St),ke=G(St,"BR",{}),X=xe(St),ae=G(St,"BR",{}),me=xe(St),Ae=G(St,"BR",{}),Ce=xe(St),je=G(St,"BR",{}),te=xe(St),ue=G(St,"BR",{}),_e=xe(St),qe=G(St,"BR",{}),Je=xe(St),Qe=G(St,"BR",{}),Nt=xe(St),Jt=G(St,"BR",{}),Lt=xe(St),qt=G(St,"BR",{}),cn=xe(St),ln=G(St,"BR",{}),In=xe(St),Ln=G(St,"BR",{}),St.forEach(R),Tn=xe(Bt),hr=G(Bt,"DIV",{class:!0}),J(hr).forEach(R),kr=xe(Bt),At(ar.$$.fragment,Bt),bi=xe(Bt),Un&&Un.l(Bt),qr=xe(Bt),Bn&&Bn.l(Bt),Jr=xe(Bt),fr&&fr.l(Bt),hi=vn(),this.h()},h(){z(e,"rel","stylesheet"),z(e,"href","/css/printStyle.scss"),z(u,"class",".show-on-print"),z(o,"class",".show-on-print"),z(E,"class",".show-on-print"),z(A,"class",".show-on-print"),z(j,"class",".show-on-print"),z(ne,"class",".show-on-print"),z(Q,"class",".show-on-print"),z(Te,"class",".show-on-print"),z(ge,"class",".show-on-print"),z(de,"class",".show-on-print"),z(Le,"class",".show-on-print"),z(ht,"class",".show-on-print"),On(s,"loading",t[5]),z(hr,"class","A4Marker")},m(Bt,Pn){P(document.head,e),Oe(Bt,i,Pn),Oe(Bt,s,Pn),P(s,u),Tt(f,u,null),t[8](u),P(s,d),P(s,o),Tt(_,o,null),t[9](o),P(s,v),P(s,E),Tt(S,E,null),t[10](E),P(s,I),P(s,A),Tt(N,A,null),t[11](A),P(s,V),P(s,j),Tt(W,j,null),t[12](j),P(s,K),P(s,ne),Tt(Y,ne,null),t[13](ne),P(s,re),P(s,Q),Tt(se,Q,null),t[14](Q),P(s,oe),P(s,Te),Tt(fe,Te,null),t[15](Te),P(s,ee),P(s,ge),Tt(pe,ge,null),t[16](ge),P(s,ye),P(s,de),Tt(Ne,de,null),t[17](de),P(s,Ge),P(s,Le),Tt(Me,Le,null),t[18](Le),P(s,$e),P(s,ht),Tt(ut,ht,null),t[19](ht),P(s,Fe),P(s,ze),P(s,gt),P(s,Zt),P(s,an),P(s,yn),P(s,sn),P(s,Dt),P(s,$t),P(s,ct),P(s,xt),P(s,wt),P(s,Wt),P(s,Qt),P(s,Ht),P(s,kt),P(s,dt),P(s,be),P(s,Et),P(s,Ut),P(s,_t),P(s,zt),P(s,gn),P(s,Mn),P(s,Hn),P(s,Kn),P(s,br),P(s,Yn),P(s,rr),P(s,vt),P(s,Vn),P(s,He),P(s,pt),P(s,dn),P(s,lt),P(s,en),P(s,tn),P(s,wr),P(s,mr),P(s,on),P(s,Xn),P(s,ke),P(s,X),P(s,ae),P(s,me),P(s,Ae),P(s,Ce),P(s,je),P(s,te),P(s,ue),P(s,_e),P(s,qe),P(s,Je),P(s,Qe),P(s,Nt),P(s,Jt),P(s,Lt),P(s,qt),P(s,cn),P(s,ln),P(s,In),P(s,Ln),Oe(Bt,Tn,Pn),Oe(Bt,hr,Pn),Oe(Bt,kr,Pn),Tt(ar,Bt,Pn),Oe(Bt,bi,Pn),Un&&Un.m(Bt,Pn),Oe(Bt,qr,Pn),Bn&&Bn.m(Bt,Pn),Oe(Bt,Jr,Pn),fr&&fr.m(Bt,Pn),Oe(Bt,hi,Pn),$n=!0},p(Bt,Pn){(!$n||Pn[0]&32)&&On(s,"loading",Bt[5]);const St={};Pn[0]&23|Pn[1]&64&&(St.$$scope={dirty:Pn,ctx:Bt}),!Fr&&Pn[0]&16&&(Fr=!0,St.hidden=Bt[4],er(()=>Fr=!1)),ar.$set(St),Bt[0]?Un?(Un.p(Bt,Pn),Pn[0]&1&&Ve(Un,1)):(Un=fv(Bt),Un.c(),Ve(Un,1),Un.m(qr.parentNode,qr)):Un&&(lr(),Xe(Un,1,1,()=>{Un=null}),ur()),Bt[1]?Bn?(Bn.p(Bt,Pn),Pn[0]&2&&Ve(Bn,1)):(Bn=dv(Bt),Bn.c(),Ve(Bn,1),Bn.m(Jr.parentNode,Jr)):Bn&&(lr(),Xe(Bn,1,1,()=>{Bn=null}),ur()),Bt[2]?fr?(fr.p(Bt,Pn),Pn[0]&4&&Ve(fr,1)):(fr=pv(Bt),fr.c(),Ve(fr,1),fr.m(hi.parentNode,hi)):fr&&(lr(),Xe(fr,1,1,()=>{fr=null}),ur())},i(Bt){$n||(Ve(f.$$.fragment,Bt),Ve(_.$$.fragment,Bt),Ve(S.$$.fragment,Bt),Ve(N.$$.fragment,Bt),Ve(W.$$.fragment,Bt),Ve(Y.$$.fragment,Bt),Ve(se.$$.fragment,Bt),Ve(fe.$$.fragment,Bt),Ve(pe.$$.fragment,Bt),Ve(Ne.$$.fragment,Bt),Ve(Me.$$.fragment,Bt),Ve(ut.$$.fragment,Bt),Bt&&vi(()=>{$n&&(Rn||(Rn=Dr(hr,au,{},!0)),Rn.run(1))}),Ve(ar.$$.fragment,Bt),Ve(Un),Ve(Bn),Ve(fr),$n=!0)},o(Bt){Xe(f.$$.fragment,Bt),Xe(_.$$.fragment,Bt),Xe(S.$$.fragment,Bt),Xe(N.$$.fragment,Bt),Xe(W.$$.fragment,Bt),Xe(Y.$$.fragment,Bt),Xe(se.$$.fragment,Bt),Xe(fe.$$.fragment,Bt),Xe(pe.$$.fragment,Bt),Xe(Ne.$$.fragment,Bt),Xe(Me.$$.fragment,Bt),Xe(ut.$$.fragment,Bt),Bt&&(Rn||(Rn=Dr(hr,au,{},!1)),Rn.run(0)),Xe(ar.$$.fragment,Bt),Xe(Un),Xe(Bn),Xe(fr),$n=!1},d(Bt){Bt&&(R(i),R(s),R(Tn),R(hr),R(kr),R(bi),R(qr),R(Jr),R(hi)),R(e),It(f),t[8](null),It(_),t[9](null),It(S),t[10](null),It(N),t[11](null),It(W),t[12](null),It(Y),t[13](null),It(se),t[14](null),It(fe),t[15](null),It(pe),t[16](null),It(Ne),t[17](null),It(Me),t[18](null),It(ut),t[19](null),Bt&&Rn&&Rn.end(),It(ar,Bt),Un&&Un.d(Bt),Bn&&Bn.d(Bt),fr&&fr.d(Bt)}}}function AP(t,e,i){let s,u,f,d;Ur(t,yv,ze=>i(35,s=ze)),Ur(t,tu,ze=>i(4,u=ze)),Ur(t,ow,ze=>i(5,f=ze)),Ur(t,Xt,ze=>i(6,d=ze));let o,_,v=!1;Ar(tu,u=!0,u);let E={y:-320,duration:200,easing:iw},S={},I=null;const A=ze=>{ze.forEach(gt=>{})};ys(()=>{var ze;if(!((ze=s.data)!=null&&ze.session)){ww("/");return}I=new IntersectionObserver(A,{threshold:.5}),Object.values(S).forEach(gt=>{gt instanceof Element?I.observe(gt):console.warn("Invalid element:",gt)})}),Yf(()=>{I&&I.disconnect()});function N(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE0F=ze,i(3,S)})}function V(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE00=ze,i(3,S)})}function j(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE01=ze,i(3,S)})}function W(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE02=ze,i(3,S)})}function K(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE03=ze,i(3,S)})}function ne(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE04=ze,i(3,S)})}function Y(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE05=ze,i(3,S)})}function re(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE06=ze,i(3,S)})}function Q(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE07=ze,i(3,S)})}function se(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE08=ze,i(3,S)})}function oe(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE09=ze,i(3,S)})}function Te(ze){Cn[ze?"unshift":"push"](()=>{S.PAGE10=ze,i(3,S)})}const fe=()=>i(1,_=!0),ee=()=>i(0,o=!0),ge=()=>i(2,v=!0),pe=()=>print(),ye=()=>Ar(tu,u=!0,u);function de(ze){u=ze,tu.set(u)}const Ne=()=>{_v()};function Ge(ze){o=ze,i(0,o)}const Le=()=>N0("/protected/data"),Me=()=>i(0,o=!0);function $e(ze){_=ze,i(1,_)}const ht=()=>N0("/protected?create=true"),ut=()=>i(0,o=!0);function Fe(ze){_=ze,i(1,_)}return[o,_,v,S,u,f,d,E,N,V,j,W,K,ne,Y,re,Q,se,oe,Te,fe,ee,ge,pe,ye,de,Ne,Ge,Le,Me,$e,ht,ut,Fe]}class c6 extends Pr{constructor(e){super(),Mr(this,e,AP,TP,Cr,{},null,[-1,-1])}}export{c6 as component,NP as universal};
